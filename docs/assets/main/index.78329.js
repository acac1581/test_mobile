System.register("chunks:///_virtual/AcidSpray.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./PVE_GameplayControl.ts","./BulletBase.ts","./DamageData.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,a,i,o,n,r,s,c,l,u,h,d,f,g,m,p,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,s=t.Node,c=t.Vec3,l=t.instantiate},function(t){u=t.SoundController,h=t.EnumSoundPVE},function(t){d=t.PVEGameplayControl},function(t){f=t.BulletBase},function(t){g=t.DamageData},function(t){m=t.SkillDamageData},function(t){p=t.InGameEventID},function(t){v=t.SkillBase}],execute:function(){var y,D,k,A,S,z,E;n._RF.push({},"abf4ahRNRZLcoG7FwdUP8SS","AcidSpray",void 0);var P=r.ccclass,b=r.property;t("AcidSpray",(y=P("AcidSpray"),D=b(s),k=b(s),y((z=e((S=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).NextTimeActive=0,e.castRange=0,i(e,"acidSprayBullet",z,o(e)),i(e,"muzzlePrefab",E,o(e)),e.distance=void 0,e.cacheTarget=void 0,e}a(e,t);var n=e.prototype;return n.Init=function(t,e){this.root=t,this.skillData=e,this.castRange=e.castRange,this.schedule(this.checkTarget.bind(this),.1)},n.checkTarget=function(){var t=this;if(!(d.Instance.CurrentTime<this.NextTimeActive)&&this.root.canActiveSkill){var e=this.root.root.node.worldPosition,a=this.root.root.getAllTargetObjects(),i=!1;a.forEach((function(a,o,n){!i&&a.isUndead&&(t.distance=c.distance(e,a.node.worldPosition),t.distance<=t.castRange&&(t.activeSkill(a),i=!0))}))}},n.activeMuzzle=function(){if(null!=this.muzzlePrefab){var t=l(this.muzzlePrefab);t.parent=this.root.getAttackPos(),t.setPosition(0,0,0),t.active=!0}},n.activeSkill=function(t){this.NextTimeActive=d.Instance.CurrentTime+this.skillData.Cooldown,this.cacheTarget=t,this.activeMuzzle(),this.root.root.stopMoving(),this.root.root.animationComponent.setAnim("Attack_2",!1),this.root.root.event.on(p.AttackAnimEvent,this.endCast,this)},n.endCast=function(){this.root.root.event.off(p.AttackAnimEvent,this.endCast,this);var t=new g,e=this.skillData.damageData,a=this.root.root.data.attackData;t.attacker=this.root.root,e.forEach((function(e){var i=m.getDamage(e,a.getNormalDamage(),a.getMagicDamage());t.AddDamage(e.damageType,i)})),t.AddEffects(this.skillData.EffectData),t.setAoE(this.skillData.AoERange);var i=l(this.acidSprayBullet).getComponent(f);u.Instance.PlaySoundPvE(h.LiquidBody_attack),i.init(this.root,this.cacheTarget.targetComponent,t),i.initHitSoundFx(h.LiquidBody_hit)},e}(v)).prototype,"acidSprayBullet",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(S.prototype,"muzzlePrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=S))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/AddUndeadItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts","./Utility.ts","./ExpeditionHelper.ts"],(function(e){"use strict";var t,i,n,r,a,l,s,o,d,c,p,u,b,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,s=e.Button,o=e.Sprite,d=e.Label,c=e.SpriteFrame,p=e.Vec3,u=e.Component},function(e){b=e.ResourcesManager},function(e){f=e.Utility},function(e){h=e.ExpeditionHelper}],execute:function(){var m,v,L,g,U,y,I,S,T,w,F,z,A,B,C,D,R,k,_;a._RF.push({},"bd3cdKafZdAOqmR7n6YiA89","AddUndeadItem",void 0);var x=l.ccclass,E=l.property;e("AddUndeadItem",(m=x("AddUndeadItem"),v=E(s),L=E(o),g=E(o),U=E(d),y=E(d),I=E(d),S=E(d),T=E([c]),m((z=t((F=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,n(t,"btnSelect",z,r(t)),n(t,"sprLevelBase",A,r(t)),n(t,"sprIconUndead",B,r(t)),n(t,"lbLevel",C,r(t)),n(t,"lbUndeadId",D,r(t)),n(t,"lbLifeTime",R,r(t)),n(t,"lbTotalUndead",k,r(t)),n(t,"sprFramesLevel",_,r(t)),t.dataUndead=void 0,t}i(t,e);var a=t.prototype;return a.start=function(){this.btnSelect.node.on(s.EventType.CLICK,this.onSelectClicked,this)},a.loadData=function(e){this.node.active=!0,this.btnSelect.interactable=!0,this.dataUndead=e;var t=e.rarity;this.lbLevel.string="Lv."+e.affectionLevel.toString(),this.sprLevelBase.spriteFrame=this.sprFramesLevel[t-1],this.sprLevelBase.node.position=new p(t-1==1?-105:-96,this.sprLevelBase.node.position.y),this.lbUndeadId.string="#"+e.tokenId,b.Instance.GetUndead(e.code.toLowerCase(),e.stage,function(e){this.sprIconUndead.spriteFrame=e}.bind(this));var i=h.GetTotalLifeTimeLeft(e);this.lbLifeTime.string="Life - "+f.ConvertSecondsToTimeShort(i)},a.resetData=function(){this.lbLevel.string="",this.lbUndeadId.string="",this.lbLifeTime.string="",this.lbTotalUndead.string="",this.btnSelect.interactable=!1,this.sprIconUndead.spriteFrame=null,this.sprLevelBase.spriteFrame=this.sprFramesLevel[0]},a.onSelectClicked=function(){this.node.emit("AddUndeadItem:select",this.dataUndead)},t}(u)).prototype,"btnSelect",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(F.prototype,"sprLevelBase",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(F.prototype,"sprIconUndead",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(F.prototype,"lbLevel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(F.prototype,"lbUndeadId",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(F.prototype,"lbLifeTime",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(F.prototype,"lbTotalUndead",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(F.prototype,"sprFramesLevel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=F))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/AmpedEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./EffectBase.ts"],(function(t){"use strict";var e,i,r,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,r=t._decorator},function(t){a=t.PVEGameplayControl},function(t){c=t.EffectBase}],execute:function(){var n;i._RF.push({},"5e984LaPrNG8ITomz6IgQhw","AmpedEffect",void 0);var o=r.ccclass;r.property,t("AmpedEffect",o("AmpedEffect")(n=function(t){function i(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).attackModifier=0,e.normalAtkPercentModifier=0,e.endEffectTime=0,e}e(i,t);var r=i.prototype;return r.Init=function(e,i,r){t.prototype.Init.call(this,e,i,r),null!=i.AddAtkPercent&&i.AddAtkPercent>0&&(this.attackModifier=r.root.data.attackData.AttackDamage*i.AddAtkPercent/100),null!=i.AddNormalAtkPercent&&i.AddNormalAtkPercent>0&&(this.normalAtkPercentModifier=i.AddNormalAtkPercent),this.endEffectTime=a.Instance.CurrentTime+i.EffectTime},r.update=function(t){a.Instance.CurrentTime>=this.endEffectTime&&this.RemoveEffect()},i.ApplyEffect=function(t,e){var i=t.getEffectWithType(e.EffectType),r=t.initEffect(e);if(null!=i&&i.attackModifier>=r.attackModifier);else{null!=i&&(i.isApplying=!1);var a=t.root.data.attackData;r.isApplying=!0,a.AttackModifier+=r.attackModifier,a.NormalAtkPercentModifier+=r.normalAtkPercentModifier}},r.RemoveEffect=function(){this.thisTarget.RemoveEffect(this);var t=this.thisTarget.root.data.attackData;1==this.isApplying&&(t.AttackModifier-=this.attackModifier,t.NormalAtkPercentModifier-=this.normalAtkPercentModifier);var e=this.thisTarget.getEffectWithType(this.data.EffectType);null!=e&&(e.isApplying=!0,this.isApplying=!0,t.AttackModifier+=e.attackModifier,t.NormalAtkPercentModifier+=e.normalAtkPercentModifier),this.node.destroy()},i}(c))||n);i._RF.pop()}}}));

System.register("chunks:///_virtual/AoEAttack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./NormalAttack.ts"],(function(t){"use strict";var e,a,r,o,i,c,n,l,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,c=t._decorator,n=t.Node},function(t){l=t.AttackType,s=t.DamageType},function(t){u=t.NormalAttack}],execute:function(){var p,f,A,y,k;i._RF.push({},"016bf0x5DlIYYy6/fcLG1mS","AoEAttack",void 0);var m=c.ccclass,d=c.property;t("AoEAttack",(p=m("AoEAttack"),f=d(n),p((k=e((y=function(t){function e(){for(var e,a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i))||this,r(e,"bulletPrefab",k,o(e)),e}a(e,t);var i=e.prototype;return i.Init=function(e,a){t.prototype.Init.call(this,e,a)},i.addAttackData=function(t,e){if(t==l.NormalAttack){var a=this.root.GetRandomBasicDamage();e.AddDamage(s.Normal,a-a*this.skillData.AoEDecreasePercent/100),e.setAoE(this.skillData.AoERange)}},e}(u)).prototype,"bulletPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=y))||A));i._RF.pop()}}}));

System.register("chunks:///_virtual/AoEBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TargetComponent.ts","./BulletBase.ts"],(function(e){"use strict";var t,i,o,n,a,r,s,l,c,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.CircleCollider2D,l=e.Contact2DType,c=e.UITransform},function(e){u=e.TargetComponent},function(e){d=e.BulletBase}],execute:function(){var h,p,g,f,D;a._RF.push({},"9a7b005NU1GSYuZX2M3PJaM","AoEBullet",void 0);var B=r.ccclass,v=r.property;e("AoEBullet",(h=B("AoEBullet"),p=v(s),h((D=t((f=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"collider2D",D,n(t)),t.executedTargets=void 0,t}i(t,e);var a=t.prototype;return a.init=function(t,i,o){e.prototype.init.call(this,t,i,o),this.collider2D.node.active=!1,this.collider2D.radius=o.AoERange},a.hit=function(){this.executedTargets=[],this.moving=!1,this.collider2D.node.active=!0,this.collider2D.on(l.BEGIN_CONTACT,this.BeginContact,this),this.collider2D.node.setPosition(0,0,0),this.explosionPrefab.getComponent(c).setContentSize(2*this.damageData.AoERange,2*this.damageData.AoERange),this.explosionPrefab.active=!0,this.scheduleOnce(function(){this.node.destroy()}.bind(this),.2)},a.BeginContact=function(e,t,i){console.log("AoEBullet::BeginContact",t);var o=t.getComponent(u);o&&this.executedTargets.indexOf(o)<0&&(this.executedTargets.push(o),o.TakeDamage(this.damageData))},t}(d)).prototype,"collider2D",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=f))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/Assassination.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SkillBase.ts"],(function(s){"use strict";var t,i,n,a;return{setters:[function(s){t=s.inheritsLoose},function(s){i=s.cclegacy,n=s._decorator},function(s){a=s.SkillBase}],execute:function(){var e;i._RF.push({},"8ad03tHEWdDjr55plVCXurA","Assassination",void 0);var r=n.ccclass;n.property,s("Assassination",r("Assassination")(e=function(s){function i(){return s.apply(this,arguments)||this}return t(i,s),i.prototype.addAttackData=function(s,t,i){t.isAssassination=!0,t.Assassination_PercentActive=this.skillData.PercentActive,t.Assassination_CullingStrikeHP=this.skillData.CullingStrikeHP},i}(a))||e);i._RF.pop()}}}));

System.register("chunks:///_virtual/AttackComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TargetComponent.ts","./SkillBase.ts","./Enums.ts","./DamageData.ts","./GameplayConfig.ts","./PVE_GameplayControl.ts","./InGameEvent.ts","./PVE_Helper.ts","./PVE_Constant.ts"],(function(t){"use strict";var e,o,a,n,i,r,c,s,l,h,u,d,k,f,g,m,p,A,D,v,C,P,y,b,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,i=t.createClass},function(t){r=t.cclegacy,c=t._decorator,s=t.Node,l=t.CircleCollider2D,h=t.Contact2DType,u=t.Vec3,d=t.Rect,k=t.Vec2,f=t.randomRangeInt,g=t.Component},function(t){m=t.TargetComponent},function(t){p=t.SkillBase},function(t){A=t.GameplayTeam,D=t.EffectType},function(t){v=t.DamageData},function(t){C=t.GameplayConfig},function(t){P=t.PVEGameplayControl},function(t){y=t.InGameEventID},function(t){b=t.PVEHelper},function(t){E=t.PVE_Constant}],execute:function(){var T,N,S,I,M,w,G,L,_;r._RF.push({},"b0092lQ4rBCULnteeras6Ny","AttackComponent",void 0);var R=c.ccclass,B=c.property;t("AttackComponent",(T=R("AttackComponent"),N=B([s]),S=B(s),I=B(l),T((G=e((w=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).root=void 0,e.targets=void 0,e.attackAble=!1,a(e,"skillNodes",G,n(e)),e.skills=[],a(e,"attackPos",L,n(e)),a(e,"collider2D",_,n(e)),e.initialPos=void 0,e.canAttackPlant=!0,e}o(e,t);var r=e.prototype;return r.Init=function(t){var e=this;this.root=t,this.targets=[],this.collider2D.radius=2e3,this.initialPos=this.root.node.worldPosition.clone(),this.collider2D.apply(),this.collider2D.on(h.BEGIN_CONTACT,this.BeginContact,this),this.collider2D.on(h.END_CONTACT,this.EndContact,this),this.attackAble=!0,this.canAttackPlant=!1;t.data.SkillData.forEach((function(o,a,n){C.DebugAttack&&console.log("AttackComponent: init skill "+o.ID+" for Object "+t.Id),e.skillNodes.length<=a?o.Level&&o.Level<=2&&t.InitSeftPassive(o):o.Level&&o.Level>2?e.skillNodes[a].active=!1:(e.skills.push(e.skillNodes[a].getComponent(p)),e.skills[a].Init(e,o),e.skills[a].node.active=!0)})),this.root.isUndead&&this.root.team==A.MyTeam&&this.InitCheckRange()},r.InitCheckRange=function(){P.GamePlayEvent.on(y.UpdatePerSec,this.UpdatePerSec,this)},r.UpdatePerSec=function(){if(null!=this.root&&this.attackAble&&!this.hasTarget()&&this.root.team!=A.EnemyTeam){var t=this.root.getAllTargetObjects(),e=2*this.root.data.statsData.CheckTargetRange,o=new u(this.node.worldPosition.x,this.initialPos.y,0),a=e/2,n=E.LAND_HEIGHT/2,i=new d(o.x-a,o.y-n,e,E.LAND_HEIGHT),r=0,c=null,s=Number.MAX_VALUE;t.forEach((function(t,e,a){r=u.distance(o,t.node.worldPosition);var n=new k(t.node.worldPosition.x,t.node.worldPosition.y);i.contains(n)&&r<s&&(c=t,s=r)})),null!=c&&(b.LeftScreenUndead()+this.root.data.attackData.AttackRange<c.node.worldPosition.x||this.root.movingComponent.movingToTarget(c))}},r.hasTarget=function(){return this.targets&&this.targets.length>0},r.checkCountinueAttack=function(){C.DebugAttack&&console.log(this.root.Id,"checkCountinueAttack",this.root.targetComponent.EffectApply),0==this.root.anyControlAttackEff()?(C.DebugAttack&&console.log(this.root.Id,"enable attack"),this.attackAble=!0):console.log("cannot attack because has effect",this.root.targetComponent.EffectApply)},r.update=function(t){this.collider2D.node.setPosition(0,0,0)},r.Attack=function(t,e,o){var a=new v;return a.attacker=this.root,this.skills.forEach(function(o,n,i){o.addAttackData(t,a,e)}.bind(this)),a},r.GetRandomBasicDamage=function(){var t=this.root.data.attackData,e=(t.AttackDamage+t.AttackModifier+10*this.root.Level)/2+f(t.DefaultAttackFrom,t.DefaultAttackTo+1);return e+=e*(t.NormalAtkPercentModifier+t.AllDamagePercentModifier)/100,C.DebugAttack&&console.log("damage===",e,t.NormalAtkPercentModifier),e},r.GetBasicDamage=function(){var t=this.root.data.attackData,e=(t.AttackDamage+t.AttackModifier+10*this.root.Level)/2+t.DefaultAttackFrom;return e+=e*(t.NormalAtkPercentModifier+t.AllDamagePercentModifier)/100,C.DebugAttack&&console.log("damage===",e,t.NormalAtkPercentModifier),e},r.BeginContact=function(t,e,o){var a=e.getComponent(m);null!=a&&null!=a.root&&0!=a.canTarget&&(0==a.root.isUndead&&0==this.canAttackPlant||0==a.root.isDead&&a.root.team!==this.root.team&&this.targets.indexOf(a)<0&&(this.targets.push(a),this.root.stopMoving()))},r.EndContact=function(t,e,o){var a=e.getComponent(m);if(a&&a.root.team!=this.root.team){var n=this.targets.indexOf(a);n>=0&&this.targets.splice(n,1),this.targets.length<=0&&(this.root.checkCountinueMoving(),this.scheduleOnce(this.checkFaceDir,2))}},r.DisableAttack=function(){this.collider2D.node.active=!1},r.EnableAttack=function(){this.collider2D.node.active=!0},r.checkFaceDir=function(){this.targets.length<=0&&this.root.animationComponent.checkAutoFaceToTarget()},r.onPreSolve=function(t,e,o){console.log("onPreSolve")},r.onPostSolve=function(t,e,o){console.log("onPostSolve")},r.getAttackSpeed=function(){var t=this.root.data.attackData.AttackSpeed+this.root.data.attackData.AttackSpeedModifier;return t+t*this.root.data.attackData.AttackSpeedPercentModifier/100},r.getAttackPos=function(){return this.attackPos},r.getRootPos=function(){return this.root.node},r.beginNormalAttack=function(){this.root.animationComponent.setNormalAttackAnim(this.root.data.statsData.DefaultAttackAnimName,this.getAttackSpeed())},i(e,[{key:"canActiveSkill",get:function(){return null==this.root.targetComponent.getEffectWithType(D.Silence)&&this.attackAble}}]),e}(g)).prototype,"skillNodes",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=e(w.prototype,"attackPos",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(w.prototype,"collider2D",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=w))||M));r._RF.pop()}}}));

System.register("chunks:///_virtual/AttackData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CloneableObject.ts"],(function(t){"use strict";var e,a,i;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy},function(t){i=t.default}],execute:function(){a._RF.push({},"c4e21zUXuFBCIPjfRNBZxrU","AttackData",void 0);t("default",function(t){function a(){for(var e,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).Level=0,e.AttackDamage=0,e.DefaultAttackFrom=0,e.DefaultAttackTo=0,e.Magic=0,e.AttackSpeed=0,e.AttackRange=0,e.AttackModifier=0,e.MagicModifier=0,e.NormalAtkPercentModifier=0,e.AttackSpeedModifier=0,e.AttackSpeedPercentModifier=0,e.AllDamagePercentModifier=0,e.BlindPercent=0,e.Level_Atk=0,e.Level_Mag=0,e.Level_DefaultAtk=0,e.CanAttackPlant=!0,e}e(a,t);var i=a.prototype;return i.getMagicDamage=function(){var t=this.Magic+this.MagicModifier;return t+t*this.AllDamagePercentModifier},i.getNormalDamage=function(){var t=this.AttackDamage+this.AttackModifier;return t+t*this.AllDamagePercentModifier},a}(i));a._RF.pop()}}}));

System.register("chunks:///_virtual/AttackPassiveWithCountdown.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,n,i,a,o,r,l,s,u,c,m,f,p,h,d,z,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.CCBoolean,s=t.Node,u=t.Enum,c=t.instantiate},function(t){m=t.EnumSoundPVE,f=t.SoundController},function(t){p=t.PVEGameplayControl},function(t){h=t.PVEHelper},function(t){d=t.AttackType},function(t){z=t.InGameEventID},function(t){P=t.SkillBase}],execute:function(){var b,v,y,k,A,S,g,E,I,x,C,D,w;o._RF.push({},"63a0desmrBIk6OspkfrAuZ1","AttackPassiveWithCountdown",void 0);var F=r.ccclass,N=r.property;t("AttackPassiveWithCountdown",(b=F("AttackPassiveWithCountdown"),v=N(l),y=N(s),k=N(s),A=N({type:u(m)}),S=N({type:u(m)}),b((I=e((E=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).NextTimeRandom=0,i(e,"muzzleInAttackPos",I,a(e)),i(e,"muzzlePrefab",x,a(e)),i(e,"impactPrefab",C,a(e)),i(e,"hitSoundFx",D,a(e)),i(e,"muzzleSoundFx",w,a(e)),e}n(e,t);var o=e.prototype;return o.Init=function(e,n){t.prototype.Init.call(this,e,n),this.NextTimeRandom=0},o.addAttackData=function(t,e,n){t==d.NormalAttack&&(p.Instance.CurrentTime<this.NextTimeRandom||0!=h.RandomActive(this.skillData.PercentActive)&&(this.NextTimeRandom=p.Instance.CurrentTime+this.skillData.Cooldown,e.AddEffects(this.skillData.EffectData),e.AddDamages(this.skillData.damageData),this.activeMuzzle(),null!=this.impactPrefab&&e.on(z.OnHit,this.OnHit,this)))},o.OnHit=function(t,e){if(this.hitSoundFx!=m.None&&f.Instance.PlaySoundPvE(this.hitSoundFx),null!=this.impactPrefab){var n=c(this.impactPrefab);n.parent=e.getTargetPos(),n.setPosition(0,0,0),n.active=!0}},o.activeMuzzle=function(){if(this.muzzleSoundFx!=m.None&&f.Instance.PlaySoundPvE(this.muzzleSoundFx),null!=this.muzzlePrefab){var t=c(this.muzzlePrefab);t.parent=this.muzzleInAttackPos?this.root.getAttackPos():this.root.getRootPos(),t.setPosition(0,0,0),t.active=!0}},e}(P)).prototype,"muzzleInAttackPos",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),x=e(E.prototype,"muzzlePrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(E.prototype,"impactPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(E.prototype,"hitSoundFx",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.None}}),w=e(E.prototype,"muzzleSoundFx",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.None}}),g=E))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/AttackWithRandomActivePassive.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./PVE_Helper.ts","./BulletBase.ts","./InGameEvent.ts","./NormalAttack.ts"],(function(t){"use strict";var e,i,a,s,n,r,o,c,l,u,v,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,o=t.Node,c=t.instantiate},function(t){l=t.PVEGameplayControl},function(t){u=t.PVEHelper},function(t){v=t.BulletBase},function(t){h=t.InGameEventID},function(t){f=t.NormalAttack}],execute:function(){var p,P,m,d,b,z,A;n._RF.push({},"40b8bDM3WdGubJnDp2IF894","AttackWithRandomActivePassive",void 0);var T=r.ccclass,g=r.property;t("AttackWithRandomActivePassive",(p=T("AttackWithRandomActivePassive"),P=g(o),m=g(o),p((z=e((b=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).NextTimeRandom=0,a(e,"passiveMuzzlePrefab",z,s(e)),a(e,"passiveBulletPrefab",A,s(e)),e.activePassiveThisTurn=!1,e}i(e,t);var n=e.prototype;return n.addAttackData=function(e,i){t.prototype.addAttackData.call(this,e,i),this.activePassiveThisTurn=!1,l.Instance.CurrentTime<this.NextTimeRandom||0!=u.RandomActive(this.skillData.PercentActive)&&(this.activePassiveThisTurn=!0,this.NextTimeRandom=l.Instance.CurrentTime+this.skillData.Cooldown,i.AddEffects(this.skillData.EffectData),this.activePassiveMuzzle())},n.activePassiveMuzzle=function(){if(null!=this.passiveMuzzlePrefab){var t=c(this.passiveMuzzlePrefab);t.parent=this.root.getAttackPos(),t.setPosition(0,0,0),t.active=!0}},n.endCast=function(){this.root.root.event.off(h.AttackAnimEvent,this.endCast,this),!this.muzzleActiveInstance&&this.activeMuzzle();var t=this.bulletPrefab;if(this.activePassiveThisTurn&&this.passiveBulletPrefab&&(t=this.passiveBulletPrefab),null!=t){c(t).getComponent(v).init(this.root,this.curTarget,this.curDamage)}else{if(this.impactPrefab){var e=c(this.impactPrefab);e.parent=l.Instance.getEffParent(),e.setWorldPosition(this.curTarget.getTargetPos().getWorldPosition()),e.active=!0}this.curTarget.TakeDamage(this.curDamage)}},e}(f)).prototype,"passiveMuzzlePrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(b.prototype,"passiveBulletPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=b))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseTween.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,o,a,r,c,l;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,a=e.Widget,r=e.Button,c=e.tween,l=e.Component}],execute:function(){var s;n._RF.push({},"a7c070N/H5MooFJDwzHZjob","BaseTween",void 0);var i=o.ccclass;o.property,e("BaseTween",i(s=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._tween=null,t}t(n,e);var o=n.prototype;return o.startTween=function(e){for(var t=0;t<e.length;t++){var n=e[t];this.tweenScale(n,.25,.1*t)}},o.tweenScale=function(e,t,n){if(e){var o=e.getComponent(a);o&&(o.enabled=!1);var l=e.getComponent(r);l&&(l.enabled=!1),e.opacity=0,e.scale=.8,e.__tween&&(e.__tween.stop(),e.__tween=null),e.__tween=c(e).delay(n).to(t,{opacity:255,scale:1}).call((function(){l&&(l.enabled=!0)})).start()}},n}(l))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/BeterPlayAnim.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,a,o,r,l,s,c,y,p,u,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.Animation,s=t.Node,c=t.systemEvent,y=t.SystemEvent,p=t.KeyCode,u=t.ParticleSystem,P=t.Component}],execute:function(){var h,m,f,g,v,d,b;o._RF.push({},"653488rKtVBEbnqK/Q8Bu5M","BeterPlayAnim",void 0);var K=r.ccclass,A=r.property;t("BeterPlayAnim",(h=K("BeterPlayAnim"),m=A(l),f=A(s),h((d=e((v=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"animation",d,a(e)),i(e,"particles",b,a(e)),e}n(e,t);var o=e.prototype;return o.onLoad=function(){c.on(y.EventType.KEY_DOWN,this.onKeyDown,this)},o.onKeyDown=function(t){switch(t.keyCode){case p.KEY_P:this.onPlayPar();break;case p.KEY_A:this.onPlay()}},o.onPlay=function(){console.log("Play animation"),null!=this.animation&&this.animation.play()},o.onPlayPar=function(){console.log("Play particles");for(var t=0;t<this.particles.length;t++)this.PlayParticle(this.particles[t])},o.PlayParticle=function(t){t.active=!0;var e=t.getComponent(u);null!=e&&(e.isPlaying&&e.stop(),e.play());for(var n=t.getComponentsInChildren(u),i=0;i<n.length;i++)n[i].isPlaying&&n[i].stop(),n[i].play()},e}(P)).prototype,"animation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=e(v.prototype,"particles",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=v))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/BezierBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletBase.ts"],(function(t){"use strict";var e,o,i,r,s,n,c,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,c=t.Vec3},function(t){a=t.BulletBase}],execute:function(){var l,u,h;s._RF.push({},"22823h2+xtFmYc59rht+otO","BezierBullet",void 0);var p=n.ccclass,P=n.property;t("BezierBullet",p("BezierBullet")((h=e((u=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),n=0;n<o;n++)s[n]=arguments[n];return e=t.call.apply(t,[this].concat(s))||this,i(e,"curveHeight",h,r(e)),e.rootPos=void 0,e.attackPos=void 0,e}o(e,t);var s=e.prototype;return s.init=function(e,o,i){t.prototype.init.call(this,e,o,i),this.rootPos=this.node.getWorldPosition(),this.attackPos=e.node.getWorldPosition()},s.getRootPosition=function(){return this.rootPos},s.setWorldPosition=function(t){var e=c.distance(this.attackPos,t)/c.distance(this.attackPos,this.lastTargetPos)*2-1,o=this.rootPos.y+this.curveHeight*(1-e*e);this.node.setWorldPosition(t.x,o,0),this.rootPos=t},e}(a)).prototype,"curveHeight",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),l=u))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/BleedEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./DamageData.ts","./Enums.ts","./InGameEvent.ts","./EffectBase.ts"],(function(t){"use strict";var e,n,i,a,s,o,r,f;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){a=t.PVEGameplayControl},function(t){s=t.DamageData},function(t){o=t.DamageType},function(t){r=t.InGameEventID},function(t){f=t.EffectBase}],execute:function(){var c;n._RF.push({},"ae608JhwHxJzqaTOZJZQwbh","BleedEffect",void 0);var l=i.ccclass;i.property,t("BleedEffect",l("BleedEffect")(c=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).endEffectTime=0,e}e(n,t);var i=n.prototype;return i.Init=function(e,n,i){t.prototype.Init.call(this,e,n,i),this.endEffectTime=a.Instance.CurrentTime+n.EffectTime,this.isApplying=!0,this.schedule(this.applyBurn.bind(this),1),i.root.event.on(r.OnHit,this.OnHit,this)},i.OnHit=function(){if(null!=this.thisTarget&&null!=this.thisTarget.root){var t=new s;t.AddDamage(o.Normal,this.thisTarget.root.data.statsData.getMaxHp()*this.data.HPPercentHit/100),this.thisTarget.root.applyDamage(t)}},i.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.thisTarget.root.event.off(r.OnHit,this.OnHit,this),this.node.destroy()},i.applyBurn=function(){if(0!=this.isApplying){console.log("Apply burn effect!!!");var t=new s;t.AddDamage(o.Normal,this.thisTarget.root.data.statsData.getMaxHp()*this.data.HPPercentPerSec/100),this.thisTarget.root.applyDamage(t)}},n.ApplyEffect=function(t,e){var n=t.getEffectWithType(e.EffectType);if(null!=n)n.endEffectTime=a.Instance.CurrentTime+n.data.EffectTime;else t.initEffect(e)},n}(f))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/BlindEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./EffectBase.ts"],(function(t){"use strict";var e,n,c,i,f;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator},function(t){i=t.PVEGameplayControl},function(t){f=t.EffectBase}],execute:function(){var r;n._RF.push({},"985c0DtH2RM/opTTGEP7oDL","BlindEffect",void 0);var a=c.ccclass;c.property,t("BlindEffect",a("BlindEffect")(r=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))||this).endEffectTime=0,e}e(n,t);var c=n.prototype;return c.Init=function(e,n,c){t.prototype.Init.call(this,e,n,c),this.endEffectTime=i.Instance.CurrentTime+n.EffectTime,this.isApplying=!0,c.root.data.attackData.BlindPercent+=n.BlindPercent},c.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.thisTarget.root.data.attackData.BlindPercent-=this.data.BlindPercent,this.node.destroy()},n.ApplyEffect=function(t,e){var n=t.getEffectWithType(e.EffectType);if(null!=n)n.endEffectTime=i.Instance.CurrentTime+n.data.EffectTime;else t.initEffect(e)},n}(f))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts"],(function(t){"use strict";var e,i,o,n,a,c,s,l,r,h,u,p,k,y,f,w,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createClass},function(t){c=t.cclegacy,s=t._decorator,l=t.Sprite,r=t.UITransform,h=t.UIOpacity,u=t.Label,p=t.Node,k=t.Vec2,y=t.Vec3,f=t.tween,w=t.Component},function(t){d=t.Utility}],execute:function(){var b,m,R,v,I,B,H,g,O,_,x,T,D,C,L,A,S,P,M;t("BlockType",void 0),c._RF.push({},"7817dX+E+NNhLIIJqoQHULb","BlockItem",void 0);var N,E=s.ccclass,U=s.property;!function(t){t.NONE="",t.ROCK="rock",t.STONE="stone",t.ROCK_TOP="rock_top",t.MAGIC_MINERAL="magic_mineral",t.BOULDER="boulder",t.MAGIC_CRYSTAL="magic_crystal",t.MYTHRIL="mythril",t.FILLER_ROCK="filler"}(N||(N=t("BlockType",{})));t("BlockItem",(b=E("BlockItem"),m=U(l),R=U(r),v=U(h),I=U(u),B=U(l),H=U(p),g=U(p),O=U(p),b((T=e((x=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,o(e,"sprRock",T,n(e)),o(e,"transRock",D,n(e)),o(e,"uiOpacity",C,n(e)),o(e,"lbHealth",L,n(e)),o(e,"sprMaterial",A,n(e)),o(e,"nodeTouchArea",S,n(e)),o(e,"fxRock_1",P,n(e)),o(e,"fxRock_2",M,n(e)),e.json=void 0,e.svIndex=-1,e.miningNewManager=void 0,e.type=N.NONE,e.layerID=-1,e.location=new k(-1,-1),e.blockID="",e.health=-1,e.isShowBlock=!1,e.maxHP=1,e.tweenDecreaseHp=void 0,e.tweenColorHp=void 0,e.tweenBlink=void 0,e.tweenOpacity=void 0,e.tweenShow=void 0,e}i(e,t);var c=e.prototype;return c.onLoad=function(){var t=this;this.nodeTouchArea.on(p.EventType.TOUCH_END,this.onClick,this);var e=this.lbHealth.node.getComponent(h);this.lbHealth.node.position=y.ZERO,null!=e&&(e.opacity=0),this.tweenDecreaseHp=f(this.lbHealth.node).to(.4,{position:new y(0,80,0)}),this.tweenColorHp=f(e).to(.2,{opacity:255}).delay(.3).to(.3,{opacity:0}).call((function(){t.lbHealth.node.position=y.ZERO}));var i=f(this.uiOpacity).to(.1,{opacity:200}).to(.1,{opacity:255});this.tweenBlink=f(this.uiOpacity).repeat(5,i),this.tweenOpacity=f(this.uiOpacity).repeat(4,i).to(.25,{opacity:0}).delay(.15).call((function(){t.fxRock_1.active=!1,t.fxRock_2.active=!1,t.sprRock.node.active=!1,t.node.destroy()})),this.uiOpacity.opacity=1,this.isShowBlock=!1},c.InitBlock=function(t,e){this.updateDataBlock(t),this.layerID=e,this.loadSpriteBlock()},c.showBlock=function(t){var e=this,i=Math.pow(10,2),o=Math.round((t+.5)*i)/i;this.tweenShow=f(this.uiOpacity).delay(1).to(o,{opacity:255}).call((function(){e.isShowBlock=!0,e.activeFX()})),this.tweenShow.start()},c.updateDataBlock=function(t){this.type=t.name,this.maxHP=t.maxHP,this.health=t.hp,this.location=t.location,this.blockID=t.guid,this.isShowBlock&&this.activeFX()},c.getBlockTypeName=function(){var t="r0";switch(this.type){case N.STONE:t="s0";break;case N.MAGIC_MINERAL:t="mm0";break;case N.MYTHRIL:t="m0";break;case N.MAGIC_CRYSTAL:t="mc0";break;case N.ROCK_TOP:t="rt0";break;case N.BOULDER:t="b0"}return t},c.activeFX=function(){this.Type==N.MAGIC_MINERAL&&(this.fxRock_1.active=this.health==this.maxHP,this.fxRock_2.active=this.health<this.maxHP)},c.loadSpriteBlock=function(){var t=this,e=this.getStateBlock(),i=this.Type==N.MAGIC_CRYSTAL?"mc01":this.getBlockTypeName()+e;this.Type==N.MAGIC_MINERAL&&(e>2&&(i="r0"+e),this.fxRock_2.active=this.health<this.maxHP,this.fxRock_2.active&&(2!=e&&3!=e||(this.fxRock_2.position=new y(0,20,0)),4==e&&(this.fxRock_2.position=new y(0,-15,0))));var o="mining_new/block/"+i+"/spriteFrame";d.getStaticSpriteFrame(o,(function(e,i){null!=i&&null!=t.sprRock&&(t.sprRock.spriteFrame=i)}))},c.getStateBlock=function(){return this.health<=this.maxHP/4?4:this.health>=this.maxHP/4&&this.health<this.maxHP/2?3:this.health>=this.maxHP/2&&this.health<this.maxHP?2:1},c.getBlockSize=function(){var t=0;return this.transRock&&(t=this.transRock.width),t},c.activeTouch=function(t){this.nodeTouchArea&&(this.nodeTouchArea.active=t)},c.destroyBlock=function(){this.activeTouch(!1),this.tweenOpacity&&this.tweenOpacity.stop(),this.tweenOpacity.start()},c.onDestroy=function(){this.tweenDecreaseHp&&(this.tweenDecreaseHp=null),this.tweenColorHp&&(this.tweenColorHp=null),this.Type=N.NONE,this.LayerID=-1,this.BlockID="",this.location=new k(-1,-1)},c.getPositionParent=function(){var t=this.node.getParent().position;return new y(this.node.position.x+t.x,this.node.position.y+t.y)},c.updateHealth=function(t){var e=this;this.tweenBlink&&this.tweenBlink.stop(),this.tweenBlink.start(),this.health>0&&this.scheduleOnce((function(){e.loadSpriteBlock()}),.5)},c.unUsePickAxe=function(){return this.type==N.BOULDER||this.type==N.MYTHRIL},c.onClick=function(){var t=this.unUsePickAxe(),e={blockID:this.blockID,unUsePickAxe:t};this.node.emit("blockItem:onClicked",e)},a(e,[{key:"Type",get:function(){return this.type},set:function(t){this.type=t}},{key:"LayerID",get:function(){return this.layerID},set:function(t){this.layerID=t}},{key:"Location",get:function(){return this.location},set:function(t){this.location=t}},{key:"BlockID",get:function(){return this.blockID},set:function(t){this.blockID=t}},{key:"Health",get:function(){return this.health},set:function(t){this.health=t}}]),e}(w)).prototype,"sprRock",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(x.prototype,"transRock",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(x.prototype,"uiOpacity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(x.prototype,"lbHealth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(x.prototype,"sprMaterial",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(x.prototype,"nodeTouchArea",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(x.prototype,"fxRock_1",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(x.prototype,"fxRock_2",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=x))||_));c._RF.pop()}}}));

System.register("chunks:///_virtual/Bombard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./BombardBullet.ts","./Enums.ts","./InGameEvent.ts","./NormalAttack.ts"],(function(t){"use strict";var a,e,o,n,r,i,s,c,l,u,m,h,d;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,n=t.instantiate},function(t){r=t.SoundController,i=t.EnumSoundPVE},function(t){s=t.PVEGameplayControl},function(t){c=t.PVEHelper},function(t){l=t.BombardBullet},function(t){u=t.AttackType,m=t.DamageType},function(t){h=t.InGameEventID},function(t){d=t.NormalAttack}],execute:function(){var f;e._RF.push({},"a4bc3tU41ZMwqLbfS20jwVv","Bombard",void 0);var g=o.ccclass;o.property,t("Bombard",g("Bombard")(f=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var o=e.prototype;return o.addAttackData=function(t,a){if(t==u.NormalAttack){var e=this.root.GetRandomBasicDamage();a.AddDamage(m.Normal,e-e*this.skillData.AoEDecreasePercent/100),a.setAoE(this.skillData.AoERange)}},o.attack=function(t){c.RandomActive(this.root.root.data.attackData.BlindPercent)?console.error("Blind"):(this.curTarget=t,this.curDamage=this.root.Attack(u.NormalAttack,this.curTarget),null!=this.curDamage&&(this.root.root.event.on(h.AttackAnimEvent,this.endCast,this),this.root.beginNormalAttack(),this.root.root.animationComponent.setFaceToTarget(t.node.worldPosition.x),this.muzzleActiveInstance&&this.activeMuzzle(),r.Instance.PlaySoundPvE(i.SFX_Bombard_HeatedStrike_attack,.15)))},o.endCast=function(){if(this.root.root.event.off(h.AttackAnimEvent,this.endCast,this),!this.muzzleActiveInstance&&this.activeMuzzle(),null!=this.bulletPrefab){n(this.bulletPrefab).getComponent(l).init(this.root,this.curTarget,this.curDamage)}else{if(this.impactPrefab){var t=n(this.impactPrefab);t.parent=s.Instance.getEffParent(),t.setWorldPosition(this.curTarget.getTargetPos().getWorldPosition()),t.active=!0}this.curTarget.TakeDamage(this.curDamage)}},e}(d))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/BombardBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./PVE_GameplayControl.ts"],(function(t){"use strict";var e,o,i,s,a,r,n,l,h,d,p,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,n=t.Node,l=t.Vec3,h=t.instantiate,d=t.Component},function(t){p=t.SoundController,c=t.EnumSoundPVE},function(t){u=t.PVEGameplayControl}],execute:function(){var g,P,f,v,m;a._RF.push({},"af2d3fE6i1BS7o/sh1c5IQ5","BombardBullet",void 0);var y=r.ccclass,b=r.property;t("BombardBullet",(g=y("BombardBullet"),P=b(n),g((m=e((v=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).damageData=void 0,e.target=void 0,e.bulletSpeed=1e3,e.phase2Speed=1800,e.lastTargetPos=void 0,e.moving=!1,i(e,"explosionPrefab",m,s(e)),e.phase1=!1,e.phase2=!1,e}o(e,t);var a=e.prototype;return a.init=function(t,e,o){if(null!=e&&null!=e.getTargetPos()){var i=this.node;this.damageData=o,i.parent=u.Instance.getEffParent(),i.setWorldPosition(t.getAttackPos().getWorldPosition()),i.active=!0,this.target=e,this.lastTargetPos=u.Instance.offscreenTop.worldPosition,this.lastTargetPos.x=i.worldPosition.x,this.moving=!0,this.phase1=!0}else this.node.destroy()},a.update=function(t){if(this.moving){var e=this.node;if(this.phase2){var o=this.target.getTargetPos();null!=o&&(this.lastTargetPos=o.getWorldPosition())}var i=(this.phase2?this.phase2Speed:this.bulletSpeed)*t,s=l.distance(e.getWorldPosition(),this.lastTargetPos);if(s>5){var a=Math.min(i,s)/s,r=new l;l.lerp(r,e.getWorldPosition(),this.lastTargetPos,a),e.setWorldPosition(r.x,r.y,0)}else this.phase2?this.hit():(this.phase2=!0,e.setWorldPosition(this.target.getTargetPos().worldPosition.x,e.worldPosition.y,0))}},a.hit=function(){if(this.explosionPrefab){var t=h(this.explosionPrefab);t.parent=u.Instance.getEffParent(),t.worldPosition=this.node.worldPosition,t.active=!0,p.Instance.PlaySoundPvE(c.SFX_Bombard_HeatedStrike_hit,.15)}this.node.destroy(),this.target&&this.target.TakeDamage(this.damageData)},e}(d)).prototype,"explosionPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=v))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/BrokenEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./EffectBase.ts"],(function(e){"use strict";var t,n,f,c,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,f=e._decorator},function(e){c=e.PVEGameplayControl},function(e){r=e.EffectBase}],execute:function(){var i;n._RF.push({},"4372fchiqtAupQta8raXESh","BrokenEffect",void 0);var o=f.ccclass;f.property,e("BrokenEffect",o("BrokenEffect")(i=function(e){function n(){for(var t,n=arguments.length,f=new Array(n),c=0;c<n;c++)f[c]=arguments[c];return(t=e.call.apply(e,[this].concat(f))||this).endEffectTime=0,t}t(n,e);var f=n.prototype;return f.Init=function(t,n,f){e.prototype.Init.call(this,t,n,f),this.endEffectTime=c.Instance.CurrentTime+n.EffectTime,this.isApplying=!0,f.root.data.statsData.DefensePercentModifier-=n.DecreaseDefPercent},f.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.thisTarget.root.data.statsData.DefensePercentModifier+=this.data.DecreaseDefPercent,this.node.destroy()},n.ApplyEffect=function(e,t){var n=e.getEffectWithType(t.EffectType);if(null!=n)n.endEffectTime=c.Instance.CurrentTime+n.data.EffectTime;else e.initEffect(t)},n}(r))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/BtnAnim.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,o,s,r,a,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.CCInteger,c=t.tween,h=t.Component}],execute:function(){var u,p,l,d,v;s._RF.push({},"70856rzwrVMyZrvG/fc3k0X","BtnAnim",void 0);var b=r.ccclass,f=r.property;t("BtnAnim",(u=b("BtnAnim"),p=f(a),u((v=e((d=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))||this).tweenBtn=void 0,e.baseDown=void 0,e.baseUp=void 0,e.moveRange=20,e.duration=2,i(e,"index",v,o(e)),e}n(e,t);var s=e.prototype;return s.onLoad=function(){this.baseDown=this.node.getPosition(),this.baseUp=this.node.getPosition(),this.index%2!=0?(this.baseUp.y+=this.moveRange,this.baseDown.y-=this.moveRange):(this.baseUp.y-=this.moveRange,this.baseDown.y+=this.moveRange)},s.onEnable=function(){this.tweenBtn=c(this.node).to(this.duration,{position:this.baseUp}).to(this.duration,{position:this.baseDown}).union().repeatForever(),this.tweenBtn.start()},s.onDisable=function(){null!=this.tweenBtn&&this.tweenBtn.stop()},e}(h)).prototype,"index",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=d))||l));s._RF.pop()}}}));

System.register("chunks:///_virtual/BulletBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./PVE_GameplayControl.ts"],(function(t){"use strict";var e,i,o,n,a,r,s,l,u,d,c,h,p,g,P,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.CCBoolean,l=t.Node,u=t.Enum,d=t.Vec3,c=t.misc,h=t.instantiate,p=t.Component},function(t){g=t.EnumSoundPVE,P=t.SoundController},function(t){f=t.PVEGameplayControl}],execute:function(){var b,y,v,x,m,S,T,w,F,B,E,k,D,z,W;a._RF.push({},"cd1e8d1MpFOsbDiMvawWk8G","BulletBase",void 0);var C=r.ccclass,I=r.property;t("BulletBase",(b=C("BulletBase"),y=I(s),v=I(l),x=I(l),m=I(l),S=I({type:u(g)}),T=I({type:u(g)}),b((B=e((F=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).damageData=void 0,e.target=void 0,e.bulletSpeed=800,e.lastTargetPos=void 0,e.moving=!1,o(e,"rotateUpdate",B,n(e)),o(e,"explosionPrefab",E,n(e)),o(e,"explosionPrefabBack",k,n(e)),o(e,"explosionPrefabTarget",D,n(e)),o(e,"initSoundFx",z,n(e)),o(e,"hitSoundFx",W,n(e)),e.debug=!1,e.timedebug=0,e}i(e,t);var a=e.prototype;return a.initHitSoundFx=function(t){this.hitSoundFx=t},a.init=function(t,e,i,o){if(void 0===o&&(o=800),null!=e&&null!=e.getTargetPos()){this.initSoundFx!=g.None&&P.Instance.PlaySoundPvE(this.initSoundFx);var n=this.node;this.damageData=i,n.parent=f.Instance.getEffParent(),n.setWorldPosition(t.getAttackPos().worldPosition),n.active=!0,this.target=e,this.lastTargetPos=this.target.getTargetPos().worldPosition,this.moving=!0,this.bulletSpeed=o}else this.node.destroy()},a.syncTargetPos=function(){var t=this.target.getTargetPos();null!=t&&(this.lastTargetPos=t.getWorldPosition())},a.update=function(t){if(this.moving){this.syncTargetPos();var e=this.bulletSpeed*t,i=this.getRootPosition(),o=d.distance(i,this.lastTargetPos);if(o>5){var n=Math.min(e,o)/o,a=new d;a=d.lerp(a,i,this.lastTargetPos,n),this.setWorldPosition(a),this.rotateUpdate&&this.rotate(this.lastTargetPos)}else this.hit()}},a.setWorldPosition=function(t){this.node.setWorldPosition(t.x,t.y,0)},a.getRootPosition=function(){return this.node.getWorldPosition()},a.rotate=function(t){var e=this.getRootPosition(),i=c.radiansToDegrees(Math.atan2(t.y-e.y,t.x-e.x));this.node.setWorldRotationFromEuler(0,0,i)},a.hit=function(){try{if(this.playHitSoundFx(),null!=this.explosionPrefab){var t=h(this.explosionPrefab);t.parent=f.Instance.getEffParent(),t.worldPosition=this.node.worldPosition,t.active=!0}if(null!=this.explosionPrefabBack){var e=h(this.explosionPrefabBack);e.parent=f.Instance.getEffParentBack(),e.worldPosition=this.node.worldPosition,e.active=!0}if(null!=this.explosionPrefabTarget){var i=h(this.explosionPrefabTarget);i.parent=this.target.getTargetPos(),i.worldPosition=this.node.worldPosition,i.active=!0}}catch(t){console.error(t)}this.target&&this.target.TakeDamage(this.damageData),this.node.destroy()},a.playHitSoundFx=function(){this.hitSoundFx!=g.None&&P.Instance.PlaySoundPvE(this.hitSoundFx)},e}(p)).prototype,"rotateUpdate",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=e(F.prototype,"explosionPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(F.prototype,"explosionPrefabBack",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(F.prototype,"explosionPrefabTarget",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(F.prototype,"initSoundFx",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.None}}),W=e(F.prototype,"hitSoundFx",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.None}}),w=F))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/BurnEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./DamageData.ts","./Enums.ts","./EffectBase.ts"],(function(t){"use strict";var e,n,i,a,r,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){a=t.PVEGameplayControl},function(t){r=t.DamageData},function(t){c=t.DamageType},function(t){s=t.EffectBase}],execute:function(){var f;n._RF.push({},"d2ce1k7AthIWIvWk6qsh/I7","BurnEffect",void 0);var o=i.ccclass;i.property,t("BurnEffect",o("BurnEffect")(f=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).BurnHPPercent=0,e.endEffectTime=0,e}e(n,t);var i=n.prototype;return i.Init=function(e,n,i){t.prototype.Init.call(this,e,n,i),this.BurnHPPercent=n.BurnHPPercent,this.schedule(this.applyBurn.bind(this),1),this.endEffectTime=a.Instance.CurrentTime+n.EffectTime},i.applyBurn=function(){if(0!=this.isApplying){var t=new r;t.AddDamage(c.Magic_Fire,this.thisTarget.root.data.statsData.getMaxHp()*this.BurnHPPercent/100),this.thisTarget.root.applyDamage(t)}},i.update=function(t){a.Instance.CurrentTime>=this.endEffectTime&&this.RemoveEffect()},i.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.thisTarget.root.data.statsData.RES_Force.set(c.Magic_Fire,!1),this.node.destroy()},n.ApplyEffect=function(t,e){var n=t.getFirstEffectWithType(e.EffectType);null===n&&(n=t.initEffect(e)),t.root.data.statsData.RES_Force.set(c.Magic_Fire,!0),n.isApplying=!0},n}(s))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonAnim.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,s,o,l,a,r,c,h,u,d,C,p,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,a=t.CCFloat,r=t.CCBoolean,c=t.Button,h=t.Toggle,u=t.Vec3,d=t.Node,C=t.color,p=t.tween,g=t.Component}],execute:function(){var T,b,w,f,v,S,m,k,y;o._RF.push({},"7105bq4HCxIUaVlEcIPifoH","ButtonAnim",void 0);var A=l.ccclass,E=l.property;t("ButtonAnim",(T=A("ButtonAnim"),b=E(a),w=E(a),f=E(r),T((m=e((S=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,n(e,"scaleAdd",m,s(e)),n(e,"timeScale",k,s(e)),n(e,"isColorTransition",y,s(e)),e.targetNode=void 0,e.btnClick=void 0,e.originScale=void 0,e.targetScale=void 0,e.isClicked=void 0,e.scaleTween=void 0,e}i(e,t);var o=e.prototype;return o.onLoad=function(){this.btnClick=this.node.getComponent(c),null==this.btnClick&&(this.btnClick=this.node.getComponent(h)),this.targetNode=this.btnClick.target,this.originScale=new u(this.targetNode.getScale());var t=new u(this.scaleAdd,this.scaleAdd,this.scaleAdd);this.targetScale=new u(this.originScale),this.targetScale.subtract(t),this.node.on(d.EventType.TOUCH_CANCEL,this.Release,this),this.node.on(d.EventType.TOUCH_START,this.Down,this),this.node.on(d.EventType.TOUCH_END,this.Release,this),this.isColorTransition&&(this.btnClick.transition=c.Transition.COLOR,this.btnClick.normalColor=C("#FFFFFF"),this.btnClick.pressedColor=C("#C8C8C8"),this.btnClick.hoverColor=C("#E3E3E3"))},o.onDisable=function(){null!=this.scaleTween&&this.scaleTween.stop(),this.targetNode.setScale(this.originScale)},o.Down=function(){0!=this.btnClick.interactable&&(null!=this.scaleTween&&this.scaleTween.stop(),this.isClicked=!0,this.scaleTween=p(this.targetNode).to(this.timeScale,{scale:this.targetScale},{easing:"elasticOut"}),this.scaleTween.start())},o.Release=function(){this.isClicked&&(null!=this.scaleTween&&this.scaleTween.stop(),this.scaleTween=p(this.targetNode).to(this.timeScale,{scale:this.originScale},{easing:"elasticOut"}),this.scaleTween.start(),this.isClicked=!1)},e}(g)).prototype,"scaleAdd",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.08}}),k=e(S.prototype,"timeScale",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.4}}),y=e(S.prototype,"isColorTransition",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=S))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/CardData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_Enum.ts","./CloneableObject.ts"],(function(e){"use strict";var t,n,r,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){r=e.PVE_Enum},function(e){i=e.default}],execute:function(){n._RF.push({},"8f9a6bEJCZIq4nNhPanEptx","CardData",void 0);e("default",function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).serverId=void 0,t.Index=void 0,t.ID=void 0,t.serverType=void 0,t.Type=r.ECardType.None,t.ManaPrice=0,t.LEPrice=0,t.CooldownTime=0,t.Rarity=0,t.level=1,t.isSystemCard=!1,t}return t(n,e),n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/CardFakeData.ts",["cc","./PVE_Enum.ts","./GameplayConfig.ts"],(function(a){"use strict";var e,n,r;return{setters:[function(a){e=a.cclegacy},function(a){n=a.PVE_Enum},function(a){r=a.GameplayConfig}],execute:function(){e._RF.push({},"9f020ZuYFtMoaJEneSWmPH7","CardFakeData",void 0);var l=a("default",function(){function a(){}return a.UpdateData=function(a){a.forEach((function(a){var e;if(null==a.Rarity&&(a.Rarity=0),null==a.ManaPrice)if(a.Type==n.ECardType.Plant)a.ManaPrice=null!=(e=r.GetPlantData(a.ID).ManaCost)?e:10,a.CooldownTime=0;else if(a.Type==n.ECardType.Undead){var l;a.ManaPrice=null!=(l=r.GetUndeadData(a.ID).ManaCost)?l:10,a.CooldownTime=0}else if(a.Type==n.ECardType.Spell){var T,p,t=r.GetSpellConfig(a.ID);a.ManaPrice=t?null!=(T=t.ManaCost)?T:10:50,a.CooldownTime=t&&null!=(p=t.CooldownTime)?p:10}}))},a}());l.cardData=[{ID:"Terrablaam",Type:n.ECardType.Plant,ManaPrice:10,LEPrice:20,CooldownTime:1,Rarity:0,level:10},{ID:"Sporeen",Type:n.ECardType.Plant,ManaPrice:10,CooldownTime:1,Rarity:1,level:10},{ID:"Ziggblazer",Type:n.ECardType.Plant,ManaPrice:10,CooldownTime:1,Rarity:0,level:10},{ID:"Leevarne",Type:n.ECardType.Plant,ManaPrice:10,CooldownTime:1,Rarity:2,level:10}],l.TestDeck=[{ID:"Freezie",Type:n.ECardType.Plant},{ID:"Taskraa",Type:n.ECardType.Plant},{ID:"Ziggan",Type:n.ECardType.Plant},{ID:"Carroost",Type:n.ECardType.Plant},{ID:"Carroost",Type:n.ECardType.Plant},{ID:"Carrablast",Type:n.ECardType.Plant},{ID:"Nilshader",Type:n.ECardType.Plant},{ID:"Nilshader",Type:n.ECardType.Plant},{ID:"Ninshaddow",Type:n.ECardType.Plant},{ID:"Cactoon",Type:n.ECardType.Plant},{ID:"Cactoon",Type:n.ECardType.Plant},{ID:"Cactyrant",Type:n.ECardType.Plant},{ID:"Flufleaf",Type:n.ECardType.Plant},{ID:"Flufleaf",Type:n.ECardType.Plant},{ID:"Flufmoouse",Type:n.ECardType.Plant},{ID:"1000",Type:n.ECardType.Undead},{ID:"1002",Type:n.ECardType.Undead},{ID:"1003",Type:n.ECardType.Undead},{ID:"1007",Type:n.ECardType.Undead},{ID:"10000",Type:n.ECardType.Spell,ManaPrice:120,CooldownTime:10},{ID:"10001",Type:n.ECardType.Spell,ManaPrice:125,CooldownTime:10},{ID:"10001",Type:n.ECardType.Spell,ManaPrice:125,CooldownTime:10},{ID:"10002",Type:n.ECardType.Spell,ManaPrice:120,CooldownTime:8}],e._RF.pop()}}}));

System.register("chunks:///_virtual/CCLineHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,o,r,l,s,a,c,u,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,s=e._decorator,a=e.Line,c=e.Vec3,u=e.tween,h=e.Vec2,p=e.Component}],execute:function(){var d,f,m,_,v;e("RenderPriority",void 0),l._RF.push({},"c86aeRTBIJIWIGTVRtXMTnE","CCLineHelper",void 0);var C,y=s.ccclass,I=s.property;!function(e){e[e.MIN=0]="MIN",e[e.MAX=255]="MAX",e[e.DEFAULT=128]="DEFAULT"}(C||(C=e("RenderPriority",{})));e("CCLineHelper",(d=y("CCLineHelper"),f=I(a),d((v=t((_=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return(t=e.call.apply(e,[this].concat(r))||this)._models=null,n(t,"line",v,o(t)),t}i(t,e);var l=t.prototype;return l.start=function(){console.log("line",this.line);var e=this.line.width;e.constant=100,e.constantMin=100,e.constantMax=100,this.line.width=e,this.line.positions=[new c(0,0,0),new c(1e3,0,0)],u(this.line).to(3,{offset:new h(1,0)}).start(),console.log(this.line._model),this._models=[this.line._model],this.line._attachToScene(),this.line.worldSpace=!0,this.line.worldSpace=!1,this.line.enabled=!1,this.line.enabled=!0},l.updateAssembler=function(e){if(this._models){this._modelComponent._detachFromScene();for(var t,i=r(this._models);!(t=i()).done;){var n=t.value;e.commitModel.call(e,this,n,this._modelComponent.material)}return!0}return!1},l.update=function(){this._fitUIRenderQueue()},l._fitUIRenderQueue=function(){if(this._models){var e=this.line._materialInstance;if(null!=e)for(var t=e.passes,i=t.length,n=0;n<i;n++){t[n]._priority=C.MAX-11,e.recompileShaders({CC_FORCE_FORWARD_SHADING:!0},n)}else console.log("material null")}},t}(p)).prototype,"line",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=_))||m));l._RF.pop()}}}));

System.register("chunks:///_virtual/ChainLightning.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./Utility.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./DamageData.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,a,i,n,o,r,s,l,c,u,h,g,f,d,m,p,P,D,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Node,l=t.Vec3,c=t.sp},function(t){u=t.SoundController,h=t.EnumSoundPVE},function(t){g=t.Utility},function(t){f=t.PVEGameplayControl},function(t){d=t.PVEHelper},function(t){m=t.DamageData},function(t){p=t.AttackType,P=t.DamageType},function(t){D=t.InGameEventID},function(t){v=t.SkillBase}],execute:function(){var y,k,E,A,T,b,C;o._RF.push({},"ed44fRex15Kobty6OUmpFlL","ChainLightning",void 0);var I=r.ccclass,L=r.property;t("ChainLightning",(y=I("ChainLightning"),k=L(s),E=L(s),y((b=e((T=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).delayTimeAttack=0,i(e,"bulletPrefab",b,n(e)),i(e,"passiveElectrocute",C,n(e)),e.MaxChain=void 0,e.curTarget=void 0,e.curDamage=void 0,e}a(e,t);var o=e.prototype;return o.Init=function(e,a){t.prototype.Init.call(this,e,a),this.root.root.event.on(D.OnDestroy,this.onPlantDestroy,this),this.MaxChain=a.ChainDmgMultiply.length},o.update=function(t){this.root.attackAble&&(this.delayTimeAttack>0?this.delayTimeAttack-=t:this.root.targets.length<=0||(this.delayTimeAttack=1/this.root.getAttackSpeed(),this.attack(this.root.targets[0])))},o.addAttackData=function(t,e){var a=this,i=this.root.GetRandomBasicDamage(),n=0,o=[this.curTarget];t==p.NormalAttack&&(this.root.root.data.level>=this.skillData.Effect_Lv&&1==d.RandomActive(this.skillData.Effect_chance)?(e.AddDamage(P.Normal,i*this.skillData.Effect_DmgMultiply*this.skillData.ChainDmgMultiply[n]),e.AddEffects(this.skillData.EffectData)):e.AddDamage(P.Normal,i*this.skillData.ChainDmgMultiply[n]),n++,e.on(D.OnHit,(function t(e,r){if(n<a.MaxChain){var s=r.getTargetPos().worldPosition,c=a.root.root.getAllTargetObjects(),u=-1,h=0,g=null;if(c.forEach((function(t,e,i){(h=l.distance(s,t.targetComponent.getTargetPos().worldPosition))<=a.skillData.MaxChainDistance&&(-1==u||h<u)&&-1==o.indexOf(t.targetComponent)&&(u=h,g=t.targetComponent)})),null==g)return;var f=g.getTargetPos().worldPosition;o.push(g);var d=new m;d.attacker=e,d.AddDamage(P.Normal,i*a.skillData.ChainDmgMultiply[n]),n++,d.on(D.OnHit,t,a),a.InitLink(f,s,(function(){g.TakeDamage(d)}))}}),this))},o.attack=function(t){d.RandomActive(this.root.root.data.attackData.BlindPercent)?console.error("Blind"):(this.curTarget=t,this.curDamage=this.root.Attack(p.NormalAttack,this.curTarget),null!=this.curDamage&&(this.root.root.event.on(D.AttackAnimEvent,this.endCast,this),this.root.beginNormalAttack()))},o.endCast=function(){var t=this;if(null!=this.curTarget){this.root.root.event.off(D.AttackAnimEvent,this.endCast,this);var e=this.curTarget.getTargetPos().worldPosition,a=this.root.getAttackPos().worldPosition;u.Instance.PlaySoundPvE(h.chainlightning,.15),this.InitLink(e,a,(function(){if(t.curDamage.Effects.length>0){var e=t.getPrefab(t.passiveElectrocute);e.parent=f.Instance.getEffParentFront(),e.setWorldPosition(t.curTarget.getTargetPos().worldPosition),g.PlayParticle(e),t.setTimeoutPrefab(1e3,t.passiveElectrocute,e),u.Instance.PlaySoundPvE(h._electrocute,.25)}t.curTarget.TakeDamage(t.curDamage)}))}else console.error("this.curTarget null")},o.InitLink=function(t,e,a){var i=this.getPrefab(this.bulletPrefab);i.parent=f.Instance.getEffParentFront(),i.setWorldPosition(e);var n=l.distance(t,e);i.setScale(n/380,1,1);var o=Math.atan2(t.y-e.y,t.x-e.x);o*=180/Math.PI,i.setWorldRotationFromEuler(0,0,o),i.active=!0;var r=i.getComponent(c.Skeleton);r.setAnimation(0,"link",!1),r.setEndListener(a),this.setTimeoutPrefab(1e3,this.bulletPrefab,i)},o.onPlantDestroy=function(){this.root.root.event.off(D.OnDestroy,this.onPlantDestroy,this),this.destroyPrefab()},e}(v)).prototype,"bulletPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(T.prototype,"passiveElectrocute",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=T))||A));o._RF.pop()}}}));

System.register("chunks:///_virtual/ChargeSkill.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./DamageData.ts","./Enums.ts","./SkillBase.ts"],(function(t){"use strict";var a,e,o,i,n,s,c,r,l,h;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Vec3},function(t){n=t.PVEGameplayControl},function(t){s=t.DamageData},function(t){c=t.EffectData,r=t.EffectType,l=t.SkillDamageData},function(t){h=t.SkillBase}],execute:function(){var g;e._RF.push({},"f3a95gy0+hDnae3jgSUR4P3","ChargeSkill",void 0);var d=o.ccclass;o.property,t("ChargeSkill",d("ChargeSkill")(g=function(t){function e(){for(var a,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(a=t.call.apply(t,[this].concat(o))||this).NextTimeActive=0,a.castRange=0,a.dashRange=0,a.kickup=void 0,a.distance=void 0,a.appliedTargets=[],a}a(e,t);var o=e.prototype;return o.Init=function(t,a){this.root=t,this.skillData=a,this.castRange=a.castRange,this.dashRange=a.dashRange,this.kickup=a.kickupRange,this.schedule(this.checkTarget.bind(this),.1)},o.checkTarget=function(){},o.activeSkill=function(t){this.NextTimeActive=n.Instance.CurrentTime+this.skillData.Cooldown,console.log("active skill");var a=this.root.root,e=a.node.worldPosition,o=t.node.worldPosition.clone();o.x=e.x<o.x?e.x+500:e.x-500,a.animationComponent.setFaceToTarget(o.x),a.movingComponent.stopMoving(),a.attackComponent.attackAble=!1,a.animationComponent.setAnim("Attack_2",!1),this.scheduleOnce(function(){var t=new c;t.EffectType=r.Dash,t.EffectId=r.Dash,console.log("end cast"),t.time=.5,t.targetPos=o,t.updateCallback=this.dashUpdate.bind(this),t.finishCallback=this.dashFinish.bind(this),t.cancelCallback=this.dashCancel.bind(this),this.root.root.targetComponent.applyEffectOne(t)}.bind(this),.2)},o.dashUpdate=function(){var t=this,a=this.root.root.node.worldPosition;this.root.root.getAllTargetObjects().forEach((function(e,o,n){e.isUndead&&(t.distance=i.distance(a,e.node.worldPosition),t.distance<=t.kickup&&t.kickupTarget(e))}))},o.dashFinish=function(){this.appliedTargets=[];var t=this.root.root;console.log(t.Id,"finish ChargeSkill"),t.attackComponent.checkCountinueAttack(),t.movingComponent.checkCountinueMoving()},o.dashCancel=function(){this.appliedTargets=[],console.log("cancel ChargeSkill");var t=this.root.root;t.movingComponent.checkCountinueMoving(),t.attackComponent.checkCountinueAttack()},o.kickupTarget=function(t){if(!(this.appliedTargets.indexOf(t)>=0)){this.appliedTargets.push(t);var a=this.skillData,e=a.damageData,o=this.root.root.data.attackData,i=new s;i.attacker=this.root.root,e.forEach((function(t){var a=l.getDamage(t,o.getNormalDamage(),o.getMagicDamage());i.AddDamage(t.damageType,a)})),i.AddEffects(a.EffectData),t.targetComponent.TakeDamage(i)}},e}(h))||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/ChoppingBG.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,o,i,r,s,a,p,l,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.UITransform,p=t.randomRange,l=t.tween,u=t.v3,c=t.Component}],execute:function(){var h,d,f,C,g,v,w;r._RF.push({},"c4531+EhT1KyqRdERmmOl3Z","ChoppingBG",void 0);var B=s.ccclass,M=s.property;t("ChoppingBG",(h=B("ChoppingBG"),d=M(a),f=M(a),h((v=e((g=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"MapBGClouds",v,i(e)),o(e,"MapBG",w,i(e)),e.tweens=[],e}n(e,t);var r=e.prototype;return r.StartCloudMove=function(){this.StopCloudMove(),this.tweens=[];for(var t=0;t<this.MapBGClouds.length;t++)this.tweens.push(this.CloudTween(this.MapBGClouds[t],!0))},r.StopCloudMove=function(){for(var t=0;t<this.tweens.length;t++)this.tweens[t].stop()},r.CloudTween=function(t,e){var n=this,o=this.MapBG.width/2,i=this.MapBG.height/2,r=-o-t.width,s=p(-i,i),a=e?p(r,o):o,c=p(100,400),h=Math.abs(r-a)/c;return t.node.setPosition(a,s,0),l(t.node).to(h,{position:u(r,s,0)}).call((function(){n.CloudTween(t,!1)})).start()},e}(c)).prototype,"MapBGClouds",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=e(g.prototype,"MapBG",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=g))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/ChoppingHpLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,t,r,n,a,l,o,p,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.UIOpacity,p=e.Label,c=e.Component}],execute:function(){var u,s,b,y,g,h,f;a._RF.push({},"324557K/GdAJagwHyDX79+t","ChoppingHpLabel",void 0);var L=l.ccclass,d=l.property;e("ChoppingHpLabel",(u=L("ChoppingHpLabel"),s=d(o),b=d(p),u((h=i((g=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return i=e.call.apply(e,[this].concat(a))||this,r(i,"uIOpacity",h,n(i)),r(i,"label",f,n(i)),i}return t(i,e),i}(c)).prototype,"uIOpacity",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=i(g.prototype,"label",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=g))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/ChoppingManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./UserModel.ts","./IsoViewController.ts","./PrefabController.ts","./Utility.ts","./ResourcesManager.ts","./SoundController.ts","./UIPopupManager.ts","./UITutorial.ts","./GatheringManager.ts","./GatheringMiniGameUI.ts","./ChoppingBG.ts","./ChoppingMiniGame.ts","./TreePrefab.ts"],(function(e){"use strict";var t,n,i,a,r,o,s,l,u,h,c,p,d,g,f,m,S,I,b,x,T,v,M,G,C,P,y,w,D,_,R,O,A,L,U,k,B,E,j;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.Camera,l=e.Node,u=e.Prefab,h=e.SpriteFrame,c=e.sp,p=e.resources,d=e.TextAsset,g=e.v3,f=e.Vec2,m=e.instantiate,S=e.randomRangeInt,I=e.Component,b=e.Sprite,x=e.v2,T=e.randomRange,v=e.Vec3,M=e.Layers},function(e){G=e.GatheringServicesApi},function(e){C=e.UserModel},function(e){P=e.IsoViewController},function(e){y=e.PrefabController,w=e.PrefabEnum},function(e){D=e.Utility},function(e){_=e.ResourcesManager},function(e){R=e.SoundController,O=e.EnumSound},function(e){A=e.UIPopupManager},function(e){L=e.UITutorial},function(e){U=e.GatheringManager},function(e){k=e.GatheringMiniGameUI},function(e){B=e.ChoppingBG},function(e){E=e.ChoppingMiniGame},function(e){j=e.TreePrefab}],execute:function(){var N,z,V,H,F,J,W,K,Z,Y,q,Q,X,$,ee,te,ne,ie,ae,re,oe,se,le,ue,he,ce,pe,de,ge,fe,me,Se,Ie,be,xe,Te,ve,Me,Ge,Ce,Pe;r._RF.push({},"f7db5VDaI1IIpgAgkCxF5Y3","ChoppingManager",void 0);var ye=o.ccclass,we=o.property;e("ChoppingManager",(N=ye("ChoppingManager"),z=we(s),V=we(s),H=we(P),F=we(B),J=we(l),W=we(u),K=we(l),Z=we(u),Y=we(l),q=we(l),Q=we(k),X=we(h),$=we(h),ee=we(h),te=we(h),ne=we(E),ie=we(L),ae=we(c.Skeleton),re=we({type:l}),N((le=t((se=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"Camera",le,a(t)),i(t,"UICamera",ue,a(t)),i(t,"isoViewController",he,a(t)),i(t,"choppingBG",ce,a(t)),i(t,"Temp",pe,a(t)),i(t,"ChoppingGroundTile",de,a(t)),i(t,"MapParent",ge,a(t)),i(t,"TreePrefab",fe,a(t)),i(t,"TreeParent",me,a(t)),i(t,"MaterialParent",Se,a(t)),i(t,"gatheringMiniGameUI",Ie,a(t)),t.TreeObjArray=void 0,t.treeSlotCode=["cg1","cg2","xg1","hg1","hg2","tg1","tg2","dg1","dg2"],t.waterSlotCode=["cw","xw","hw1","hw2","tw","dr5","dr6"],t.groundObj=void 0,t.treeSlotIndex=void 0,t.bigTreeSlotIndex=void 0,t.freeSlotIndex=void 0,t.maxx=void 0,t.minx=void 0,t.maxy=void 0,t.miny=void 0,t.MapData="",i(t,"TileGround",be,a(t)),i(t,"Tree_Big",xe,a(t)),i(t,"Tree_small",Te,a(t)),t.Root=void 0,t.totalResource=-1,t.currentResource=0,t.tileName={spring:["xhr2","xg1","xr2","cg1","cr2","xhr1","xr1","xw","cw"],summer:["cr2","hg1","hg2","cr1","hw2","hw1","cw","xhr2","xhr1"],autumn:["tg1","tg2","cr2","tr1","tr2","tw","cw","cr1"],winter:["dr6","dg2","dr1","dr2","dg1","dr5","dr4","dr3"]},i(t,"Decor",ve,a(t)),t.season=void 0,t.svTreeJson=void 0,t.isInit=!1,t.isDoneLoadSvData=!1,t.isLoadSvDataSus=!1,t.MaterialDrops=[],i(t,"choppingMiniGame",Me,a(t)),t.isMiniGameStart=!1,t.currentTreeChopping=null,i(t,"uITutorial",Ge,a(t)),i(t,"AxeChop",Ce,a(t)),i(t,"SeasonParticle",Pe,a(t)),t.isCheat=!1,t}n(t,e);var r=t.prototype;return r.start=function(){R.Instance.SetBgMusic(O.BG_Chopping),this.AsyncLoadResource(this.isCheat),this.GetMap(this.isCheat),this.choppingMiniGame.node.active=!1,this.isCheat&&(this.isLoadSvDataSus=!0)},r.update=function(e){!this.isInit&&this.isDoneLoadSvData&&this.totalResource==this.currentResource&&(this.isInit=!0,this.isLoadSvDataSus?this.GenerateMap():this.BackToSceneGathering())},r.GetMap=function(e){var t=this;if(e){this.svTreeJson=JSON.parse(C.fakeChoppingdata[C.fakeChoppingMapIndex%3]).data;var n="chopping/mapdata/"+this.season+"_map_"+(C.fakeChoppingMapIndex%3).toString();return p.load(n,d,(function(e,n){var i;i=n,t.MapData=i.text,t.isDoneLoadSvData=!0})),void C.fakeChoppingMapIndex++}G.CHOPPING_GET_MAP(C.curWorldMapData.playingMiniGameId,function(e){var n=JSON.parse(e);if(0==n.status){t.svTreeJson=n.data,C.userGatherData.currentStamina=t.svTreeJson.stamina,t.gatheringMiniGameUI.UpdateStaminaLabel();var i=0;switch(t.svTreeJson.size){case 0:break;case 1:case 4:i++;break;default:i+=2}var a="chopping/mapdata/"+t.season+"_map_"+i.toString();p.load(a,d,(function(e,n){var i;i=n,t.MapData=i.text,t.isLoadSvDataSus=!0,t.isDoneLoadSvData=!0}))}else A.Instance.ShowToast("Error",_.Instance.GetErrorMessage(n.status),0,!1),t.isLoadSvDataSus=!1,t.isDoneLoadSvData=!0}.bind(this),function(e){t.isLoadSvDataSus=!1,t.isDoneLoadSvData=!0}.bind(this))},r.AsyncLoadResource=function(e){var t=this;if(e)switch(C.fakeChoppingMapIndex){case 0:case 1:case 2:C.SeasonData.season="spring";break;case 3:case 4:case 5:C.SeasonData.season="summer";break;case 6:case 7:case 8:C.SeasonData.season="autumn";break;default:C.SeasonData.season="winter"}this.season=C.SeasonData.season,this.totalResource=0,this.currentResource=0;for(var n="",i=0;i<this.SeasonParticle.length;i++)this.SeasonParticle[i].active=!1;switch(this.season){case"spring":D.PlayParticle(this.SeasonParticle[0]);break;case"summer":D.PlayParticle(this.SeasonParticle[1]);break;case"autumn":D.PlayParticle(this.SeasonParticle[2]);break;default:D.PlayParticle(this.SeasonParticle[3])}var a=2,r=this.season;"summer"==r&&(r="spring");for(var o=function(e){t.Tree_Big.push(e),t.currentResource++},s=0;s<a;s++)this.totalResource++,n="chopping/map/tree/LARGE_TREE_"+r+"_"+s.toString()+"/spriteFrame",p.load(n,h,(function(e,t){o(t)}));a=3,"summer"!=(r=this.season)&&"spring"!=r||(a=4);for(var l=function(e){t.Tree_small.push(e),t.currentResource++},u=0;u<a;u++)this.totalResource++,n="chopping/map/tree/SMALL_TREE_"+r+"_"+u.toString()+"/spriteFrame",p.load(n,h,(function(e,t){l(t)}));for(var c=this.tileName[this.season],d=function(e){t.TileGround.push(e),t.currentResource++},g=0;g<c.length;g++)this.totalResource++,n="chopping/map/ground/"+c[g]+"/spriteFrame",p.load(n,h,(function(e,t){d(t)}));r="winter"==this.season?"1":"0";this.totalResource++,n="chopping/map/root/SMALL_TREE_"+r+"/spriteFrame",p.load(n,h,(function(e,n){!function(e){t.Root=e,t.currentResource++}(n)}))},r.GenerateMap=function(){var e=this,t=this.MapData.split("\n");this.groundObj=[],this.treeSlotIndex=[],this.bigTreeSlotIndex=[],this.freeSlotIndex=[];for(var n=[],i=0;i<t.length;i++){this.groundObj[i]=[];for(var a=t[i].split(","),r=function(){var t=a[o].trim().split("_");if(""!=t[0]){var r=m(e.ChoppingGroundTile);e.groundObj[i][o]=r,r.setParent(e.Temp);var s=e.TileGround.findIndex((function(e){return e.name==t[0]}));-1==s&&(-1==(s=n.findIndex((function(e){return e==t[0]})))&&n.push(t[0]),s=0),r.getComponent(b).spriteFrame=e.TileGround[s],r.setPosition(75*(o-i),-37.5*(i+o),0),(e.maxx<r.position.x||null==e.maxx)&&(e.maxx=r.position.x),(e.minx>r.position.x||null==e.minx)&&(e.minx=r.position.x),(e.maxy<r.position.y||null==e.maxy)&&(e.maxy=r.position.y),(e.miny>r.position.y||null==e.miny)&&(e.miny=r.position.y),(s=e.treeSlotCode.findIndex((function(e){return e==t[0]})))>-1?(e.treeSlotIndex.push(x(i,o)),t.length>1&&"b"==t[1]&&e.bigTreeSlotIndex.push(x(i,o))):(s=e.waterSlotCode.findIndex((function(e){return e==t[0]})))<=-1&&e.freeSlotIndex.push(x(i,o))}},o=16;o<a.length;o++)r()}n.length>0&&console.error("Can not find image of tile name: ",n),this.AddTreeAndDecor(),this.choppingBG.StartCloudMove(),this.MoveMapToZero(),this.isoViewController.Init(this.maxx,this.minx,this.maxy,this.miny)},r.MoveMapToZero=function(){var e=g((this.maxx+this.minx)/2,(this.maxy+this.miny)/2,0);this.MapParent.setPosition(e),this.TreeParent.setPosition(e);for(var t=0;t<this.TreeObjArray.length;t++)this.TreeObjArray[t].setParent(this.TreeParent,!0);this.TreeParent.setPosition(0,0,0);for(var n=0;n<this.groundObj.length;n++)for(var i=0;i<this.groundObj[n].length;i++)null!=this.groundObj[n][i]&&this.groundObj[n][i].setParent(this.MapParent,!0);this.MapParent.setPosition(0,0,0)},r.AddTreeAndDecor=function(){var e=this,t=[],n=this.svTreeJson,i=n.objects.length;this.isCheat||this.gatheringMiniGameUI.Init(0,i,(function(){e.OnBtnSkip()}),null,this.OnBtnUITutorial.bind(this)),D.shuffle(this.bigTreeSlotIndex);for(var a=0,r=0;r<i;r++)if("LARGE_TREE"==n.objects[r].type)if(a<this.bigTreeSlotIndex.length){var o=new f(this.bigTreeSlotIndex[a]),s={index:o,json:n.objects[r],svIndex:r};t.push(s),a++,this.removeTreeSlotUsedByBigTree(o.x,o.y)}else console.error("out of tree slot");a=0,D.shuffle(this.treeSlotIndex);for(var l=0;l<i;l++)if("LARGE_TREE"!=n.objects[l].type)if(a<this.treeSlotIndex.length){var u={index:new f(this.treeSlotIndex[a]),json:n.objects[l],svIndex:l};t.push(u),a++}else console.error("out of tree slot");D.shuffle(this.freeSlotIndex),i=Math.floor(this.freeSlotIndex.length/3);for(var h=0;h<i;h++)if(h<this.freeSlotIndex.length){var c={index:new f(this.freeSlotIndex[h]),json:null,svIndex:-1};t.push(c)}t.sort((function(t,n){return e.SortObjToSpawns(t,n)})),this.TreeObjArray=[];for(var p=0;p<t.length;p++)this.SpawnTree(t[p].json,t[p].index,t[p].svIndex)},r.removeTreeSlotUsedByBigTree=function(e,t){var n=this.treeSlotIndex.findIndex((function(n){return n.x==e&&n.y==t}));this.treeSlotIndex.splice(n,1),n=this.treeSlotIndex.findIndex((function(n){return n.x==e+1&&n.y==t})),this.treeSlotIndex.splice(n,1),n=this.treeSlotIndex.findIndex((function(n){return n.x==e&&n.y==t+1})),this.treeSlotIndex.splice(n,1),n=this.treeSlotIndex.findIndex((function(n){return n.x==e+1&&n.y==t+1})),this.treeSlotIndex.splice(n,1)},r.SortObjToSpawns=function(e,t){return e.index.x<t.index.x?-1:e.index.x>t.index.x?1:e.index.y<t.index.y?-1:(e.index.y,t.index.y,1)},r.SpawnTree=function(e,t,n){var i=m(this.TreePrefab);i.setParent(this.Temp),i.setPosition(this.groundObj[t.x][t.y].getPosition());var a=i.getComponent(j),r=null,o=null;null!=e?(r="SMALL_TREE"==e.type?this.Tree_small[S(0,this.Tree_small.length)]:this.Tree_Big[S(0,this.Tree_Big.length)],o=this.Root):r=this.Decor[S(0,this.Decor.length)],a.Init(r,o,e,n,this),this.TreeObjArray.push(i)},r.TreeChop=function(e,t){var n=this;this.currentTreeChopping.OnChop();G.CHOPPING_TREE_V2(e.svIndex.toString(),t,(function(t){var i=G.CheckStatus(JSON.parse(t));if(null!=i){if(1010==i.status)return void A.Instance.ShowUINotifyConfirm("Insufficient Stamina",_.Instance.GetErrorMessage(1010),function(){this.BackToSceneGathering()}.bind(n),!1,!1,0,!0);C.userGatherData.currentStamina=i.data.stamina,n.gatheringMiniGameUI.UpdateStaminaLabel();for(var a=!0,r=i.data.rewards.length,o=function(){var t=i.data.rewards[s],r=t.token,o=t.data;if((o.includes("SAPLING")||o.includes("MAMA"))&&(o=D.SunflowerSvNameToResourceName(o)),"NOTHING"!=o){a=!1;var l=U.Instance.SpawnMaterial(),u=e.node.getWorldPosition(),h=u.clone();h.y+=60,h.x+=T(0,1)>.5?T(-180,-50):T(50,180),h.y+=T(-20,100),l.node.setParent(n.MaterialParent),l.Init(o),l.SetTime(60,10),l.SetPosition(u,h),l.setOnGetKeyCallback(n.OnGetKey.bind(n)),l.setClaimCallback((function(){G.CHOPPING_GET_REWARD(r,l.onVerifyServerCallback.bind(l),null)})),l.setReleaseCallback(n.ReleaseMaterialDrop.bind(n)),l.setTweenToTravelBagCallback((function(){var e=n.Camera.node.getWorldPosition(),t=n.UICamera.node.getWorldPosition(),i=new v(e.x-t.x,e.y-t.y,0);l.ChangeLayer(M.Enum.UI_2D);var a=l.node.getWorldPosition().subtract(i);l.node.setWorldPosition(a),n.gatheringMiniGameUI.OpenBag(),R.Instance.PlaySound(O.UI_Item_Slide_to_Bag),l.TweenToBag(n.gatheringMiniGameUI.BagSprite.node.worldPosition,(function(){n.gatheringMiniGameUI.CloseBag(!0)}))})),l.ChangeLayer(M.Enum.UI_3D),l.StartAnim(),n.MaterialDrops.push(l)}},s=0;s<r;s++)o();var l="MISSED";if(a&&r>0)l="NOTHING";else{var u=i.data.power;u>0&&(l="-"+u+" HP")}n.currentTreeChopping.spawnHpFx(l),r>0&&!a&&R.Instance.PlaySound(O.UI_Item_Appear),C.userGatherData.CHOPPING_level.exp=i.data.expData.exp,C.userGatherData.CHOPPING_level.level=i.data.expData.level,n.gatheringMiniGameUI.gatheringLevelTop.UpdateView(0),i.data.tree.isExploited?(n.OnCloseMiniGame(),e.OnDead(),e.OnTreeStumpDead(),n.gatheringMiniGameUI.curItem=n.gatheringMiniGameUI.curItem-1):(e.heath>0&&"SMALL_STUMP"==i.data.tree.type&&e.OnDead(),n.choppingMiniGame.InitMiniGame(i.data.tree.type),n.currentTreeChopping.Select())}else n.choppingMiniGame.InitMiniGame("")}),(function(e){n.choppingMiniGame.InitMiniGame("")}))},r.OnGetKey=function(){this.gatheringMiniGameUI.skipGameBtnstate=1},r.OnBtnSkip=function(){0==this.gatheringMiniGameUI.skipGameBtnstate?U.Instance.ShowMaterialWarning(50,"Next mini game fee:",this.ValidateSkipGameServer.bind(this)):2==this.gatheringMiniGameUI.skipGameBtnstate?this.ValidateFinishGameServer():U.Instance.ShowMaterialWarning(-1,"Skip This Mini Game",this.ValidateFinishGameServer.bind(this))},r.ValidateFinishGameServer=function(){var e=this;G.CHOPPING_FINISH(function(t){var n=G.CheckStatus(JSON.parse(t));null!=n&&(C.curWorldMapData=n.data.route,e.BackToSceneGathering())}.bind(this),null)},r.ValidateSkipGameServer=function(){var e=this;G.CHOPPING_SKIP(function(t){var n=G.CheckStatus(JSON.parse(t));null!=n&&(C.curWorldMapData=n.data.route,C.userGatherData.currentStamina=n.data.stamina,e.BackToSceneGathering())}.bind(this),null)},r.BackToSceneGathering=function(){for(null!=this.currentTreeChopping&&this.currentTreeChopping.DeSelect();this.MaterialDrops.length>0;)this.MaterialDrops[0].Release();R.Instance.SetBgMusic(O.BGM_Farm2),y.Instance.ReturnAllPrefab(w.Chopping_HpLabel),y.Instance.ReturnAllPrefab(w.Chopping_Blue),y.Instance.ReturnAllPrefab(w.Chopping_Green),y.Instance.ReturnAllPrefab(w.Chopping_Pink),y.Instance.ReturnAllPrefab(w.Chopping_Red),y.Instance.ReturnAllPrefab(w.Chopping_Root),y.Instance.ReturnAllPrefab(w.Bag_effect),A.Instance.HideToast(),y.Instance.isPlayTabSound=!0,C.IsGatherPremium?A.Instance.LoadScene("1.Gathering-Premium"):A.Instance.LoadScene("1.Gathering")},r.ReleaseMaterialDrop=function(e){var t=this.MaterialDrops.findIndex((function(t){return t==e}));t>-1&&this.MaterialDrops.splice(t,1)},r.OnBtnUITutorial=function(){this.uITutorial.Show(1)},r.OnTreeClick=function(e){if(this.isMiniGameStart)this.ChopTree();else{this.currentTreeChopping=e,this.isMiniGameStart=!0,y.Instance.isPlayTabSound=!1,this.isoViewController.Pause(!0),this.choppingMiniGame.Show();var t=e.json.type;"SMALL_TREE"==t&&e.heath<=0&&(t="SMALL_STUMP"),this.choppingMiniGame.InitMiniGame(t),this.currentTreeChopping.Select()}},r.OnCloseMiniGame=function(){this.choppingMiniGame.Hide(),this.isMiniGameStart=!1,this.isoViewController.Pause(!1),y.Instance.isPlayTabSound=!0,this.currentTreeChopping.DeSelect(),this.currentTreeChopping=null},r.ChopTree=function(){if(this.isMiniGameStart&&this.choppingMiniGame.isInit){var e=this.choppingMiniGame.ChopTree();this.TreeChop(this.currentTreeChopping,e)}},t}(I)).prototype,"Camera",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(se.prototype,"UICamera",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(se.prototype,"isoViewController",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(se.prototype,"choppingBG",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(se.prototype,"Temp",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=t(se.prototype,"ChoppingGroundTile",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=t(se.prototype,"MapParent",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(se.prototype,"TreePrefab",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(se.prototype,"TreeParent",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=t(se.prototype,"MaterialParent",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=t(se.prototype,"gatheringMiniGameUI",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=t(se.prototype,"TileGround",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xe=t(se.prototype,"Tree_Big",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Te=t(se.prototype,"Tree_small",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve=t(se.prototype,"Decor",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Me=t(se.prototype,"choppingMiniGame",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ge=t(se.prototype,"uITutorial",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=t(se.prototype,"AxeChop",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=t(se.prototype,"SeasonParticle",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oe=se))||oe));r._RF.pop()}}}));

System.register("chunks:///_virtual/ChoppingMiniGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserModel.ts","./PopUpBase.ts","./Utility.ts"],(function(i){"use strict";var e,t,r,n,o,a,s,h,l,c,d,p,u,B;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){o=i.cclegacy,a=i._decorator,s=i.JsonAsset,h=i.UITransform,l=i.EditBox,c=i.Node,d=i.randomRange},function(i){p=i.UserModel},function(i){u=i.PopUpBase},function(i){B=i.Utility}],execute:function(){var w,b,g,v,f,m,y,P,M,z,C,D,x,S,I,G,L;o._RF.push({},"5c537lqmKtNAbugqPWJ3N23","ChoppingMiniGame",void 0);var R=a.ccclass,_=a.property;i("ChoppingMiniGame",(w=R("ChoppingMiniGame"),b=_(s),g=_(h),v=_(h),f=_(h),m=_(h),y=_(l),P=_(c),w((C=e((z=function(i){function e(){for(var e,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=i.call.apply(i,[this].concat(o))||this,r(e,"config",C,n(e)),r(e,"blackBar",D,n(e)),r(e,"greenBar",x,n(e)),r(e,"redBar",S,n(e)),r(e,"whiteBar",I,n(e)),r(e,"CheatLevel",G,n(e)),r(e,"ParticleFX",L,n(e)),e.speed=0,e.boundMove=0,e.moveDirection=1,e.isInit=!1,e.currentType=void 0,e}t(e,i);var o=e.prototype;return o.update=function(i){if(this.isInit){var e=this.whiteBar.node.position.x+this.moveDirection*this.speed*i;e<-this.boundMove&&(e=-this.boundMove,this.moveDirection=-this.moveDirection),e>this.boundMove&&(e=this.boundMove,this.moveDirection=-this.moveDirection),this.whiteBar.node.setPosition(e,0,0)}},o.Show=function(){i.prototype.OnShow.call(this)},o.ChopTree=function(){this.isInit=!1,this.ParticleFX.setPosition(this.whiteBar.node.position),B.PlayParticle(this.ParticleFX);var i=this.redBar.width/2+this.whiteBar.width/2,e=this.redBar.node.position.x+i,t=this.redBar.node.position.x-i;return this.whiteBar.node.position.x>t&&this.whiteBar.node.position.x<e?"RED_BAR":(i=this.greenBar.width/2+this.whiteBar.width/2,e=this.greenBar.node.position.x+i,t=this.greenBar.node.position.x-i,this.whiteBar.node.position.x>t&&this.whiteBar.node.position.x<e?"GREEN_BAR":"BLACK_BAR")},o.InitMiniGame=function(i){""!=i?this.currentType=i:i=this.currentType;var e=0;""!=this.CheatLevel.string?e=parseInt(this.CheatLevel.string):(e=p.userGatherData.CHOPPING_level.level,this.CheatLevel.string=e.toString());var t=this.config.json.bases[i],r=this.config.json.level[e];this.blackBar.width=t.barSize,this.greenBar.width=t.greenSize*r.greenSizeMod,this.redBar.width=t.redSize*r.redSizeMod,this.whiteBar.width=t.whiteSize,this.speed=t.speed*r.whiteSpeedMod;var n=this.blackBar.width/2-this.greenBar.width/2;this.greenBar.node.setPosition(d(-n,n),0,0),n=this.blackBar.width/2-this.redBar.width/2,this.redBar.node.setPosition(d(-n,n),0,0),this.boundMove=this.blackBar.width/2-this.whiteBar.width/2,this.whiteBar.node.setPosition(0,0,0),this.moveDirection=-1,this.isInit=!0},o.Hide=function(){i.prototype.OnHide.call(this,(function(){}),!1)},e}(u)).prototype,"config",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(z.prototype,"blackBar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(z.prototype,"greenBar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(z.prototype,"redBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(z.prototype,"whiteBar",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(z.prototype,"CheatLevel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(z.prototype,"ParticleFX",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=z))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/ChoseLandItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts"],(function(t){"use strict";var e,i,n,a,o,r,s,l,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.RichText,l=t.Label,c=t.Sprite,p=t.Component},null],execute:function(){var d,u,h,y,f,v,x,P,b;o._RF.push({},"a391bn4779A+J4Js8paZiAP","ChoseLandItem",void 0);var g=r.ccclass,L=r.property;t("ChoseLandItem",(d=g("ChoseLandItem"),u=L(s),h=L(l),y=L(c),d((x=e((v=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"txtLocation",x,a(e)),n(e,"txtPot",P,a(e)),n(e,"typeSpriteArray",b,a(e)),e.Jdata=void 0,e.index=void 0,e.isAddPlant=void 0,e}i(e,t);var o=e.prototype;return o.OnbtnSelectClick=function(){this.isAddPlant},o.Init=function(t,e){this.index=t,this.Jdata=e,this.UpdateInit(e)},o.UpdateInit=function(t){this.txtLocation.string=t.land.x+","+t.land.y,this.txtPot.node.parent.parent.active=!1,null!=t.stage?(this.isAddPlant=!0,this.UpdateTools(t),this.UpdateTypes(t)):(this.isAddPlant=!1,this.UpdateTypes(t))},o.UpdateTools=function(t){for(var e=t.activeTools,i=0;i<e.length;i++){var n=e[i];1==n.id&&(this.txtPot.string=n.count,this.txtPot.node.parent.parent.active=!0,n.count>1?this.txtPot.node.parent.active=!0:this.txtPot.node.parent.active=!1)}},o.UpdateTypes=function(t){},e}(p)).prototype,"txtLocation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(v.prototype,"txtPot",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=e(v.prototype,"typeSpriteArray",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=v))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/CloneableObject.ts",["cc"],(function(t){"use strict";var e,c;return{setters:[function(t){e=t.cclegacy,c=t._decorator}],execute:function(){e._RF.push({},"e1d55c7my9CEJfM1m7NdXz0","CloneableObject",void 0);c.ccclass,c.property,t("default",function(){function t(){}return t.prototype.clone=function(){var t={};for(var e in this)"object"==typeof this[e]?null!=this[e].clone?t[e]=this[e].clone():t[e]=JSON.parse(JSON.stringify(this[e])):t[e]=this[e];return t},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CloudTween.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,n,r,i,a,l,u,s,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.UITransform,u=e.randomRange,s=e.tween,c=e.v3,p=e.Component}],execute:function(){var d,h,f,C,w,M,v;i._RF.push({},"16e7b5EE1RM0rhuGfkpgZmC","CloudTween",void 0);var g=a.ccclass,y=a.property;e("CloudTween",(d=g("CloudTween"),h=y(l),f=y(l),d((M=t((w=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"MapBGClouds",M,r(t)),n(t,"MapBG",v,r(t)),t}o(t,e);var i=t.prototype;return i.start=function(){this.StartCloudMove()},i.StartCloudMove=function(){for(var e=0;e<this.MapBGClouds.length;e++)this.CloudTween(this.MapBGClouds[e],!0)},i.CloudTween=function(e,t){var o=this,n=this.MapBG.width/2,r=this.MapBG.height/2,i=-n-e.width,a=u(-r,r),l=t?u(i,n):n,p=u(100,400),d=Math.abs(i-l)/p;e.node.setPosition(l,a,0),s(e.node).to(d,{position:c(i,a,0)}).call((function(){o.CloudTween(e,!1)})).start()},t}(p)).prototype,"MapBGClouds",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(w.prototype,"MapBG",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=w))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigApi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserModel.ts"],(function(e){"use strict";var t,r,n;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy},function(e){n=e.UserModel}],execute:function(){r._RF.push({},"0fe15P7mPlN04i+0Awqnw05","ConfigApi",void 0);var i=e("ConfigApi",function(){function e(){}return e.MAX_TIME_PENDING_LV_UP=function(){return 60*(this.IS_PRO?2880:48)},e.TIME_DECREASE_FATIGUE=function(){return 60*(this.IS_PRO?60:5)},e.TIME_REGEN_FATIGUE=function(){return 60*(this.IS_PRO?60:5)},t(e,null,[{key:"START_MINI_GAME",get:function(){return"map"+n._GatherVersion+"/start-minigame"}},{key:"SKIP_CUR_MINI_GAME",get:function(){return"map"+n._GatherVersion+"/skip-current-route"}},{key:"END_ROUTE",get:function(){return"map"+n._GatherVersion+"/end-route"}},{key:"START_MYSTERY",get:function(){return"map"+n._GatherVersion+"/start-mystery"}},{key:"START_TRESURE",get:function(){return"map"+n._GatherVersion+"/start-treasure"}},{key:"FORCE_SKIP_CURRENT_ROUTE",get:function(){return"map"+n._GatherVersion+"/force-skip-current-route"}},{key:"CHOPPING_GET_MAP",get:function(){return"chopping"+n._GatherVersion+"/get-map"}},{key:"CHOPPING_TREE",get:function(){return"chopping"+n._GatherVersion+"/chopping-tree"}},{key:"CHOPPING_TREE_V2",get:function(){return n.IsGatherPremium?"chopping"+n._GatherVersion+"/chopping-tree":"chopping/chopping-tree-v2"}},{key:"CHOPPING_SKIP",get:function(){return"chopping"+n._GatherVersion+"/skip-map"}},{key:"CHOPPING_FINISH",get:function(){return"chopping"+n._GatherVersion+"/finish-map"}},{key:"CHOPPING_GET_REWARD",get:function(){return"chopping"+n._GatherVersion+"/collect-reward"}},{key:"FISHING_GET_MAP",get:function(){return"fishing"+n._GatherVersion+"/get-map"}},{key:"FISHING_SKIP_MAP",get:function(){return"fishing"+n._GatherVersion+"/skip-map"}},{key:"FISHING_DROP",get:function(){return"fishing"+n._GatherVersion+"/drop-fishing"}},{key:"FISHING_PULL",get:function(){return"fishing"+n._GatherVersion+"/pull-fishing"}},{key:"FISHING_BEGIN_PULL",get:function(){return"fishing"+n._GatherVersion+"/begin-pull-fishing"}},{key:"FISHING_FINISH",get:function(){return"fishing"+n._GatherVersion+"/finish-map"}},{key:"FISHING_CATCH",get:function(){return"fishing"+n._GatherVersion+"/catch-fish"}},{key:"MINING_GET_MAP",get:function(){return"mining"+n._GatherVersion+"/get-map"}},{key:"MINING_SHOOT",get:function(){return"mining"+n._GatherVersion+"/shoot"}},{key:"MINING_GET_REWARD",get:function(){return"mining"+n._GatherVersion+"/reward"}},{key:"MINING_ADD_TRAVEL_BAG",get:function(){return"mining"+n._GatherVersion+"/add-travel-bag"}},{key:"MINING_START",get:function(){return"mining"+n._GatherVersion+"/start"}},{key:"MINING_SKIP",get:function(){return"mining"+n._GatherVersion+"/skip-map"}},{key:"MINING_FINISH",get:function(){return"mining"+n._GatherVersion+"/finish-map"}},{key:"MINING_SKIP_V2",get:function(){return"mining"+n._MiningVersionV3+"/skip-map"}},{key:"MINING_GET_MAP_V2",get:function(){return"mining"+n._MiningVersionV3+"/map"}},{key:"MINING_DAMAGE_V2",get:function(){return"mining"+n._MiningVersionV3+"/damage"}},{key:"MINING_FINISH_V2",get:function(){return"mining"+n._MiningVersionV3+"/finish-map"}},{key:"MINING_ADD_TRAVEL_BAG_V2",get:function(){return"mining"+n._MiningVersionV3+"/add-to-travel-bag"}}]),e}());i.IS_PRO=!1,i.SHOW_LOG=!1,i.LINK_API="https://backend-dev.plantvsundead.com/",i.API_FARM_3="https://gather-dev.plantvsundead.com/",i.FARM_3_SOCKET="wss://gather-dev.plantvsundead.com",i.REPORT_BUG="bug-report/create",i.AVAILABLE_TOOL="available-tools",i.SUNFLOWERS="sunflowers",i.MY_TOOLS="my-tools",i.FARMING_STATS="farming-stats",i.GET_PLANTS_FILTER_V2="get-plants-filter-v2",i.GET_LANDS_FILTER="get-lands-filter",i.FARM_STATUS="farm-status",i.FARMS_V2="v2/farms/",i.FARMS="farms/",i.CLAIM_DEFAULT_LAND="lands/claim-default",i.MY_LANDS="my-lands",i.ADD_PLANT="farm/add-plant",i.FREE_SLOTS="farms/free-slots",i.MY_DEFAULT_LAND="my-default-land",i.MY_PLANTS="my-plants",i.MY_MATERIALS="my-materials",i.MY_SUNFLOWERS="my-sunflowers",i.WEATHER_TODAY="weather-today",i.WEATHER_NEXTDAY="weather/session-event-today-tomorrow",i.HARVEST="harvest",i.HARVEST_ALL="farms/harvest-all",i.APPLY_TOOL="farms/apply-tool",i.MY_MYSTERIOUS_POWDER="my-mysterious-powder",i.DEACTIVATE="deactivate/",i.DEACTIVATE_LAND="farm/removeLand",i.SWAP_SUNFLOWER="swap-sunflower",i.REMOVE_PLANT="farm/remove-plant",i.DAILY_QUEST="daily-quest",i.BUY_TOOLS="buy-tools",i.BUY_SUNFLOWERS="buy-sunflowers",i.REGISTER="captcha/register",i.VALIDATE="captcha/validate",i.LAND="land",i.FARM_OTHER="farms/other",i.WORLDTREE_DATAS="world-tree/datas",i.WORLDTREE_CLAIM_REWARD="world-tree/claim-reward",i.WORLDTREE_GIVEWATERS="world-tree/give-waters",i.WORLDTREE_CLAIM_YESTERDAY_REWARD="world-tree/claim-yesterday-reward",i.GET_TOKEN_FROM_RT="get-token-from-rt",i.V3_AUTH="v3/auth",i.LOGIN_META="v3/login",i.TIER_CONFIG="tier-config",i.UPGRADE_BARN="upgrade",i.EX_EXPEDITION="cages",i.EX_CAGES="cages",i.EX_UNDEAD_EGG="undead-egg",i.EX_UNDEAD="undead",i.EX_FEED="feed",i.EX_ASSIGN_UNDEAD="/assign-undead",i.EX_UN_ASSIGN_UNDEAD="/un-assign-undead",i.EX_LE_PVU_RATE="get-rate-le-to-pvu",i.EX_EXPEDITIONS="expeditions",i.EX_GET_MAX_EX_TIME="/expedition-time",i.EX_RECALL="/recall",i.EX_CLAIM_ITEMS="/claim-items",i.EX_CLAIM_EGG="/collect-egg",i.EX_GET_REGEN_DATA="/no-times-regen-by-le",i.EX_REGEN="/regen",i.GET_WORLD_MAP="map/route",i.GET_WORLD_MAP_pre="map-v3/route",i.GET_MAP_TYPE_pre="map-v3/map-type",i.BACK_ROUTE="map-v3/back-route",i.TRAVEL_BAG="inventory/travel-bag",i.TRAVEL_BAG_ADD="inventory/add-item-travel-bag",i.TRAVEL_BAG_REMOVE_ITEM="inventory/remove-item-travel-bag",i.CLAIM_TRAVEL_BAG="inventory/claim-travel-bag",i.INVENTORY="inventory",i.OPEN_TREASURE="treasure/open-treasure",i.LINK_BCSCAN="https://bscscan.com/address/",i.LIMIT_PAGE=10,i.MAP=16,i.VERSION="4.0",i.LANDSIZE=["S","M","L","XL","XXL"],i.LOCATIONJ=["A","B","C","D","E","F","G","H","I","J"],i.WATERALL={S:1,M:1,L:.95,XL:.9,XXL:.85},i.CROWALL={S:1,M:1,L:1,XL:.9,XXL:.9},i.FertilizerType=["FERTILIZER_SMALL","FERTILIZER_MEDIUM","FERTILIZER_LARGE","FERTILIZER_EXTRA_LARGE"],i.FertilizerValue=[10,30,80,150],i.FertilizerLevel=[0,200,500,1e3,1200],i.UndeadAffectionLevel=["I","II","III","IV","V","VI"],i.FARM_3_2_FARM="farms/v3.2",i.FARM_3_2_LAND="lands/v3.2/",i.MYLAND="my-lands",i.PLACELAND="/place",i.REMOVELAND="/remove",i.APPLY_TOOL_3_2="farms/v3.2/apply-tool",i.APPLY_TOOL_3_2_ALL="/apply-tool",i.harvest_all="/harvest-all",i.USE_fertilizer="/use-fertilizer",i.collect_material="/collect-material",i.SkillTree_GetConfig="skill-tree-gathering/items",i.SkillTree_GetUserData="skill-tree-gathering/me",i.SkillTree_PostUpgrade="skill-tree-gathering/upgrade",i.ENTER_GATHER="user/enter-gather",i.LEVEL_UP_GATHER="user/level-up-gather-skill",i.STAMINA_PRICE="user/stamina-price",i.BUY_STAMINA="user/buy-stamina",i.SKILLBOOK_KINGKEY_INFO="user/get-king-key-skill-book-nft",i.MARKET_GET_ITEMS="market/available-items",i.MARKET_BUY_ITEMS="market/buy-item",i.CRAFTING_GET_HEALTH="crafting/health",i.CRAFTING_MYSTIC="crafting/mystic",i.CRAFTING_SYNTHESIS="crafting/synthesis",i.CRAFTING_GET_CONFIG="crafting/get-config",i.UPGRADE_CONDITION="altar/upgrade-conditions",i.UPGRADE_UNDEAD="altar/undead/upgrade",i.UPGRADE_PLANT="altar/plant/upgrade",i.SACRIFICE_MYSTERIOUS_POWDER="altar/mysterious-powder/sacrifice",r._RF.pop()}}}));

System.register("chunks:///_virtual/ConfirmEndPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,o,r,e;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,r=n._decorator,e=n.Component}],execute:function(){var i;o._RF.push({},"96cdbbSiL5GKLT/Etse4A3z","ConfirmEndPopup",void 0);var u=r.ccclass;r.property,n("ConfirmEndPopup",u("ConfirmEndPopup")(i=function(n){function o(){return n.apply(this,arguments)||this}return t(o,n),o.prototype.start=function(){},o}(e))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/ConvertJsonObject.ts",["cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy,n=t.warn}],execute:function(){t({convertToArray:function(t){if(t&&"object"==typeof t&&"number"==typeof t.length)return t;return[]},convertToBoolean:function(t){if(void 0===t)return!1;if("string"==typeof t)return"true"==t||"TRUE"==t;return"boolean"==typeof t&&t},convertToPlainObject:function(t){if(null!=t&&"object"==typeof t&&"number"==typeof t.length)return n("arg is an array"),{};return null!=t&&"object"==typeof t?t:{}},convertToString:function(t){return void 0===t?"":"string"==typeof t?t:"number"==typeof t?""+t:""},convertToUnstableNumber:function(t){if(void 0===t)return 0;if("number"==typeof t)return t;if("string"==typeof t){var e=parseFloat(t);return isNaN(e)&&(e=0),e}return 0}}),e._RF.push({},"2a6f3spVKJFEKtGpluiZQCz","ConvertJsonObject",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ConvertJsonObject2.ts",["cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy,n=t.warn}],execute:function(){t({convertToArray:function(t){if(t&&"object"==typeof t&&"number"==typeof t.length)return t;return[]},convertToBoolean:function(t){if(void 0===t)return!1;if("string"==typeof t)return"true"==t||"TRUE"==t;return"boolean"==typeof t&&t},convertToPlainObject:function(t){if(null!=t&&"object"==typeof t&&"number"==typeof t.length)return n("arg is an array"),{};return null!=t&&"object"==typeof t?t:{}},convertToString:function(t){return void 0===t?"":"string"==typeof t?t:"number"==typeof t?""+t:""},convertToUnstableNumber:function(t){if(void 0===t)return 0;if("number"==typeof t)return t;if("string"==typeof t){var e=parseFloat(t);return isNaN(e)&&(e=0),e}return 0}}),e._RF.push({},"c6f8dlftsRE/bdL1RUDC51N","ConvertJsonObject",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/CraftingData.ts",["cc","./ConvertJsonObject2.ts","./Utility.ts","./InventoryData.ts"],(function(e){"use strict";var t,a,r,i,s,n,u;return{setters:[function(e){t=e.cclegacy},function(e){a=e.convertToUnstableNumber,r=e.convertToString,i=e.convertToPlainObject,s=e.convertToArray},function(e){n=e.MaterialRarity},function(e){u=e.ItemData}],execute:function(){t._RF.push({},"d15fcWhs3RF1Ki/C+oy2rw3","CraftingData",void 0);var l=e("MaterialCraftData",function(){function e(e){this.amount=0,this.costLE=0,this.rarity="",this.craftingName="",this.updateData(e)}var t=e.prototype;return t.updateData=function(e){this.amount=a(e.amount),this.costLE=a(e.costLE),this.rarity=r(e.rarity),this.craftingName=r(e.crafting)},t.getRarity=function(){switch(this.rarity){case"COMMON":return n.COMMON;case"RARE":return n.RARE;case"EPIC":return n.EPIC;case"LEGEND":return n.LEGEND;case"MYTHIC":return n.MYTHIC}return n.NONE},t.getTypeItem=function(){var e=this.craftingName.split(" ");if(e.length<1)return"";var t=e[1];return"TOKEN"==t?t:"MATERIAL"},e}()),o=["material_rare","material_epic","material_legendary","material_mythic","token_fragment"],c=["fertilizer_small","fertilizer_medium","fertilizer_large","FERTILIZER_extra_large","mysterious_powder_small","mysterious_powder_medium","mysterious_powder_large","king_key","epic_chest_key"],m=["common","rare","epic","legendary","mythic"],p=["novice","advanced","expert"];e("CraftingConfig",function(){function e(e){this.mysticMaterialsSameType=[],this.mysticMaterialsRandomType=[],this.synthesisItems=[],this.materialsValue=[],this.updateData(e)}var t=e.prototype;return t.updateData=function(e){for(var t=i(e.mystic),r=o,s=0;s<r.length;s++){var n=t[r[s]];if(null!=n){var u=new l(n.random),h=new l(n.sameType);this.mysticMaterialsSameType.push(h),this.mysticMaterialsRandomType.push(u)}}for(var y=i(e.synthetics),_=i(y.inputValue),E=i(_.material),f=0;f<m.length;f++){var v=m[f],I=E[v],R={rarity:v,type:"MATERIAL",value:a(I)};this.materialsValue.push(R)}for(var d=i(_.undeadEgg),g=0;g<m.length;g++){var L=m[g],T=d[L],D={rarity:L,type:"UNDEAD_EGG",value:a(T)};this.materialsValue.push(D)}for(var N=i(_.skillBook),C=0;C<p.length;C++){var M=p[C],k=N[M],w={rarity:M,type:"SKILL_BOOK",value:a(k)};this.materialsValue.push(w)}for(var O=i(y.outputValue),F=c,S=0;S<F.length;S++){var b=F[S],K=O[b],Z=this.getSynthesisData(b,K);this.synthesisItems.push(Z)}},t.getSynthesisData=function(e,t){var r,i=e.split("_");switch(e){case"fertilizer_small":r={name:"FERTILIZER (S)",type:i[0],spriteName:"FERTILIZER_S",value:a(t)};break;case"fertilizer_medium":r={name:"FERTILIZER (M)",type:i[0],spriteName:"FERTILIZER_M",value:a(t)};break;case"fertilizer_large":r={name:"FERTILIZER (L)",type:i[0],spriteName:"FERTILIZER_L",value:a(t)};break;case"FERTILIZER_extra_large":r={name:"FERTILIZER (L)",type:i[0].toLocaleLowerCase(),spriteName:"FERTILIZER_XL",value:a(t)};break;case"mysterious_powder_small":r={name:"POWDER (S)",type:i[1],spriteName:"POWDER_S",value:a(t)};break;case"mysterious_powder_medium":r={name:"POWDER (M)",type:i[1],spriteName:"POWDER_M",value:a(t)};break;case"mysterious_powder_large":r={name:"POWDER (L)",type:i[1],spriteName:"POWDER_L",value:a(t)};break;case"king_key":r={name:"KING KEY",type:i[1],spriteName:"KING_KEY",value:a(t)};break;case"epic_chest_key":r={name:"CHEST KEY",type:i[1],spriteName:"CHEST_KEY",value:a(t)}}return r.serverName="mysterious_powder_small"==e?"mysterious_powder".toUpperCase():e.toUpperCase(),r},e}()),e("MysticCraftData",function(){function e(e){this.craftedItems=[],this.description="",this.leValue=0,this.leBalance=0,this.ownerId="",this.status="",this.updateData(e)}return e.prototype.updateData=function(e){this.description=r(e.description),this.leValue=a(e.leValue),this.leBalance=a(e.leBalance),this.ownerId=r(e.ownerId),this.status=r(e.status);for(var t=s(e.craftedItems),i=t.length,n=0;n<i;n++){var l=t[n];if(l){var o=new u(l);this.craftedItems.push(o)}}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/DamageData.ts",["cc","./InGameEvent.ts","./Enums.ts"],(function(e){"use strict";var t,a,i,n,s,c;return{setters:[function(e){t=e.cclegacy,a=e._decorator},function(e){i=e.InGameEvent,n=e.InGameEventID},function(e){s=e.DamageType,c=e.EffectType}],execute:function(){var g;t._RF.push({},"ef826Xz8M1Fl4UvQq0SE9z+","DamageData",void 0);var r=a.ccclass,d=(a.property,e("DamageDetail",(function(e,t){this.damageType=void 0,this.damage=void 0,this.damageType=e,this.damage=t})));e("DamageData",r("DamageData")(g=function(){function e(){this.attacker=void 0,this.damages=void 0,this.Effects=void 0,this.IgnoreResPercent=new Map,this.isAoE=!1,this.AoERange=void 0,this.MainTargetDmgMulti=1,this.isPiercing=!1,this.PiercingDmgMultiply=1,this.LifeStealPercent=0,this.ArmorPiercingMultiply=1,this.damageStateEvent=void 0,this.Effects=[],this.damages=[]}var t=e.prototype;return t.AddDamage=function(e,t){var a=this.damages.findIndex((function(t){return t.damageType==e}));a<0?this.damages.push(new d(e,t)):this.damages[a].damage+=t},t.setAoE=function(e,t){void 0===t&&(t=1),this.isAoE=!0,this.AoERange=e,this.MainTargetDmgMulti=t},t.setPiercing=function(e){void 0===e&&(e=1),this.isPiercing=!0,this.PiercingDmgMultiply=e},t.MultiplyDamage=function(e){void 0===e&&(e=1);for(var t=0;t<this.damages.length;t++)this.damages[t].damage*=e},t.AddDamages=function(e){if(null!=e&&null!=e.length)for(var t=0;t<e.length;t++){var a=e[t];null!=a.damage?this.AddDamage(a.damageType,a.damage):null!=a.MoreDamagePercent&&this.AddDamage(a.damageType,this.getNormalDamage()*a.MoreDamagePercent/100)}},t.getNormalDamage=function(){for(var e=0;e<this.damages.length;e++)if(this.damages[e].damageType==s.Normal)return this.damages[e].damage;return 0},t.sumDamage=function(){return this.damages.reduce((function(e,t){return e+t.damage}),0)},t.AddEffects=function(e){var t=this;null!=e&&null!=e.length&&e.forEach((function(e,a,i){switch(e.EffectType){case c.Slow:t.AddSlowEffect(e);break;case c.Burn:case c.Amped:case c.Haste:case c.KickUp:case c.Res_Decrease:case c.Poison:case c.Feeble:case c.Bleeding:case c.Broken:case c.Stun:case c.Repel:case c.Blind:case c.Silence:case c.Fleet:t.Effects.push(e);break;case c.Fire_Blight:case c.Water_Blight:case c.Plant_Blight:case c.Earth_Blight:case c.Wind_Blight:case c.Thunder_Blight:case c.Dark_Blight:case c.Ice_Blight:t.Effects.push(e);break;default:console.error("Effect type not handle",e.EffectType)}}))},t.AddSlowEffect=function(e){this.Effects.push(e)},t.Normalize=function(){},t.on=function(e,t,a){null==this.damageStateEvent&&(this.damageStateEvent=new i),this.damageStateEvent.on(e,t,a)},t.notifyHit=function(e){this.damageStateEvent&&this.damageStateEvent.dispatchEvent(n.OnHit,this.attacker,e)},t.notifyDead=function(e){this.damageStateEvent&&this.damageStateEvent.dispatchEvent(n.OnDead,this.attacker,e)},e}())||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/DamageDecreasePercentEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./EffectBase.ts"],(function(e){"use strict";var t,a,c,r,n;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,c=e._decorator},function(e){r=e.PVEGameplayControl},function(e){n=e.EffectBase}],execute:function(){var f;a._RF.push({},"c89f7yumgFHiLP63YU3LK70","DamageDecreasePercentEffect",void 0);var s=c.ccclass;c.property,e("DamageDecreasePercentEffect",s("DamageDecreasePercentEffect")(f=function(e){function a(){for(var t,a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))||this).endEffectTime=0,t}t(a,e);var c=a.prototype;return c.Init=function(t,a,c){e.prototype.Init.call(this,t,a,c),this.endEffectTime=r.Instance.CurrentTime+a.EffectTime,c.root.data.statsData.DecreaseDamagePercent+=a.DecreaseDamagePercent},c.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.thisTarget.root.data.statsData.DecreaseDamagePercent-=this.data.DecreaseDamagePercent,this.node.destroy()},a.ApplyEffect=function(e,t){var a=e.getEffectWithType(t.EffectType);if(null!=a)a.endEffectTime=r.Instance.CurrentTime+a.data.EffectTime;else e.initEffect(t)},a}(n))||f);a._RF.pop()}}}));

System.register("chunks:///_virtual/DarkPowder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./PVE_GameplayControl.ts","./BulletBase.ts","./DamageData.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,i,o,n,a,r,s,c,l,u,h,d,f,v,m,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,c=t.Vec3,l=t.instantiate},function(t){u=t.SoundController,h=t.EnumSoundPVE},function(t){d=t.PVEGameplayControl},function(t){f=t.BulletBase},function(t){v=t.DamageData},function(t){m=t.InGameEventID},function(t){p=t.SkillBase}],execute:function(){var g,k,P,D,A,b,z;a._RF.push({},"617efJx+xRNTKCA1vZPYjNH","DarkPowder",void 0);var C=r.ccclass,T=r.property;t("DarkPowder",(g=C("DarkPowder"),k=T(s),P=T(s),g((b=e((A=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).castRange=void 0,e.NextTimeActive=0,o(e,"muzzlePrefab",b,n(e)),o(e,"bullet",z,n(e)),e.distance=void 0,e.cacheTarget=void 0,e}i(e,t);var a=e.prototype;return a.Init=function(t,e){this.root=t,this.skillData=e,this.castRange=e.castRange,this.schedule(this.checkTarget.bind(this),.1)},a.checkTarget=function(){var t=this;if(!(d.Instance.CurrentTime<this.NextTimeActive)&&this.root.canActiveSkill){var e=this.root.root.node.worldPosition,i=this.root.root.getAllTargetObjects(),o=!1;i.forEach((function(i,n,a){o||!o&&i.isUndead&&(t.distance=c.distance(e,i.node.worldPosition),t.distance<=t.castRange&&(t.activeSkill(i),o=!0))}))}},a.activeSkill=function(t){this.NextTimeActive=d.Instance.CurrentTime+this.skillData.Cooldown,this.cacheTarget=t,console.log("active DarkPowder skill",d.Instance.CurrentTime,this.NextTimeActive),this.root.root.stopMoving(),this.root.root.animationComponent.setAnim("Attack_2",!1),this.root.root.event.on(m.AttackAnimEvent,this.endCast,this)},a.endCast=function(){u.Instance.PlaySoundPvE(h.Worm_Dark_Powder_ShotFire),this.root.root.event.off(m.AttackAnimEvent,this.endCast,this);var t=new v;t.attacker=this.root.root,this.activeMuzzle(),t.AddEffects(this.skillData.EffectData),t.setAoE(this.skillData.AoERange),l(this.bullet).getComponent(f).init(this.root,this.cacheTarget.targetComponent,t)},a.activeMuzzle=function(){if(null!=this.muzzlePrefab){var t=l(this.muzzlePrefab);t.parent=this.root.getAttackPos(),t.setPosition(0,0,0),t.active=!0}},e}(p)).prototype,"muzzlePrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(A.prototype,"bullet",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=A))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/DashEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts"],(function(t){"use strict";var e,a,c,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,c=t._decorator,i=t.tween},function(t){s=t.EffectBase}],execute:function(){var n;a._RF.push({},"15e7c0VZWJFeqx+xjEvy0SF","DashEffect",void 0);var o=c.ccclass;c.property,t("DashEffect",o("DashEffect")(n=function(t){function a(){for(var e,a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))||this).updateCallback=void 0,e.curTween=void 0,e}e(a,t);var c=a.prototype;return c.Init=function(e,a,c){t.prototype.Init.call(this,e,a,c),this.updateCallback=a.updateCallback;var s=c.root;this.curTween=i(s.node).to(a.time,{worldPosition:a.targetPos}).call(this.RemoveEffect.bind(this)).start()},c.CancelEffect=function(){console.log(this.thisTarget.root.Id,"cancel dash effect"),this.curTween&&this.curTween.stop(),this.thisTarget.RemoveEffect(this),this.node.destroy(),this.data.cancelCallback&&this.data.cancelCallback()},c.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.node.destroy(),this.data.finishCallback?this.data.finishCallback():console.error("finish not handle")},c.update=function(t){this.updateCallback&&this.updateCallback()},a.ApplyEffect=function(t,e){t.initEffect(e)},a}(s))||n);a._RF.pop()}}}));

System.register("chunks:///_virtual/DecreaseResEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./EffectBase.ts"],(function(e){"use strict";var t,c,s,i,r;return{setters:[function(e){t=e.inheritsLoose},function(e){c=e.cclegacy,s=e._decorator},function(e){i=e.PVEGameplayControl},function(e){r=e.EffectBase}],execute:function(){var a;c._RF.push({},"261603kbqNIuJT0+RYsFv5b","DecreaseResEffect",void 0);var n=s.ccclass;s.property,e("DecreaseResEffect",n("DecreaseResEffect")(a=function(e){function c(){for(var t,c=arguments.length,s=new Array(c),i=0;i<c;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))||this).endEffectTime=0,t.curResDecresePercent=0,t.curStack=0,t}t(c,e);var s=c.prototype;return s.Init=function(t,c,s){e.prototype.Init.call(this,t,c,s),this.endEffectTime=i.Instance.CurrentTime+c.EffectTime,this.addStack(),this.isApplying=!0},s.addStack=function(){if(this.endEffectTime=i.Instance.CurrentTime+this.data.EffectTime,this.curStack<this.data.MaxStack){this.curStack++;var e=this.data.DecreasePercent_All;this.curResDecresePercent+=e,this.thisTarget.root.data.statsData.RES_PercentAll_Modifier-=e}},c.ApplyEffect=function(e,t){var c=e.getEffectWithType(t.EffectType);if(null!=c)c.addStack();else e.initEffect(t)},s.update=function(e){i.Instance.CurrentTime>=this.endEffectTime&&this.RemoveEffect()},s.RemoveEffect=function(){this.thisTarget.RemoveEffect(this);var e=this.thisTarget.root.data.statsData;1==this.isApplying&&(e.RES_PercentAll_Modifier+=this.curResDecresePercent),this.node.destroy()},c}(r))||a);c._RF.pop()}}}));

System.register("chunks:///_virtual/demoVFX.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,i,o,r,c,s,a,l,u,p,v;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,s=t.Node,a=t.director,l=t.Vec3,u=t.tween,p=t.v3,v=t.Component}],execute:function(){var f,m,F,g,V;r._RF.push({},"36359DGFUBNa6X8bzIBpZjy","demoVFX",void 0);var X=c.ccclass,d=c.property;t("demoVFX",(f=X("demoVFX"),m=d(s),f((V=n((g=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return n=t.call.apply(t,[this].concat(r))||this,i(n,"movingVFXs",V,o(n)),n}e(n,t);var r=n.prototype;return r.OnNextScene=function(t,n){a.loadScene(n)},r.start=function(){this.movingVFX()},r.movingVFX=function(){for(var t=0;t<this.movingVFXs.length;t++)this._movingVFX(this.movingVFXs[t])},r._movingVFX=function(t){var n=this,e=new l(t.position);u(t).delay(1).call((function(){t.active=!0})).to(.5,{position:p(e.x+400,e.y,e.z)}).call((function(){t.active=!1,t.setPosition(e),n._movingVFX(t)})).start()},n}(v)).prototype,"movingVFXs",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=g))||F));r._RF.pop()}}}));

System.register("chunks:///_virtual/DestroyPaticle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a,i,n,r,s,c,o,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.ParticleSystem,o=t.CurveRange,l=t.Component}],execute:function(){var p,h,f,v,u;r._RF.push({},"b313065eH1C+ZR5KSyP0pKR","DestroyPaticle",void 0);var z=s.ccclass,M=s.property;t("DestroyPaticle",(p=z("DestroyPaticle"),h=M(c),p((u=e((v=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"particle",u,n(e)),e.startSizeXInfo=new o,e.startSizeYInfo=new o,e.startRateOverTimeInfo=new o,e}a(e,t);var r=e.prototype;return r.turnOffParticle=function(){this.saveDataParticle(),this.particle.rateOverTime.constant=0,this.particle.rateOverTime.constantMax=0,this.particle.rateOverTime.constantMin=0,this.particle.startSizeX.constant=0,this.particle.startSizeX.constantMax=0,this.particle.startSizeX.constantMin=0,this.particle.startSizeY.constant=0,this.particle.startSizeY.constantMax=0,this.particle.startSizeY.constantMin=0},r.turnOnParticle=function(){this.particle.startSizeX.constant=this.startSizeXInfo.constant,this.particle.startSizeX.constantMax=this.startSizeXInfo.constantMax,this.particle.startSizeX.constantMin=this.startSizeXInfo.constantMin,this.particle.rateOverTime.constant=this.startRateOverTimeInfo.constant,this.particle.rateOverTime.constantMax=this.startRateOverTimeInfo.constantMax,this.particle.rateOverTime.constantMax=this.startRateOverTimeInfo.constantMin},r.saveDataParticle=function(){this.startSizeXInfo.constant=this.particle.startSizeX.constant,this.startSizeXInfo.constantMax=this.particle.startSizeX.constantMax,this.startSizeXInfo.constantMin=this.particle.startSizeX.constantMin,this.startRateOverTimeInfo.constant=this.particle.rateOverTime.constant,this.startRateOverTimeInfo.constantMax=this.particle.rateOverTime.constantMax,this.startRateOverTimeInfo.constantMin=this.particle.rateOverTime.constantMax},e}(l)).prototype,"particle",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=v))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/DirectionBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./Enums.ts","./BulletBase.ts"],(function(t){"use strict";var e,o,i,a,n,s,r,l;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,a=t.Vec3,n=t.instantiate},function(t){s=t.PVEGameplayControl},function(t){r=t.GameplayTeam},function(t){l=t.BulletBase}],execute:function(){var c;o._RF.push({},"a75374aMkdCaaieIbEJQS5P","DirectionBullet",void 0);var u=i.ccclass;i.property,t("DirectionBullet",u("DirectionBullet")(c=function(t){function o(){for(var e,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).attackPos=void 0,e.bulletAoe=70,e.moveDir=void 0,e.team=void 0,e.hitTarget=[],e}e(o,t);var i=o.prototype;return i.init=function(e,o,i,a,n){if(void 0===a&&(a=800),void 0===n&&(n=70),null!=o&&null!=o.node){t.prototype.init.call(this,e,o,i,a),this.team=e.root.team,this.attackPos=e.node.getWorldPosition().clone();var s=1.2*e.root.data.attackData.AttackRange,r=o.node.getWorldPosition().clone();this.moveDir=r.subtract(this.attackPos).normalize(),this.lastTargetPos=this.attackPos.clone().add(this.moveDir.clone().multiply3f(s,s,0)),this.rotate(this.lastTargetPos),this.bulletAoe=n}else this.node.destroy()},i.update=function(e){t.prototype.update.call(this,e),this.checkHit()},i.checkHit=function(){var t=this,e=this.team==r.EnemyTeam?s.Instance.myTeamObject:s.Instance.enemiesObject,o=this.node.worldPosition;e.forEach((function(e,i,n){a.distance(o,e.targetComponent.getTargetPos().worldPosition)<=t.bulletAoe&&t.hitOne(e)}))},i.hitOne=function(t){if(!(this.hitTarget.indexOf(t)>=0)){if(this.hitTarget.push(t),this.explosionPrefab){var e=n(this.explosionPrefab);e.parent=s.Instance.getEffParent(),e.worldPosition=t.targetComponent.getTargetPos().worldPosition,e.active=!0}t&&t.TakeDamage(this.damageData)}},i.syncTargetPos=function(){},i.hit=function(){this.target=null,t.prototype.hit.call(this)},o}(l))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/DropDown.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,o,i,l,c,a,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,c=e.Label,a=e.Toggle,u=e.Node,s=e.Component}],execute:function(){var p,g,h,f,C,D,b,m,y;i._RF.push({},"4085eDzZjhAR6WzE8W/HEsX","DropDown",void 0);var v=l.ccclass,d=l.property;e("DropDown",(p=v("DropDown"),g=d(c),h=d(a),f=d(u),p((b=t((D=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,r(t,"CurrentItem",b,o(t)),r(t,"CurrentToggle",m,o(t)),r(t,"content",y,o(t)),t}n(t,e);var i=t.prototype;return i.onLoad=function(){this.CurrentItem.string=this.CurrentToggle.node.name},i.OnBtnOpenClick=function(){this.content.active=!this.content.active},i.OnToggleCheck=function(e){this.CurrentToggle=e,this.CurrentItem.string=this.CurrentToggle.node.name,this.content.active=!1},t}(s)).prototype,"CurrentItem",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(D.prototype,"CurrentToggle",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(D.prototype,"content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=D))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/EditorHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,e,i,o,n,s,a,c;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.TextAsset,c=t.Component}],execute:function(){var l,p,u,d,y;n._RF.push({},"d38442O6KdBhpOu2Tvssoan","EditorHelper",void 0);var f=s.ccclass,v=s.property;t("EditorHelper",(l=f("EditorHelper"),p=v(a),l((y=r((d=function(t){function r(){for(var r,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return r=t.call.apply(t,[this].concat(n))||this,i(r,"csv",y,o(r)),r}return e(r,t),r.prototype.start=function(){for(var t=this.csv.text.split("\n"),r={},e={Common:0,Rare:1,Epic:2,Legendary:3,Mythic:4},i=2;i<t.length;i++){var o=t[i].split("\t"),n={};n.isMaterial=o[1].trim(),n.name=o[2].trim(),n.type=o[4],n.rarity=e[o[5]],n.dropFrom=o[6],n.itemPerSlot=o[10],n.description=o[12].trim(),r[o[0]]=n}console.log(JSON.stringify(r))},r}(c)).prototype,"csv",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=d))||u));n._RF.pop()}}}));

System.register("chunks:///_virtual/EffectBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./PVE_ResourceManager.ts"],(function(t){"use strict";var e,n,r,i,a,s,c,o,f;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){i=t.cclegacy,a=t._decorator,s=t.Component,c=t.instantiate},function(t){o=t.PVEGameplayControl},function(t){f=t.PVEResourceManager}],execute:function(){var u;i._RF.push({},"74f2drM18NNUIyedYrDpF23","EffectBase",void 0);var p=a.ccclass;a.property,t("EffectBase",p("EffectBase")(u=function(t){function i(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).effectType=void 0,e.isApplying=!1,e.thisTarget=void 0,e.data=void 0,e.endEffectTime=void 0,e}e(i,t);var a=i.prototype;return a.Init=function(t,e,n){this.data=e,this.effectType=t,this.thisTarget=n,this.ApplyVfx()},a.update=function(t){this.endEffectTime&&this.endEffectTime>0&&o.Instance.CurrentTime>=this.endEffectTime&&this.RemoveEffect()},a.ApplyVfx=function(){var t=n(r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.data.Vfx){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,f.Instance.GetPrefab(this.data.Vfx.ResourcePath);case 4:if(e=t.sent){t.next=7;break}return t.abrupt("return");case 7:(n=c(e)).parent=this.node,n.setWorldPosition(this.thisTarget.targetPos.worldPosition.clone());case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.BeginApplyEff=function(){},a.RemoveEffect=function(){},a.CancelEffect=function(){},i}(s))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/EffParentSetter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,o,a,l,f,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty,i=e.inheritsLoose,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.CCBoolean,f=e.Node,c=e.Component}],execute:function(){var u,s,p,b,h,y,d,E,g,m,v,z,C,P;o._RF.push({},"6468bcuqZZGJItCrOGpJKyL","EffParentSetter",void 0);var w=a.ccclass,S=a.property,B=e("EffChildElement",(u=w("EffChildElement"),s=S(l),p=S(l),b=S(f),u((d=t((y=function(){r(this,"isFront",d,this),r(this,"isBack",E,this),r(this,"effNode",g,this)}).prototype,"isFront",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=t(y.prototype,"isBack",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=t(y.prototype,"effNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=y))||h));e("EffParentSetter",(m=w("EffParentSetter"),v=S([B]),m((P=t((C=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"effs",P,n(t)),t}return i(t,e),t.prototype.onEnable=function(){},t}(c)).prototype,"effs",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=C))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/EggItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts"],(function(e){"use strict";var t,i,a,r,n,o,s,l,c,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,s=e.Label,l=e.Sprite,c=e.SpriteFrame,u=e.Component},function(e){p=e.ResourcesManager}],execute:function(){var m,b,h,I,g,d,f,S,N,E,v,F,y,D,C;e("StateColor",void 0),n._RF.push({},"04a06nppmpL6aHp8oDNMBw0","EggItem",void 0);var _,A=o.ccclass,M=o.property;!function(e){e.UnSelected="#A5A5A5",e.Selected="#FF3C3C"}(_||(_=e("StateColor",{})));e("EggItem",(m=A("EggItem"),b=M(s),h=M(l),I=M(l),g=M(c),d=M(l),f=M(c),m((E=t((N=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"ItemName",E,r(t)),a(t,"Icon",v,r(t)),a(t,"Base",F,r(t)),a(t,"baseSpriteFrame",y,r(t)),a(t,"baseName",D,r(t)),a(t,"baseNameSpriteFrame",C,r(t)),t.data=void 0,t.ItemNameString=["COMMON","RARE","EPIC","LEGENDARY","MYTHIC"],t.ItemIDString=["COMMON_UNDEAD_EGG","RARE_UNDEAD_EGG","EPIC_UNDEAD_EGG"],t.callback=void 0,t.cb=void 0,t.index=0,t}i(t,e);var n=t.prototype;return n.Init=function(e,t,i,a){var r=this;void 0===t&&(t=!1),void 0===i&&(i=null),void 0===a&&(a=0),this.data=e;var n=e.rarity;if(this.Base.spriteFrame=this.baseSpriteFrame[n-1],this.ItemName.string=this.ItemNameString[n-1],this.cb=i,this.index=a,"hatched"==e.status)t&&this.Icon.node.setScale(.4,.4,1),p.Instance.GetNFTEgg(n,function(e){this.Icon.spriteFrame=e}.bind(this));else{t&&this.Icon.node.setScale(.52,.52,1);p.Instance.LoadMaterialSprite(this.ItemIDString[n-1],(function(e){r.Icon.spriteFrame=e}))}null!=this.baseName&&(this.baseName.spriteFrame=this.baseNameSpriteFrame[n-1])},n.InitOnSelect=function(e,t){this.Init(e)},n.select=function(){this.callback&&this.callback(this.data._id,this.data)},n.onClick=function(){null!=this.cb&&this.cb(this)},t}(u)).prototype,"ItemName",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(N.prototype,"Icon",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(N.prototype,"Base",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(N.prototype,"baseSpriteFrame",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(N.prototype,"baseName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(N.prototype,"baseNameSpriteFrame",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=N))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/EngineHelper.ts",["cc"],(function(e){"use strict";var n,t;return{setters:[function(e){n=e.cclegacy,t=e._decorator}],execute:function(){var c;n._RF.push({},"968c58oiXVLH7I9yh+cPsZg","EngineHelper",void 0);var r=t.ccclass;t.property,e("EngineHelper",r("EngineHelper")(c=function(){function e(){}return e.TouchEndWithoutStart=function(e){},e}())||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/Enums.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CloneableObject.ts"],(function(t){"use strict";var e,a,i,n;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,i=t._decorator},function(t){n=t.default}],execute:function(){t({AttackType:void 0,ConfigType:void 0,DamageType:void 0,EffectType:void 0,ElementType:void 0,GameplayTeam:void 0}),a._RF.push({},"8df63jGBwZFhqhANRxBAsAr","Enums",void 0);var s,r,c,o,h;i.ccclass,i.property;!function(t){t[t.MyTeam=0]="MyTeam",t[t.EnemyTeam=1]="EnemyTeam"}(s||(s=t("GameplayTeam",{}))),function(t){t[t.Fire=0]="Fire",t[t.Water=1]="Water",t[t.Ice=2]="Ice",t[t.Thunder=3]="Thunder",t[t.Wind=4]="Wind",t[t.Plant=5]="Plant",t[t.Earth=6]="Earth",t[t.Dark=7]="Dark"}(r||(r=t("ConfigType",{}))),function(t){t[t.Beast=0]="Beast",t[t.Aqua=1]="Aqua",t[t.Flora=2]="Flora",t[t.Spirit=3]="Spirit",t[t.Avian=4]="Avian",t[t.Mineral=5]="Mineral",t[t.Insect=6]="Insect",t[t.Dragon=7]="Dragon"}(c||(c=t("ElementType",{}))),function(t){t[t.NormalAttack=0]="NormalAttack",t[t.Aura=1]="Aura"}(o||(o=t("AttackType",{}))),function(t){t[t.None=0]="None",t[t.Slow=1]="Slow",t[t.Burn=2]="Burn",t[t.Poison=3]="Poison",t[t.Res_Decrease=5]="Res_Decrease",t[t.Feeble=6]="Feeble",t[t.Blind=7]="Blind",t[t.Silence=8]="Silence",t[t.Stun=9]="Stun",t[t.Bleeding=10]="Bleeding",t[t.Broken=11]="Broken",t[t.Repel=12]="Repel",t[t.KickUp=50]="KickUp",t[t.Amped=100]="Amped",t[t.Haste=101]="Haste",t[t.Regen=102]="Regen",t[t.Fleet=103]="Fleet",t[t.DamageDecreasePercent=103]="DamageDecreasePercent",t[t.Dash=200]="Dash",t[t.Fire_Blight=300]="Fire_Blight",t[t.Water_Blight=301]="Water_Blight",t[t.Plant_Blight=302]="Plant_Blight",t[t.Earth_Blight=303]="Earth_Blight",t[t.Wind_Blight=304]="Wind_Blight",t[t.Thunder_Blight=305]="Thunder_Blight",t[t.Dark_Blight=306]="Dark_Blight",t[t.Ice_Blight=307]="Ice_Blight"}(h||(h=t("EffectType",{})));var l;t("SkillDamageData",function(){function t(){this.damageType=void 0,this.damage=0,this.damagePerMagic=0,this.damagePerAttack=0}return t.getDamage=function(t,e,a){var i=t.damage;return t.damagePerMagic&&(i+=t.damagePerMagic*a),t.damagePerAttack&&(i+=t.damagePerAttack*e),i},t}());!function(t){t[t.None=0]="None",t[t.Normal=1]="Normal",t[t.Magic_Fire=2]="Magic_Fire",t[t.Magic_Water=3]="Magic_Water",t[t.Magic_Ice=4]="Magic_Ice",t[t.Magic_Thunder=5]="Magic_Thunder",t[t.Magic_Wind=6]="Magic_Wind",t[t.Magic_Plant=7]="Magic_Plant",t[t.Magic_Earth=8]="Magic_Earth",t[t.Magic_Dark=9]="Magic_Dark",t[t.Chaos=10]="Chaos",t[t.Regen=11]="Regen",t[t.Pure=12]="Pure"}(l||(l=t("DamageType",{})));t("GameObjectConfigData",function(){function t(t){this.ID=0,this.code="",this.level=0,this.ManaCost=0,this.LECost=0,this.configType=0,this.Rarity="",this.CombatPower=0,this.attackData=null,this.statsData=null,this.ObjectType=void 0,this.Species=void 0,this.Type=void 0,this.HP=[],this.ATK=[],this.DEF=[],this.MAG=[],this.AS=0,this.MS=0,this.Range=0,this.LifeTime=0,this.DefaultAttackDamage=[],this.Skills=[],this.DefaultAttackAnimName="",this.Target="",this.updateData(t)}var e=t.prototype;return e.updateData=function(t){null!=t&&(this.code=t.code,this.level=t.level,this.Rarity=t.Rarity,this.CombatPower=t.CombatPower,this.LECost=t.LECost,this.ManaCost=t.ManaCost,this.attackData=t.attackData,this.statsData=t.statsData,this.configType=t.configType,this.Skills=t.SkillData,this.statsData&&(this.Species=this.statsData.Species,this.LifeTime=this.statsData.LifeTime,this.DefaultAttackAnimName=this.statsData.DefaultAttackAnimName))},e.getElementName=function(){switch(this.configType){case r.Dark:return"dark";case r.Earth:return"earth";case r.Thunder:return"electric";case r.Fire:return"fire";case r.Ice:return"ice";case r.Plant:return"plant";case r.Water:return"water";case r.Wind:return"wind"}return""},t}()),t("SkillData",(function(){this.ID=void 0,this.Cooldown=0,this.PercentActive=void 0,this.EffectData=void 0,this.AoERange=void 0,this.AoEDecreasePercent=void 0,this.castRange=void 0})),t("EffectData",(function(){this.EffectId=void 0,this.EffectTime=void 0,this.SlowPercent=0,this.EffectType=void 0,this.BurnHPPercent=void 0,this.AttackSpeedPercent=void 0,this.Vfx=void 0,this.StackDmgPerHit=void 0,this.DmgMultiply=void 0,this.damageTypeImmu=l.None})),t("EffectVfx",(function(){this.ResourcePath=void 0})),t("SkillLevelData",function(t){function a(){for(var e,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this).Level=void 0,e.Skills=void 0,e}return e(a,t),a}(n)),t("DefConfig",(function(){this.maxDecreasePercent=void 0,this.skipDamage=void 0,this.NormalDamage=void 0})),t("SpellCastType",{Road:"Road",Target:"Target",AoE:"AoE"}),t("SpellConfig",(function(){this.CastType=void 0,this.CastRange=void 0}));a._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OneToMultiListener.ts"],(function(e){"use strict";var n,t,r,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator},function(e){i=e.OneToMultiListener}],execute:function(){var u,o;e("EventID",void 0),t._RF.push({},"9f491zDGu9JLJ5iHNyBo/4k","EventManager",void 0);var s,c=r.ccclass;r.property;!function(e){e[e.UpdateMusicSound=0]="UpdateMusicSound"}(s||(s=e("EventID",{})));e("EventManager",c("EventManager")(((o=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(i)).handlers={},u=o))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/ExpeditionConfig.ts",["cc"],(function(i){"use strict";var t,n;return{setters:[function(i){t=i.cclegacy,n=i._decorator}],execute:function(){var e,o;t._RF.push({},"4add94qilVHA6rDuzsx2xsS","ExpeditionConfig",void 0);var c=n.ccclass;n.property,i("ExpeditionConfig",c("ExpeditionConfig")(((o=function(){}).EST_CHECK_MARK=4,e=o))||e);t._RF.pop()}}}));

System.register("chunks:///_virtual/ExpeditionHelper.ts",["cc","./ConfigApi.ts","./Utility.ts","./ResourcesManager.ts","./UIPopupManager.ts","./ExpeditionItem.ts"],(function(e){"use strict";var t,r,n,i,a,o,u;return{setters:[function(e){t=e.cclegacy,r=e._decorator},function(e){n=e.ConfigApi},function(e){i=e.Utility},function(e){a=e.ResourcesManager},function(e){o=e.UIPopupManager},function(e){u=e.ExpeditionCageState}],execute:function(){var s;t._RF.push({},"c355eIERe9HxI668MCr+B6N","ExpeditionHelper",void 0);var c=r.ccclass;r.property,e("ExpeditionHelper",c("ExpeditionHelper")(s=function(){function e(){}return e.CheckStatus=function(e){var t=JSON.parse(e);return 0==t.status?t:(o.Instance.ShowToast("Error",a.Instance.GetErrorMessage(t.status),0),null)},e.GetTotalLifeTimeLeft=function(e){var t=null!=e.skillTreeBuff?e.skillTreeBuff.expiryDate:e.expiryDate,r=Date.parse(t),n=i.GetTimeNow(),a=0;if(e.status==u.OnExpedition){var o=e.current_expedition;if(null==o)return 0;a=Math.floor((r-Date.parse(o.startTime))/1e3)}else a=Math.floor((r-n)/1e3);return a},e.GetTotalSecTimeLeft=function(e){var t=e.estEndTime,r=Date.parse(t),n=i.GetTimeNow();return Math.floor((r-n)/1e3)},e.GetCurUndeadFatigue=function(e){var t=i.GetTimeNow();if(e.status==u.OnExpedition)return e.currentFatigue;var r=Date.parse(e.lastTimeRegenFatigue),a=Math.floor((t-r)/1e3),o=Math.max(a/n.TIME_REGEN_FATIGUE(),0);return Math.min(e.currentFatigue+o*e.fatigueRegenPerHour,e.maxFatigue)},e}())||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/ExpeditionItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ExpeditionServiceApi.ts","./UserModel.ts","./SpriteRatioHelper.ts","./Utility.ts","./ResourcesManager.ts","./UIPopupManager.ts","./ExpeditionHelper.ts"],(function(e){"use strict";var t,i,n,a,o,r,l,s,d,u,c,f,p,h,g,m,b,v,y,S,E,w,x,L,C,T,B,A,P,U;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.Node,s=e.Sprite,d=e.sp,u=e.Label,c=e.SpriteFrame,f=e.UITransform,p=e.Widget,h=e.Animation,g=e.Material,m=e.instantiate,b=e.ParticleSystem,v=e.tween,y=e.Vec3,S=e.math,E=e.Tween,w=e.randomRangeInt,x=e.Component},function(e){L=e.ExpeditionServiceApi},function(e){C=e.UserModel},function(e){T=e.SpriteRatioHelper},function(e){B=e.Utility},function(e){A=e.ResourcesManager},function(e){P=e.UIPopupManager},function(e){U=e.ExpeditionHelper}],execute:function(){var I,k,z,F,O,_,M,N,R,D,H,W,V,G,j,q,Y,K,Z,J,Q,X,$,ee,te,ie,ne,ae,oe,re,le,se,de,ue,ce,fe,pe,he,ge,me,be,ve,ye,Se,Ee,we,xe,Le,Ce,Te,Be,Ae,Pe,Ue,Ie,ke,ze,Fe,Oe,_e,Me,Ne,Re,De,He,We,Ve,Ge,je,qe,Ye,Ke,Ze;e({ExpeditionBG:void 0,ExpeditionCageState:void 0,UndeadAnimName:void 0}),o._RF.push({},"1aa8acOEp9HdrKFvluxh5dZ","ExpeditionItem",void 0);var Je,Qe,Xe,$e=r.ccclass,et=r.property,tt=1e3;!function(e){e[e.Empty=0]="Empty",e[e.Ready=1]="Ready",e[e.OnExpedition=2]="OnExpedition",e[e.OnCompleteExpedition=3]="OnCompleteExpedition",e[e.OnTired=4]="OnTired",e[e.OnDead=5]="OnDead",e[e.HasEgg=6]="HasEgg"}(Je||(Je=e("ExpeditionCageState",{}))),function(e){e[e.Empty=0]="Empty",e[e.Normal=1]="Normal",e[e.Feeding=2]="Feeding"}(Qe||(Qe=e("ExpeditionBG",{}))),function(e){e.Idle="Idle",e.Sleep="Sleep",e.Fall_Asleep="Fall_Asleep",e.Tired="Tired",e.Move="Move",e.Wake_Up="Wake_Up",e.Happy="Happy"}(Xe||(Xe=e("UndeadAnimName",{})));e("ExpeditionItem",(I=$e("ExpeditionItem"),k=et([l]),z=et(l),F=et(l),O=et(l),_=et(s),M=et(s),N=et(T),R=et(d.Skeleton),D=et(s),H=et(u),W=et(u),V=et(u),G=et(u),j=et(l),q=et(l),Y=et(u),K=et(s),Z=et(c),J=et(c),Q=et(u),X=et(f),$=et(f),ee=et(p),te=et(s),ie=et(u),ne=et(h),ae=et(l),oe=et([l]),re=et(l),le=et(g),se=et(l),de=et([c]),ue=et([c]),ce=et(s),fe=et([l]),I((ge=t((he=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).undeadPosY={oxxfome:0,nasherr:-50,slugma:0,valefang:0,slithum:0,tbluyr:-30,torramn:0,tyrannux:-10,emprezza:-10},t.manager=void 0,t.data=void 0,t.id=void 0,t.haveAnim=!1,n(t,"states",ge,a(t)),n(t,"noneEmptyState",me,a(t)),n(t,"nodeBtnNurture",be,a(t)),n(t,"glowObj",ve,a(t)),n(t,"backgroundBox",ye,a(t)),n(t,"undeadView",Se,a(t)),n(t,"undeadView2",Ee,a(t)),n(t,"undeadSpine",we,a(t)),n(t,"affectionProgress",xe,a(t)),n(t,"affectionLevel",Le,a(t)),n(t,"affectionLevel2",Ce,a(t)),n(t,"affectionLevelProgress",Te,a(t)),n(t,"affectionLevelUpTimeLeft",Be,a(t)),n(t,"affectionLevelNormal",Ae,a(t)),n(t,"affectionLevelMax",Pe,a(t)),n(t,"timeLeft",Ue,a(t)),n(t,"fatigueProgress",Ie,a(t)),n(t,"fatigueProgressReady",ke,a(t)),n(t,"fatigueProgresstired",ze,a(t)),n(t,"fatiguePercent",Fe,a(t)),n(t,"fatigueTiredMask",Oe,a(t)),n(t,"fatigueParentMask",_e,a(t)),n(t,"fatigueMaskWidget",Me,a(t)),n(t,"bgSeason",Ne,a(t)),n(t,"cageIdLabel",Re,a(t)),n(t,"animCleanBarn",De,a(t)),n(t,"parentCleanBarnEff",He,a(t)),t.cacheAnimObjectActive=void 0,n(t,"feedEff",We,a(t)),n(t,"feedEffCom",Ve,a(t)),n(t,"feedComMaterial",Ge,a(t)),n(t,"undeadShadow",je,a(t)),n(t,"stageBackground",qe,a(t)),n(t,"season_bg",Ye,a(t)),n(t,"seasonBgSprite",Ke,a(t)),n(t,"feedUndeadBtn",Ze,a(t)),t.readyTimeOut=void 0,t}i(t,e);var o=t.prototype;return o.start=function(){this.SelectThis(!1),this.schedule(this.updateSec,15),this.undeadSpine.setCompleteListener(this.animCompleted.bind(this)),this.initCache()},o.initCache=function(){if(null==this.cacheAnimObjectActive){this.cacheAnimObjectActive=[];for(var e=0;e<this.parentCleanBarnEff.children.length;e++)this.cacheAnimObjectActive.push(this.parentCleanBarnEff.children[e].active)}},o.onDestroy=function(){null!=this.readyTimeOut&&clearTimeout(this.readyTimeOut)},o.refreshView=function(e,t){if(this.manager=e,this.data=t,this.id=t._id,this.cageIdLabel.string=this.id,this.parentCleanBarnEff.active=!1,this.affectionLevel.node.parent.active=!0,this.fatigueProgress.node.parent.active=!0,this.undeadSpine.node.active=!0,null==this.cacheAnimObjectActive)this.initCache();else for(var i=0;i<this.parentCleanBarnEff.children.length;i++)this.parentCleanBarnEff.children[i].active=this.cacheAnimObjectActive[i];if(null==t.undead)t.hasEgg&&1==t.hasEgg?this.activeIndex(Je.HasEgg):this.emptyState();else{this.cageIdLabel.string=t.undead.tokenId+" : "+this.cageIdLabel.string,this.loadUndeadData(t.undead);var n=t.undead.status,a=t.undead,o=U.GetCurUndeadFatigue(a)/a.maxFatigue;U.GetTotalLifeTimeLeft(a)<=0?this.activeIndex(Je.OnDead):n===Je.OnExpedition?this.expeditionState(t.undead):o<.5?this.tiredState():this.readyState()}},o.updateSec=function(){if(null!=this.data&&null!=this.data.undead){var e=this.data.undead;if(this.updateFatigue(e),1==this.states[Je.OnExpedition].active){var t=e.current_expedition,i=U.GetTotalSecTimeLeft(t);i+=60,this.timeLeft.string=B.ConvertSecondsToTime(i),i<=0&&(this.activeIndex(Je.OnCompleteExpedition),this.manager.uiNotifyExpedition.showNotify((function(t){t.showNotify(e)})))}e.affectionExp>=tt&&this.countdownLevelUp(e)<=0&&this.manager.showExpedition()}},o.countdownLevelUp=function(e){if(e.affectionExp>=tt)for(var t=e.affectionLevel,i=0;i<e.timeToUpLv.length;i++)if(e.timeToUpLv[i].level===t+1){var n=Date.parse(e.timeToUpLv[i].date),a=B.GetTimeNow(),o=Math.floor((n-a)/1e3);return this.affectionLevelUpTimeLeft.string=B.ConvertSecondsToTime(o)+" left",o}return 999},o.SelectThis=function(e){null!=this.data&&null!=this.data.undead&&(this.backgroundBox.spriteFrame=e?this.stageBackground[Qe.Feeding]:this.stageBackground[Qe.Normal])},o.doAnimFeed=function(e,t,i,n){for(var a=null,o=0;o<this.feedEff.length;o++)if(this.feedEff[o].name===t){a=this.feedEff[o];break}if(null==a)return console.log(this.feedComMaterial),void A.Instance.LoadMaterialTexture(t,function(t){this.feedComMaterial.passes[0].properties.mainTexture=t;var a=m(this.feedEffCom);console.log("tex",t,a.getComponent(b)),a.getComponent(b)._materials[0].setProperty("mainTexture",t),this.interalAnim(a,i,e,n)}.bind(this));if(null==a)return console.log("prefab null",t),void this.loadUndeadData(e);var r=m(a);this.interalAnim(r,i,e,n)},o.interalAnim=function(e,t,i,n){e.setParent(this.manager.node),e.setWorldPosition(t.worldPosition),B.PlayParticle(e);var a=t.worldPosition,o=this.undeadSpine.node.worldPosition,r=a.clone();v({a:0}).to(.4,{a:100},{progress:function(t,i,n,l){return r=y.lerp(r,a,o,l),e.setWorldPosition(r),t+(i-t)*l},easing:"linear"}).call(function(){this.loadUndeadData(i),n&&n()}.bind(this)).start(),setTimeout((function(){e&&e.destroy()}),3e3)},o.updateFatigue=function(e){var t=U.GetCurUndeadFatigue(e);this.nodeBtnNurture.active=t<e.maxFatigue;var i=e.maxFatigue&&e.maxFatigue>0?t/e.maxFatigue:0;if(this.fatigueProgress.spriteFrame=i>=.5?this.fatigueProgressReady:this.fatigueProgresstired,console.log("fatigueProgress",i),this.fatigueProgress.fillRange=i,this.fatiguePercent.string=parseInt((100*i).toString())+"%",i<.5){var n=this.fatigueTiredMask.contentSize.clone();n.height=S.absMax(this.fatigueParentMask.height*(1-i),20),this.fatigueTiredMask.setContentSize(n),this.fatigueMaskWidget.updateAlignment()}},o.loadUndeadData=function(e){var t=this;null!=this.readyTimeOut&&clearTimeout(this.readyTimeOut),this.data.undead=e;var i=e.code.toLowerCase();this.haveAnim=!0,this.undeadSpine.node.active=!0,this.undeadView.node.active=!1;var n=0;null==this.undeadPosY[i]?console.error("undead",i,"not config y position"):n=this.undeadPosY[i],this.undeadSpine.node.setPosition(0,n,0),this.undeadShadow.setPosition(0,n-10,0),E.stopAllByTarget(this.undeadShadow);var a=new y(.95,.95,1),o=new y(1,1,1);v(this.undeadShadow).to(.5,{scale:a}).delay(.05).to(.5,{scale:o}).union().repeatForever().start(),this.undeadSpine.node.active=!1,A.Instance.LoadUndeadSpine(i,e.stage,(function(e,i){e&&console.error(e),null!=i&&(t.undeadSpine.node.active=!0,t.undeadSpine.skeletonData=i,t.undeadSpine.setAnimation(0,Xe.Idle,!0),t.undeadSpine.setBonesToSetupPose(),t.undeadSpine.setCompleteListener(t.animCompleted.bind(t)))})),this.updateFatigue(e),this.affectionProgress.fillRange=e.affectionExp/tt,this.affectionLevel.string="LV."+e.affectionLevel,this.affectionLevel2.string="LV."+e.affectionLevel;var r=e.affectionLevel>=e.maxAffectionLevel;this.affectionLevelMax.active=r,this.affectionLevelNormal.active=!r;for(var l=0;l<this.feedUndeadBtn.length;l++)this.feedUndeadBtn[l].active=!r;this.affectionLevelProgress.string=e.affectionExp+"/"+tt,e.affectionExp>=tt?this.countdownLevelUp(e):this.affectionLevelUpTimeLeft.node.active=!1;for(var s=C.getUndeadSeasonBg(e.tokenId),d=0,u=0;u<this.season_bg.length;u++)if(s==this.season_bg[u].name){d=u;break}this.seasonBgSprite.spriteFrame=this.season_bg[d]},o.emptyState=function(){this.activeIndex(Je.Empty),this.backgroundBox.spriteFrame=this.stageBackground[Qe.Empty]},o.readyState=function(){this.activeIndex(Je.Ready),this.scheduleOnce(function(){this.setAnim(Xe.Idle,!0),this.undeadSpine.node.updateWorldTransform()}.bind(this),1),this.refreshAnim()},o.animCompleted=function(e){switch(e.animation.name){case Xe.Fall_Asleep:this.setAnim(Xe.Sleep,!0);break;case Xe.Happy:case Xe.Wake_Up:this.setAnim(Xe.Idle,!0),this.refreshAnim()}},o.gotoSleep=function(){this.undeadSpine.setAnimation(0,Xe.Fall_Asleep,!1)},o.tiredState=function(){this.activeIndex(Je.OnTired),this.setAnim(Xe.Tired,!0)},o.setAnim=function(e,t){this.undeadSpine.setAnimation(0,e,t)},o.refreshAnim=function(){0!=this.states[Je.Ready].active&&(null!=this.readyTimeOut&&clearTimeout(this.readyTimeOut),this.readyTimeOut=setTimeout(this.gotoSleep.bind(this),w(25e3,35e3)))},o.expeditionState=function(e){this.activeIndex(Je.OnExpedition),this.setAnim(Xe.Move,!0);var t=e.current_expedition;this.cageIdLabel.string=this.cageIdLabel.string+"\nexId: "+t._id;var i=U.GetTotalSecTimeLeft(t);this.timeLeft.string=B.ConvertSecondsToTime(i),i<=0&&this.activeIndex(Je.OnCompleteExpedition)},o.activeIndex=function(e){for(var t=0;t<this.states.length;t++)this.states[t].active=t==e;e==Je.HasEgg||e==Je.Empty||e==Je.OnDead?this.noneEmptyState.active=!1:this.noneEmptyState.active=!0,e==Je.Empty?this.backgroundBox.spriteFrame=this.stageBackground[Qe.Empty]:e==Je.Ready?this.backgroundBox.spriteFrame=this.stageBackground[Qe.Normal]:this.backgroundBox.spriteFrame=this.stageBackground[Qe.Feeding]},o.isCompleteExpedition=function(){return!(null==this.states||this.states.length<=0)&&this.states[Je.OnCompleteExpedition].active},o.onBtnDepart=function(){this.manager.uiExpeditionPopup.Show(this.data)},o.onBtnAdd=function(){this.manager.uiScreenChooseExpedition.Show(this.id,null)},o.onBtnFinish=function(){this.manager.uiExpeditionPopup.Show(this.data.undead)},o.onBtnFeed=function(){this.manager.FeedBtnClickExpedition(this)},o.onBtnRecall=function(){this.manager.uiExpeditionPopup.Show(this.data)},o.onBtnNurture=function(){this.manager.uiPopupNurtureUndead.Show(this.data.undead,this.data._id)},o.onBtnInfo=function(){this.manager.uiEUndeadInfo.Show(this.data.undead)},o.onBtnView=function(){this.manager.uiExpeditionPopup.Show(this.data)},o.deleteUndead=function(){P.Instance.ShowUINotifyConfirm("Remove Undead","By acknowledging this action, you're fully\nawared that this Undead will be deleted\n forever. This action can't be undone\n\n",this.requestDeleteUndead.bind(this),!0,!1,0,!0)},o.requestDeleteUndead=function(){L.RequestUnAssignUndead(this.data._id,function(e){var t=U.CheckStatus(e);null!=t&&this.updateCageAfterClean(t)}.bind(this))},o.updateCageAfterClean=function(e){var t=e.data.hasEgg;this.parentCleanBarnEff.active=!0;var i=B.GetTimeNow();this.animCleanBarn.once(h.EventType.FINISHED,function(){console.log("anim play complete",B.GetTimeNow()-i),this.refreshView(this.manager,e.data)}.bind(this),this),t?this.animCleanBarn.play("Fx_Ui_Expedition_Clear_WithNewEgg"):this.animCleanBarn.play("Fx_Ui_Expedition_Clear_NoEgg")},o.cleanBarn=function(){this.requestDeleteUndead()},o.onBtnOpenEgg=function(){L.RequestClaimEgg(this.data._id,function(e){var t=U.CheckStatus(e);null!=t&&this.uiManager.uiPopupOpenEgg.Show(t,null,function(){this.manager.showExpedition()}.bind(this))}.bind(this))},o.OnBtnSelectClick=function(){if(this.manager.SelectExpedition(this),1==this.undeadSpine.node.active){var e=this.undeadSpine.animation;e==Xe.Idle?this.setAnim(Xe.Happy,!1):e!=Xe.Sleep&&e!=Xe.Fall_Asleep||this.setAnim(Xe.Wake_Up,!1)}},t}(x)).prototype,"states",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),me=t(he.prototype,"noneEmptyState",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=t(he.prototype,"nodeBtnNurture",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=t(he.prototype,"glowObj",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=t(he.prototype,"backgroundBox",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=t(he.prototype,"undeadView",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=t(he.prototype,"undeadView2",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=t(he.prototype,"undeadSpine",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe=t(he.prototype,"affectionProgress",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=t(he.prototype,"affectionLevel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=t(he.prototype,"affectionLevel2",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=t(he.prototype,"affectionLevelProgress",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=t(he.prototype,"affectionLevelUpTimeLeft",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=t(he.prototype,"affectionLevelNormal",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=t(he.prototype,"affectionLevelMax",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=t(he.prototype,"timeLeft",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=t(he.prototype,"fatigueProgress",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=t(he.prototype,"fatigueProgressReady",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=t(he.prototype,"fatigueProgresstired",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fe=t(he.prototype,"fatiguePercent",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oe=t(he.prototype,"fatigueTiredMask",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=t(he.prototype,"fatigueParentMask",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=t(he.prototype,"fatigueMaskWidget",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=t(he.prototype,"bgSeason",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=t(he.prototype,"cageIdLabel",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=t(he.prototype,"animCleanBarn",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),He=t(he.prototype,"parentCleanBarnEff",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We=t(he.prototype,"feedEff",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ve=t(he.prototype,"feedEffCom",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ge=t(he.prototype,"feedComMaterial",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je=t(he.prototype,"undeadShadow",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qe=t(he.prototype,"stageBackground",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ye=t(he.prototype,"season_bg",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ke=t(he.prototype,"seasonBgSprite",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ze=t(he.prototype,"feedUndeadBtn",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pe=he))||pe));o._RF.pop()}}}));

System.register("chunks:///_virtual/ExpeditionServiceApi.ts",["cc","./ConfigApi.ts","./ResHttp.ts"],(function(e){"use strict";var t,n,u,s;return{setters:[function(e){t=e.cclegacy,n=e._decorator},function(e){u=e.ConfigApi},function(e){s=e.ResHttp}],execute:function(){var _;t._RF.push({},"387fcBOKohFsasX0QaVvp7h","ExpeditionServiceApi",void 0);var o=n.ccclass;n.property,e("ExpeditionServiceApi",o("ExpeditionServiceApi")(_=function(){function e(){}return e.RequestLoadConfigCage=function(e){var t=u.API_FARM_3+u.EX_CAGES+"/"+u.TIER_CONFIG;s.GetRequest(t,{},e,null,!0)},e.RequestUpgradeBarn=function(e,t){var n=u.API_FARM_3+u.EX_CAGES+"/"+e+"/"+u.UPGRADE_BARN;s.PostRequest(n,{},t,null)},e.RequestLoadCage=function(e){var t=u.API_FARM_3+u.EX_EXPEDITION;s.GetRequest(t,{},e,null,!0)},e.RequestLoadUndeadFood=function(e){var t=u.API_FARM_3+u.INVENTORY;s.GetRequest(t,{},e,null,!1)},e.RequestLoadExEgg=function(e){var t=u.API_FARM_3+u.EX_UNDEAD_EGG;s.GetRequest(t,{statuses:"hatched"},e,null)},e.RequestLoadExEggAsset=function(e){var t=u.API_FARM_3+u.EX_UNDEAD_EGG;s.GetRequest(t,null,e,null)},e.RequestLoadUndeadWithStatus=function(e,t){var n=u.API_FARM_3+u.EX_UNDEAD;s.GetRequest(n,{statuses:e},t,null)},e.RequestLoadUndead=function(e){e('{"status":0,"data":[]}')},e.RequestLoadUndeadAll=function(e,t){void 0===t&&(t=!0);var n=u.API_FARM_3+u.EX_UNDEAD;s.GetRequest(n,{statuses:"0,1,2,4,6",offset:"0",limit:"7"},e,null,t)},e.RequestLoadUndeadAll_V2=function(e,t,n,_,o){void 0===n&&(n=0),void 0===_&&(_=20),void 0===o&&(o=!0);var E=u.API_FARM_3+u.EX_UNDEAD;s.GetRequest(E,{statuses:e,offset:n.toString(),limit:_.toString()},t,null,o)},e.RequestGetLE2PVU_Rate=function(e){var t=u.API_FARM_3+u.EX_LE_PVU_RATE;s.PostRequest(t,{},e,null)},e.RequestDepartUndead=function(e,t,n){var _=u.API_FARM_3+u.EX_EXPEDITIONS;s.PostRequest(_,{undeadId:e,estCheckMark:t},n,null)},e.RequestGetMaxExTime=function(e,t){var n=u.API_FARM_3+u.EX_UNDEAD+"/"+e+u.EX_GET_MAX_EX_TIME;s.GetRequest(n,{},t,null)},e.RequestRecallUndead=function(e,t){var n=u.API_FARM_3+u.EX_EXPEDITIONS+"/"+e+u.EX_RECALL;console.log("recall url",n),s.PostRequest(n,{},t,null)},e.RequestCreateUndeadWithEgg=function(e,t,n){var _=u.API_FARM_3+u.EX_UNDEAD;s.PostRequest(_,{eggId:e,cageId:t},n,null)},e.RequestOpenEgg=function(e,t){var n=u.API_FARM_3+u.EX_UNDEAD;s.PostRequest(n,{eggId:e},t,null)},e.RequestAssignUndeadToCage=function(e,t,n){var _=u.API_FARM_3+u.EX_CAGES+"/"+t+u.EX_ASSIGN_UNDEAD;s.PostRequest(_,{undeadId:e,cageId:t},n,null)},e.RequestFeedUndead=function(e,t,n){var _=u.API_FARM_3+u.EX_UNDEAD+"/"+e+"/"+u.EX_FEED;s.PostRequest(_,{fishName:t},n,null,!1)},e.RequestClaimExpedition=function(e,t){var n=u.API_FARM_3+u.EX_EXPEDITIONS+"/"+e+u.EX_CLAIM_ITEMS;console.log("RequestClaimExpedition url",n),s.PostRequest(n,{},t,null)},e.RequestClaimEgg=function(e,t){var n=u.API_FARM_3+u.EX_CAGES+"/"+e+u.EX_CLAIM_EGG;console.log("RequestClaimEgg url",n),s.PostRequest(n,{},t,null)},e.RequestUnAssignUndead=function(e,t){var n=u.API_FARM_3+u.EX_CAGES+"/"+e+u.EX_UN_ASSIGN_UNDEAD;console.log("RequestUnAssignUndead url",n),s.PostRequest(n,{},t,null)},e.RequestGetRegenData=function(e,t){var n=u.API_FARM_3+u.EX_UNDEAD+"/"+e+u.EX_GET_REGEN_DATA;console.log("RequestGetRegenData url",n),s.GetRequest(n,{},t,null)},e.RequestRegenFatigue=function(e,t){var n=u.API_FARM_3+u.EX_UNDEAD+"/"+e+u.EX_REGEN;console.log("RequestRegenFatigue url",n),s.PostRequest(n,{},t,null)},e}())||_);t._RF.pop()}}}));

System.register("chunks:///_virtual/FarmFerInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./PopUpBase.ts","./FertilizerStatus.ts"],(function(e){"use strict";var t,i,r,n,l,a,o,s,u,f,c,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,o=e.Sprite,s=e.Node,u=e.TextAsset,f=e.Label},function(e){c=e.ConfigApi},function(e){p=e.PopUpBase},function(e){h=e.FertilizerStatus}],execute:function(){var F,g,z,b,v,y,S,L,m,k,d,M,w,I,P;l._RF.push({},"c7731Ld7uhLQaKnhvYTNT1a","FarmFerInfo",void 0);var x=a.ccclass,j=a.property;e("FarmFerInfo",(F=x("FarmFerInfo"),g=j(o),z=j(s),b=j(s),v=j(u),y=j(f),S=j(s),F((k=t((m=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,r(t,"FerFill",k,n(t)),r(t,"FerMark",d,n(t)),r(t,"FerMark1",M,n(t)),r(t,"config",w,n(t)),r(t,"ExpLabel",I,n(t)),t.fertilizerStatus=[],r(t,"fertilizerStatusParent",P,n(t)),t.json=void 0,t}i(t,e);var l=t.prototype;return l.start=function(){for(var e=0;e<this.FerMark.length;e++){var t=468*c.FertilizerLevel[e+1]/c.FertilizerLevel[4];this.FerMark[e].setPosition(t,0,0),this.FerMark1[e].setPosition(t,0,0)}},l.Show=function(t){if(0==this.fertilizerStatus.length)for(var i=this.fertilizerStatusParent.getComponentsInChildren(h),r=0;r<i.length;r++)this.fertilizerStatus.push(i[r]);for(var n="Harvesting Boon",l=t.fertilizerLevel,a=this.config.text.split("\n"),o=0;o<this.fertilizerStatus.length;o++)this.fertilizerStatus[o].Init(o+1,l,n,a[o],a[o+3]);this.json=t,this.InitFer(),e.prototype.OnShow.call(this)},l.InitFer=function(){this.ExpLabel.string=this.json.fertilizerExp.toString(),this.FerFill.fillRange=this.json.fertilizerExp/c.FertilizerLevel[4];for(var e=0;e<this.FerMark.length;e++)this.FerMark[e].active=e<this.json.fertilizerLevel},l.OnCloseClick=function(){e.prototype.OnHide.call(this)},t}(p)).prototype,"FerFill",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(m.prototype,"FerMark",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=t(m.prototype,"FerMark1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(m.prototype,"config",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(m.prototype,"ExpLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(m.prototype,"fertilizerStatusParent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=m))||L));l._RF.pop()}}}));

System.register("chunks:///_virtual/FarmFerUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./FarmingServicesApi.ts","./ResourcesManager.ts","./SoundController.ts","./UImanager.ts","./UIPopupManager.ts","./Utility.ts"],(function(e){"use strict";var t,r,i,n,o,a,l,s,u,F,c,f,m,p,b,d,h,g,v,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Sprite,s=e.Node,u=e.Label,F=e.Widget,c=e.tween,f=e.Component},function(e){m=e.ConfigApi},function(e){p=e.FarmingServicesApi},function(e){b=e.ResourcesManager},function(e){d=e.SoundController,h=e.EnumSound},function(e){g=e.UImanager},function(e){v=e.UIPopupManager},function(e){I=e.Utility}],execute:function(){var L,w,A,y,M,z,S,x,E,U,R,N,_,T,P,k,B,j,C,O,W,G,X,q,D,Z,H;o._RF.push({},"e1e75bWSYhOSLMrfyy0oaV4","FarmFerUI",void 0);var J=a.ccclass,V=a.property;e("FarmFerUI",(L=J("FarmFerUI"),w=V(l),A=V(s),y=V(s),M=V(u),z=V(s),S=V(l),x=V(l),E=V(u),U=V(F),R=V(s),N=V(s),_=V(s),L((k=t((P=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"FerFill",k,n(t)),i(t,"FerMark",B,n(t)),i(t,"FerMark1",j,n(t)),i(t,"FerLabel",C,n(t)),i(t,"FerBtnAdd",O,n(t)),i(t,"FerIcon",W,n(t)),i(t,"FerFxIcon",G,n(t)),t.FerAmount=[0,0,0,0],i(t,"ExpLabel",X,n(t)),i(t,"BoxWidget",q,n(t)),t.isoFarmManager=void 0,t.json=void 0,i(t,"FxAnimNode",D,n(t)),i(t,"FxUpNode",Z,n(t)),i(t,"FxLvUpNode",H,n(t)),t.tweerFill=void 0,t.tweerNumber=void 0,t.ferTimeout=0,t.cb=void 0,t}r(t,e);var o=t.prototype;return o.start=function(){for(var e=0;e<this.FerMark.length;e++){var t=445*m.FertilizerLevel[e+1]/m.FertilizerLevel[4];this.FerMark[e].setPosition(t,0,0),this.FerMark1[e].setPosition(t,0,0)}},o.Show=function(e,t,r){this.cb=r,this.FxAnimNode.active=!1,this.isoFarmManager=e,this.json=t,clearTimeout(this.ferTimeout),this.node.active=!0,this.BoxWidget.bottom=-333,c(this.BoxWidget).to(.2,{bottom:33},{easing:"circOut"}).start(),this.InitFer(),this.RequestLoadMaterials()},o.InitFer=function(){null!=this.tweerFill&&this.tweerFill.stop(),null!=this.tweerNumber&&this.tweerNumber.stop(),this.ExpLabel.string=this.json.fertilizerExp.toString(),this.FerFill.fillRange=this.json.fertilizerExp/m.FertilizerLevel[4];for(var e=0;e<this.FerMark.length;e++)this.FerMark[e].active=e<this.json.fertilizerLevel},o.RequestLoadMaterials=function(){var e=this,t={offset:m.LIMIT_PAGE,limit:m.LIMIT_PAGE};p.RequestLoadMaterials(t,(function(t){var r=JSON.parse(t);if(0==r.status){e.FerAmount=[0,0,0,0];for(var i=r.data.items,n=0;n<i.length;n++){var o=i[n].name;"FERTILIZER_SMALL"==o?e.FerAmount[0]+=i[n].amount:"FERTILIZER_MEDIUM"==o?e.FerAmount[1]+=i[n].amount:"FERTILIZER_LARGE"==o?e.FerAmount[2]+=i[n].amount:"FERTILIZER_EXTRA_LARGE"==o&&(e.FerAmount[3]+=i[n].amount)}for(var a=0;a<e.FerAmount.length;a++)e.FerAmount[a]>0?(e.FerLabel[a].string=e.FerAmount[a].toString(),e.FerLabel[a].node.active=!0,e.FerBtnAdd[a].active=!1):(e.FerLabel[a].node.active=!1,e.FerBtnAdd[a].active=!0)}else v.Instance.ShowToast("Error",b.Instance.GetErrorMessage(r.status),0)}),null)},o.Hide=function(){var e=this;c(this.BoxWidget).to(.2,{bottom:-333},{easing:"circOut"}).call((function(){e.node.active=!1})).start()},o.OnCloseClick=function(){this.isoFarmManager.HideFarmFerUI()},o.OnInfoClick=function(){this.isoFarmManager.ShowFarmFerInfo(this.json)},o.OnFerClick=function(e,t){var r=this,i=parseInt(t);if(this.FerAmount[i]<=0)return g.Instance.ShowUIScreenCraft(!1),void(this.node.active=!1);var n=this.json.fertilizerLevel,o=this.json.fertilizerExp;p.F3_2_RequestUseFertilizer(this.json._id,i,(function(e){var t=JSON.parse(e);0==t.status?(r.json=t.data,r.cb(t.data),r.ShowFerFX(n,o,t.data.fertilizerLevel,t.data.fertilizerExp,i),r.FerAmount[i]--,r.FerAmount[i]>0?(r.FerLabel[i].string=r.FerAmount[i].toString(),r.FerLabel[i].node.active=!0,r.FerBtnAdd[i].active=!1):(r.FerLabel[i].node.active=!1,r.FerBtnAdd[i].active=!0)):(r.InitFer(),v.Instance.ShowToast("Error",b.Instance.GetErrorMessage(t.status),0))}),(function(e){r.InitFer()}))},o.ShowFerFX=function(e,t,r,i,n){var o=this;this.FerFxIcon.spriteFrame=this.FerIcon[n].spriteFrame,I.PlayAnimation(this.FxAnimNode),r>e?d.Instance.PlaySound(h.UI_SFX_Fertilizing_Lvl_UP):d.Instance.PlaySound(h.UI_SFX_Fertilizing),clearTimeout(this.ferTimeout),this.ferTimeout=setTimeout((function(){I.PlayParticle(o.FxUpNode[e]);var n=r-1;n>=0&&r>e&&(o.ferTimeout=setTimeout((function(){I.PlayParticle(o.FxLvUpNode[n]),o.FerMark[n].active=!0}),1e3)),null!=o.tweerFill&&o.tweerFill.stop(),o.tweerFill=c(o.FerFill).delay(.4).to(.8,{fillRange:i/m.FertilizerLevel[4]}),o.tweerFill.start(),null!=o.tweerNumber&&o.tweerNumber.stop(),o.tweerNumber=I.tweenNumber(t,i,.8,(function(e){o.ExpLabel.string=e.toString()}),.4)}),500)},t}(f)).prototype,"FerFill",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(P.prototype,"FerMark",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=t(P.prototype,"FerMark1",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(P.prototype,"FerLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(P.prototype,"FerBtnAdd",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=t(P.prototype,"FerIcon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=t(P.prototype,"FerFxIcon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(P.prototype,"ExpLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(P.prototype,"BoxWidget",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(P.prototype,"FxAnimNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(P.prototype,"FxUpNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=t(P.prototype,"FxLvUpNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=P))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/FarmingServicesApi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./UserModel.ts","./ResHttp.ts","./UIPopupManager.ts"],(function(t){"use strict";var e,n,i,r,o,s,l;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){i=t.cclegacy},function(t){r=t.ConfigApi},function(t){o=t.UserModel},function(t){s=t.ResHttp},function(t){l=t.LoadingType}],execute:function(){var u;t("FarmingServicesApi",void 0),i._RF.push({},"86201XL32BJuJ2GNdoP9BnG","FarmingServicesApi",void 0),function(t){function i(){return(i=e(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){s.PostRequest(r.LINK_API+"v2/register",{publicAddress:e,nickname:e},t,t)}));case 2:t.sent;case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t.PostRequestRefreshToken=function(t,e,n){var i=r.LINK_API+r.GET_TOKEN_FROM_RT,l={refreshToken:t};s.PostRequestRefreshToken(i,l,(function(t){var n=JSON.parse(t);o.SetToken(n.data.token),e(t)}),(function(t){n(t)}),!1)},t.PostRequestV3_AUTH=function(t,e,n,i,o){var l=r.LINK_API+r.V3_AUTH,u={publicAddress:t,signature:e,message:n};s.PostRequestRefreshToken(l,u,(function(t){i(t)}),(function(t){o(t)}),!1)},t.RequestRegisterAccount=function(t){return i.apply(this,arguments)},t.RequestLoginWithMeta=function(t,e,n){var i={publicAddress:t};s.GetRequest(r.LINK_API+r.LOGIN_META,i,e,n)},t.RequestDeactiveLand=function(t,e,n){var i=r.LINK_API+r.DEACTIVATE_LAND,o={landId:t};s.PostRequest(i,o,e,n)},t.RequestClaimDefaultLand=function(t,e){s.PostRequest(r.LINK_API+r.CLAIM_DEFAULT_LAND,null,t,e)},t.RequestMyDefaultLand=function(t,e){s.GetRequest(r.LINK_API+r.MY_DEFAULT_LAND,null,t,e)},t.RequestSwapSunflower=function(t,e,n,i){var o={sunflowerId:t,amount:e};s.PostRequest(r.LINK_API+r.SWAP_SUNFLOWER,o,n,i)},t.RequestMyLands=function(t,e,n){var i={};""==o.IdPlantFilter_Inventory&&""==o.TypePlantFilter_Inventory&&""==o.RarityPlantFilter_Inventory?(i.offset=(t*r.LIMIT_PAGE).toString(),i.limit=r.LIMIT_PAGE.toString()):(""!=o.IdPlantFilter_Inventory&&(i.landId=o.IdPlantFilter_Inventory),""!=o.TypePlantFilter_Inventory&&(i.elements=o.TypePlantFilter_Inventory),""!=o.RarityPlantFilter_Inventory&&(i.rarities=o.RarityPlantFilter_Inventory),i.offset=(t*r.LIMIT_PAGE).toString(),i.limit=r.LIMIT_PAGE.toString()),s.GetRequest(r.LINK_API+r.MY_LANDS,i,e,n)},t.RequestMyPlants=function(t,e,n,i){void 0===i&&(i=!0),""==o.SeasonPlantFilter_Inventory&&""==o.IdPlantFilter_Inventory&&""==o.TypePlantFilter_Inventory&&""==o.RarityPlantFilter_Inventory||(""!=o.IdPlantFilter_Inventory&&(t.plantId=o.IdPlantFilter_Inventory),""!=o.TypePlantFilter_Inventory&&(t.elements=o.TypePlantFilter_Inventory),""!=o.RarityPlantFilter_Inventory&&(t.rarities=o.RarityPlantFilter_Inventory),""!=o.SeasonPlantFilter_Inventory&&(t.seasons=o.SeasonPlantFilter_Inventory)),s.GetRequest(r.LINK_API+r.MY_PLANTS,t,e,n,i)},t.RequestLoadMaterials=function(t,e,n,i){void 0===i&&(i=!0),s.GetRequest(r.API_FARM_3+r.INVENTORY,t,e,n,i)},t.RequestMyTools=function(t,e){s.GetRequest(r.LINK_API+r.MY_TOOLS,null,t,e,!1)},t.RequestApplyTool=function(t,e,n,i){var o={farmId:t,toolId:e.toString()};s.PostRequest(r.LINK_API+r.APPLY_TOOL_3_2,o,n,i,!0,l.noAnim)},t.RequestFarmStatus=function(t,e){s.GetRequest(r.LINK_API+r.FARM_STATUS,null,t,e,!1)},t.RequestWeather=function(t,e){s.GetRequest(r.LINK_API+r.WEATHER_TODAY,null,t,e,!1)},t.RequestWeatherNextDay=function(t,e){s.GetRequest(r.API_FARM_3+r.WEATHER_NEXTDAY,null,t,e)},t.RequestFarmsStats=function(t,e){s.GetRequest(r.LINK_API+r.FARMING_STATS,null,t,e,!1)},t.RequestFarm=function(t,e,n,i){var l=r.LINK_API+r.FARMS_V2,u=function(t){e(t)},_={};""!=o.IdPlantFilter||""!=o.TypePlantFilter||""!=o.RarityPlantFilter||o.NeedWaterFilter||o.NeedPotFilter||o.HasCrowFilter?(""!=o.IdPlantFilter&&(_.plantId=o.IdPlantFilter),""!=o.TypePlantFilter&&(_.elements=o.TypePlantFilter),""!=o.RarityPlantFilter&&(_.rarities=o.RarityPlantFilter),o.NeedPotFilter&&(_.needPot="true"),o.NeedWaterFilter&&(_.needWater="true"),o.HasCrowFilter&&(_.hasCrow="true"),_.offset=(t*r.LIMIT_PAGE).toString(),_.limit=r.LIMIT_PAGE.toString(),s.GetRequest(l,_,u,(function(t){}),i)):(_.offset=(t*r.LIMIT_PAGE).toString(),_.limit=r.LIMIT_PAGE.toString(),s.GetRequest(l,_,u,(function(t){n(t)}),i))},t.RequestMyLandsNoLimit=function(t,e,n){s.GetRequest(r.LINK_API+r.MY_LANDS,{offset:"0",limit:"20"},t,e,n)},t.RequestDeactive=function(t,e,n){s.PostRequest(r.LINK_API+r.FARMS+t+"/"+r.DEACTIVATE,null,e,n)},t.RequestRemovePlant=function(t,e,n){var i={farmId:t};s.PostRequest(r.LINK_API+r.REMOVE_PLANT,i,e,n)},t.RequestHarvestPlant=function(t,e,n){s.PostRequest(r.LINK_API+r.FARM_3_2_FARM+"/"+t+"/"+r.HARVEST,null,e,n,!0,l.noAnim)},t.RequestChoseLands=function(t,e,n){var i={offset:(t*r.LIMIT_PAGE).toString(),limit:r.LIMIT_PAGE.toString()};s.GetRequest(r.LINK_API+r.FREE_SLOTS,i,e,n)},t.F3_2_RequestMyLand=function(t,e){s.GetRequest(r.LINK_API+r.FARM_3_2_LAND+r.MYLAND,null,t,e)},t.F3_2_DetailLand=function(t,e,n,i){s.GetRequest(r.LINK_API+r.FARM_3_2_LAND+t,null,e,n,i)},t.F3_2_PlaceLand=function(t,e,n,i,o){var l={x:e,y:n};s.PostRequest(r.LINK_API+r.FARM_3_2_LAND+t+r.PLACELAND,l,i,o)},t.F3_2_RemoveLand=function(t,e,n,i){void 0===i&&(i=!0),s.PostRequest(r.LINK_API+r.FARM_3_2_LAND+t+r.REMOVELAND,null,e,n,i)},t.F3_2_PlacePlant=function(t,e,n){s.PostRequest(r.LINK_API+r.FARM_3_2_FARM,t,e,n)},t.F3_2_RequestApplyToolAll=function(t,e,n,i){var o={toolId:e};s.PostRequest(r.LINK_API+r.FARM_3_2_LAND+t+r.APPLY_TOOL_3_2_ALL,o,n,i)},t.F3_2_RequestHarvestAll=function(t,e,n){s.PostRequest(r.LINK_API+r.FARM_3_2_LAND+t+r.harvest_all,null,e,n)},t.F3_2_RequestCollectMaterial=function(t,e,n){s.PostRequest(r.LINK_API+r.FARM_3_2_LAND+t+r.collect_material,null,e,n)},t.F3_2_RequestUseFertilizer=function(t,e,n,i){var o={fertilizerName:r.FertilizerType[e]};s.PostRequest(r.LINK_API+r.FARM_3_2_LAND+t+r.USE_fertilizer,o,n,i,!0,l.noAnim)}}(u||(u=t("FarmingServicesApi",{}))),i._RF.pop()}}}));

System.register("chunks:///_virtual/FarmLobbyHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIPopupManager.ts"],(function(n){"use strict";var e,o,r,t,c;return{setters:[function(n){e=n.inheritsLoose},function(n){o=n.cclegacy,r=n._decorator,t=n.Component},function(n){c=n.UIPopupManager}],execute:function(){var a;o._RF.push({},"880a5Ga0htFMJoMNq65b1Ys","FarmLobbyHelper",void 0);var i=r.ccclass;r.property,n("FarmLobbyHelper",i("FarmLobbyHelper")(a=function(n){function o(){return n.apply(this,arguments)||this}e(o,n);var r=o.prototype;return r.OnAltarClick=function(){console.log("OnAltarClick"),c.Instance.ShowUIScreenAltar((function(){console.log("OnAltar back Click")}))},r.BackToMain=function(){c.Instance.ShowUIScreenMain(0)},o}(t))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/FarmPage.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,a,n,r,o,l,s,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,l=t.EditBox,s=t.Label,u=t.Button,c=t.Component}],execute:function(){var g,h,P,b,p,m,f,N,d,B,T;r._RF.push({},"2cc9etTJuVGDIiUQWoQI3XA","FarmPage",void 0);var A=o.ccclass,y=o.property;t("FarmPage",(g=A("FarmPage"),h=y(l),P=y(s),b=y(u),p=y(u),g((N=e((f=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"NumLabel",N,n(e)),a(e,"NumTotalLabel",d,n(e)),a(e,"BtnBack",B,n(e)),a(e,"BtnNext",T,n(e)),e.currentPage=0,e.totalPage=1,e.goToPageAction=void 0,e}i(e,t);var r=e.prototype;return r.Init=function(t,e,i){this.goToPageAction=t,this.totalPage=Math.ceil(e/i),this.NumTotalLabel.string="/ "+this.AddZeroToNumber(this.totalPage),this.toPage(this.currentPage),this.node.active=this.totalPage>1},r.OnButtonBackClick=function(){this.ChangePage(-1)},r.OnButtonNextClick=function(){this.ChangePage(1)},r.OnNumInputDone=function(){var t=this.NumLabel.string;if(""==t)this.NumLabel.string=this.AddZeroToNumber(this.currentPage+1);else{var e=parseInt(t);e<=0&&(e=1),e>this.totalPage&&(e=this.totalPage),this.currentPage!=e-1&&(this.currentPage=e-1,null!=this.goToPageAction&&this.goToPageAction()),this.toPage(this.currentPage),this.NumLabel.string=this.AddZeroToNumber(e)}},r.ChangePage=function(t){0!=t&&(this.currentPage+t>0||this.currentPage+1+t<this.totalPage)&&(this.currentPage+=t,null!=this.goToPageAction&&this.goToPageAction(),this.toPage(this.currentPage))},r.toPage=function(t){this.currentPage=t,this.NumLabel.string=this.AddZeroToNumber(this.currentPage+1),this.BtnBack.interactable=this.currentPage>0,this.BtnNext.interactable=this.currentPage+1<this.totalPage},r.DisableControll=function(){this.BtnBack.interactable=!1,this.BtnNext.interactable=!1},r.AddZeroToNumber=function(t){return t<10?"0"+t.toString():t.toString()},e}(c)).prototype,"NumLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=e(f.prototype,"NumTotalLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(f.prototype,"BtnBack",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(f.prototype,"BtnNext",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=f))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/FeebleEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./EffectBase.ts"],(function(e){"use strict";var t,c,n,a,f;return{setters:[function(e){t=e.inheritsLoose},function(e){c=e.cclegacy,n=e._decorator},function(e){a=e.PVEGameplayControl},function(e){f=e.EffectBase}],execute:function(){var i;c._RF.push({},"155eazX/gJMjpb8dEckrbBA","FeebleEffect",void 0);var r=n.ccclass;n.property,e("FeebleEffect",r("FeebleEffect")(i=function(e){function c(){for(var t,c=arguments.length,n=new Array(c),a=0;a<c;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).endEffectTime=0,t}t(c,e);var n=c.prototype;return n.Init=function(t,c,n){e.prototype.Init.call(this,t,c,n),this.endEffectTime=a.Instance.CurrentTime+c.EffectTime,this.isApplying=!0,n.root.data.attackData.AttackSpeedPercentModifier-=c.DecreaseAttackSpeedPercent},n.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.thisTarget.root.data.attackData.AttackSpeedPercentModifier+=this.data.DecreaseAttackSpeedPercent,this.node.destroy()},c.ApplyEffect=function(e,t){var c=e.getEffectWithType(t.EffectType);if(null!=c)c.endEffectTime=a.Instance.CurrentTime+c.data.EffectTime;else e.initEffect(t)},c}(f))||i);c._RF.pop()}}}));

System.register("chunks:///_virtual/Feralism.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,o,n,a,i,r;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator},function(t){a=t.AttackType},function(t){i=t.InGameEventID},function(t){r=t.SkillBase}],execute:function(){var s;o._RF.push({},"5494fuJ+gdG6ronEvqH8oZH","Feralism",void 0);var l=n.ccclass;n.property,t("Feralism",l("Feralism")(s=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).killedId=[],e}e(o,t);var n=o.prototype;return n.Init=function(e,o){t.prototype.Init.call(this,e,o)},n.addAttackData=function(t,e,o){void 0===o&&(o=null),t==a.NormalAttack&&(e.attacker=this.root.root,e.LifeStealPercent=this.skillData.LifeStealPercent,e.on(i.OnDead,this.onTargetDead,this),null!=o&&o.root.on(i.OnDead,this.onSupport,this))},n.onSupport=function(t){null!=this.root&&null!=this.node&&(this.killedId.indexOf(t.Id)>=0||(this.killedId.push(t.Id),this.root.root.applyRegenHp(this.root.root.data.statsData.getMaxHp()*this.skillData.RegenHpPercent_Support/100)))},n.onTargetDead=function(t,e){this.killedId.push(e.root.Id),this.root.root.applyRegenHp(this.root.root.data.statsData.getMaxHp()*this.skillData.RegenHPPercent_Kill/100)},o}(r))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/FertilizerStatus.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,r,e,o,l,n,s,c,a,u,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,n=t._decorator,s=t.Label,c=t.RichText,a=t.Sprite,u=t.color,p=t.Component}],execute:function(){var h,d,g,f,b,y,v,z,S;l._RF.push({},"700043m4/1K/rndPCra6rHh","FertilizerStatus",void 0);var L=n.ccclass,m=n.property;t("FertilizerStatus",(h=L("FertilizerStatus"),d=m(s),g=m(c),f=m(a),h((v=i((y=function(t){function i(){for(var i,r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return i=t.call.apply(t,[this].concat(l))||this,e(i,"title",v,o(i)),e(i,"des",z,o(i)),e(i,"dot",S,o(i)),i}return r(i,t),i.prototype.Init=function(t,i,r,e,o){t<i?(this.title.string=r+" Lv."+t.toString()+" (CLEARED)",this.des.string="<color=#D2AA81>"+o,this.title.color=u(210,170,129),this.dot.color=u(210,170,129)):t==i?(this.title.string=r+" Lv."+t.toString(),this.des.string="<color=#9C6D3E>"+e,this.title.color=u(210,100,43),this.dot.color=u(210,100,43)):(this.title.string=r+" Lv."+t.toString(),this.des.string="<color=#938E8E>"+o,this.title.color=u(147,142,142),this.dot.color=u(147,142,142))},i}(p)).prototype,"title",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(y.prototype,"des",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=i(y.prototype,"dot",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=y))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/Filter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserModel.ts","./Utility.ts","./SoundController.ts"],(function(t){"use strict";var e,i,l,r,o,a,n,s,h,g,c,d,u,p,y,T,F,f,b,m,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,l=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,n=t.CCInteger,s=t.Toggle,h=t.EditBox,g=t.Node,c=t.UITransform,d=t.Widget,u=t.UIOpacity,p=t.CCFloat,y=t.view,T=t.tween,F=t.Component},function(t){f=t.UserModel},function(t){b=t.Utility},function(t){m=t.SoundController,C=t.EnumSound}],execute:function(){var v,S,I,P,B,k,w,x,z,U,R,E,W,O,D,_,N,H,L,X,Y,M,A,j,G,V,q,J,K,Q,Z;o._RF.push({},"5ad243DjgRPV5i4pRR7MwBB","Filter",void 0);var $=a.ccclass,tt=a.property;t("Filter",(v=$("Filter"),S=tt({type:n}),I=tt(s),P=tt(s),B=tt(h),k=tt(s),w=tt(h),x=tt(h),z=tt(g),U=tt(c),R=tt(d),E=tt(u),W=tt(c),O=tt(p),D=tt(g),v((H=e((N=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,l(e,"TypeFilter",H,r(e)),l(e,"TypeToggle",L,r(e)),l(e,"RarityToggle",X,r(e)),l(e,"IDEditBox",Y,r(e)),l(e,"FarmToggle",M,r(e)),l(e,"EditBoxX",A,r(e)),l(e,"EditBoxY",j,r(e)),l(e,"Season",G,r(e)),l(e,"PanelUITransform",V,r(e)),l(e,"PanelWidget",q,r(e)),l(e,"PanelUIOpacity",J,r(e)),e.OnSave=void 0,e.totalFilter=0,l(e,"canvasToFit",K,r(e)),e.baseScale=1,e.designWidth=2001,l(e,"HardCodeWidth",Q,r(e)),l(e,"ScaleNode",Z,r(e)),e.isCustomStart=!1,e}i(e,t);var o=e.prototype;return o.CustomStart=function(t){this.isCustomStart?t():(this.isCustomStart=!0,this.designWidth=y.getDesignResolutionSize().width,-1==this.HardCodeWidth&&(this.HardCodeWidth=this.getComponent(c).width),b.addResizeCallBack(this.node,function(){this.UpdateSize(t)}.bind(this)),this.baseScale=this.ScaleNode.scale.x,this.UpdateSize(t))},o.UpdateSize=function(t){var e=this;b.AsyncDelay(200).then((function(){if(e.HardCodeWidth>e.canvasToFit.width){var i=e.baseScale*(e.canvasToFit.width/e.designWidth);e.ScaleNode.setScale(i,i,1)}else e.ScaleNode.setScale(e.baseScale,e.baseScale,1);e.PanelWidget.bottom=0,t()}))},o.onDestroy=function(){b.removeResizeCallBack(this.node)},o.Init=function(t,e){this.TypeFilter=e,this.OnSave=t},o.Show=function(t){var e=this;this.node.active=!0,this.PanelUITransform.node.active=!1,this.CustomStart((function(){e.PanelUITransform.node.active=!0,e.PanelWidget.bottom=-e.PanelUITransform.height*e.ScaleNode.scale.x,T(e.PanelWidget).to(.25,{bottom:0},{easing:"circOut"}).start(),e.PanelUIOpacity.opacity=0,T(e.PanelUIOpacity).to(.175,{opacity:255}).start(),null!=e.Season&&(e.Season.active=!t)}))},o.OnBtnSaveClick=function(){this.totalFilter=0;var t="";if(0==this.TypeFilter){for(var e=0;e<this.TypeToggle.length;e++)this.TypeToggle[e].isChecked&&(t+=this.TypeToggle[e].node.name+",",this.totalFilter++);""!=t&&(t=t.substring(0,t.length-1)),f.TypePlantFilter=t,t="";for(var i=0;i<this.RarityToggle.length;i++)this.RarityToggle[i].isChecked&&(t+=this.RarityToggle[i].node.name+",",this.totalFilter++);""!=t&&(t=t.substring(0,t.length-1)),f.RarityPlantFilter=t,f.NeedWaterFilter=this.FarmToggle[0].isChecked,this.totalFilter+=this.FarmToggle[0].isChecked?1:0,f.NeedPotFilter=this.FarmToggle[1].isChecked,this.totalFilter+=this.FarmToggle[1].isChecked?1:0,f.HasCrowFilter=this.FarmToggle[2].isChecked,this.totalFilter+=this.FarmToggle[2].isChecked?1:0,f.IdPlantFilter=this.IDEditBox.string,this.totalFilter+=""!=this.IDEditBox.string?1:0}else if(2==this.TypeFilter){for(var l=0;l<this.TypeToggle.length;l++)this.TypeToggle[l].isChecked&&(t+=this.TypeToggle[l].node.name+",",this.totalFilter++);""!=t&&(t=t.substring(0,t.length-1)),f.TypePlantFilter_Inventory=t,t="";for(var r=0;r<this.RarityToggle.length;r++)this.RarityToggle[r].isChecked&&(t+=this.RarityToggle[r].node.name+",",this.totalFilter++);""!=t&&(t=t.substring(0,t.length-1)),f.RarityPlantFilter_Inventory=t,t="";for(var o=0;o<this.FarmToggle.length;o++)this.FarmToggle[o].isChecked&&(t+=this.FarmToggle[o].node.name+",",this.totalFilter++);""!=t&&(t=t.substring(0,t.length-1)),f.SeasonPlantFilter_Inventory=t,f.IdPlantFilter_Inventory=this.IDEditBox.string,this.totalFilter+=""!=this.IDEditBox.string?1:0}else 1==this.TypeFilter&&(f.corXFilter_ChoseLand=this.EditBoxX.string,this.totalFilter+=""!=this.EditBoxX.string?1:0,f.corYFilter_ChoseLand=this.EditBoxY.string,this.totalFilter+=""!=this.EditBoxY.string?1:0,f.isLandHasPotFilter_ChoseLand=this.FarmToggle[0].isChecked,this.totalFilter+=this.FarmToggle[0].isChecked?1:0);this.OnBtnCloseClick(),null!=this.OnSave&&this.OnSave()},o.OnBtnClearAllClick=function(){if(0==this.TypeFilter||2==this.TypeFilter){for(var t=0;t<this.TypeToggle.length;t++)this.TypeToggle[t].isChecked=!1;for(var e=0;e<this.RarityToggle.length;e++)this.RarityToggle[e].isChecked=!1;for(var i=0;i<this.FarmToggle.length;i++)this.FarmToggle[i].isChecked=!1;this.IDEditBox.string=""}else 1==this.TypeFilter&&(this.FarmToggle[0].isChecked=!1,this.EditBoxX.string="",this.EditBoxY.string="")},o.OnBtnCloseClick=function(){var t=this;m.Instance.PlaySound(C.GameUI_closepopup),T(this.PanelWidget).to(.25,{bottom:-this.PanelUITransform.height*this.ScaleNode.scale.x},{easing:"circIn"}).call((function(){t.node.active=!1})).start(),T(this.PanelUIOpacity).to(.175,{opacity:0}).start()},e}(F)).prototype,"TypeFilter",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=e(N.prototype,"TypeToggle",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=e(N.prototype,"RarityToggle",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=e(N.prototype,"IDEditBox",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(N.prototype,"FarmToggle",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=e(N.prototype,"EditBoxX",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(N.prototype,"EditBoxY",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(N.prototype,"Season",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(N.prototype,"PanelUITransform",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(N.prototype,"PanelWidget",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(N.prototype,"PanelUIOpacity",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(N.prototype,"canvasToFit",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=e(N.prototype,"HardCodeWidth",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Z=e(N.prototype,"ScaleNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=N))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/FishingManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./EventManager.ts","./UserModel.ts","./PrefabController.ts","./Utility.ts","./ResourcesManager.ts","./SoundController.ts","./UIPopupManager.ts","./UITutorial.ts","./GatheringManager.ts","./GatheringMiniGameUI.ts","./FishingMap.ts","./UIPopupPullFishing.ts"],(function(e){"use strict";var i,t,a,n,r,s,o,l,h,c,u,p,g,d,m,I,f,S,M,b,G,v,F,C,D,U,T,y,k,P,_,B,w,E,O;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.AudioSource,l=e.Prefab,h=e.Node,c=e.ScrollView,u=e.systemEvent,p=e.SystemEvent,g=e.randomRange,d=e.Layers,m=e.randomRangeInt,I=e.resources,f=e.instantiate,S=e.Component},function(e){M=e.GatheringServicesApi},function(e){b=e.EventManager,G=e.EventID},function(e){v=e.UserModel,F=e.UserFishing},function(e){C=e.PrefabController,D=e.PrefabEnum},function(e){U=e.Utility},function(e){T=e.ResourcesManager},function(e){y=e.SoundController,k=e.EnumSound},function(e){P=e.UIPopupManager},function(e){_=e.UITutorial},function(e){B=e.GatheringManager},function(e){w=e.GatheringMiniGameUI},function(e){E=e.FishingMap},function(e){O=e.UIPopupPullFishing}],execute:function(){var R,N,z,x,L,A,H,V,W,J,K,X,j,Y,Z,q,Q,$,ee,ie,te,ae,ne,re,se,oe,le;e({FishingState:void 0,MapSizeFishing:void 0}),r._RF.push({},"67303mWaoNC3rtcnizSgZ1r","FishingManager",void 0);var he,ce,ue=s.ccclass,pe=s.property;!function(e){e[e.Idle=0]="Idle",e[e.Drop=1]="Drop",e[e.Pull=2]="Pull",e[e.Catch=3]="Catch"}(he||(he=e("FishingState",{}))),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(ce||(ce=e("MapSizeFishing",{})));e("FishingManager",(R=ue("FishingManager"),N=pe(o),z=pe([l]),x=pe([l]),L=pe(l),A=pe(h),H=pe(c),V=pe(O),W=pe(h),J=pe(w),K=pe(_),X=pe(E),j=pe(h),R((q=i((Z=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return i=e.call.apply(e,[this].concat(r))||this,a(i,"ambientMusic",q,n(i)),a(i,"prefabFishShadow",Q,n(i)),a(i,"prefabObjectShadow",$,n(i)),a(i,"prefabFish",ee,n(i)),a(i,"prefabMaterial",ie,n(i)),a(i,"scroll",te,n(i)),a(i,"popupPullFishing",ae,n(i)),a(i,"contentMap",ne,n(i)),a(i,"gatheringMiniGameUI",re,n(i)),a(i,"uITutorial",se,n(i)),i.isEatReal=void 0,i.isCanClick=void 0,i.state=void 0,a(i,"map",oe,n(i)),i.MaterialDrops=[],i.isDropping=void 0,i.scaleMap=void 0,a(i,"SeasonFX",le,n(i)),i.onUpdateMusicSound=function(){v.userLocalData.musicOn?this.ambientMusic.volume=1:this.ambientMusic.volume=0},i.isDoneInit=!1,i}t(i,e);var r=i.prototype;return r.start=function(){b.on(G.UpdateMusicSound,this.onUpdateMusicSound,this),y.Instance.SetBgMusic(k.BG_Fishing),this.onUpdateMusicSound(),this.scroll.enabled=!1,this.scaleMap=this.scroll.node.scale.x,this.isDropping=!1,this.state=he.Idle,this.isCanClick=!1,v.userFishing=new F,this.GetMap(),U.PlayParticle(this.SeasonFX),u.on(p.EventType.TOUCH_START,this.onTouchStart.bind(this),this),u.on(p.EventType.TOUCH_END,this.onTouchEnd,this),u.on(p.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},r.onDestroy=function(){},r.onTouchStart=function(e){this.isCanClick&&this.beginDrop()},r.onTouchEnd=function(e,i){this.isCanClick&&this.endDrop()},r.onTouchCancel=function(e,i){this.isCanClick&&this.endDrop()},r.endDrop=function(){1==this.isDropping&&(this.isDropping=!1)},r.beginDrop=function(){this.gatheringMiniGameUI.curItem<=0?B.Instance.ShowMaterialWarning(-1,"\nCongratulations!\n\nYou've cleared\nthis minigame!",this.ValidateFinishGameServer.bind(this)):(0==this.isDropping&&(this.scroll.enabled=!1,this.isDropping=!0),this.map&&this.map.OnBtnClick())},r.GetMap=function(){var e=this;this.isCanClick=!1;M.Fishing_GetMap(v.curWorldMapData.playingMiniGameId,function(i){var t=JSON.parse(i);0==t.status?(e.InitMapData(t.data),e.isCanClick=!0):(P.Instance.ShowToast("Error",T.Instance.GetErrorMessage(t.status),0,!1),e.BackToSceneGathering())}.bind(this),function(i){e.BackToSceneGathering()}.bind(this))},r.GetDrop=function(){var e=this;this.isCanClick=!1;M.Fishing_Drop(v.curWorldMapData.playingMiniGameId,function(i){var t=JSON.parse(i);0==t.status?(e.state=he.Drop,v.userFishing.getDrop=t.data,v.userGatherData.FISHING_level.level=t.data.level,v.userGatherData.FISHING_level.exp=t.data.exp,v.userGatherData.currentStamina=t.data.currentStamina,e.gatheringMiniGameUI.gatheringLevelTop.UpdateView(2),e.gatheringMiniGameUI.UpdateStaminaLabel(),e.map.character.setAnimation(0,"Start_Fishing",!1),e.scheduleOnce((function(){y.Instance.PlaySound(k.UI_Fishing_RotXuongNuoc)}),2)):(P.Instance.ShowToast("Error",T.Instance.GetErrorMessage(t.status),0,!1),e.BackToSceneGathering())}.bind(this),function(i){e.BackToSceneGathering()}.bind(this))},r.CompleteFishing=function(e){if(1!=this.gatheringMiniGameUI.skipGameBtnstate&&1==this.gatheringMiniGameUI.curItem&&(e=!0),this.isCanClick=!1,this.ResetDrop(),e){var i=function(e){var i=JSON.parse(e);0==i.status?(this.state=he.Idle,v.userGatherData.FISHING_level.level=i.data.level,v.userGatherData.FISHING_level.exp=i.data.exp,this.gatheringMiniGameUI.gatheringLevelTop.UpdateView(2),this.gatheringMiniGameUI.curItem=i.data.currentFish,this.map.StopCharacterBait(),this.map.character.setAnimation(0,"Fishing",!1),this.scheduleOnce(function(){var e=this;if(this.map.character.setMix("Fishing","Happy",.2),this.map.character.setAnimation(0,"Happy",!0),this.scheduleOnce(function(){this.isCanClick=!0,this.map.PlayCharacterIdle()}.bind(this),3),null!=i.data.itemKey){var t=i.data.itemKey,a=B.Instance.SpawnMaterial();a.node.setParent(this.map.targetFish),a.Init(t.name,1.5),a.node.setPosition(0,0,0);var n=a.node.getWorldPosition(),r=n.clone();r.x+=g(0,1)>.5?g(-100,-20):g(20,100),r.y+=g(0,1)>.5?g(-100,-30):g(20,100),a.SetTime(60,10),a.SetPosition(n,r),a.setOnGetKeyCallback(this.OnGetKey.bind(this)),a.setClaimCallback((function(){})),a.setReleaseCallback(this.ReleaseMaterialDrop.bind(this)),a.setTweenToTravelBagCallback((function(){e.gatheringMiniGameUI.OpenBag(),y.Instance.PlaySound(k.UI_Item_Slide_to_Bag),a.TweenToBag(e.gatheringMiniGameUI.BagSprite.node.worldPosition,(function(){e.gatheringMiniGameUI.CloseBag(!0)}))})),a.ChangeLayer(d.Enum.UI_2D),a.StartAnim(),this.MaterialDrops.push(a),y.Instance.PlaySound(k.UI_Item_Appear)}else for(var s=i.data.randomItems,o=function(){var i=(t=s[l]).name,a=t.id,n=B.Instance.SpawnMaterial();n.node.setParent(e.map.targetFish),n.Init(i,1.5),n.node.setPosition(0,0,0);var r=n.node.getWorldPosition(),o=r.clone();o.x+=g(0,1)>.5?g(-100,-20):g(20,100),o.y+=g(0,1)>.5?g(-100,-30):g(20,100),n.SetTime(60,10),n.SetPosition(r,o),n.setOnGetKeyCallback(e.OnGetKey.bind(e)),n.setClaimCallback((function(){M.Fishing_Catch(i,a,n.onVerifyServerCallback.bind(n),null)})),n.setReleaseCallback(e.ReleaseMaterialDrop.bind(e)),n.setTweenToTravelBagCallback((function(){e.gatheringMiniGameUI.OpenBag(),y.Instance.PlaySound(k.UI_Item_Slide_to_Bag),n.TweenToBag(e.gatheringMiniGameUI.BagSprite.node.worldPosition,(function(){e.gatheringMiniGameUI.CloseBag(!0)}))})),n.ChangeLayer(d.Enum.UI_2D),n.StartAnim(),e.MaterialDrops.push(n),y.Instance.PlaySound(k.UI_Item_Appear)},l=0;l<s.length;l++){o()}}.bind(this),.8)):(P.Instance.ShowToast("Error",T.Instance.GetErrorMessage(i.status),0,!1),this.BackToSceneGathering())}.bind(this),t=function(e){var i=JSON.parse(e);P.Instance.ShowToast("Error",T.Instance.GetErrorMessage(i.status),0,!1),this.BackToSceneGathering()}.bind(this);M.Fishing_GetPull(v.curWorldMapData.playingMiniGameId,v.userFishing.getDrop.expId,v.userFishing.getDrop.dropId,i.bind(this),t.bind(this))}else this.map.DropFail()},r.OnGetKey=function(){this.gatheringMiniGameUI.skipGameBtnstate=1},r.GetBeginPull=function(){var e=this;M.Fishing_GetBeginPull(v.userFishing.getDrop.expId,function(i){var t=JSON.parse(i);0==t.status?(e.state=he.Pull,v.userFishing.getBeginPull=t,v.userGatherData.FISHING_level.level=t.data.level,v.userGatherData.FISHING_level.exp=t.data.exp,e.gatheringMiniGameUI.gatheringLevelTop.UpdateView(2),e.popupPullFishing.show(e)):(P.Instance.ShowToast("Error",T.Instance.GetErrorMessage(t.status),0,!1),e.BackToSceneGathering())}.bind(this),(function(i){e.BackToSceneGathering()}))},r.InitMapData=function(e){var i=this;v.userFishing.getMap=e,this.gatheringMiniGameUI.Init(2,e.map.maxFish,(function(){i.OnBtnSkip()}),null,this.OnBtnUITutorial.bind(this)),this.gatheringMiniGameUI.curItem=e.map.currentFish,v.userGatherData.currentStamina=e.stamina,this.gatheringMiniGameUI.UpdateStaminaLabel(),this.CreateMap()},r.CreateMap=function(){var e=this,i=0;switch(v.userFishing.getMap.map.size){case 0:i=0;break;case 1:case 3:i=1;break;default:i=2}var t="Fishing/Fishing_Map_"+ce[i]+"_"+m(1,3);I.load(t,l,(function(i,t){var a=f(t);a.setParent(e.contentMap),a.setPosition(0,0,0),e.map=a.getComponent(E),e.map.Init(e)}))},r.ResetDrop=function(){this.map.ResetDrop(),this.isEatReal=!1,this.state=he.Idle},r.OnBtnSkip=function(){0==this.gatheringMiniGameUI.skipGameBtnstate?B.Instance.ShowMaterialWarning(50,"Next mini game fee:",this.ValidateSkipGameServer.bind(this)):2==this.gatheringMiniGameUI.skipGameBtnstate?this.ValidateFinishGameServer():B.Instance.ShowMaterialWarning(-1,"Skip This Mini Game",this.ValidateFinishGameServer.bind(this))},r.ValidateFinishGameServer=function(){var e=this;M.Fishing_Finish(function(i){var t=M.CheckStatus(JSON.parse(i));null!=t&&(v.curWorldMapData=t.data.route,e.BackToSceneGathering())}.bind(this),(function(e){}))},r.ValidateSkipGameServer=function(){var e=this;M.Fishing_Skip(function(i){var t=M.CheckStatus(JSON.parse(i));null!=t&&(v.curWorldMapData=t.data.route,v.userGatherData.currentStamina=t.data.stamina,e.BackToSceneGathering())}.bind(this),(function(e){}))},r.BackToSceneGathering=function(){for(b.off(G.UpdateMusicSound,this.onUpdateMusicSound,this),y.Instance.SetBgMusic(k.BGM_Farm2);this.MaterialDrops.length>0;)this.MaterialDrops[0].Release();C.Instance.ReturnAllPrefab(D.Bag_effect),v.IsGatherPremium?P.Instance.LoadScene("1.Gathering-Premium"):P.Instance.LoadScene("1.Gathering")},r.ReleaseMaterialDrop=function(e){var i=this.MaterialDrops.findIndex((function(i){return i==e}));i>-1&&this.MaterialDrops.splice(i,1)},r.OnBtnUITutorial=function(){this.uITutorial.Show(2)},i}(S)).prototype,"ambientMusic",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=i(Z.prototype,"prefabFishShadow",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=i(Z.prototype,"prefabObjectShadow",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ee=i(Z.prototype,"prefabFish",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=i(Z.prototype,"prefabMaterial",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=i(Z.prototype,"scroll",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=i(Z.prototype,"popupPullFishing",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=i(Z.prototype,"contentMap",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=i(Z.prototype,"gatheringMiniGameUI",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=i(Z.prototype,"uITutorial",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=i(Z.prototype,"map",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=i(Z.prototype,"SeasonFX",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=Z))||Y));r._RF.pop()}}}));

System.register("chunks:///_virtual/FishingMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./UIPopupManager.ts","./FishingManager.ts","./FishShadow.ts"],(function(i){"use strict";var t,o,e,n,r,T,a,c,m,d,w,u,p,g,_,s,S,M,v,h,f;return{setters:[function(i){t=i.applyDecoratedDescriptor,o=i.inheritsLoose,e=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,T=i._decorator,a=i.CCInteger,c=i.CCFloat,m=i.CCString,d=i.Node,w=i.UITransform,u=i.sp,p=i.randomRangeInt,g=i.instantiate,_=i.Vec3,s=i.Component},function(i){S=i.SoundController,M=i.EnumSound},function(i){v=i.UIPopupManager},function(i){h=i.FishingState},function(i){f=i.FishShadow}],execute:function(){var L,R,B,l,b,F,y,P,C,E,I,k,D,O,j,A,z,x,U,N,H;r._RF.push({},"2d7d4ByHUFKeoyEjoMSUYAh","FishingMap",void 0);var G=T.ccclass,K=T.property,V=["Left","Right","Bot","Top"];i("FishingMap",(L=G("FishingMap"),R=K(a),B=K(a),l=K(c),b=K(m),F=K(d),y=K(w),P=K(d),C=K(u.Skeleton),E=K(u.Skeleton),L((D=t((k=function(i){function t(){for(var t,o=arguments.length,r=new Array(o),T=0;T<o;T++)r[T]=arguments[T];return t=i.call.apply(i,[this].concat(r))||this,e(t,"numObject",D,n(t)),e(t,"numFish",O,n(t)),e(t,"delaySpawnFish",j,n(t)),e(t,"idMap",A,n(t)),e(t,"contentFish",z,n(t)),e(t,"contentObjects",x,n(t)),e(t,"targetFish",U,n(t)),e(t,"character",N,n(t)),e(t,"effDrop",H,n(t)),t.manager=void 0,t.posList={},t.dirCache=[],t.timeoutEat=void 0,t.arrEat=[!1,!1,!0],t.arrEatCache=[],t}o(t,i);var r=t.prototype;return r.Init=function(i){this.dirCache=Object.assign([],V),this.manager=i,this.character.setCompleteListener(this.onCompleteCharacter.bind(this)),this.PlayCharacterIdle(),this.autoSpawnObjects(),this.autoSpawnFish()},r.autoSpawnObjects=function(){this.spawnObjects(),this.schedule(this.spawnObjects,5)},r.spawnObjects=function(){for(var i=0,t=this.manager.prefabObjectShadow,o=0;o<t.length;o++)this.scheduleOnce((function(){var o=p(-this.contentObjects.width/2,this.contentObjects.width/2),e=p(-this.contentObjects.height/2,this.contentObjects.height/2),n=g(t[i]);n.setParent(this.contentObjects.node),n.setPosition(o,e,0),i++,S.Instance.PlaySound(M.UI_Fishing_Bubble)}),p(0,3))},r.autoSpawnFish=function(){for(var i=0,t=this.getPath(),o=0;o<t.length;o++)this.scheduleOnce((function(){var o=this.manager.prefabFish,e=g(o);e.setParent(this.contentFish);var n=e.getComponent(f);if(n){var r=t[i];n.randomFish(),n.setPath(r),i++}}),p(0,3))},r.spawnFish=function(){for(var i=this.getPathListL1(),t=10;t<12;t++){var o=this.manager.prefabFish,e=g(o);e.setParent(this.contentFish),e.setPosition(_.ZERO);var n=e.getComponent(f);if(!n)return;n.randomFish(),n.setPath(i[t])}},r.shuffle=function(i){if(!Array.isArray(i))return[];for(var t,o,e=i.length;0!==e;)o=Math.floor(Math.random()*e),t=i[e-=1],i[e]=i[o],i[o]=t;return i},r.getPath=function(){var i=[],t=p(2,4);switch(this.idMap){case"S1":i=this.getPathListS1();break;case"S2":i=this.getPathListS2();break;case"M1":i=this.getPathListM1(),t=p(3,6);break;case"M2":i=this.getPathListM2(),t=p(3,6);break;case"L1":i=this.getPathListL1(),t=p(4,8);break;case"L2":i=this.getPathListL2(),t=p(4,8)}for(var o=[],e=[],n=0;n<i.length;n++)o.push(n);o=(o=this.shuffle(o)).slice(i.length-t-1);for(var r=0;r<o.length;r++){var T=i[o[r]];e.push(T)}return e},r.getPathListS1=function(){return[[{direction:"Swim_Top",positionTarget:new _(240,-60,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(60,50,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(-250,-130,0),directionTurn:"Turn_TopLeft",timeMove:3,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-110,-240,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(80,-350,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(550,-100,0),directionTurn:"Turn_BotRight",timeMove:4,rotation:0},{direction:"Swim_Top",positionTarget:new _(450,0,0),directionTurn:"Turn_RightTop",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(250,-70,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(240,-60,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(610,-390,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(450,-480,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(260,-380,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(45,-490,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-130,-400,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(220,-200,0),directionTurn:"Turn_TopRight",timeMove:3.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(460,-320,0),directionTurn:"Turn_RightBot",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(600,-400,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(610,-390,0),directionTurn:"Turn_BotLeft",timeMove:1,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(-145,-485,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(90,-350,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(290,-430,0),directionTurn:"Turn_RightBot",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(650,-230,0),directionTurn:"Turn_BotRight",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(350,-65,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-290,-410,0),directionTurn:"Turn_TopLeft",timeMove:5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-145,-485,0),directionTurn:"Turn_LeftBot",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-145,-485,0),directionTurn:"Turn_BotRight",timeMove:1,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(610,-260,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(370,-360,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-205,-50,0),directionTurn:"Turn_LeftTop",timeMove:5,rotation:0},{direction:"Swim_Right",positionTarget:new _(10,60,0),directionTurn:"Turn_TopRight",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(400,-150,0),directionTurn:"Turn_RightBot",timeMove:3.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(715,5,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(770,-5,0),directionTurn:"Turn_RightBot",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(605,-120,0),directionTurn:"Turn_BotLeft",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(680,-210,0),directionTurn:"Turn_LeftBot",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(610,-260,0),directionTurn:"Turn_BotLeft",timeMove:1.5,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(-230,-540,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(30,-360,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(530,-80,0),directionTurn:"",timeMove:4.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(460,0,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(130,-160,0),directionTurn:"Turn_TopLeft",timeMove:3.5,rotation:-10},{direction:"Swim_Left",positionTarget:new _(-130,-330,0),directionTurn:"",timeMove:2.5,rotation:5},{direction:"Swim_Bot",positionTarget:new _(-95,-390,0),directionTurn:"Turn_LeftBot",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(-300,-520,0),directionTurn:"Turn_BotLeft",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-290,-550,0),directionTurn:"Turn_LeftBot",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(-230,-540,0),directionTurn:"Turn_BotRight",timeMove:1.5,rotation:0}],[{direction:"Swim_Bot",positionTarget:new _(-310,-250,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-200,-310,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-110,-250,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-250,-150,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-30,-30,0),directionTurn:"Turn_TopRight",timeMove:3,rotation:0},{direction:"Swim_Bot",positionTarget:new _(200,-170,0),directionTurn:"Turn_RightBot",timeMove:3.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(130,-260,0),directionTurn:"Turn_BotLeft",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-50,-165,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(-300,-240,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:-10},{direction:"Swim_Bot",positionTarget:new _(-310,-250,0),directionTurn:"Turn_LeftBot",timeMove:1,rotation:0}]]},r.getPathListS2=function(){return[[{direction:"Swim_Right",positionTarget:new _(-420,-30,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(-190,100,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-320,180,0),directionTurn:"Turn_RightTop",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-430,115,0),directionTurn:"Turn_TopLeft",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-60,-150,0),directionTurn:"Turn_LeftBot",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(240,5,0),directionTurn:"Turn_BotRight",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(120,100,0),directionTurn:"TurnRightTop",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-300,-140,0),directionTurn:"Turn_TopLeft",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(-430,-40,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(-420,-30,0),directionTurn:"Turn_TopRight",timeMove:1,rotation:0}],[{direction:"Swim_Bot",positionTarget:new _(-140,220,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Bot",positionTarget:new _(6,120,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(220,230,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(415,105,0),directionTurn:"Turn_RightBot",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(260,-10,0),directionTurn:"Turn_BotLeft",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(470,-180,0),directionTurn:"Turn_LeftBot",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(325,-270,0),directionTurn:"Turn_BotLeft",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-55,-30,0),directionTurn:"Turn_LeftTop",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(-410,105,0),directionTurn:"",timeMove:2.5,rotation:10},{direction:"Swim_Top",positionTarget:new _(-410,105,0),directionTurn:"",timeMove:2.5,rotation:10},{direction:"Swim_Right",positionTarget:new _(-140,220,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-140,220,0),directionTurn:"Turn_RightBot",timeMove:1,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(230,220,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(70,120,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(204,10,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(350,-105,0),directionTurn:"",timeMove:1.5,rotation:10},{direction:"Swim_Left",positionTarget:new _(240,-200,0),directionTurn:"Turn_BotLeft",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(140,-130,0),directionTurn:"Turn_LeftTop",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(15,-220,0),directionTurn:"Turn_TopLeft",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-310,-10,0),directionTurn:"Turn_LeftTop",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(140,260,0),directionTurn:"Turn_TopRight",timeMove:4,rotation:0},{direction:"Swim_Bot",positionTarget:new _(230,220,0),directionTurn:"Turn_RightBot",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(230,220,0),directionTurn:"Turn_BotLeft",timeMove:1,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(-50,-80,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(-170,-160,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-430,-20,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-590,-110,0),directionTurn:"Turn_TopLeft",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-440,-200,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(160,160,0),directionTurn:"Turn_BotRight",timeMove:5.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(340,30,0),directionTurn:"Turn_RightBot",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(140,-100,0),directionTurn:"Turn_BotLeft",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(30,-20,0),directionTurn:"Turn_LeftTop",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-50,-80,0),directionTurn:"Turn_TopLeft",timeMove:1,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(415,-170,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(320,-230,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(90,-85,0),directionTurn:"Turn_LeftTop",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(250,20,0),directionTurn:"Turn_TopRight",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-120,250,0),directionTurn:"Turn_RightTop",timeMove:4,rotation:0},{direction:"Swim_Left",positionTarget:new _(-310,190,0),directionTurn:"Turn_TopLeft",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-10,10,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(380,-200,0),directionTurn:"",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(380,-200,0),directionTurn:"Turn_BotLeft",timeMove:1,rotation:0}],[{direction:"Swim_Top",positionTarget:new _(400,20,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Top",positionTarget:new _(135,190,0),directionTurn:"",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(205,260,0),directionTurn:"Turn_TopRight",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(370,170,0),directionTurn:"Turn_RightBot",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(100,-10,0),directionTurn:"Turn_BotLeft",timeMove:3,rotation:0},{direction:"Swim_Bot",positionTarget:new _(325,-145,0),directionTurn:"Turn_LeftBot",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(485,-30,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(400,20,0),directionTurn:"Turn_RightTop",timeMove:1,rotation:0}]]},r.getPathListM1=function(){return[[{direction:"Swim_Bot",positionTarget:new _(280,540,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(740,290,0),directionTurn:"",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(900,400,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(640,550,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(315,380,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(170,470,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(280,540,0),directionTurn:"Turn_TopRight",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(280,540,0),directionTurn:"Turn_RightBot",timeMove:.5,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(305,-350,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(810,-105,0),directionTurn:"",timeMove:4,rotation:0},{direction:"Swim_Top",positionTarget:new _(590,90,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:10},{direction:"Swim_Left",positionTarget:new _(-100,-40,0),directionTurn:"Turn_TopLeft",timeMove:3,rotation:-10},{direction:"Swim_Top",positionTarget:new _(-470,180,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-530,140,0),directionTurn:"Turn_TopLeft",timeMove:1,rotation:0},{direction:"Swim_Bot",positionTarget:new _(0,-190,0),directionTurn:"Turn_LeftBot",timeMove:3,rotation:0},{direction:"Swim_Bot",positionTarget:new _(305,-350,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(305,-350,0),directionTurn:"Turn_BotRight",timeMove:1,rotation:0}],[{direction:"Swim_Top",positionTarget:new _(910,-50,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Top",positionTarget:new _(680,130,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(900,250,0),directionTurn:"Turn_TopRight",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(575,500,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:-10},{direction:"Swim_Left",positionTarget:new _(-108,-60,0),directionTurn:"Turn_TopLeft",timeMove:4.5,rotation:10},{direction:"Swim_Bot",positionTarget:new _(310,-340,0),directionTurn:"Turn_LeftBot",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(660,-180,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(910,-50,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(910,-50,0),directionTurn:"Turn_RightTop",timeMove:1,rotation:0}],[{direction:"Swim_Top",positionTarget:new _(260,-115,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Top",positionTarget:new _(-400,330,0),directionTurn:"",timeMove:4.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-65,500,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(330,190,0),directionTurn:"Turn_RightBot",timeMove:3.5,rotation:-10},{direction:"Swim_Bot",positionTarget:new _(850,-8,0),directionTurn:"",timeMove:3,rotation:10},{direction:"Swim_Left",positionTarget:new _(630,-230,0),directionTurn:"Turn_BotLeft",timeMove:2,rotation:8},{direction:"Swim_Left",positionTarget:new _(400,-290,0),directionTurn:"",timeMove:2,rotation:-10},{direction:"Swim_Top",positionTarget:new _(260,-115,0),directionTurn:"Turn_LeftTop",timeMove:1.5,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(-500,-120,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(230,170,0),directionTurn:"",timeMove:4,rotation:-5},{direction:"Swim_Top",positionTarget:new _(-5,458,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:-10},{direction:"Swim_Left",positionTarget:new _(-370,350,0),directionTurn:"Turn_TopLeft",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(-688,30,0),directionTurn:"",timeMove:3,rotation:10},{direction:"Swim_Bot",positionTarget:new _(-500,-120,0),directionTurn:"Turn_LeftBot",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-500,-120,0),directionTurn:"Turn_BotRight",timeMove:1,rotation:0}],[{direction:"Swim_Top",positionTarget:new _(900,250,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Top",positionTarget:new _(710,370,0),directionTurn:"",timeMove:1.5,rotation:5},{direction:"Swim_Top",positionTarget:new _(340,550,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(15,360,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:8},{direction:"Swim_Left",positionTarget:new _(-530,120,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-150,-100,0),directionTurn:"Turn_LeftBot",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(88,50,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(360,-60,0),directionTurn:"Turn_RightBot",timeMove:2.5,rotation:5},{direction:"Swim_Bot",positionTarget:new _(620,-160,0),directionTurn:"",timeMove:2.5,rotation:5},{direction:"Swim_Right",positionTarget:new _(840,-10,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:10},{direction:"Swim_Top",positionTarget:new _(700,130,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(900,250,0),directionTurn:"Turn_TopRight",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(900,250,0),directionTurn:"Turn_RightTop",timeMove:1,rotation:0}],[{direction:"Swim_Top",positionTarget:new _(100,-230,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Top",positionTarget:new _(-260,-10,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(-460,-115,0),directionTurn:"Turn_TopLeft",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-715,40,0),directionTurn:"Turn_LeftTop",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-430,185,0),directionTurn:"Turn_TopRight",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(-220,300,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(250,25,0),directionTurn:"Turn_RightBot",timeMove:3.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(850,345,0),directionTurn:"Turn_BotRight",timeMove:5,rotation:0},{direction:"Swim_Top",positionTarget:new _(660,520,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(330,360,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(710,80,0),directionTurn:"Turn_LeftBot",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(100,-230,0),directionTurn:"Turn_BotLeft",timeMove:3.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(100,-230,0),directionTurn:"Turn_LeftTop",timeMove:1,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(220,440,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(10,320,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-225,430,0),directionTurn:"Turn_LeftTop",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-42,520,0),directionTurn:"Turn_TopRight",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(540,190,0),directionTurn:"Turn_RightBot",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(275,0,0),directionTurn:"Turn_BotLeft",timeMove:2,rotation:15},{direction:"Swim_Top",positionTarget:new _(-150,230,0),directionTurn:"Turn_LeftTop",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(-320,120,0),directionTurn:"Turn_TopLeft",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-130,0,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(350,350,0),directionTurn:"",timeMove:4,rotation:0},{direction:"Swim_Top",positionTarget:new _(220,440,0),directionTurn:"Turn_RightTop",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(220,440,0),directionTurn:"Turn_TopLeft",timeMove:1,rotation:0}],[{direction:"Swim_Top",positionTarget:new _(830,-330,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Top",positionTarget:new _(380,-60,0),directionTurn:"",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(630,150,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(90,530,0),directionTurn:"Turn_RightTop",timeMove:4.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-480,252,0),directionTurn:"Turn_TopLeft",timeMove:3.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-280,60,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(20,-150,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(190,-40,0),directionTurn:"Turn_BotRight",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(720,-430,0),directionTurn:"Turn_RightBot",timeMove:3.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(830,-330,0),directionTurn:"Turn_BotRight",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(830,-330,0),directionTurn:"Turn_RightTop",timeMove:1,rotation:0}]]},r.getPathListM2=function(){return[[{direction:"Swim_Right",positionTarget:new _(-50,-350,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(402,-110,0),directionTurn:"",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(30,195,0),directionTurn:"Turn_RightTop",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(240,360,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:10},{direction:"Swim_Bot",positionTarget:new _(480,260,0),directionTurn:"Turn_RightBot",timeMove:2.5,rotation:5},{direction:"Swim_Bot",positionTarget:new _(850,50,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(70,-420,0),directionTurn:"Turn_BotLeft",timeMove:5.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-50,-350,0),directionTurn:"Turn_LeftTop",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-50,-350,0),directionTurn:"Turn_TopRight",timeMove:1,rotation:0}],[{direction:"Swim_Bot",positionTarget:new _(-710,250,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-542,150,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(90,490,0),directionTurn:"Turn_BotRight",timeMove:3.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(392,395,0),directionTurn:"Turn_LeftBot",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(184,215,0),directionTurn:"Turn_BotLeft",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(-280,-150,0),directionTurn:"",timeMove:3,rotation:10},{direction:"Swim_Top",positionTarget:new _(-580,40,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-840,185,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(-710,250,0),directionTurn:"Turn_TopRight",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-710,250,0),directionTurn:"Turn_RightBot",timeMove:2,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(660,320,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(450,190,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(700,0,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:10},{direction:"Swim_Left",positionTarget:new _(380,-210,0),directionTurn:"Turn_BotLeft",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-340,220,0),directionTurn:"Turn_LeftTop",timeMove:5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-15,400,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(230,550,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(660,320,0),directionTurn:"Turn_RightBot",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(660,320,0),directionTurn:"Turn_BotLeft",timeMove:1,rotation:0}],[{direction:"Swim_Bot",positionTarget:new _(-580,-110,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-370,-230,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(80,35,0),directionTurn:"Turn_BotRight",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(580,350,0),directionTurn:"",timeMove:3.5,rotation:10},{direction:"Swim_Top",positionTarget:new _(350,500,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(10,260,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-290,90,0),directionTurn:"",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(-580,-110,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-580,-110,0),directionTurn:"Turn_LeftBot",timeMove:1,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(1370,-25,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(1250,-100,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(500,330,0),directionTurn:"Turn_LeftTop",timeMove:3.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-320,-200,0),directionTurn:"Turn_TopLeft",timeMove:5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(0,-380,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(460,-90,0),directionTurn:"Turn_BotRight",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(820,125,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(1e3,20,0),directionTurn:"Turn_RightBot",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(1140,100,0),directionTurn:"Turn_BotRight",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(1370,-25,0),directionTurn:"Turn_RightBot",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(1370,-25,0),directionTurn:"Turn_BotLeft",timeMove:1.5,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(720,150,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(505,8,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(100,235,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-200,30,0),directionTurn:"Turn_TopLeft",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-460,190,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(50,480,0),directionTurn:"Turn_TopRight",timeMove:3,rotation:0},{direction:"Swim_Bot",positionTarget:new _(720,150,0),directionTurn:"Turn_RightBot",timeMove:3.5,rotation:10},{direction:"Swim_Left",positionTarget:new _(720,150,0),directionTurn:"Turn_BotLeft",timeMove:1,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(280,-225,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(680,20,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(920,-90,0),directionTurn:"Turn_RightBot",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(1040,0,0),directionTurn:"Turn_BotRight",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(490,310,0),directionTurn:"Turn_RightTop",timeMove:3.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(280,180,0),directionTurn:"Turn_TopLeft",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-30,380,0),directionTurn:"Turn_LeftTop",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(-500,160,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(270,-230,0),directionTurn:"Turn_LeftBot",timeMove:4.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(280,-225,0),directionTurn:"Turn_BotRight",timeMove:1,rotation:0}],[{direction:"Swim_Top",positionTarget:new _(460,-20,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Top",positionTarget:new _(68,220,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(325,385,0),directionTurn:"Turn_TopRight",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(905,90,0),directionTurn:"Turn_RightBot",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(300,-350,0),directionTurn:"Turn_BotLeft",timeMove:5.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(500,-470,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(360,-560,0),directionTurn:"Turn_BotLeft",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(0,-350,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(275,-170,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(460,-20,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(460,-20,0),directionTurn:"Turn_RightTop",timeMove:1,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(-595,102,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(-260,310,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-25,215,0),directionTurn:"Turn_RightBot",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-200,35,0),directionTurn:"Turn_BotLeft",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(212,-209,0),directionTurn:"Turn_LeftBot",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(600,-15,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(315,240,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-285,-120,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:5},{direction:"Swim_Top",positionTarget:new _(-682,-45,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:10},{direction:"Swim_Right",positionTarget:new _(-595,102,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:10},{direction:"Swim_Right",positionTarget:new _(-260,310,0),directionTurn:"",timeMove:2,rotation:0}]]},r.getPathListL1=function(){return[[{direction:"Swim_Bot",positionTarget:new _(-1050,140,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-850,0,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-500,238,0),directionTurn:"Turn_BotRight",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-185,105,0),directionTurn:"Turn_RightBot",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(285,345,0),directionTurn:"Turn_BotRight",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-60,600,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-375,445,0),directionTurn:"Turn_TopLeft",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(-810,250,0),directionTurn:"",timeMove:2.5,rotation:-5},{direction:"Swim_Left",positionTarget:new _(-1050,140,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-1050,140,0),directionTurn:"Turn_LeftBot",timeMove:1,rotation:0}],[{direction:"Swim_Bot",positionTarget:new _(800,750,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Bot",positionTarget:new _(940,670,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(500,400,0),directionTurn:"Turn_BotLeft",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(800,165,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(580,20,0),directionTurn:"Turn_BotLeft",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(190,-180,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-300,140,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(135,380,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(800,750,0),directionTurn:"",timeMove:3,rotation:0},{direction:"Swim_Bot",positionTarget:new _(800,750,0),directionTurn:"Turn_RightBot",timeMove:1,rotation:0}],[{direction:"Swim_Top",positionTarget:new _(1120,460,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Top",positionTarget:new _(950,550,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(600,320,0),directionTurn:"Turn_BotLeft",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(840,160,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(620,0,0),directionTurn:"Turn_BotLeft",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(740,-100,0),directionTurn:"Turn_LeftBot",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(440,-290,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-200,100,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(720,780,0),directionTurn:"Turn_TopRight",timeMove:3.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(940,350,0),directionTurn:"Turn_RightBot",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(1120,460,0),directionTurn:"Turn_BotRight",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(1120,460,0),directionTurn:"Turn_RightTop",timeMove:1.5,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(-980,315,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(-820,405,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-360,150,0),directionTurn:"Turn_RightBot",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(-425,60,0),directionTurn:"Turn_BotLeft",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-170,-125,0),directionTurn:"Turn_LeftBot",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-655,-455,0),directionTurn:"Turn_BotLeft",timeMove:3.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-985,-275,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-510,40,0),directionTurn:"Turn_TopRight",timeMove:3.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-980,315,0),directionTurn:"Turn_RightTop",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(-980,315,0),directionTurn:"Turn_TopRight",timeMove:1,rotation:0}],[{direction:"Swim_Bot",positionTarget:new _(-25,-145,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Bot",positionTarget:new _(145,-240,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(750,100,0),directionTurn:"Turn_BotRight",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(320,380,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-215,90,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(188,-125,0),directionTurn:"Turn_LeftBot",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(605,90,0),directionTurn:"Turn_BotRight",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(175,400,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-350,100,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-25,-145,0),directionTurn:"Turn_LeftBot",timeMove:2.5,rotation:0}],[{direction:"Swim_Top",positionTarget:new _(990,160,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Top",positionTarget:new _(850,280,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(1040,400,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(900,540,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(450,230,0),directionTurn:"Turn_TopLeft",timeMove:3.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(620,90,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(340,-60,0),directionTurn:"Turn_BotLeft",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(490,-170,0),directionTurn:"Turn_LeftBot",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(990,160,0),directionTurn:"Turn_BotRight",timeMove:3.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(990,160,0),directionTurn:"Turn_RightTop",timeMove:1,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(920,360,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(690,90,0),directionTurn:"",timeMove:2.5,rotation:15},{direction:"Swim_Top",positionTarget:new _(130,340,0),directionTurn:"Turn_LeftTop",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(-320,590,0),directionTurn:"",timeMove:2.5,rotation:-10},{direction:"Swim_Left",positionTarget:new _(-770,390,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-480,180,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(250,580,0),directionTurn:"Turn_BotRight",timeMove:5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(920,360,0),directionTurn:"Turn_RightBot",timeMove:3,rotation:5},{direction:"Swim_Left",positionTarget:new _(920,360,0),directionTurn:"Turn_BotLeft",timeMove:1,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(-1100,90,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(-870,210,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-450,0,0),directionTurn:"Turn_RightBot",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(-270,140,0),directionTurn:"Turn_BotRight",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(40,-40,0),directionTurn:"Turn_RightBot",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-400,-315,0),directionTurn:"Turn_BotLeft",timeMove:3.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-900,-60,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-1100,90,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(-1100,90,0),directionTurn:"Turn_BotRight",timeMove:1,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(510,175,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(815,360,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(610,530,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(315,370,0),directionTurn:"Turn_TopLeft",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(-120,120,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-510,340,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-190,550,0),directionTurn:"Turn_TopRight",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(160,360,0),directionTurn:"Turn_RightBot",timeMove:3,rotation:0},{direction:"Swim_Bot",positionTarget:new _(510,175,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(510,175,0),directionTurn:"Turn_BotRight",timeMove:1,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(70,-60,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(-115,-190,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-355,-50,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(-630,-220,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-970,-65,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-80,530,0),directionTurn:"Turn_TopRight",timeMove:6.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(340,335,0),directionTurn:"Turn_RightBot",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(790,65,0),directionTurn:"",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(320,-190,0),directionTurn:"Turn_BotLeft",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(70,-60,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(70,-60,0),directionTurn:"Turn_TopLeft",timeMove:1,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(330,-510,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(670,-135,0),directionTurn:"",timeMove:2.5,rotation:10},{direction:"Swim_Top",positionTarget:new _(480,0,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(50,-260,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-600,90,0),directionTurn:"Turn_LeftTop",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(-930,-135,0),directionTurn:"Turn_TopLeft",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-730,-250,0),directionTurn:"Turn_LeftBot",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-400,-450,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-130,-270,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(330,-510,0),directionTurn:"Turn_RightBot",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(330,-510,0),directionTurn:"Turn_BotRight",timeMove:1,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(-760,400,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(-985,300,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-530,30,0),directionTurn:"Turn_LeftBot",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(200,460,0),directionTurn:"Turn_BotRight",timeMove:4,rotation:0},{direction:"Swim_Bot",positionTarget:new _(620,240,0),directionTurn:"Turn_RightBot",timeMove:3,rotation:0},{direction:"Swim_Bot",positionTarget:new _(910,85,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(430,-230,0),directionTurn:"Turn_BotLeft",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(-160,80,0),directionTurn:"Turn_LeftTop",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(-760,400,0),directionTurn:"",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(-760,400,0),directionTurn:"Turn_TopLeft",timeMove:1,rotation:0}]]},r.getPathListL2=function(){return[[{direction:"Swim_Bot",positionTarget:new _(-540,750,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-355,630,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(-45,800,0),directionTurn:"Turn_BotRight",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(450,550,0),directionTurn:"Turn_RightBot",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(-80,220,0),directionTurn:"Turn_BotLeft",timeMove:4.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-700,40,0),directionTurn:"",timeMove:2.5,rotation:-10},{direction:"Swim_Top",positionTarget:new _(-1140,380,0),directionTurn:"Turn_LeftTop",timeMove:3.5,rotation:-10},{direction:"Swim_Right",positionTarget:new _(-780,590,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-540,750,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-540,750,0),directionTurn:"Turn_RightBot",timeMove:1,rotation:0}],[{direction:"Swim_Bot",positionTarget:new _(100,760,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Bot",positionTarget:new _(400,550,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(740,475,0),directionTurn:"",timeMove:2,rotation:10},{direction:"Swim_Bot",positionTarget:new _(905,320,0),directionTurn:"",timeMove:1.5,rotation:-10},{direction:"Swim_Bot",positionTarget:new _(1350,90,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(1520,190,0),directionTurn:"Turn_BotRight",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(1350,270,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(950,90,0),directionTurn:"Turn_TopLeft",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(-55,650,0),directionTurn:"Turn_LeftTop",timeMove:6.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(100,760,0),directionTurn:"Turn_TopRight",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(100,760,0),directionTurn:"Turn_RightBot",timeMove:1.5,rotation:0}],[{direction:"Swim_Top",positionTarget:new _(780,540,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(445,395,0),directionTurn:"Turn_TopLeft",timeMove:3,rotation:10},{direction:"Swim_Left",positionTarget:new _(-190,240,0),directionTurn:"",timeMove:3,rotation:-15},{direction:"Swim_Left",positionTarget:new _(-740,-5,0),directionTurn:"",timeMove:3.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-635,-200,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:-10},{direction:"Swim_Right",positionTarget:new _(-270,-55,0),directionTurn:"Turn_BotRight",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(280,220,0),directionTurn:"",timeMove:4,rotation:0},{direction:"Swim_Right",positionTarget:new _(780,540,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(780,540,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(680,120,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(1e3,300,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(1220,160,0),directionTurn:"Turn_RightBot",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(1050,30,0),directionTurn:"Turn_BotLeft",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(1180,-60,0),directionTurn:"Turn_LeftBot",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(1085,-140,0),directionTurn:"Turn_BotLeft",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(390,330,0),directionTurn:"Turn_LeftTop",timeMove:4.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(315,310,0),directionTurn:"Turn_TopLeft",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(590,90,0),directionTurn:"Turn_LeftBot",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(680,120,0),directionTurn:"Turn_BotRight",timeMove:1.5,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(-380,-630,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(-160,-500,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-605,-230,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-360,-80,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-740,180,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-1380,-170,0),directionTurn:"Turn_TopLeft",timeMove:3.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-450,-660,0),directionTurn:"Turn_LeftBot",timeMove:5.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-380,-630,0),directionTurn:"Turn_BotRight",timeMove:1,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(-975,-60,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(-700,130,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-1070,370,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(-730,570,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-850,710,0),directionTurn:"Turn_RightTop",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-1180,540,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-1490,255,0),directionTurn:"",timeMove:2,rotation:15},{direction:"Swim_Bot",positionTarget:new _(-1290,100,0),directionTurn:"Turn_LeftBot",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-1015,-70,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-975,-60,0),directionTurn:"Turn_BotRight",timeMove:1,rotation:0}],[{direction:"Swim_Bot",positionTarget:new _(-1380,450,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-1050,260,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-610,505,0),directionTurn:"Turn_BotRight",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(-175,735,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(305,450,0),directionTurn:"Turn_RightBot",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-70,230,0),directionTurn:"Turn_BotLeft",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(-660,-145,0),directionTurn:"",timeMove:3,rotation:10},{direction:"Swim_Left",positionTarget:new _(-1115,-305,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-1630,-15,0),directionTurn:"Turn_LeftTop",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(-1e3,350,0),directionTurn:"Turn_TopRight",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(-1250,530,0),directionTurn:"Turn_RightTop",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-1400,450,0),directionTurn:"Turn_TopLeft",timeMove:1.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-1385,450,0),directionTurn:"Turn_LeftBot",timeMove:.5,rotation:0}],[{direction:"Swim_Bot",positionTarget:new _(-1630,20,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-1130,-270,0),directionTurn:"",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(-780,-80,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(-360,200,0),directionTurn:"",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(-760,480,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-180,760,0),directionTurn:"Turn_TopRight",timeMove:3.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(480,380,0),directionTurn:"Turn_RightBot",timeMove:4,rotation:0},{direction:"Swim_Left",positionTarget:new _(-125,35,0),directionTurn:"Turn_BotLeft",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(-530,275,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(-1060,0,0),directionTurn:"Turn_TopLeft",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-1380,170,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-1640,35,0),directionTurn:"Turn_TopLeft",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-1630,20,0),directionTurn:"Turn_LeftBot",timeMove:1,rotation:0}],[{direction:"Swim_Top",positionTarget:new _(130,-180,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Top",positionTarget:new _(-170,-7,0),directionTurn:"",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(130,180,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(30,280,0),directionTurn:"Turn_RightTop",timeMove:1.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(320,470,0),directionTurn:"Turn_TopRight",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-135,780,0),directionTurn:"Turn_RightTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-660,500,0),directionTurn:"Turn_TopLeft",timeMove:3,rotation:0},{direction:"Swim_Left",positionTarget:new _(-830,330,0),directionTurn:"",timeMove:1.5,rotation:10},{direction:"Swim_Bot",positionTarget:new _(-450,90,0),directionTurn:"Turn_LeftBot",timeMove:2.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(50,-150,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(55,-140,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(130,-180,0),directionTurn:"Turn_RightTop",timeMove:1,rotation:0}],[{direction:"Swim_Left",positionTarget:new _(-530,300,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Left",positionTarget:new _(-830,110,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-1305,430,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-900,650,0),directionTurn:"Turn_TopRight",timeMove:3,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-680,520,0),directionTurn:"Turn_RightBot",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-70,790,0),directionTurn:"Turn_BotRight",timeMove:3,rotation:0},{direction:"Swim_Bot",positionTarget:new _(500,440,0),directionTurn:"Turn_RightBot",timeMove:3.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(15,150,0),directionTurn:"Turn_BotLeft",timeMove:2.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-185,280,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(-340,230,0),directionTurn:"Turn_TopLeft",timeMove:1.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-512,310,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:0},{direction:"Swim_Left",positionTarget:new _(-530,300,0),directionTurn:"Turn_TopLeft",timeMove:1.5,rotation:0}],[{direction:"Swim_Right",positionTarget:new _(70,600,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Right",positionTarget:new _(345,760,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Bot",positionTarget:new _(575,640,0),directionTurn:"Turn_RightBot",timeMove:1.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(110,345,0),directionTurn:"Turn_BotLeft",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-580,10,0),directionTurn:"",timeMove:3.5,rotation:0},{direction:"Swim_Top",positionTarget:new _(-900,190,0),directionTurn:"Turn_LeftTop",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-1320,435,0),directionTurn:"",timeMove:2.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-780,740,0),directionTurn:"Turn_TopRight",timeMove:3.5,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-610,660,0),directionTurn:"Turn_RightBot",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(-330,820,0),directionTurn:"Turn_BotRight",timeMove:3,rotation:0},{direction:"Swim_Bot",positionTarget:new _(55,600,0),directionTurn:"Turn_RightBot",timeMove:3,rotation:0},{direction:"Swim_Right",positionTarget:new _(70,600,0),directionTurn:"Turn_BotRight",timeMove:1,rotation:0}],[{direction:"Swim_Top",positionTarget:new _(-300,-420,0),directionTurn:"",timeMove:1,rotation:0},{direction:"Swim_Top",positionTarget:new _(-630,-220,0),directionTurn:"",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(-275,-15,0),directionTurn:"Turn_TopRight",timeMove:2,rotation:0},{direction:"Swim_Right",positionTarget:new _(80,50,0),directionTurn:"",timeMove:2,rotation:-10},{direction:"Swim_Top",positionTarget:new _(0,245,0),directionTurn:"Turn_RightTop",timeMove:2,rotation:-10},{direction:"Swim_Left",positionTarget:new _(-560,-40,0),directionTurn:"Turn_TopLeft",timeMove:3,rotation:0},{direction:"Swim_Top",positionTarget:new _(-920,180,0),directionTurn:"Turn_LeftTop",timeMove:2.5,rotation:0},{direction:"Swim_Left",positionTarget:new _(-1460,-140,0),directionTurn:"Turn_TopLeft",timeMove:3,rotation:0},{direction:"Swim_Bot",positionTarget:new _(-430,-630,0),directionTurn:"Turn_LeftBot",timeMove:5.5,rotation:0},{direction:"Swim_Right",positionTarget:new _(-160,-500,0),directionTurn:"Turn_BotRight",timeMove:2,rotation:0},{direction:"Swim_Top",positionTarget:new _(-300,-420,0),directionTurn:"Turn_RightTop",timeMove:1,rotation:0}]]},r.onDestroy=function(){this.StopCharacterBait()},r.OnBtnClick=function(){0!=this.manager.isCanClick&&(this.manager.state==h.Idle?this.manager.GetDrop():this.manager.state==h.Drop?0==this.manager.isEatReal?this.DropFail():this.DropReal():(this.manager.state,h.Pull))},r.ResetDrop=function(){this.effDrop.node.active=!1,this.effDrop.animation="",this.effDrop.loop=!1,this.StopCharacterBait()},r.StopCharacterBait=function(){null!=this.timeoutEat&&(clearTimeout(this.timeoutEat),this.timeoutEat=null),this.unschedule(this.DropFail)},r.PlayCharacterBait=function(){var i=this;this.timeoutEat=setTimeout((function(){i.PlayEat()}),1e3*p(2,5))},r.PlayEat=function(){var i=this,t=p(0,this.arrEatCache.length);i.manager.isEatReal=i.arrEatCache[t],i.arrEatCache.splice(t,1),i.manager.isEatReal?i.PlayEatRealBait():i.PlayEatFakeBait()},r.DropFail=function(){this.manager.ResetDrop(),v.Instance.ShowToast("Error","Oops. The fish has got away...",0,!1),this.character.setMix("Idle_Sleep","Angry",.35),this.character.setMix("Eat_Real","Angry",.35),this.character.setMix("Eat_Fake","Angry",.35),this.character.setAnimation(0,"Angry",!1),this.manager.isCanClick=!1,this.scheduleOnce(function(){this.manager.isCanClick=!0}.bind(this),2)},r.DropReal=function(){this.manager.ResetDrop(),this.character.setMix("Idle_Sleep","Idle_Fishing",.35),this.character.setMix("Eat_Real","Idle_Fishing",.35),this.character.setMix("Eat_Fake","Idle_Fishing",.35),this.character.setAnimation(0,"Idle_Fishing",!0),this.manager.GetBeginPull()},r.PlayEatRealBait=function(){S.Instance.PlaySound(M.UI_Fishing_CaDopNuoc),this.character.setMix("Idle_Sleep","Eat_Real",.5),this.character.setAnimation(0,"Eat_Real",!1),this.effDrop.node.active=!0,this.effDrop.setAnimation(0,"Shockwave",!0),this.scheduleOnce(this.DropFail,1)},r.PlayEatFakeBait=function(){this.character.setMix("Idle_Sleep","Eat_Fake",.25),this.character.setAnimation(0,"Eat_Fake",!1)},r.onCompleteCharacter=function(i){switch(this.character.animation){case"Happy":break;case"Angry":this.manager.ResetDrop(),this.PlayCharacterIdle();break;case"Idle_Sleep":case"Eat_Real":break;case"Eat_Fake":0==this.manager.isEatReal&&this.manager.state==h.Drop&&(this.StopCharacterBait(),this.PlayCharacterBait(),this.character.clearTrack(0),this.character.setToSetupPose(),this.character.setAnimation(0,"Idle_Sleep",!0));break;case"Start_Fishing":this.manager.isCanClick=!0,this.arrEatCache=Object.assign([],this.arrEat),this.StopCharacterBait(),this.PlayCharacterBait(),this.character.clearTrack(0),this.character.setToSetupPose(),this.character.setAnimation(0,"Idle_Sleep",!0)}},r.PlayCharacterIdle=function(){this.character.clearTrack(0),this.character.setToSetupPose(),this.character.setMix("No_Idle","No_Idle_Sleep",1),this.character.setAnimation(0,"No_Idle",!0),this.character.addAnimation(0,"No_Idle_Sleep",!0,10)},t}(s)).prototype,"numObject",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),O=t(k.prototype,"numFish",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),j=t(k.prototype,"delaySpawnFish",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=t(k.prototype,"idMap",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"S1"}}),z=t(k.prototype,"contentFish",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(k.prototype,"contentObjects",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(k.prototype,"targetFish",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(k.prototype,"character",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(k.prototype,"effDrop",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=k))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/FishObjectShadow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,r,s,o,c,l,a,p,h,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,c=e.sp,l=e.Node,a=e.ParticleSystem,p=e.Vec3,h=e.Color,u=e.randomRange,d=e.Component}],execute:function(){var b,y,f,w,F,g,m,O,S;s._RF.push({},"2605dpZkV9JDKqGp9qu9ZNJ","FishObjectShadow",void 0);var v=o.ccclass,j=o.property;e("FishObjectShadow",(b=v("FishObjectShadow"),y=j(c.Skeleton),f=j(l),w=j(a),b((m=t((g=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,n(t,"spine",m,r(t)),n(t,"nodeFish",O,r(t)),n(t,"particle",S,r(t)),t}return i(t,e),t.prototype.start=function(){this.scheduleOnce(function(){this.particle.node.scale=new p(1,1,1),this.particle.stop(),this.particle.play()}.bind(this),.2),this.spine.color=new h(255,255,255,0),this.nodeFish.scale=new p(.25,.25,.25),this.scheduleOnce((function(){this.particle.node.scale=new p(1,1,1),this.particle.stop(),this.particle.play()}),5),this.scheduleOnce(function(){this.particle.node.scale=new p(1,1,1),this.particle.stop(),this.particle.play(),this.node.destroy()}.bind(this),u(6,9))},t}(d)).prototype,"spine",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(g.prototype,"nodeFish",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(g.prototype,"particle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=g))||F));s._RF.pop()}}}));

System.register("chunks:///_virtual/FishShadow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts"],(function(i){"use strict";var t,e,s,n,h,a,o,l,c,r,p,u,F,w;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,s=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){h=i.cclegacy,a=i._decorator,o=i.sp,l=i.Node,c=i.randomRangeInt,r=i.Vec3,p=i.Color,u=i.tween,F=i.Component},function(i){w=i.Utility}],execute:function(){var d,f,m,v,y,b,g,D,O;h._RF.push({},"db7d6VuTwRJ5q55c8SzJB05","FishShadow",void 0);var A=a.ccclass,P=a.property;i("FishShadow",(d=A("FishShadow"),f=P([o.SkeletonData]),m=P(o.Skeleton),v=P(l),d((g=t((b=function(i){function t(){for(var t,e=arguments.length,h=new Array(e),a=0;a<e;a++)h[a]=arguments[a];return t=i.call.apply(i,[this].concat(h))||this,s(t,"listAnimFish",g,n(t)),s(t,"spineFish",D,n(t)),s(t,"objectFish",O,n(t)),t.tweenFish=void 0,t.tweenOpacity=void 0,t.indexPath=0,t.pathData=[],t.isHide=!0,t}e(t,i);var h=t.prototype;return h.start=function(){},h.randomFish=function(){if(!(null==this.listAnimFish||this.listAnimFish.length<=0)){var i=c(0,this.listAnimFish.length-1);this.setAnimFish(i)}},h.appearFish=function(){var i=this;this.objectFish.scale=new r(.25,.25,.25),null!=this.tweenOpacity&&this.tweenOpacity.stop(),this.tweenOpacity=w.tweenNumber(0,255,.5,(function(t){i.spineFish.color=new p(255,255,255,t)}))},h.hideFish=function(){var i=this;this.isHide=!0,null!=this.tweenOpacity&&this.tweenOpacity.stop(),this.tweenOpacity=w.tweenNumber(255,0,.5,(function(t){i.spineFish.color=new p(255,255,255,t)})),this.tweenFish=u(this.objectFish).to(.5,{scale:new r(.25,.25,.25)}).call((function(){i.unscheduleAllCallbacks()})),this.tweenFish.start()},h.setAnimFish=function(i){null==this.listAnimFish||this.listAnimFish.length<=0||(this.spineFish.skeletonData=this.listAnimFish[i])},h.moveFish=function(i,t,e,s,n){var h=this;void 0===s&&(s=""),void 0===n&&(n=0),null!=this.tweenFish&&this.tweenFish.stop();var a=.1,o=s;""!=o?(a=.5,this.spineFish.loop=!1,this.spineFish.animation=s):(this.spineFish.loop=!0,this.spineFish.animation=i),this.tweenFish=u(this.objectFish).delay(a).call((function(){""!=o&&(h.spineFish.loop=!0,h.spineFish.animation=i)})).to(e,{position:t,angle:n}).call((function(){h.isHide||h.scheduleOnce(h.moveToPath,c(1,3))})),this.tweenFish.start()},h.setPath=function(i){var t=this;if(this.pathData=i,!(null==this.pathData||this.pathData.length<1)){var e=this.pathData[0].direction,s=this.pathData[0].positionTarget;this.objectFish.scale=new r(.25,.25,.25),null!=this.tweenFish&&this.tweenFish.stop(),this.spineFish.animation=e,this.spineFish.loop=!0,this.objectFish.position=s,this.indexPath=1,this.isHide=!1,null!=this.tweenOpacity&&this.tweenOpacity.stop(),this.tweenOpacity=w.tweenNumber(0,255,.5,(function(i){t.spineFish.color=new p(255,255,255,i)})),this.tweenFish=u(this.objectFish).to(.5,{scale:r.ONE}).call((function(){t.scheduleOnce(t.moveToPath,c(0,2))})),this.tweenFish.start()}},h.moveToPath=function(){this.indexPath>=this.pathData.length&&(this.indexPath=1);var i=this.pathData[this.indexPath],t=i.direction,e=i.positionTarget,s=i.directionTurn,n=i.timeMove;this.moveFish(t,e,n,s),this.indexPath++},t}(F)).prototype,"listAnimFish",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(b.prototype,"spineFish",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(b.prototype,"objectFish",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=b))||y));h._RF.pop()}}}));

System.register("chunks:///_virtual/FlameThrower.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./UserModel.ts","./Utility.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./TargetComponent.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,i,o,n,a,r,s,l,c,h,u,d,m,g,p,f,A,k,L,y,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,l=t.BoxCollider2D,c=t.AudioSource,h=t.Contact2DType},function(t){u=t.SoundController,d=t.EnumSoundPVE},function(t){m=t.UserModel},function(t){g=t.Utility},function(t){p=t.PVEGameplayControl},function(t){f=t.PVEHelper},function(t){A=t.TargetComponent},function(t){k=t.AttackType,L=t.DamageType},function(t){y=t.InGameEventID},function(t){P=t.SkillBase}],execute:function(){var v,C,T,E,S,D,F,w,b,I,R;a._RF.push({},"26bc7L9HktOjpE8cvWTRWSg","FlameThrower",void 0);var B=r.ccclass,N=r.property;t("FlameThrower",(v=B("FlameThrower"),C=N(s),T=N(s),E=N(l),S=N(c),v((w=e((F=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).delayTimeAttack=0,o(e,"Line",w,n(e)),o(e,"FakeLine",b,n(e)),o(e,"LineCollider",I,n(e)),o(e,"SoundFX",R,n(e)),e.targets=void 0,e.curTarget=void 0,e.AttackAnimStage=0,e}i(e,t);var a=e.prototype;return a.Init=function(e,i){t.prototype.Init.call(this,e,i),this.root.root.event.on(y.OnDead,this.onPlantDead,this),this.LineCollider.size.width=e.root.data.attackData.AttackRange+50,this.LineCollider.offset.x=this.LineCollider.size.width/2,this.LineCollider.apply(),this.LineCollider.on(h.BEGIN_CONTACT,this.BeginContact,this),this.LineCollider.on(h.END_CONTACT,this.EndContact,this),this.targets=[]},a.BeginContact=function(t,e,i){var o=e.getComponent(A);null!=o&&null!=o.root&&0!=o.canTarget&&0==o.root.isDead&&o.root.team!==this.root.root.team&&this.targets.indexOf(o)<0&&this.targets.push(o)},a.EndContact=function(t,e,i){var o=e.getComponent(A);if(o&&o.root.team!=this.root.root.team){var n=this.targets.indexOf(o);n>=0&&this.targets.splice(n,1)}},a.update=function(t){null!=this.curTarget?this.lerpLine(t):(this.Line.active&&(this.root.root.animationComponent.setIdleAnim(),this.SoundFX.stop()),this.Line.active&&(this.Line.active=!1),this.AttackAnimStage=0),this.root.attackAble&&(this.delayTimeAttack>0?this.delayTimeAttack-=t:this.root.targets.length<=0?this.curTarget=null:(this.delayTimeAttack=1/this.root.getAttackSpeed(),this.attack(this.root.targets[0])))},a.addAttackData=function(t,e){t==k.NormalAttack&&(e.AddDamage(L.Normal,this.root.GetRandomBasicDamage()),e.AddEffects(this.skillData.EffectData))},a.attack=function(t){f.RandomActive(this.root.root.data.attackData.BlindPercent)?console.error("Blind"):0==this.AttackAnimStage?(this.curTarget=t,this.AttackAnimStage=1,this.root.root.event.on(y.AttackAnimEvent,this.endCast,this),this.root.root.animationComponent.setSkillAttackAnim(this.root.root.data.statsData.DefaultAttackAnimName),u.Instance.PlaySoundPvE(d.meltdown)):2==this.AttackAnimStage&&(this.curTarget=t,this.attackAllEnemy())},a.attackAllEnemy=function(){if(!(this.targets.length<=0))for(var t=0;t<this.targets.length;t++){var e=this.targets[t],i=this.root.Attack(k.NormalAttack,this.curTarget);if(null==i)return;e.TakeDamage(i)}},a.endCast=function(){null!=this.curTarget?(this.root.root.event.off(y.AttackAnimEvent,this.endCast,this),this.AttackAnimStage=2,this.root.root.animationComponent.setSkillAttackAnim(this.skillData.LoopAnimName,!0),this.EnableLine(),this.attackAllEnemy(),this.PlaySoundLoop()):console.error("this.curTarget null")},a.EnableLine=function(){this.Line.active=!0,this.Line.setParent(p.Instance.getEffParentFront()),this.Line.setWorldPosition(this.root.getAttackPos().worldPosition),g.PlayParticle(this.Line),this.updateLinePos()},a.updateLinePos=function(){var t=this.curTarget.getTargetPos().worldPosition,e=this.root.getAttackPos().worldPosition,i=Math.atan2(t.y-e.y,t.x-e.x);i*=180/Math.PI,this.FakeLine.setWorldRotationFromEuler(0,0,i),this.Line.setWorldRotationFromEuler(0,0,i)},a.lerpLine=function(t){if(1!=this.AttackAnimStage){var e=this.curTarget.getTargetPos().worldPosition,i=this.root.getAttackPos().worldPosition,o=Math.atan2(e.y-i.y,e.x-i.x);o*=180/Math.PI,this.FakeLine.setWorldRotationFromEuler(0,0,o),this.Line.setWorldRotation(this.Line.getWorldRotation().slerp(this.FakeLine.worldRotation,10*t))}},a.onPlantDead=function(){this.root.root.event.off(y.OnDead,this.onPlantDead,this),this.Line.destroy()},a.PlaySoundLoop=function(t){void 0===t&&(t=.5),m.userLocalData.soundOn&&(this.SoundFX.volume=t,this.SoundFX.loop=!0,this.SoundFX.clip=u.Instance.AudioClipsPVE[d.flamethrower_flame_loop],this.SoundFX.play())},e}(P)).prototype,"Line",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=e(F.prototype,"FakeLine",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(F.prototype,"LineCollider",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(F.prototype,"SoundFX",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=F))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/FleetEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./EffectBase.ts"],(function(e){"use strict";var t,n,o,i,f;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator},function(e){i=e.PVEGameplayControl},function(e){f=e.EffectBase}],execute:function(){var c;n._RF.push({},"b659elm4HhB8785s8RKU+mF","FleetEffect",void 0);var r=o.ccclass;o.property,e("FleetEffect",r("FleetEffect")(c=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).slowModifier=0,t.endEffectTime=0,t.moveSpeed=0,t}t(n,e);var o=n.prototype;return o.Init=function(t,n,o){e.prototype.Init.call(this,t,n,o),null!=n.SlowPercent&&n.SlowPercent>0&&(this.slowModifier=o.root.data.statsData.MovementSpeed*n.SlowPercent/100),this.endEffectTime=i.Instance.CurrentTime+n.EffectTime,this.moveSpeed=o.root.data.statsData.MovementSpeed*n.AddMoveSpeedPercent/100,o.root.data.statsData.MovementSpeedModifier+=this.moveSpeed},o.update=function(e){i.Instance.CurrentTime>=this.endEffectTime&&this.RemoveEffect()},n.ApplyEffect=function(e,t){var n=e.getEffectWithType(t.EffectType);if(null!=n)n.endEffectTime=i.Instance.CurrentTime+n.data.EffectTime;else e.initEffect(t)},o.RemoveEffect=function(){this.thisTarget.RemoveEffect(this);var e=this.thisTarget.root.data.statsData;1==this.isApplying&&(e.MovementSpeedModifier-=this.moveSpeed),this.node.destroy()},n}(f))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/FramItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FarmingServicesApi.ts","./UserModel.ts","./PrefabController.ts","./Utility.ts","./ResourcesManager.ts","./SoundController.ts","./UIPopupManager.ts"],(function(t){"use strict";var e,a,i,n,o,r,s,l,c,h,u,p,v,d,f,m,b,y,g,_,S,I,w,T,x,U,P,L,C,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,s=t._decorator,l=t.Node,c=t.Sprite,h=t.RichText,u=t.Label,p=t.UITransform,v=t.Vec2,d=t.randomRange,f=t.Vec3,m=t.tween,b=t.color,y=t.Animation,g=t.Component},function(t){_=t.FarmingServicesApi},function(t){S=t.UserModel},function(t){I=t.PrefabController,w=t.PrefabEnum},function(t){T=t.Utility,x=t.NumberToTween},function(t){U=t.ResourcesManager},function(t){P=t.SoundController,L=t.EnumSound},function(t){C=t.UIPopupManager,B=t.LoadingType}],execute:function(){var F,R,A,N,J,z,H,D,E,W,O,M,G,k,q,Y,j,V,Z,K,Q,X,$,tt,et,at,it,nt,ot,rt,st,lt,ct,ht,ut,pt,vt,dt,ft,mt,bt,yt,gt,_t,St,It,wt,Tt,xt,Ut,Pt,Lt,Ct;r._RF.push({},"615b4YAOSZF7rec6gdiPxT6","FramItem",void 0);var Bt=s.ccclass,Ft=s.property;t("FramItem",(F=Bt("FramItem"),R=Ft({type:l}),A=Ft({type:c}),N=Ft({type:l}),J=Ft({type:c}),z=Ft({type:c}),H=Ft({type:c}),D=Ft({type:h}),E=Ft({type:u}),W=Ft({type:c}),O=Ft({type:h}),M=Ft({type:h}),G=Ft({type:u}),k=Ft(p),q=Ft({type:l}),Y=Ft({type:u}),j=Ft({type:l}),V=Ft({type:l}),Z=Ft({type:u}),K=Ft({type:u}),Q=Ft({type:u}),X=Ft({type:l}),$=Ft({type:l}),tt=Ft({type:u}),et=Ft({type:c}),at=Ft({type:l}),F((ot=e((nt=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this)._UIScreenFram=void 0,e.index=0,i(e,"BoxNewFram",ot,n(e)),i(e,"BoxNewFramSprite",rt,n(e)),i(e,"BoxInfo",st,n(e)),i(e,"Plant",lt,n(e)),i(e,"Land",ct,n(e)),i(e,"Crow",ht,n(e)),i(e,"LocationText",ut,n(e)),i(e,"info_harvestLabelLE",pt,n(e)),i(e,"type_land",vt,n(e)),i(e,"BoxNoticyRichText",dt,n(e)),i(e,"BoxNoticyRichText2",ft,n(e)),i(e,"info_ID",mt,n(e)),i(e,"info_ID_UITransform",bt,n(e)),i(e,"btn_harvest",yt,n(e)),i(e,"info_harvestLabel",gt,n(e)),i(e,"glow",_t,n(e)),i(e,"bnt_BoxSelect",St,n(e)),i(e,"UIToolSmallPot",It,n(e)),i(e,"UIToolWater",wt,n(e)),i(e,"UIToolFer",Tt,n(e)),i(e,"btn_remove",xt,n(e)),i(e,"btn_remove1",Ut,n(e)),i(e,"LE_Label",Pt,n(e)),i(e,"boxInfoSprite",Lt,n(e)),i(e,"LeImage",Ct,n(e)),e.Jdata=void 0,e.updateCancelAtTimmer=void 0,e.isUpdateCancelAt=void 0,e.canRemovePlant=void 0,e._removeButtonState=void 0,e}a(e,t);var r=e.prototype;return r.InitData=function(t,e,a){var i=this;if(this.node.active=!0,this.BoxNewFram.active=!1,this.BoxInfo.active=!0,this._UIScreenFram=e,this.index=a,this.glow.active=!1,this.Jdata=null,this.Jdata=JSON.parse(JSON.stringify(t)),null!=this.Jdata){this.UpdateLocation(this.Jdata);var n=this.Jdata.plant,o=n.stats,r=function(t){i.Plant.spriteFrame=t,T.SetNativeSizeOfSprite(i.Plant,t)};if(this.info_harvestLabelLE.string=n.farmConfig.le+"/"+n.farmConfig.hours+" Hour",this.LE_Label.string=JSON.stringify(this.Jdata.totalHarvest),null!=o){this.info_ID_UITransform.node.active=!0,this.info_ID.string=this.Jdata.plantId,this.info_ID_UITransform.getComponent(c).spriteFrame=U.Instance.LoadRarity(this.info_ID.string),this.type_land.node.active=!0;var s=function(t){i.type_land.spriteFrame=t;var e=t.originalSize.width/120;i.type_land.node.setScale(e,e,1)};null!=this.Jdata.hasSynergy&&1==this.Jdata.hasSynergy?U.Instance.Loadtype(o.type+"_active",s):U.Instance.Loadtype(o.type,s);var l=n.iconUrl,h=l.split("/");l=h[h.length-1].split(".")[0],1==n.type?(this.Plant.node.setScale(.5,.5,1),U.Instance.LoadPlant(l,r)):(this.Plant.node.setScale(.4,.4,1),U.Instance.LoadMotherTree(l,r))}else this.Plant.node.setScale(.5,.5,1),1==n.type?U.Instance.LoadPlant("sapling_"+n.seasonType,r):U.Instance.LoadPlant("mama_"+n.seasonType,r),this.type_land.node.active=!1,this.info_ID_UITransform.node.active=!1;this.UpdateHasCrow(this.Jdata),this.UpdateNeedWater(this.Jdata),this.UpdateTools(this.Jdata),this.UpdateTimeHarvest(this.Jdata),this.UpdateStage(this.Jdata)}else console.log("acac FramItem-InitData: Jdada == null")},r.UpdateStatus=function(t){this.Jdata=t,this.UpdateHasCrow(this.Jdata),this.UpdateNeedWater(this.Jdata),this.UpdateTools(this.Jdata),this.UpdateTimeHarvest(this.Jdata),this.UpdateStage(this.Jdata)},r.UpdateHasCrow=function(t){if(null!=t.hasCrow&&1==t.hasCrow){var e=JSON.stringify(t.plantId),a=parseInt(e.charAt(e.length-1))%2==0;this.Crow.node.active=!0,a?(this.Crow.spriteFrame=U.Instance.crow_art[1],T.SetNativeSizeOfSprite(this.Crow,U.Instance.crow_art[1])):(this.Crow.spriteFrame=U.Instance.crow_art[0],T.SetNativeSizeOfSprite(this.Crow,U.Instance.crow_art[0]))}else this.Crow.node.active=!1},r.UpdateNeedWater=function(t){1==t.needWater?this.Land.spriteFrame=U.Instance.land_art[1]:this.Land.spriteFrame=U.Instance.land_art[0]},r.UpdateTools=function(t){this.UIToolWater.string="0",this.UIToolWater.node.parent.parent.active=!0,this.UIToolSmallPot.node.parent.parent.active=!1;for(var e=t.activeTools,a=0;a<e.length;a++){var i=e[a];"POT"==i.type?1==i.id&&(this.UIToolSmallPot.string=i.count,this.UIToolSmallPot.node.parent.parent.active=!0,i.count>1?this.UIToolSmallPot.node.parent.active=!0:this.UIToolSmallPot.node.parent.active=!1):"WATER"==i.type&&(this.UIToolWater.string=i.count,this.UIToolWater.node.parent.parent.active=!0)}},r.UpdateTimeHarvest=function(t){if(this.HasPause(t))if(t.totalHarvest>0)this.btn_harvest.active=!0,this.info_harvestLabel.node.parent.active=!1;else{this.btn_harvest.active=!1,this.info_harvestLabel.node.parent.active=!0;var e=this.getRemainHarvestSec(t);e<=60&&(e=60),this.info_harvestLabel.string=T.ConvertSecondsToTime(e)}else if(null==t.startTime&&null==t.harvestTime)this.info_harvestLabel.string="01:00",this.btn_harvest.active=!1,this.info_harvestLabel.node.parent.active=!0;else if(t.totalHarvest>0)this.btn_harvest.active=!0,this.info_harvestLabel.node.parent.active=!1;else{var a=Date.parse(t.harvestTime.toString())-T.GetTimeNow(),i=Math.floor(a/1e3);this.info_harvestLabel.string=T.ConvertSecondsToTime(i),i<=0&&console.log("1 tree have done harvest => reload"),this.btn_harvest.active=!1,this.info_harvestLabel.node.parent.active=!0}},r.UpdateStage=function(t){this.StopUpdateCancelAt(),this.CheckRemove(t),this.removeButtonState(0);var e=t.stage.toString();if("new"==e)this.BoxNoticyRichText.string="Add pot<br/>to start farming",this.BoxNoticyRichText2.string="",this.BoxNoticyRichText.node.parent.active=!0;else if("farming"==e||"paused"==e){this.BoxNoticyRichText.string="",this.BoxNoticyRichText2.string="";var a=0;if(this.HasPause(t))a=this.getRemainHarvestSec(t);else{var i=Date.parse(t.harvestTime.toString());a=Math.floor((i-T.GetTimeNow())/1e3)}a<=0?(this.info_harvestLabel.string="00:00",this.info_harvestLabel.node.parent.active=!0):(this.BoxNoticyRichText.node.parent.active=!1,null!=t.cancelAt&&"null"!=t.cancelAt&&this.CorouUpdateCancelAt(t))}else"cancelled"!=e&&"removed"!=e||this.HideInfoCancel(t)},r.HideInfoCancel=function(t){var e="removed"==t.stage.toString();this.StopUpdateCancelAt(),e?(this.BoxNoticyRichText.string="Your pot duration<br/>has expired",this.BoxNoticyRichText2.string="Please remove<br/>your plant",this.removeButtonState(1)):t.totalHarvest>0?(this.BoxNoticyRichText.string="00:00",this.BoxNoticyRichText2.string=""):(this.BoxNoticyRichText.string="Harvesting<br/>period is over",this.BoxNoticyRichText2.string="Please remove<br/>your plant",this.removeButtonState(1)),this.BoxNoticyRichText.node.parent.active=!0,this.info_harvestLabel.node.parent.active=!1,t.totalHarvest>0?this.btn_harvest.active=!0:this.btn_harvest.active=!1},r.StopUpdateCancelAt=function(){clearTimeout(this.updateCancelAtTimmer),this.isUpdateCancelAt=!1},r.CorouUpdateCancelAt=function(t){var e=this;this.UpdateCancelAt(t);this.isUpdateCancelAt=!0,this.updateCancelAtTimmer=setTimeout((function a(){e.UpdateCancelAt(t),e.isUpdateCancelAt&&(e.updateCancelAtTimmer=setTimeout(a,1e3))}),1e3)},r.UpdateCancelAt=function(t){this.BoxNoticyRichText.string="Add pot<br/>to resume farming",this.BoxNoticyRichText.node.parent.active=!0;var e=Date.parse(t.cancelAt.toString())-T.GetTimeNow();e<=0?this.HideInfoCancel(t):this.BoxNoticyRichText2.string=T.ConvertSecondsToTimeSecond(Math.floor(e/1e3))},r.CheckRemove=function(t){this.canRemovePlant=!1,null==t.cancelAt&&(this.canRemovePlant=!0)},r.UpdateLocation=function(t){var e=t.land;this.LocationText.string=e.x.toString()+","+e.y.toString()},r.ShowNewFarmBnt=function(){var t=this;this.node.active=!0,this.BoxNewFram.active=!1,this.BoxInfo.active=!1;U.Instance.LoadSeasonNewBtn(S.SeasonData.season,(function(e){t.BoxNewFramSprite.spriteFrame=e,t.BoxNewFram.active=!0}))},r.OnBtnNewFarmClick=function(){},r.OnBtnharvestClick=function(){var t=this;C.Instance.Loading(!0,B.noAnim),_.RequestHarvestPlant(this.Jdata._id,(function(e){C.Instance.Loading(!1),t.HarvestSuccess(e)}),(function(t){C.Instance.Loading(!1)}),!0)},r.HarvestSuccess=function(t){var e=JSON.parse(t);0==e.status?this.ShowEffectHarvest(e.data.amount):C.Instance.ShowToast("Error",U.Instance.GetErrorMessage(e.status),0)},r.ShowEffectHarvest=function(t){var e=this;this._UIScreenFram.totalHarvestable-=t,this._UIScreenFram.BtnHarvestAll.active=this._UIScreenFram.totalHarvestable>0;for(var a=function(t){T.AsyncDelay(.2*t*1e3).then((function(){var a=e.LeImage.getWorldPosition(),i=e._UIScreenFram.LeImg.getWorldPosition(),n=I.Instance.GetPrefab(w.LEHarvest);n.setWorldPosition(a),T.PlayParticle(n),P.Instance.PlaySound(L.UI_fx_LE_harvest_Sound_B_1),e.TweenLeP(t,a,i,.5,(function(){P.Instance.PlaySound(L.UI_fx_LE_harvest_Sound_B_2);var t=I.Instance.GetPrefab(w.LEReceive);t.setWorldPosition(i),T.PlayParticle(t)}))}))},i=0;i<5;i++)a(i);T.AsyncDelay(500).then((function(){e._UIScreenFram.TweenLE(t,!0)})),T.AsyncDelay(1500).then((function(){e._UIScreenFram.RequestFarm()}))},r.TweenLeP=function(t,e,a,i,n){var o=I.Instance.GetPrefab(w.LEProjectile);o.setWorldPosition(e),T.PlayParticle(o);var r=v.distance(e,a);r>900&&(r=900),r*=d(0,.25);var s,l=new f(a);l.subtract(e),l.normalize(),s=t%2==0?new f(l.y,-l.x,0):new f(-l.y,l.x,0);var c={a:0};m(c).to(i/2,{a:r},{easing:"cubicOut"}).to(i/2,{a:0},{easing:"cubicIn"}).start();var h=new x(0);m(h).to(i,{n:1e3},{progress:function(t,i,n,r){return function(t){var i=new f;f.lerp(i,a,e,1-t);var n=new f(s);n.multiplyScalar(c.a),o.setWorldPosition(i.x+n.x,i.y+n.y,i.z)}(r),n}}).call((function(){I.Instance.ReturnPrefab(w.LEProjectile,o),n()})).start()},r.OnBtnRemoveClick=function(){0==this.canRemovePlant?this.OnBtnRemoveFarm():this.OnBtnRemovePlant()},r.OnBtnRemoveFarm=function(){var t=this,e=function(e){t._UIScreenFram.DeactiveFarmSuccess(e)},a=function(t){};1==this._removeButtonState?_.RequestDeactive(this.Jdata._id,e,a):(console.log("bad OnBtnRemoveFarm, should have popup to ask here"),C.Instance.ShowUINotifyConfirm("Stop Farming","Remove "+this.info_ID.string+" from Farm?<br/>You will lose all LE in this cycle.",(function(){t._UIScreenFram.framSelected>0&&t.Jdata._id==t._UIScreenFram.FramItemArray[t._UIScreenFram.framSelected].Jdata._id&&t.OnBtnSelectClick(),_.RequestDeactive(t.Jdata._id,e,a)}),!0))},r.OnBtnRemovePlant=function(){var t=this,e=function(e){t._UIScreenFram.DeactiveFarmSuccess(e)},a=function(t){};1==this._removeButtonState?_.RequestRemovePlant(this.Jdata._id,e,a):C.Instance.ShowUINotifyConfirm("Remove Plant","Remove "+this.info_ID.string+" from Farm?<br/>You will lose all LE in this cycle.",(function(){_.RequestRemovePlant(t.Jdata._id,e,a)}),!0)},r.OnBtnSelectClick=function(){this._UIScreenFram.SelectFram(this.index)},r.SelectThis=function(t){t?(this.boxInfoSprite.color=b(59,72,120,255),this.glow.active=!0):(this.glow.active=!1,this.boxInfoSprite.color=b(26,29,40,255))},r.removeButtonState=function(t){this._removeButtonState=t,0==t?(this.btn_remove1.active=!0,this.btn_remove.active=!1):(this.btn_remove.active=!0,this.btn_remove1.active=!1)},r.getRemainHarvestSec=function(t){if(null==t)return 0;var e=Date.parse(t.harvestTime.toString()),a=0;if(this.HasPause(t)){var i=T.GetTimeNow();if(null!=t.cancelAt&&"null"!=t.cancelAt)i=Date.parse(t.cancelAt.toString())-864e5;if(null!=t.crowAppearAt&&"null"!=t.crowAppearAt){var n=Date.parse(t.crowAppearAt.toString());n<i&&(i=n)}if(t.pausedTime&&"null"!=t.pausedTime){var o=Date.parse(t.pausedTime.toString());o<i&&(i=o)}a=Math.floor((e-i)/1e3)}else a=Math.floor((e-T.GetTimeNow())/1e3);return a},r.HasPause=function(t){return null!=t&&(null!=t.stage&&("paused"==t.stage||(1==t.hasCrow||(null!=t.cancelAt&&"null"!=t.cancelAt||null!=t.crowAppearAt&&"null"!=t.crowAppearAt))))},r.ShowEffectWater=function(){var t=I.Instance.GetPrefab(w.Water);t.setWorldPosition(this.node.getWorldPosition()),T.PlayParticle(t),t.getComponent(y).play(),P.Instance.PlaySound(L.UI_fx_Give_water_farm),P.Instance.PlaySound(L.UI_fx_Give_water_farm_earn_point,1)},r.ShowEffectChaseCrow=function(){this.Crow.node.active=!1;var t=I.Instance.GetPrefab(w.ChaseCrow),e=this.Crow.node.getWorldPosition();t.setWorldPosition(e.x,e.y+35,0),T.PlayParticle(t),P.Instance.PlaySound(L.UI_fx_chase_crows)},r.ShowEffectFertilizer=function(){},o(e,[{key:"isActive",get:function(){return this.node.active&&this.BoxInfo.active}},{key:"id",get:function(){return this.Jdata._id}}]),e}(g)).prototype,"BoxNewFram",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=e(nt.prototype,"BoxNewFramSprite",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=e(nt.prototype,"BoxInfo",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=e(nt.prototype,"Plant",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=e(nt.prototype,"Land",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=e(nt.prototype,"Crow",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ut=e(nt.prototype,"LocationText",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=e(nt.prototype,"info_harvestLabelLE",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=e(nt.prototype,"type_land",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dt=e(nt.prototype,"BoxNoticyRichText",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft=e(nt.prototype,"BoxNoticyRichText2",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=e(nt.prototype,"info_ID",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt=e(nt.prototype,"info_ID_UITransform",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=e(nt.prototype,"btn_harvest",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=e(nt.prototype,"info_harvestLabel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t=e(nt.prototype,"glow",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=e(nt.prototype,"bnt_BoxSelect",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),It=e(nt.prototype,"UIToolSmallPot",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=e(nt.prototype,"UIToolWater",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=e(nt.prototype,"UIToolFer",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xt=e(nt.prototype,"btn_remove",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ut=e(nt.prototype,"btn_remove1",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pt=e(nt.prototype,"LE_Label",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=e(nt.prototype,"boxInfoSprite",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct=e(nt.prototype,"LeImage",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=nt))||it));r._RF.pop()}}}));

System.register("chunks:///_virtual/FramTool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIPopupManager.ts"],(function(t){"use strict";var i,n,e,o,a,s,r,l,u,c,h,p,d,m,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Label,l=t.Node,u=t.Button,c=t.CCInteger,h=t.CCFloat,p=t.tween,d=t.v3,m=t.Component},function(t){f=t.UIPopupManager}],execute:function(){var b,g,w,y,v,A,B,I,S,T,F,L,z;a._RF.push({},"7f431putx9JcJKw4WmTyNrN","FramTool",void 0);var C=s.ccclass,D=s.property;t("FramTool",(b=C("FramTool"),g=D(r),w=D(l),y=D(u),v=D(c),A=D(h),b((S=i((I=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,e(i,"numLabel",S,o(i)),e(i,"AddBtn",T,o(i)),e(i,"Btn",F,o(i)),e(i,"toolType",L,o(i)),e(i,"animDelay",z,o(i)),i.usages=void 0,i._UIScreenFram=void 0,i.tweenAnim=null,i.isShowing=!1,i}n(i,t);var a=i.prototype;return a.Show=function(){this.isShowing||(this.isShowing=!0,this.node.active=!0,this.node.setPosition(this.node.position.x,-180,0),null!=this.tweenAnim&&this.tweenAnim.stop(),this.tweenAnim=p(this.node).delay(this.animDelay).to(.25,{position:d(this.node.position.x,0,0)},{easing:"backOut"}),this.tweenAnim.start())},a.Hide=function(t){var i=this;this.isShowing&&(this.isShowing=!1,t?(null!=this.tweenAnim&&this.tweenAnim.stop(),this.tweenAnim=p(this.node).delay(this.animDelay).to(.25,{position:d(this.node.position.x,-180,0)},{easing:"backIn"}).call((function(){i.node.active=!1})),this.tweenAnim.start()):this.node.active=!1)},a.Init=function(t,i){this._UIScreenFram=t,this.usages=i,i>0?(this.numLabel.string=i.toString(),this.numLabel.node.parent.active=!0,this.Btn.node.active=!0,this.AddBtn.active=!1):(this.numLabel.node.parent.active=!1,this.Btn.node.active=!1,this.AddBtn.active=!0)},a.OnBtnAddClick=function(){5==this.toolType&&f.Instance.ShowToast("Infomation","This feature is coming soon!",2)},a.OnBtnClick=function(){this.usages>0||f.Instance.ShowToast("Infomation","You need to buy this tool to use",2)},i}(m)).prototype,"numLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(I.prototype,"AddBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(I.prototype,"Btn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=i(I.prototype,"toolType",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=i(I.prototype,"animDelay",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=I))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/FreezieAttackComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AttackComponent.ts","./DamageData.ts"],(function(t){"use strict";var e,n,o,a,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){a=t.AttackComponent},function(t){r=t.DamageData}],execute:function(){var c;n._RF.push({},"2b37a9TG7JA5bDIhZBxbuJ4","FreezieAttackComponent",void 0);var i=o.ccclass;o.property,t("FreezieAttackComponent",i("FreezieAttackComponent")(c=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.Attack=function(t,e,n){void 0===n&&(n=0);var o=new r;return o.attacker=this.root,this.skills[n].addAttackData(t,o),o},n}(a))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/FreezingAura.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,i,n,o,a,r,s,l,c,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node},function(t){l=t.PVEGameplayControl},function(t){c=t.AttackType},function(t){u=t.InGameEventID},function(t){h=t.SkillBase}],execute:function(){var f,z,p,m,y,d,k;a._RF.push({},"ef7e2camxFFSIHLS0hVNJBv","FreezingAura",void 0);var A=r.ccclass,g=r.property;t("FreezingAura",(f=A("FreezingAura"),z=g(s),p=g(s),f((d=e((y=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).delayTimeAttack=0,n(e,"muzzletFront",d,o(e)),n(e,"muzzletBack",k,o(e)),e}i(e,t);var a=e.prototype;return a.Init=function(e,i){t.prototype.Init.call(this,e,i),this.root.root.event.on(u.OnDestroy,this.onPlantDestroy,this),this.muzzletBack.parent=l.Instance.getEffParentBack(),this.muzzletBack.setWorldPosition(this.node.worldPosition),this.muzzletBack.active=!0,this.muzzletFront.parent=l.Instance.getEffParentFront(),this.muzzletFront.setWorldPosition(this.node.worldPosition),this.muzzletFront.active=!0},a.update=function(t){this.root.attackAble&&(this.delayTimeAttack>0?this.delayTimeAttack-=t:this.root.targets.length<=0||(this.delayTimeAttack=this.skillData.AuraTickTime,this.attack()))},a.addAttackData=function(t,e){t==c.Aura&&e.AddEffects(this.skillData.EffectData)},a.attack=function(){for(var t=this.root.targets,e=0;e<t.length;e++){var i=t[e],n=this.root.Attack(c.Aura,i,1);i.applyEffect(n)}},a.onPlantDestroy=function(){this.root.root.event.off(u.OnDestroy,this.onPlantDestroy,this),this.muzzletBack.destroy(),this.muzzletFront.destroy()},e}(h)).prototype,"muzzletFront",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(y.prototype,"muzzletBack",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=y))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameplayConfig.ts",["cc","./PVE_ResourceManager.ts","./AttackData.ts","./Enums.ts","./ObjectData.ts","./StatsData.ts"],(function(e){"use strict";var a,t,n,r,i,l,S,E;return{setters:[function(e){a=e.cclegacy,t=e._decorator,n=e.Vec2},function(e){r=e.UndeadSpawnCode},function(e){i=e.default},function(e){l=e.ConfigType},function(e){S=e.default},function(e){E=e.default}],execute:function(){var o,c;a._RF.push({},"704e4tZVp5M5aeaddIojObd","GameplayConfig",void 0);var _=t.ccclass;t.property,e("GameplayConfig",_("GameplayConfig")(((c=function(){function e(){}return e.InitConfig=function(e){this.DefConfig={maxDecreasePercent:75,skipDamage:{value:378,defPerOne:25},NormalDamage:[{max:75,percent:.5},{max:150,percent:.25},{max:338,percent:.1}]},this.UndeadMap=new Map,this.PlantMap=new Map;for(var a=JSON.parse(e),t=0;t<a.length;t++)if(""!=a[t].ObjectType){var n=new S,r=new i,o=new E;r.AttackDamage=a[t].ATK[0],r.Level_Atk=a[t].ATK[1],r.Magic=a[t].MAG[0],r.Level_Mag=a[t].MAG[1],r.AttackSpeed=a[t].AS,r.AttackRange=a[t].Range,r.DefaultAttackFrom=a[t].DefaultAttackDamage[0],r.DefaultAttackFrom=a[t].DefaultAttackDamage[1],r.Level_DefaultAtk=a[t].DefaultAttackDamage[2],r.CanAttackPlant=a[t].Target.indexOf("Plant")>=0,o.HP=a[t].HP[0],o.Level_HP=a[t].HP[1],o.MaxHp=o.HP,o.Species=a[t].Species,o.Defense=a[t].DEF[0],o.Level_Def=a[t].DEF[1],o.MovementSpeed=a[t].MS,o.LifeTime=a[t].LifeTime,o.DefaultAttackAnimName=a[t].DefaultAttackAnimName,n.code=a[t].code,n.attackData=r,n.statsData=o,n.SkillData=a[t].Skills,n.configType=l[a[t].Type],n.LECost=a[t].LECost,n.ManaCost=a[t].ManaCost,n.CombatPower=a[t].CombatPower,n.Rarity=a[t].Rarity,"Plant"==a[t].ObjectType?this.PlantMap.set(a[t].ID.toString(),n):"Undead"==a[t].ObjectType&&this.UndeadMap.set("Undead_"+a[t].ID,n)}},e.InitSpellConfig=function(e){var a=this;this.SpellMap=new Map,JSON.parse(e).forEach((function(e){a.SpellMap.set(e.ID.toString(),e)}))},e.GetSpellConfig=function(e){return 0==this.SpellMap.has(e)&&(console.error("Spell config null",e),console.log(this.SpellMap)),this.SpellMap.get(e)},e.GetUndeadDataWithSpawnCode=function(e){return this.GetUndeadData(r[e])},e.GetUndeadData=function(e,a){return void 0===a&&(a=!0),0==this.UndeadMap.has("Undead_"+e)&&console.error("GetUndeadData null ",e),a?this.UndeadMap.get("Undead_"+e).clone():this.UndeadMap.get("Undead_"+e)},e.GetPlantData=function(e,a){return void 0===a&&(a=!0),0==this.PlantMap.has(e)&&console.error("GetPlantData null ",e),a?this.PlantMap.get(e).clone():this.PlantMap.get(e)},e}()).GameLevel=0,c.TeamLevel=5,c.DebugPhysic=!1,c.DebugAttack=!1,c.DebugWarning=!1,c.DebugHp=!1,c.ShowDamageLabel=!0,c.DefConfig=void 0,c.UndeadMap=void 0,c.PlantMap=void 0,c.SpellMap=void 0,c.waveData={path:[[new n(2001,400),new n(1500,400),new n(1500,250),new n(0,250)],[new n(2001,400),new n(1500,400),new n(1500,635),new n(0,635)]],waves:[{startDelay:0,spawnDelay:.2,enemies:[{id:"Oxxenga",path:1},{id:"Splaslug",path:1},{id:"Valefang",path:1}]}]},c.ElementRes=[{Element:"Beast",RES_Fire:-25,RES_Water:0,RES_Ice:50,RES_Thunder:0,RES_Wind:25,RES_Plant:25,RES_Earth:50,RES_Dark:0},{Element:"Aqua",RES_Fire:50,RES_Water:25,RES_Ice:25,RES_Thunder:-25,RES_Wind:0,RES_Plant:-25,RES_Earth:0,RES_Dark:0},{Element:"Flora",RES_Fire:-25,RES_Water:50,RES_Ice:-25,RES_Thunder:25,RES_Wind:-25,RES_Plant:50,RES_Earth:0,RES_Dark:0},{Element:"Spirit",RES_Fire:0,RES_Water:0,RES_Ice:0,RES_Thunder:0,RES_Wind:-25,RES_Plant:25,RES_Earth:-25,RES_Dark:50},{Element:"Avian",RES_Fire:0,RES_Water:0,RES_Ice:-25,RES_Thunder:-25,RES_Wind:25,RES_Plant:50,RES_Earth:50,RES_Dark:0},{Element:"Mineral",RES_Fire:25,RES_Water:-25,RES_Ice:25,RES_Thunder:50,RES_Wind:25,RES_Plant:0,RES_Earth:50,RES_Dark:-25},{Element:"Insect",RES_Fire:-25,RES_Water:0,RES_Ice:0,RES_Thunder:0,RES_Wind:-25,RES_Plant:50,RES_Earth:25,RES_Dark:25},{Element:"Dragon",RES_Fire:25,RES_Water:25,RES_Ice:25,RES_Thunder:25,RES_Wind:50,RES_Plant:0,RES_Earth:0,RES_Dark:-25}],o=c))||o);a._RF.pop()}}}));

System.register("chunks:///_virtual/GameplayDataInterface.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"9531fSxwA1J8JV5Nb3xjTCD","GameplayDataInterface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/GameplayFakeData.ts",["cc"],(function(e){"use strict";var a,t;return{setters:[function(e){a=e.cclegacy,t=e.Vec2}],execute:function(){a._RF.push({},"036bfImz4VFtrG97TbTi23a","GameplayFakeData",void 0),e("default",(function(){})).waveData={path:[[new t(2001,400),new t(1500,400),new t(1500,250),new t(0,250)],[new t(2001,400),new t(1500,400),new t(1500,635),new t(0,635)]],waves:[{startDelay:3,spawnDelay:.3,enemies:[{id:1,path:0},{id:1,path:0},{id:1,path:0},{id:1,path:0}]},{startDelay:10,spawnDelay:.3,enemies:[1,1,1,1]}]},a._RF.pop()}}}));

System.register("chunks:///_virtual/GameplayModel.ts",["cc","./PVE_Constant.ts","./PVE_Enum.ts","./PVE_GameplayControl.ts","./CardData.ts","./CardFakeData.ts"],(function(e){"use strict";var a,t,r,n,s,o,c;return{setters:[function(e){a=e.cclegacy,t=e._decorator},function(e){r=e.PVE_Constant},function(e){n=e.PVE_Enum},function(e){s=e.PVEGameplayControl},function(e){o=e.default},function(e){c=e.default}],execute:function(){a._RF.push({},"d7cf6yxm4ZBhLDTsRsIA8zm","GameplayModel",void 0);t.ccclass,t.property;var d=e("GameplayModel",function(){function e(){}return e.updateUserCard=function(e){var a=this;this.userCard=e,this.cards=[],e.cards.forEach((function(e,t,r){var s=new o;s.Index=t,s.serverId=e.parrentId,s.serverType=e.type,s.Type=e.eCardType,s.ManaPrice=e.manaCost,s.LEPrice=e.leCost,s.Rarity=e.rarity,s.level=e.getLevel,s.CooldownTime=e.coolDown,s.ID=e.getCode,s.isSystemCard=e.isSystemCard,""==s.serverId||null==s.serverId?console.error(e):a.cards.push(s),s.Type==n.ECardType.Undead&&s.Rarity--}))},e.GetCardData=function(){return r.IS_CHEAT?c.cardData:this.cards},e.updateIngameData=function(e){if(r.IS_CHEAT)return!0;try{var a=JSON.parse(e);return null!=a.stageDetail&&(this.waveData=a,null!=s.Instance&&null!=s.Instance.node&&s.Instance.RefreshMana(),!0)}catch(e){return console.error(e),!1}},e}());d.userCard=void 0,d.cards=void 0,d.waveData=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/GameplayObject.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_Enum.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./PVE_Map_Slot.ts","./PVE_GamePlay_UI_Controller.ts","./AttackComponent.ts","./GOAnimComponent.ts","./MovingComponent.ts","./TargetComponent.ts","./GameplayConfig.ts","./CardData.ts","./Enums.ts","./InGameEvent.ts","./GameplayObjectUI.ts"],(function(t){"use strict";var e,n,a,i,o,s,c,r,h,u,m,p,l,d,g,f,v,y,D,C,P,k,E,I,M,T,b,_,G,O;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,c=t._decorator,r=t.Node,h=t.SystemEvent,u=t.PhysicsSystem2D,m=t.rect,p=t.Component},function(t){l=t.PVE_Enum},function(t){d=t.PVEGameplayControl},function(t){g=t.PVEHelper},function(t){f=t.PVEMapSlot},function(t){v=t.PVEGamePlayUIController},function(t){y=t.AttackComponent},function(t){D=t.GOAnimComponent},function(t){C=t.MovingComponent},function(t){P=t.TargetComponent},function(t){k=t.GameplayConfig},function(t){E=t.default},function(t){I=t.GameplayTeam,M=t.EffectData,T=t.EffectType,b=t.DamageType},function(t){_=t.InGameEventID,G=t.InGameEvent},function(t){O=t.GameplayObjectUI}],execute:function(){var H,A,S,j,U,w,x;s._RF.push({},"3041cQptk1IU7pV+a8axUn5","GameplayObject",void 0);var R=c.ccclass,V=c.property;t("GameplayObject",(H=R("GameplayObject"),A=V(r),S=V(y),H((w=e((U=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).event=void 0,e.SpawnCode=void 0,e.team=void 0,e.data=void 0,e.Id=void 0,e.Level=1,e.CardDataIndex=-1,e._ui=null,a(e,"touchDetect",w,i(e)),a(e,"attackComponent",x,i(e)),e.targetComponent=void 0,e.movingComponent=void 0,e.animationComponent=void 0,e.damageTypeImmu=[],e._isEnemy=!0,e._isDead=!1,e.mapSlot=-1,e.cardData=void 0,e.timePickup=0,e.updatingPos=void 0,e.startingPos=void 0,e}n(e,t);var s=e.prototype;return s.getAllTargetObjects=function(){return this.team==I.MyTeam?d.Instance.enemiesObject:d.Instance.myTeamObject},s.getAllMyTeam=function(){return this.team==I.MyTeam?d.Instance.myTeamObject:d.Instance.enemiesObject},s.initConfig=function(t,e,n){this.data=e,this.team=t,this.Id=d.GetGenerateObID(),this.cardData=n,this.init(),this.targetComponent=this.getComponent(P),this.movingComponent=this.getComponent(C),this.animationComponent=this.getComponent(D),this.animationComponent.Init(this),this.attackComponent&&this.attackComponent.Init(this),this.targetComponent&&this.targetComponent.Init(this),this.movingComponent&&this.movingComponent.Init(this),this.ui&&this.ui.init(this),t==I.MyTeam?(d.Instance.myTeamObject.set(this.Id,this),this.handlePickup()):d.Instance.enemiesObject.set(this.Id,this),k.DebugHp&&console.log("["+e.code+"] HP["+e.statsData.getMaxHp()+"] des["+e.statsData.Defense+"]  atk["+e.attackData.AttackDamage+"]")},s.handlePickup=function(){null!=this.touchDetect&&this.touchDetect.on(h.EventType.MOUSE_DOWN,this.touchStart.bind(this),this)},s.touchStart=function(t){t&&(t.propagationStopped=!0),d.Instance.IsPause||(0==this.timePickup&&(this.timePickup=d.Instance.CurrentTime+1),d.GamePlayEvent.on(_.GameUpdate,this.GameUpdate,this),d.GamePlayEvent.on(_.TouchEnd,this.touchEnd,this))},s.GameUpdate=function(){this.timePickup<=0||this.timePickup<=d.Instance.CurrentTime&&(this.touchEnd(),this.Pickup())},s.touchEnd=function(){this.timePickup=0,d.GamePlayEvent.off(_.GameUpdate,this.GameUpdate,this),d.GamePlayEvent.off(_.TouchEnd,this.touchEnd,this)},s.Pickup=function(){this.startingPos=this.node.position.clone(),d.GamePlayEvent.on(_.TouchMove,this.pickupMouseMove,this),d.GamePlayEvent.on(_.TouchEnd,this.pickupMouseEnd,this);var t=new E;t.Type=this.isUndead?l.ECardType.Undead:l.ECardType.Plant,v.Instance.parrentMapSlot.activeMapslot(t),this.targetComponent.RemoveAllEffect(),this.targetComponent.canTarget=!1,this.attackComponent.attackAble=!1,this.targetComponent.Immortal=!0},s.pickupMouseMove=function(t){this.updatingPos=t.getUILocation(),this.node.setPosition(this.updatingPos.x,this.updatingPos.y)},s.pickupMouseEnd=function(t){d.GamePlayEvent.off(_.TouchMove,this.pickupMouseMove,this),d.GamePlayEvent.off(_.TouchEnd,this.pickupMouseEnd,this),this.updatingPos=t.getUILocation();var e=u.instance.testAABB(m(this.updatingPos.x,this.updatingPos.y,5,5)),n=null;e.forEach((function(t){null==n&&(n=t.getComponent(f))})),null!=n?(this.node.setPosition(n.node.position),0==this.isUndead&&(this.mapSlot=n.slotIndex)):(this.node.setPosition(this.startingPos),console.log("pickupMouseEnd",this.startingPos)),v.Instance.parrentMapSlot.activeMapslot(null),this.PickupDone()},s.PickupDone=function(){this.targetComponent.canTarget=!0,this.targetComponent.Immortal=!1;var t=new M;t.EffectType=T.Stun,t.EffectTime=2,this.targetComponent.applyEffectOne(t)},s.init=function(){this.event=new G,this.data.Init(),this.detailInit()},s.detailInit=function(){},s.getHpPercent=function(){return this.data.statsData.HP/this.data.statsData.getMaxHp()*100},s.TakeDamage=function(t){this.targetComponent.TakeDamage(t)},s.Dead=function(t){void 0===t&&(t=null);try{if(this._isDead)return;this._isDead=!0,this.team==I.MyTeam&&v.Instance.cardScrollview.OnCardBack(this.CardDataIndex),this.stopMoving(),this.targetComponent.Stunned(),this.targetComponent.canTarget=!1,null!=d.Instance&&d.Instance.OnObjectDied(this._isEnemy,this,t),this.animationComponent.setDeadAnim(),this.event.dispatchEvent(_.OnDead,this),this.removeObject()}catch(t){console.error(t)}},s.removeObject=function(){var t=this;this.team==I.MyTeam?d.Instance.myTeamObject.delete(this.Id):d.Instance.enemiesObject.delete(this.Id),this.ui.node.active=!1,this.scheduleOnce((function(){t.event.dispatchEvent(_.OnDestroy),t.node.destroy(),d.Instance.dirtyObject=!0}),1.25)},s.removeViewInstant=function(){this.animationComponent.view.node.active=!1},s.decreaseHp=function(t,e,n){void 0===n&&(n=b.Normal),e=Math.round(e),k.DebugHp&&console.trace("decreaseHp"+e+" damageType"+b[n]),k.ShowDamageLabel&&this.targetComponent.tweenLabelFx(e.toString()),this.data.statsData.HP-=e,this.data.statsData.HP<0&&(this.data.statsData.HP=0),this.event.dispatchEvent(_.HpChanged,n,e,this.data.statsData),this.team==I.EnemyTeam&&(d.Instance.TotalDamage+=e),this.data.statsData.HP<=0&&this.Dead(t)},s.applyRegenHp=function(t){this.data.statsData.HP=Math.min(this.data.statsData.HP+t,this.data.statsData.getMaxHp()),this.event.dispatchEvent(_.HpChanged,b.Regen,t,this.data.statsData)},s.applyDamage=function(t,e){void 0===e&&(e=!1),k.DebugAttack&&console.log("apply damage",t);for(var n=this.data.statsData.HP<=0,a=t.damages,i=0;i<a.length;i++){var o=a[i].damageType,s=a[i].damage;e&&(s*=t.MainTargetDmgMulti),s-=s*(this.data.statsData.DecreaseDamagePercent/100);var c=0;switch(o){case b.Pure:case b.Chaos:c=s,this.decreaseHp(t.attacker,c);break;case b.Normal:c=s-this.getDamageDecreasePercent(t)*s/100,this.decreaseHp(t.attacker,c);break;case b.Magic_Fire:case b.Magic_Dark:case b.Magic_Wind:case b.Magic_Thunder:case b.Magic_Ice:case b.Magic_Water:case b.Magic_Earth:case b.Magic_Plant:c=this.calculateMagic(o,s,this.data.statsData.Get_Res(o),t);break;default:console.error("Damage type not handle",b[o])}t.LifeStealPercent>0&&null!=t.attacker&&t.attacker.applyRegenHp(c*t.LifeStealPercent/100)}this.data.statsData.HP<=0&&t.notifyDead&&!n&&t.notifyDead(this.targetComponent)},s.calculateMagic=function(t,e,n,a){a.IgnoreResPercent&&null!=a.IgnoreResPercent.get(t)&&(n-=n*a.IgnoreResPercent.get(t)/100);for(var i=1-n/100,o=e*i,s=0;s<this.damageTypeImmu.length;s++)if(this.damageTypeImmu[s]==t){o=0;break}return k.DebugAttack&&console.log("ApplyMagicDamage:: Type ["+b[t]+"] - damage ["+e+"] - RES ["+n+"] - receivePercent ["+i+"] ---\x3e final ["+o+"]"),this.decreaseHp(a.attacker,o),o},s.getDamageDecreasePercent=function(t){var e=k.DefConfig,n=this.data.statsData.Defense*t.ArmorPiercingMultiply;if(n>e.skipDamage.value){var a=(n-e.skipDamage.value)/e.skipDamage.defPerOne;if(g.RandomActive(a))return 100}for(var i=0,o=0,s=e.NormalDamage,c=0;c<s.length;c++){var r=s[c].max;if(!(n>=r)){i+=(n-o)*s[c].percent;break}i+=(r-o)*s[c].percent,o=r}return Math.min(e.maxDecreasePercent,i)+this.data.statsData.DefensePercentModifier},s.stopMoving=function(){null!=this.movingComponent&&this.movingComponent.stopMoving()},s.checkCountinueMoving=function(){null!=this.movingComponent&&this.movingComponent.checkCountinueMoving()},s.EnableAttack=function(){this.attackComponent.EnableAttack()},s.DisableAttack=function(){this.attackComponent.DisableAttack()},s.EnableTarget=function(){this.targetComponent.EnableTarget()},s.DisableTarget=function(){this.targetComponent.DisableTarget()},s.anyControlAttackEff=function(){return this.targetComponent.anyControlAttackEff()},s.checkCountinueAttack=function(){this.attackComponent.checkCountinueAttack()},s.on=function(t,e,n){return this.event.on(t,e,n)},s.off=function(t,e,n){this.event.off(t,e,n)},s.dispatchEvent=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];this.event.dispatchEvent(t,n)},s.InitSeftPassive=function(t){var e=this;t.EffectData.forEach((function(t,n,a){e.damageTypeImmu.push(t.damageTypeImmu)}))},o(e,[{key:"configId",get:function(){return this.data.ID}},{key:"ui",get:function(){return null==this._ui&&(this._ui=this.getComponentInChildren(O)),this._ui},set:function(t){this._ui=t}},{key:"isDead",get:function(){return this._isDead}},{key:"isUndead",get:function(){return!1}},{key:"IsEnemy",get:function(){return this._isEnemy}}]),e}(p)).prototype,"touchDetect",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(U.prototype,"attackComponent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=U))||j));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameplayObjectUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_Helper.ts","./Enums.ts","./InGameEvent.ts"],(function(e){"use strict";var t,i,a,l,n,r,o,h,s,c,p,u,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,o=e.Label,h=e.Sprite,s=e.Color,c=e.Component},function(e){p=e.PVEHelper},function(e){u=e.GameplayTeam},function(e){f=e.InGameEventID}],execute:function(){var m,b,d,g,v,y,w,I,C,H,G;n._RF.push({},"1f31d8QGf9FlJmqo44G7EkN","GameplayObjectUI",void 0);var L=r.ccclass,_=r.property;e("GameplayObjectUI",(m=L("GameplayObjectUI"),b=_(o),d=_(h),g=_(h),v=_(o),m((I=t((w=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,a(t,"level",I,l(t)),a(t,"health",C,l(t)),a(t,"health_white",H,l(t)),a(t,"lifetimeLabel",G,l(t)),t}i(t,e);var n=t.prototype;return n.init=function(e){this.level.string="LV."+e.data.level;var t=e.data.statsData;this.updateUI(t.HP,t.getMaxHp()),e.event.on(f.HpChanged,this.OnHpChanged,this);var i=e.team==u.MyTeam;this.health.color=new s(i?"#3BCA24":"#C83434"),this.level.color=new s(i?"#3BCA24":"#A43AC9"),this.lifetimeLabel.node.active=!e.isUndead},n.update=function(e){this.health_white.fillRange>this.health.fillRange&&(this.health_white.fillRange-=.8*e)},n.updateUI=function(e,t){this.health.fillRange=e/t},n.OnHpChanged=function(e,t,i){this.updateUI(i.HP,i.getMaxHp())},n.refeshLifeTime=function(e,t){this.lifetimeLabel.string=p.ConvertSecondsToTime(e)},t}(c)).prototype,"level",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(w.prototype,"health",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(w.prototype,"health_white",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(w.prototype,"lifetimeLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=w))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/GarderingBagItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts"],(function(e){"use strict";var t,i,n,r,a,o,l,s,c,g,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Sprite,s=e.Label,c=e.Toggle,g=e.Component},function(e){u=e.ResourcesManager}],execute:function(){var d,p,h,f,m,b,v,y,I;a._RF.push({},"f409faujjNNZr+xYCnxhd/d","GarderingBagItem",void 0);var B=o.ccclass,x=o.property;e("GarderingBagItem",(d=B("GarderingBagItem"),p=x(l),h=x(s),f=x(c),d((v=t((b=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"icon",v,r(t)),n(t,"amount",y,r(t)),n(t,"toggle",I,r(t)),t.index=void 0,t._UIGarderingBag=void 0,t.json=void 0,t}i(t,e);var a=t.prototype;return a.Init=function(e,t,i){var n=this;if(this.index=e,this._UIGarderingBag=t,this.json=i,null==i)this.icon.node.active=!1,this.toggle.interactable=!1;else{i.name.includes("TREASURE")?this.icon.node.setScale(.55,.55,1):this.icon.node.setScale(.65,.65,1),this.toggle.interactable=!0,this.amount.string="x"+i.amount.toString();u.Instance.LoadMaterialSprite(i.name,(function(e){n.icon.node.active=!0,n.icon.spriteFrame=e}))}},a.OnToggle=function(){this.toggle.interactable&&this._UIGarderingBag.OnToggle(this.toggle.isChecked,this.index)},t}(g)).prototype,"icon",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(b.prototype,"amount",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(b.prototype,"toggle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=b))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/GatherEndPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(e){"use strict";var t,n,i,r,a,o,l,s,c,p,u,h,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Prefab,s=e.Node,c=e.Label,p=e.instantiate,u=e.Sprite},function(e){h=e.PopUpBase},function(e){b=e.ResourcesManager},function(e){f=e.UIPopupManager}],execute:function(){var m,g,v,d,P,y,w,I,M,z,B,E,L,k,S;a._RF.push({},"78074u2wx1K37hVUFNYk5Tu","GatherEndPopup",void 0);var G=o.ccclass,U=o.property;e("GatherEndPopup",(m=G("GatherEndPopup"),g=U(l),v=U(s),d=U(s),P=U(s),y=U(c),w=U(s),m((z=t((M=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"itemPrefab",z,r(t)),i(t,"content",B,r(t)),i(t,"contentEmpty",E,r(t)),i(t,"contentMid",L,r(t)),i(t,"mockLabel",k,r(t)),i(t,"arrow",S,r(t)),t.itemPrefabs=[],t}n(t,e);var a=t.prototype;return a.Show=function(t){var n=this;e.prototype.OnShow.call(this),this.DisableItemPrefabs();var i=t.data.travelBagItems.length;if(0==i)this.mockLabel.string="Congratulations! You've got... nothing. Better luck next time (or not?)!",this.content.parent.parent.active=!1,this.contentMid.active=!1,this.contentEmpty.active=!0;else{this.mockLabel.string="Please claim your rewards. These items will be transferred to your Inventory after they've been claimed.",this.contentEmpty.active=!1,this.content.parent.parent.active=i>4,this.contentMid.active=i<=4;for(var r=function(){var e=n.GetiIemPrefabs(a);e.setParent(i<=4?n.contentMid:n.content),e.children[1].getComponentInChildren(c).string=t.data.travelBagItems[a].amount;b.Instance.LoadMaterialSprite(t.data.travelBagItems[a].name,(function(t){e.children[0].getComponent(u).spriteFrame=t}))},a=0;a<i;a++)r()}this.arrow.active=i>4},a.DisableItemPrefabs=function(){for(var e=0;e<this.itemPrefabs.length;e++)this.itemPrefabs[e].active=!1},a.GetiIemPrefabs=function(e){var t;return e<this.itemPrefabs.length?t=this.itemPrefabs[e]:(t=p(this.itemPrefab),this.itemPrefabs.push(t)),t.active=!0,t},a.OnBtnClaim=function(){e.prototype.OnHide.call(this),f.Instance.ShowUIScreenMain(2)},t}(h)).prototype,"itemPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(M.prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(M.prototype,"contentEmpty",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(M.prototype,"contentMid",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(M.prototype,"mockLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(M.prototype,"arrow",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=M))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/GatheringLevelTop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserModel.ts","./ResourcesManager.ts"],(function(e){"use strict";var t,r,l,i,n,a,o,s,p,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,l=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,o=e.Label,s=e.Sprite,p=e.Component},function(e){c=e.UserModel},function(e){u=e.ResourcesManager}],execute:function(){var h,v,g,f,G,I,y;n._RF.push({},"cc470erlhVC044FlNND1m2v","GatheringLevelTop",void 0);var D=a.ccclass,N=a.property;e("GatheringLevelTop",(h=D("GatheringLevelTop"),v=N(o),g=N(s),h((I=t((G=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,l(t,"level",I,i(t)),l(t,"spriteFill",y,i(t)),t}return r(t,e),t.prototype.UpdateView=function(e){var t=-1,r=0,l=0,i=u.Instance.GatheringLevelConfig.json.data;0==e?(l=c.userGatherData.CHOPPING_level.level,r=c.userGatherData.CHOPPING_level.exp,l+1<i.chopping.length&&(t=i.chopping[l+1].exp)):1==e?(l=c.userGatherData.MINING_level.level,r=c.userGatherData.MINING_level.exp,l+1<i.mining.length&&(t=i.mining[l+1].exp)):2==e&&(l=c.userGatherData.FISHING_level.level,r=c.userGatherData.FISHING_level.exp,l+1<i.fishing.length&&(t=i.fishing[l+1].exp)),this.level.string="Lv."+l;var n=r/t*.5;n>.5&&(n=.5),this.spriteFill.fillRange=-1==t?.5:n},t}(p)).prototype,"level",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(G.prototype,"spriteFill",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=G))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/GatheringManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PrefabController.ts","./Utility.ts","./MaterialDropBase.ts"],(function(n){"use strict";var o,t,a,p,e,r,i,u,s,h,c,P;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,a=n._decorator,p=n.game,e=n.resources,r=n.Prefab,i=n.instantiate,u=n.Component},function(n){s=n.PrefabController,h=n.PrefabEnum},function(n){c=n.Utility},function(n){P=n.MaterialDropBase}],execute:function(){var d,g;t._RF.push({},"b4b2ePAizdP6Z7En1l8MAuh","GatheringManager",void 0);var f=a.ccclass;a.property,n("GatheringManager",f("GatheringManager")(((g=function(n){function t(){for(var o,t=arguments.length,a=new Array(t),p=0;p<t;p++)a[p]=arguments[p];return(o=n.call.apply(n,[this].concat(a))||this).popUpMap=new Map,o.popUpArray=[],o}o(t,n);var a=t.prototype;return a.onLoad=function(){null==t.Instance?(t.Instance=this,p.addPersistRootNode(this.node)):this.destroy()},a.start=function(){c.PreLoadPopup("GatherEndPopup"),c.PreLoadPopup("MysteryPopup"),c.PreLoadPopup("UIGarderingBag"),c.PreLoadPopup("UIGarderingLevel"),c.PreLoadPopup("UIPopupMaterialWarning"),c.PreLoadPopup("UIPopupEndGatherWarning")},a.LoadPopup=function(n,o){this.popUpMap.has(n)?o():e.load("ui_prefab/"+n,r,function(t,a){var p=i(a);p.setParent(this.node);var e=p.getComponent(n);this.popUpMap.set(n,e),o()}.bind(this))},a.ShowMaterialWarning=function(n,o,t){var a=this;this.LoadPopup("UIPopupMaterialWarning",(function(){a.popUpMap.get("UIPopupMaterialWarning").Show(n,o,t)}))},a.ShowBag=function(){var n=this;this.LoadPopup("UIGarderingBag",(function(){n.popUpMap.get("UIGarderingBag").Show()}))},a.ShowMysteryPopup=function(n,o,t){var a=this;this.LoadPopup("MysteryPopup",(function(){a.popUpMap.get("MysteryPopup").Show(n,o,t)}))},a.ShowLevel=function(n){var o=this;void 0===n&&(n=function(){}),this.LoadPopup("UIGarderingLevel",(function(){o.popUpMap.get("UIGarderingLevel").Show(n)}))},a.ShowGatherEndPopup=function(n){var o=this;this.LoadPopup("GatherEndPopup",(function(){o.popUpMap.get("GatherEndPopup").Show(n)}))},a.ShowUIPopupEndGatherWarning=function(n,o){var t=this;this.LoadPopup("UIPopupEndGatherWarning",(function(){t.popUpMap.get("UIPopupEndGatherWarning").Show(n,o)}))},a.SpawnMaterial=function(){return s.Instance.GetPrefab(h.MaterialDrop).getComponent(P)},t}(u)).Instance=void 0,d=g))||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/GatheringMiniGameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserModel.ts","./PrefabController.ts","./Utility.ts","./SoundController.ts","./UIPopupManager.ts","./GatheringLevelTop.ts","./GatheringManager.ts"],(function(t){"use strict";var e,i,n,a,r,o,s,l,p,u,c,g,h,m,b,f,_,I,k,v,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,l=t.Label,p=t.Sprite,u=t.SpriteFrame,c=t.Node,g=t.Component},function(t){h=t.UserModel},function(t){m=t.PrefabController,b=t.PrefabEnum},function(t){f=t.Utility},function(t){_=t.SoundController,I=t.EnumSound},function(t){k=t.UIPopupManager},function(t){v=t.GatheringLevelTop},function(t){y=t.GatheringManager}],execute:function(){var B,S,C,d,G,L,U,w,P,z,M,T,x,O,F,D,A,E,N,R,V,j,H;o._RF.push({},"c65baZYLgNM/rmntzLW2FQb","GatheringMiniGameUI",void 0);var Q=s.ccclass,W=s.property;t("GatheringMiniGameUI",(B=Q("GatheringMiniGameUI"),S=W(v),C=W(l),d=W(l),G=W(p),L=W(u),U=W(u),w=W(l),P=W(c),z=W(c),M=W(c),B((O=e((x=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"gatheringLevelTop",O,a(e)),n(e,"staminaLabel",F,a(e)),n(e,"totalItem",D,a(e)),e._curItem=0,e._maxItem=0,n(e,"BagSprite",A,a(e)),n(e,"BagOpenSprite",E,a(e)),n(e,"BagCloseSprite",N,a(e)),e.bagCurrent=0,e._skipGameBtnstate=0,n(e,"skip_amount",R,a(e)),n(e,"skip_staminaIcon",V,a(e)),n(e,"skip_keyIcon",j,a(e)),n(e,"skip_nextmap",H,a(e)),e.onSkip=function(){},e.type=0,e.onLvUp=void 0,e.OnOpenTut=void 0,e}i(e,t);var o=e.prototype;return o.Init=function(t,e,i,n,a){void 0===i&&(i=function(){}),void 0===n&&(n=null),this.OnOpenTut=a,this.type=t,this.onSkip=i,this._skipGameBtnstate=0,this.onLvUp=n,this._maxItem=e,this.curItem=e,this.gatheringLevelTop.UpdateView(t),this.skipGameBtnstate=0,this.bagCurrent=0,this.CloseBag(!1,!1)},o.OpenBag=function(){this.BagSprite.spriteFrame=this.BagOpenSprite,this.bagCurrent++},o.CloseBag=function(t,e){var i=this;if(void 0===e&&(e=!0),t){var n=m.Instance.GetPrefab(b.Bag_effect);n.setParent(this.BagSprite.node),n.setPosition(25,0,0),f.PlayParticle(n),f.AsyncDelay(300).then((function(){i.bagCurrent--,i.bagCurrent<0&&(i.bagCurrent=0),0==i.bagCurrent&&(e&&_.Instance.PlaySound(I.UI_Close_Bag,1),i.BagSprite.spriteFrame=i.BagCloseSprite)}))}else this.bagCurrent--,this.bagCurrent<0&&(this.bagCurrent=0),0==this.bagCurrent&&(e&&_.Instance.PlaySound(I.UI_Close_Bag,1),this.BagSprite.spriteFrame=this.BagCloseSprite)},o.onBtnBag=function(){y.Instance.ShowBag()},o.onBtnSkip=function(){this.onSkip()},o.onBtnSetting=function(){k.Instance.ShowSetting()},o.onBtnLevel=function(){var t=this;y.Instance.ShowLevel((function(){t.gatheringLevelTop.UpdateView(t.type),null!=t.onLvUp&&t.onLvUp()}))},o.UpdateStaminaLabel=function(){this.staminaLabel.string=Math.floor(h.userGatherData.currentStamina)+"/"+h.userGatherData.maxStamina},o.onBtnTutoClick=function(){this.OnOpenTut()},r(e,[{key:"curItem",get:function(){return this._curItem},set:function(t){this._curItem=t,this.totalItem.string=this._curItem+"/"+this._maxItem}},{key:"skipGameBtnstate",get:function(){return this._skipGameBtnstate},set:function(t){this._skipGameBtnstate=t,0==t?(this.skip_nextmap.active=!1,this.skip_staminaIcon.parent.active=!0,this.skip_staminaIcon.active=!0,this.skip_keyIcon.active=!1,this.skip_amount.string="50"):1==t?(this.skip_nextmap.active=!1,this.skip_staminaIcon.parent.active=!0,this.skip_staminaIcon.active=!1,this.skip_keyIcon.active=!0,this.skip_amount.string="1"):2==t&&(this.skip_nextmap.active=!0,this.skip_staminaIcon.parent.active=!1)}}]),e}(g)).prototype,"gatheringLevelTop",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(x.prototype,"staminaLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(x.prototype,"totalItem",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(x.prototype,"BagSprite",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(x.prototype,"BagOpenSprite",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(x.prototype,"BagCloseSprite",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(x.prototype,"skip_amount",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(x.prototype,"skip_staminaIcon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(x.prototype,"skip_keyIcon",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(x.prototype,"skip_nextmap",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=x))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/GatheringRoutesMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FarmingServicesApi.ts","./GatheringServicesApi.ts","./UserModel.ts","./ResourcesManager.ts","./UIPopupManager.ts","./UITutorial.ts","./GatheringManager.ts","./RoutesItem.ts"],(function(e){"use strict";var t,n,a,i,r,s,o,u,l,c,h,p,f,g,I,m,S,b,d,v,R,M,P,G;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.SpriteFrame,u=e.Prefab,l=e.Node,c=e.UITransform,h=e.Label,p=e.instantiate,f=e.Vec3,g=e.Sprite,I=e.Component},function(e){m=e.FarmingServicesApi},function(e){S=e.GatheringServicesApi},function(e){b=e.UserModel,d=e.UserGatherData},function(e){v=e.ResourcesManager},function(e){R=e.UIPopupManager},function(e){M=e.UITutorial},function(e){P=e.GatheringManager},function(e){G=e.RoutesItem}],execute:function(){var w,y,C,L,T,D,E,A,N,k,B,U,O,z,W,x,F,q,J,_,j,H,K,V,Z,Q,X,Y,$,ee,te,ne,ae,ie,re;r._RF.push({},"be751jovZFDx5nnHIIpkLxe","GatheringRoutesMap",void 0);var se=s.ccclass,oe=s.property;e("GatheringRoutesMap",(w=se("GatheringRoutesMap"),y=oe(o),C=oe(o),L=oe(o),T=oe(o),D=oe(u),E=oe(l),A=oe(u),N=oe(o),k=oe(o),B=oe(l),U=oe(l),O=oe(c),z=oe(h),W=oe(l),x=oe(c),F=oe(M),w((_=t((J=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,a(t,"NoteIcon",_,i(t)),a(t,"NoteIconActive",j,i(t)),a(t,"BaseRound",H,i(t)),a(t,"BaseRectangle",K,i(t)),a(t,"RoutesItemPrefab",V,i(t)),a(t,"RouteItemContent",Z,i(t)),t.RoutesItemPrefabs=[],a(t,"LinePrefab",Q,i(t)),t.LinePrefabs=[],a(t,"LineActive",X,i(t)),a(t,"LineInActive",Y,i(t)),a(t,"LineActiveContent",$,i(t)),a(t,"LineInActiveContent",ee,i(t)),a(t,"ScrollContent",te,i(t)),t.RoutesItems=[[]],a(t,"StaminaLabel",ne,i(t)),a(t,"CurrentNodeCheck",ae,i(t)),a(t,"canvasUITransform",ie,i(t)),a(t,"uITutorial",re,i(t)),t.NodeDistance=550,t.cacheTravelBag=void 0,t}n(t,e);var r=t.prototype;return r.start=function(){null!=b.curWorldMapData&&this.Show(),null!=b.userGatherData&&this.UpdateStaminaLabel(),null==b.SeasonData&&this.RequestWeather()},r.RequestWeather=function(){m.RequestWeather((function(e){var t=JSON.parse(e);0==t.status?(b.SeasonData=JSON.parse(JSON.stringify(t.data)),b.seasonEndTimeNum=Date.parse(b.SeasonData.seasonEndTime),b.seasonStartTimeNum=Date.parse(b.SeasonData.seasonStartTime)):R.Instance.ShowToast("Error",v.Instance.GetErrorMessage(t.status),0)}),null)},r.Show=function(){this.InitWorldMap(),this.AfterInitMap()},r.UpdateStaminaLabel=function(){this.StaminaLabel.string=Math.floor(b.userGatherData.currentStamina)+"/"+b.userGatherData.maxStamina},r.AfterInitMap=function(){var e=this;b.curWorldMapData.config.length!=b.curWorldMapData.passedMiniGameIndex.length?null!=b.curWorldMapData.playingMiniGameId&&""!=b.curWorldMapData.playingMiniGameId&&S.FORCE_SKIP_CURRENT_ROUTE((function(t){var n=S.CheckStatus(JSON.parse(t));null!=n&&(b.curWorldMapData=n.data.route,b.userGatherData.currentStamina=n.data.stamina,e.UpdateStaminaLabel(),e.Show())}),(function(e){})):this.EndGather(!1)},r.InitWorldMap=function(){this.deAvtivePrefab();var e=b.curWorldMapData.config,t=b.curWorldMapData.passedMiniGameIndex,n=0;this.RoutesItems=[];for(var a=0;a<e.length;a++){this.RoutesItems[a]=[];for(var i=e[a].miniGames,r=i.length,s=0;s<r;s++){var o=void 0;n<this.RoutesItemPrefabs.length?o=this.RoutesItemPrefabs[n]:(o=p(this.RoutesItemPrefab),this.RoutesItemPrefabs.push(o)),n++;var u=o.getComponent(G);o.setParent(this.RouteItemContent),this.RoutesItems[a][s]=u;var l=!1,h=!0;null!=t&&a<t.length&&(l=t[a]==s),a>=t.length&&(h=!1),u.Init(i[s],this,a,s,l,this.NodeDistance,h,r)}}for(var I=0;I<this.RoutesItems.length;I++)for(var m=0;m<this.RoutesItems[I].length;m++)if(null!=t&&t.length>0)if(I==t.length-1){if(this.RoutesItems[I][m].setisPlayAble(!1),m==t[I]){var S=this.RoutesItems[I][m].json;if(null!=S.outGoing&&S.outGoing.length>0)for(var d=0;d<S.outGoing.length;d++)this.RoutesItems[I+1][S.outGoing[d]].setisPlayAble(!0)}}else I==t.length&&this.RoutesItems[I][m].isPlayable||this.RoutesItems[I][m].setisPlayAble(!1);else this.RoutesItems[I][m].setisPlayAble(0==I);for(var v=0,R=this.LineActive.originalSize.width,M=0;M<this.RoutesItems.length;M++)for(var P=0;P<this.RoutesItems[M].length;P++)for(var w=this.RoutesItems[M][P].json.outGoing,y=0;y<w.length;y++){var C=this.GetLineItem(v),L=this.RoutesItems[M][P].node.getPosition(),T=this.RoutesItems[M+1][w[y]].node.getPosition(),D=new f(L);D.add(T),D.multiplyScalar(.5),D.y+=50,C.setPosition(D);var E=.65*f.distance(L,T);E=Math.round(E/R)*R,C.getComponent(c).width=E;var A=(T.y-L.y)/(T.x-L.x);A=Math.tanh(A),A*=180/Math.PI,C.setRotationFromEuler(0,0,A),this.RoutesItems[M][P].isPassed&&this.RoutesItems[M+1][w[y]].isPassed?(C.getComponent(g).spriteFrame=this.LineActive,C.setParent(this.LineActiveContent)):(C.getComponent(g).spriteFrame=this.LineInActive,C.setParent(this.LineInActiveContent)),v++}var N=610+this.NodeDistance*e.length;if(this.ScrollContent.width=N,null!=t&&t.length>0){this.CurrentNodeCheck.active=!0;var k=this.RoutesItems[t.length-1][t[t.length-1]].node.getPosition();this.CurrentNodeCheck.setPosition(k.x+47,k.y,0);var B=-k.x+this.canvasUITransform.width/2;B<0&&this.ScrollContent.node.setPosition(B,-10,0)}else this.CurrentNodeCheck.active=!1},r.deAvtivePrefab=function(){for(var e=0;e<this.LinePrefabs.length;e++)this.LinePrefabs[e].active=!1;for(var t=0;t<this.RoutesItemPrefabs.length;t++)this.RoutesItemPrefabs[t].active=!1},r.GetLineItem=function(e){var t;return e<this.LinePrefabs.length?t=this.LinePrefabs[e]:(t=p(this.LinePrefab),this.LinePrefabs.push(t)),t.active=!0,t},r.OnBtnBagClick=function(){P.Instance.ShowBag()},r.OnBtnTutorialClick=function(){this.uITutorial.Show(0)},r.PrivateEndRoute=function(e){var t=this;S.GetTravelBagInfo((function(n){0!=JSON.parse(n).status?t.cacheTravelBag=null:t.cacheTravelBag=n;S.END_ROUTE(e,(function(e){}))}),(function(e){t.cacheTravelBag=null}),!0)},r.OnBtnBackClick=function(){P.Instance.ShowUIPopupEndGatherWarning(!1,(function(){S.BackRoute(null,null),R.Instance.ShowUIScreenMain(2)}))},r.OnBtnEndClick=function(){this.EndGather(!0)},r.EndGather=function(e){var t=this,n=function(e){var n=JSON.parse(e);1118!=n.status?null!=S.CheckStatus(n)&&(null==t.cacheTravelBag?R.Instance.ShowUIScreenMain(2):P.Instance.ShowGatherEndPopup(n)):R.Instance.ShowUIScreenMain(2)};e?P.Instance.ShowUIPopupEndGatherWarning(!0,(function(){t.PrivateEndRoute(n)})):this.PrivateEndRoute(n)},r.OnBtnSettingClick=function(){R.Instance.ShowSetting()},r.OnBtnSkillBookClick=function(){R.Instance.ShowUIScreenSkillBook(this.enterGather.bind(this),1)},r.enterGather=function(){var e=this;S.ENTER_GATHER((function(t){var n=JSON.parse(t);0==n.status?(b.userGatherData=new d(n.data),e.UpdateStaminaLabel()):R.Instance.ShowToast("Error",v.Instance.GetErrorMessage(n.status),0)}),null)},r.OnBtnMiniGameClick=function(e,t){var n=this;switch(e){case 0:case 1:case 2:S.StartMiniGame(t.toString(),(function(t){n.onRequestStartMiniGameSuccess(t,e)}),null);break;case 3:S.StartMystery(t.toString(),(function(e){n.onRequestStartMysterySuccess(e,t)}),null);break;case 4:S.StartTresure(t.toString(),(function(e){n.onRequestStartTreasureSuccess(e,t)}),null)}},r.onRequestStartTreasureSuccess=function(e,t){var n=this,a=JSON.parse(e);0==a.status?P.Instance.ShowMysteryPopup(a,(function(){n.UpdateStaminaLabel()}),(function(e,a){b.curWorldMapData.passedMiniGameIndex.push(t),n.Show()})):R.Instance.ShowToast("Error",v.Instance.GetErrorMessage(a.status),0)},r.onRequestStartMysterySuccess=function(e,t){var n=this,a=JSON.parse(e);0==a.status?P.Instance.ShowMysteryPopup(a,(function(){n.UpdateStaminaLabel()}),(function(e,a){1==e?(b.curWorldMapData.passedMiniGameIndex.push(t),n.Show()):0==e&&S.StartMiniGame(t.toString(),(function(e){n.onRequestStartMiniGameSuccess(e,a)}),null)})):R.Instance.ShowToast("Error",v.Instance.GetErrorMessage(a.status),0)},r.onRequestStartMiniGameSuccess=function(e,t){var n=JSON.parse(e);if(0==n.status)switch(b.curWorldMapData=n.data,t){case 0:R.Instance.LoadScene("2.Chopping");break;case 1:R.Instance.LoadScene("5.MiningNew");break;case 2:R.Instance.LoadScene("3.Fishing")}else R.Instance.ShowToast("Error",v.Instance.GetErrorMessage(n.status),0),1111==n.status&&this.OnBtnBackClick()},t}(I)).prototype,"NoteIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=t(J.prototype,"NoteIconActive",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=t(J.prototype,"BaseRound",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=t(J.prototype,"BaseRectangle",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=t(J.prototype,"RoutesItemPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(J.prototype,"RouteItemContent",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(J.prototype,"LinePrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(J.prototype,"LineActive",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(J.prototype,"LineInActive",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(J.prototype,"LineActiveContent",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(J.prototype,"LineInActiveContent",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(J.prototype,"ScrollContent",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(J.prototype,"StaminaLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(J.prototype,"CurrentNodeCheck",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(J.prototype,"canvasUITransform",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(J.prototype,"uITutorial",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=J))||q));r._RF.pop()}}}));

System.register("chunks:///_virtual/GatheringServicesApi.ts",["cc","./ResourcesManager.ts","./UIPopupManager.ts","./Utility.ts","./ConfigApi.ts","./ResHttp.ts"],(function(e){"use strict";var t,n,_,I,A,R,i;return{setters:[function(e){t=e.cclegacy},function(e){n=e.ResourcesManager},function(e){_=e.UIPopupManager,I=e.LoadingType},function(e){A=e.GuidEncrypt},function(e){R=e.ConfigApi},function(e){i=e.ResHttp}],execute:function(){var u,P;e("GatheringServicesApi",void 0),t._RF.push({},"7f8474e7PxI7bPN1ruTcPGW","GatheringServicesApi",void 0),(P=u||(u=e("GatheringServicesApi",{}))).LEVEL_UP_GATHER=function(e,t,n){var _={type:e.toUpperCase()};i.GetRequest(R.API_FARM_3+R.LEVEL_UP_GATHER,_,t,n)},P.STAMINA_PRICE=function(e,t){i.GetRequest(R.API_FARM_3+R.STAMINA_PRICE,null,e,t,!1)},P.BUY_STAMINA=function(e,t){i.PostRequest(R.API_FARM_3+R.BUY_STAMINA,null,e,t)},P.GetWorldMap=function(e,t){i.GetRequest(R.API_FARM_3+R.GET_WORLD_MAP,null,e,t)},P.ENTER_GATHER=function(e,t){i.GetRequest(R.API_FARM_3+R.ENTER_GATHER,null,e,t,!1)},P.END_ROUTE=function(e,t){i.PostRequest(R.API_FARM_3+R.END_ROUTE,null,e,t)},P.FORCE_SKIP_CURRENT_ROUTE=function(e,t){i.PostRequest(R.API_FARM_3+R.FORCE_SKIP_CURRENT_ROUTE,null,e,t)},P.StartMiniGame=function(e,t,n){var _={miniGameIndex:e};i.PostRequest(R.API_FARM_3+R.START_MINI_GAME,_,t,n)},P.StartMystery=function(e,t,n){var _={miniGameIndex:e};i.PostRequest(R.API_FARM_3+R.START_MYSTERY,_,t,n)},P.StartTresure=function(e,t,n){var _={miniGameIndex:e};i.PostRequest(R.API_FARM_3+R.START_TRESURE,_,t,n)},P.CheckStatus=function(e){if(null==e.status)return _.Instance.ShowToast("Failed","Load Data Failed",0),null;var t=e.status;return 0!=t?1010==t?e:(35==t||1132==t||1053==t||_.Instance.ShowToast("Error",n.Instance.GetErrorMessage(t),0),null):e},P.CHOPPING_GET_MAP=function(e,t,n){var _={miniGameId:e};i.GetRequest(R.API_FARM_3+R.CHOPPING_GET_MAP,_,t,n)},P.CHOPPING_TREE_V2=function(e,t,n,_){var A={treeIndex:e,bar:t};i.PostRequest(R.API_FARM_3+R.CHOPPING_TREE_V2,A,n,_,!0,I.noAnim)},P.CHOPPING_TREE=function(e,t,n,_){var A={treeIndex:e};i.PostRequest(R.API_FARM_3+R.CHOPPING_TREE,A,n,_,!0,I.noAnim)},P.CHOPPING_SKIP=function(e,t){i.PostRequest(R.API_FARM_3+R.CHOPPING_SKIP,null,e,t)},P.CHOPPING_FINISH=function(e,t){i.PostRequest(R.API_FARM_3+R.CHOPPING_FINISH,null,e,t)},P.CHOPPING_GET_REWARD=function(e,t,n){var _={rewardToken:e};i.PostRequest(R.API_FARM_3+R.CHOPPING_GET_REWARD,_,t,n,!1)},P.Fishing_GetMap=function(e,t,n){var _={miniGameId:e};i.GetRequest(R.API_FARM_3+R.FISHING_GET_MAP,_,t,n)},P.Fishing_Finish=function(e,t){i.PostRequest(R.API_FARM_3+R.FISHING_FINISH,null,e,t)},P.Fishing_GetPull=function(e,t,n,_,u){var P={miniGameId:e,expId:t,dropId:A.encrypt(n)};i.GetRequest(R.API_FARM_3+R.FISHING_PULL,P,_,u,!0,I.noAnim)},P.Fishing_GetBeginPull=function(e,t,n){var _={expId:e};i.PostRequest(R.API_FARM_3+R.FISHING_BEGIN_PULL,_,t,n,!0,I.noAnim)},P.Fishing_Drop=function(e,t,n){var _={miniGameId:e};i.PostRequest(R.API_FARM_3+R.FISHING_DROP,_,t,n,!0,I.noAnim)},P.Fishing_Skip=function(e,t){i.PostRequest(R.API_FARM_3+R.FISHING_SKIP_MAP,null,e,t)},P.Fishing_Catch=function(e,t,n,_){var A={items:[{id:t,name:e,amount:1}]};i.PostRequest(R.API_FARM_3+R.FISHING_CATCH,A,n,_,!0,I.noAnim)},P.Mining_GetMap=function(e,t,n){var _={miniGameId:e};i.GetRequest(R.API_FARM_3+R.MINING_GET_MAP,_,t,n)},P.Mining_Shoot=function(e,t){i.GetRequest(R.API_FARM_3+R.MINING_SHOOT,null,e,t,!0,I.noAnim)},P.MINING_GET_REWARD=function(e,t,n,_,u){var P={mapId:e,objectId:t,token:A.encrypt(n)};i.GetRequest(R.API_FARM_3+R.MINING_GET_REWARD,P,_,u,!1,I.noAnim)},P.MINING_ADD_TRAVEL_BAG=function(e,t,n,_){var A=[],u={name:e,amount:"1",guid:t};A.push(u);var P={items:A};i.PostRequest(R.API_FARM_3+R.MINING_ADD_TRAVEL_BAG,P,n,_,!0,I.noAnim)},P.MINING_START=function(e,t){i.GetRequest(R.API_FARM_3+R.MINING_START,null,e,t,!0,I.noAnim)},P.MINING_SKIP=function(e,t){i.GetRequest(R.API_FARM_3+R.MINING_SKIP,null,e,t)},P.MINING_FINISH=function(e,t){i.GetRequest(R.API_FARM_3+R.MINING_FINISH,null,e,t)},P.Mining_Finish_V2=function(e,t){i.GetRequest(R.API_FARM_3+R.MINING_FINISH_V2,null,e,t)},P.Mining_Skip_V2=function(e,t){i.GetRequest(R.API_FARM_3+R.MINING_SKIP_V2,null,e,t)},P.Mining_GetMapV2=function(e,t,n){var _={miniGameId:e};i.GetRequest(R.API_FARM_3+R.MINING_GET_MAP_V2,_,t,n)},P.Mining_DamageV2=function(e,t,n,_){var A={objectUID:e,toolId:t};i.PostRequest(R.API_FARM_3+R.MINING_DAMAGE_V2,A,n,_,!0,I.noAnim)},P.Mining_AddTravelBag=function(e,t,n){var _={rewardUIDs:[e]};i.PostRequest(R.API_FARM_3+R.MINING_ADD_TRAVEL_BAG_V2,_,t,n,!1)},P.GetTravelBagInfo=function(e,t,n){i.GetRequest(R.API_FARM_3+R.TRAVEL_BAG,null,e,t,n)},P.RemoveItemTravelBag=function(e,t,n,_,I,A){var u={name:e,amount:t,_id:n,type:_};i.PostRequest(R.API_FARM_3+R.TRAVEL_BAG_REMOVE_ITEM,u,I,A)},P.Crafting_Mystic=function(e,t,n,_){var I={items:e};i.PostRequest(R.API_FARM_3+R.CRAFTING_MYSTIC,I,t,n,_)},P.Crafting_Synthesis=function(e,t,n,_){i.PostRequest(R.API_FARM_3+R.CRAFTING_SYNTHESIS,e,t,n,_)},P.Crafting_GetConfig=function(e,t){i.GetRequest(R.API_FARM_3+R.CRAFTING_GET_CONFIG,null,e,t)},P.Market_GetItems=function(e,t){i.GetRequest(R.API_FARM_3+R.MARKET_GET_ITEMS,null,e,t)},P.Market_BuyItem=function(e,t,n){i.PostRequest(R.API_FARM_3+R.MARKET_BUY_ITEMS,e,t,n)},P.ReportBug=function(e,t,n){i.PostRequest(R.API_FARM_3+R.REPORT_BUG,e,t,n)},P.OPEN_TREASURE=function(e,t,n,_){var I={treasureName:e,amount:t};i.PostRequest(R.API_FARM_3+R.OPEN_TREASURE,I,n,_)},P.SkillTree_GetConfig=function(e,t){i.GetRequest(R.API_FARM_3+R.SkillTree_GetConfig,null,e,t)},P.SkillTree_GetUserData=function(e,t,n){i.GetRequest(R.API_FARM_3+R.SkillTree_GetUserData,null,e,t,n)},P.SkillTree_PostUpgrade=function(e,t,n,_){var I={type:e,currentLevel:t};i.PostRequest(R.API_FARM_3+R.SkillTree_PostUpgrade,I,n,_)},P.GetWorldMapPre=function(e,t){i.GetRequest(R.API_FARM_3+R.GET_WORLD_MAP_pre,null,e,t)},P.GetMapType=function(e,t){i.GetRequest(R.API_FARM_3+R.GET_MAP_TYPE_pre,null,e,t)},P.GetSKILLBOOK_KINGKEY_INFO=function(e,t){i.GetRequest(R.API_FARM_3+R.SKILLBOOK_KINGKEY_INFO,null,e,t,!1)},P.BackRoute=function(e,t){i.PostRequest(R.API_FARM_3+R.BACK_ROUTE,null,e,t,!1)},P.GetUpgradeCondition=function(e){i.GetRequest(R.LINK_API+R.UPGRADE_CONDITION,{},e,null)},P.UpgradeUndead=function(e,t,n){var _={tokenId:e};i.PostRequest(R.LINK_API+R.UPGRADE_UNDEAD,_,t,n)},P.UpgradePlant=function(e,t,n){var _={plantId:e};i.PostRequest(R.LINK_API+R.UPGRADE_PLANT,_,t,n)},P.SACRIFICE_MYSTERIOUS_POWDER=function(e,t,n,_){var I={name:e,amount:t};i.PostRequest(R.LINK_API+R.SACRIFICE_MYSTERIOUS_POWDER,I,n,_)},t._RF.pop()}}}));

System.register("chunks:///_virtual/GOAnimComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./InGameEvent.ts"],(function(t){"use strict";var i,e,n,o,s,a,m,r,c,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,m=t.sp,r=t.Component},function(t){c=t.GameplayTeam},function(t){h=t.InGameEventID}],execute:function(){var u,l,v,p,A;s._RF.push({},"c23f7bkWyZHtIFYUcGp1V7P","GOAnimComponent",void 0);var d=a.ccclass,f=a.property;t("GOAnimComponent",(u=d("GOAnimComponent"),l=f(m.Skeleton),u((A=i((p=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,n(i,"view",A,o(i)),i.root=void 0,i.startScale=void 0,i.baseScaleX=1,i.mapAnimDuration=new Map,i}e(i,t);var s=i.prototype;return s.Init=function(t){this.root=t,this.startScale=this.view.node.scale.clone(),this.view.setCompleteListener(this.onAnimComplete.bind(this)),this.setIdleAnim(),this.setFaceToTarget(t.team==c.MyTeam?2100:0),this.view.setEventListener(this.onEventListener.bind(this))},s.onEventListener=function(t,i){if("Attack"==i.data.name&&this.root.event.dispatchEvent(h.AttackAnimEvent),1==this.root.Id)t.animation&&t.animation.name},s.checkAutoFaceToTarget=function(){this.root.team===c.MyTeam&&this.setFaceToTarget(2100)},s.setFaceToTarget=function(t,i){void 0===i&&(i=1);var e=this.node.worldPosition.x;this.setFaceDir(e>t?i:-i)},s.setFaceDir=function(t){this.view.node.setScale(t*this.startScale.x,this.startScale.y,1)},s.onAnimComplete=function(t){var i=t.animation.name;"Attack_2"!==i&&"Attack_1"!==i||(this.root.movingComponent&&this.root.movingComponent.moving?this.setMovingAnim():this.root.team==c.EnemyTeam?this.root.movingComponent.checkCountinueMoving():this.setIdleAnim())},s.setNormalAttackAnim=function(t,i){null==this.mapAnimDuration.get(t)&&this.mapAnimDuration.set(t,this.view.findAnimation(t).duration);var e=this.mapAnimDuration.get(t),n=1/i;e>n&&(this.view.timeScale=e/n),this.setAnim(t,!1)},s.setSkillAttackAnim=function(t,i){void 0===i&&(i=!1),null==this.mapAnimDuration.get(t)&&this.mapAnimDuration.set(t,this.view.findAnimation(t).duration),this.view.timeScale=1,this.setAnim(t,i)},s.setMovingAnim=function(){this.view.timeScale=1,this.setAnim("Move",!0)},s.setIdleAnim=function(){this.view.timeScale=1,this.setAnim("Idle",!0)},s.setDeadAnim=function(){this.view.timeScale=1,this.setAnim("Dead",!1)},s.unPauseAnim=function(){this.view.paused=!1},s.setAnim=function(t,i){this.view.paused=!1,this.view.setAnimation(0,t,i)},s.stopAnyAnim=function(){this.view.paused=!0},i}(r)).prototype,"view",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=p))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/HasteEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./EffectBase.ts"],(function(t){"use strict";var e,i,a,c,f;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,a=t._decorator},function(t){c=t.PVEGameplayControl},function(t){f=t.EffectBase}],execute:function(){var n;i._RF.push({},"e5a7eNsaDJITrhQvgYM89ql","HasteEffect",void 0);var r=a.ccclass;a.property,t("HasteEffect",r("HasteEffect")(n=function(t){function i(){for(var e,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))||this).attackSpeedModifier=0,e.endEffectTime=0,e}e(i,t);var a=i.prototype;return a.Init=function(e,i,a){t.prototype.Init.call(this,e,i,a),null!=i.AttackSpeedPercent&&i.AttackSpeedPercent>0&&(this.attackSpeedModifier=a.root.data.attackData.AttackSpeed*i.AttackSpeedPercent/100),this.endEffectTime=c.Instance.CurrentTime+i.EffectTime},a.update=function(t){c.Instance.CurrentTime>=this.endEffectTime&&this.RemoveEffect()},i.ApplyEffect=function(t,e){var i=t.getEffectWithType(e.EffectType),a=t.initEffect(e);null!=i&&i.attackSpeedModifier>=a.attackSpeedModifier||(null!=i&&(i.isApplying=!1),a.isApplying=!0,t.root.data.attackData.AttackSpeedModifier+=a.attackSpeedModifier)},a.RemoveEffect=function(){this.thisTarget.RemoveEffect(this);var t=this.thisTarget.root.data.attackData;1==this.isApplying&&(t.AttackSpeedModifier-=this.attackSpeedModifier);var e=this.thisTarget.getEffectWithType(this.data.EffectType);null!=e&&(e.isApplying=!0,this.isApplying=!0,t.AttackSpeedModifier+=e.attackSpeedModifier),this.node.destroy()},i}(f))||n);i._RF.pop()}}}));

System.register("chunks:///_virtual/HeaderShowAnim.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var i,n,t,e,r,s,a;return{setters:[function(o){i=o.inheritsLoose},function(o){n=o.cclegacy,t=o._decorator,e=o.UITransform,r=o.Vec3,s=o.tween,a=o.Component}],execute:function(){var c;n._RF.push({},"0fadf4Fk1FLL7EMkNPo0YVO","HeaderShowAnim",void 0);var h=t.ccclass;o("HeaderShowAnim",h("HeaderShowAnim")(c=function(o){function n(){for(var i,n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return(i=o.call.apply(o,[this].concat(t))||this).uiTransform=void 0,i.originalPos=void 0,i}i(n,o);var t=n.prototype;return t.onLoad=function(){this.uiTransform=this.node.getComponent(e),this.originalPos=new r(this.node.position)},t.onEnable=function(){this.node.setPosition(this.originalPos.x,this.originalPos.y+this.uiTransform.height,this.originalPos.z),s(this.node).to(.3,{position:this.originalPos},{easing:"circOut"}).start()},n}(a))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/HpLossItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,o,n,s,a,p,r,l,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,p=e.UIOpacity,r=e.Label,l=e.Vec3,c=e.tween,h=e.Component}],execute:function(){var H,u,d,b,y,w,v;s._RF.push({},"5ba1e7uzXdBKqkEK9VBjBDH","HpLossItem",void 0);var f=a.ccclass,D=a.property;e("HpLossItem",(H=f("HpLossItem"),u=D(p),d=D(r),H((w=t((y=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,o(t,"opacityNode",w,n(t)),o(t,"lbHp",v,n(t)),t.tweenDecreaseHp=void 0,t.tweenColorHp=void 0,t.available=!1,t}i(t,e);var s=t.prototype;return s.initItem=function(){var e=this;this.lbHp.node.position=l.ZERO,this.opacityNode.opacity=0,this.lbHp.string="",this.tweenDecreaseHp=c(this.lbHp.node).to(.4,{position:new l(0,80,0)}),this.tweenColorHp=c(this.opacityNode).to(.2,{opacity:255}).delay(.3).to(.3,{opacity:0}).call((function(){e.lbHp.node.position=l.ZERO,e.available=!0,e.node.active=!1}))},s.resetItem=function(){this.tweenDecreaseHp||this.tweenDecreaseHp.stop(),this.tweenColorHp||this.tweenColorHp.stop(),this.opacityNode.opacity=0,this.lbHp.node.position=l.ZERO,this.lbHp.string="",this.available=!0,this.node.active=!1},s.onShow=function(e,t){this.node.active=!0,this.node.position=e,this.lbHp.string="-"+t,this.available=!1,this.tweenDecreaseHp||this.tweenDecreaseHp.stop(),this.tweenDecreaseHp.start(),this.tweenColorHp||this.tweenColorHp.stop(),this.tweenColorHp.start()},s.onHide=function(){},t}(h)).prototype,"opacityNode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(y.prototype,"lbHp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=y))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/IcicleWave.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./Utility.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,o,a,i,n,r,s,l,c,u,h,f,d,m,p,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,s=t.Node},function(t){l=t.SoundController,c=t.EnumSoundPVE},function(t){u=t.Utility},function(t){h=t.PVEGameplayControl},function(t){f=t.PVEHelper},function(t){d=t.AttackType,m=t.DamageType},function(t){p=t.InGameEventID},function(t){y=t.SkillBase}],execute:function(){var P,k,v,z,g,A,D;n._RF.push({},"5132acz0iZH7aNdTlCX9/DK","IcicleWave",void 0);var E=r.ccclass,b=r.property;t("IcicleWave",(P=E("IcicleWave"),k=b(s),v=b(s),P((A=e((g=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).delayTimeAttack=0,a(e,"muzzletFront",A,i(e)),a(e,"muzzletBack",D,i(e)),e}o(e,t);var n=e.prototype;return n.Init=function(e,o){t.prototype.Init.call(this,e,o),this.root.root.event.on(p.OnDestroy,this.onPlantDestroy,this)},n.update=function(t){this.root.attackAble&&(this.delayTimeAttack>0?this.delayTimeAttack-=t:this.root.targets.length<=0||(this.delayTimeAttack=1/this.root.getAttackSpeed(),this.attack()))},n.addAttackData=function(t,e){t==d.NormalAttack&&(e.AddDamage(m.Normal,this.root.GetRandomBasicDamage()),e.AddEffects(this.skillData.EffectData))},n.attack=function(){f.RandomActive(this.root.root.data.attackData.BlindPercent)?console.error("Blind"):(this.root.root.event.on(p.AttackAnimEvent,this.endCast,this),this.root.beginNormalAttack(),l.Instance.PlaySoundPvE(c.SFX_IcicleWave,.35))},n.endCast=function(){this.root.root.event.off(p.AttackAnimEvent,this.endCast,this);var t=this.getPrefab(this.muzzletBack);t.parent=h.Instance.getEffParentBack(),t.setWorldPosition(this.root.attackPos.worldPosition),u.PlayParticle(t),this.setTimeoutPrefab(1200,this.muzzletBack,t);var e=this.getPrefab(this.muzzletFront);e.parent=h.Instance.getEffParentFront(),e.setWorldPosition(this.root.attackPos.worldPosition),u.PlayParticle(e),this.setTimeoutPrefab(1200,this.muzzletFront,e);for(var o=this.root.targets,a=0;a<o.length;a++){var i=o[a],n=this.root.Attack(d.NormalAttack,i,0);i.TakeDamage(n)}},n.onPlantDestroy=function(){this.root.root.event.off(p.OnDestroy,this.onPlantDestroy,this),this.destroyPrefab()},e}(y)).prototype,"muzzletFront",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(g.prototype,"muzzletBack",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=g))||z));n._RF.pop()}}}));

System.register("chunks:///_virtual/IgnorePauseSystem.ts",["cc"],(function(n){"use strict";var e,t,i,o;return{setters:[function(n){e=n.cclegacy,t=n._decorator,i=n.director,o=n.Director}],execute:function(){var s,c;e._RF.push({},"6f5d1RFZpdOC7WcU6q4lfTx","IgnorePauseSystem",void 0);var r=t.ccclass;t.property,n("IgnorePauseSystem",r("IgnorePauseSystem")(((c=function(){function n(){this.time=0,this.init()}var e=n.prototype;return e.log=function(n,e){this.time+=n,this.time>1&&(this.time=0,console.log(e))},e.init=function(){var e=this;i.on(o.EVENT_BEFORE_DRAW,(function(){if(i.isPaused()){e.log(.0069,"paused");for(var t=n.TweenAction.length-1;t>=0;t--)n.TweenAction[t].step(.0069)}else e.log(.0069,"not paused")}))},n.IgnoreDirectorPause=function(e){null!=e._finalAction?(null==this.instance&&(this.instance=new n),this.TweenAction.push(e._finalAction)):console.error("_finalAction null")},n.RemoveTween=function(n){if(null!=n._finalAction){var e=this.TweenAction.indexOf(n._finalAction);e<0||this.TweenAction.splice(e,1)}else console.error("TweenEnd: _finalAction null")},n}()).TweenAction=[],c.instance=void 0,s=c))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/IngameData.ts",["cc"],(function(t){"use strict";var i,e;return{setters:[function(t){i=t.cclegacy,e=t._decorator}],execute:function(){i._RF.push({},"16f88vpjwpFjZAO1tqUBRxa","IngameData",void 0);e.ccclass,e.property,t("IngameData",(function(){this.wave=0,this.status=void 0,this.stageDetail=void 0})),t("StageDetail",(function(){this.mana=0,this.hp=8,this.availableEnemy=void 0,this.wavePool=void 0})),t("WavePool",(function(){this.enemy=void 0})),t("LandInfo",(function(){this.upperLane=void 0,this.lowerLane=void 0})),t("LandEnemyInfo",(function(){this.code=void 0,this.position=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/InGameEvent.ts",["cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy,n=t._decorator}],execute:function(){var a;t("InGameEventID",void 0),e._RF.push({},"ba747bSk2ZGxrelVAZZ8c9W","InGameEvent",void 0);var r,o=n.ccclass;n.property;!function(t){t[t.BeginNormalAttack=0]="BeginNormalAttack",t[t.NormalAttack=1]="NormalAttack",t[t.NormalAttackHit=2]="NormalAttackHit",t[t.AttackAnimEvent=3]="AttackAnimEvent",t[t.HpChanged=4]="HpChanged",t[t.OnHit=5]="OnHit",t[t.OnDead=6]="OnDead",t[t.OnDestroy=7]="OnDestroy",t[t.ManaChanged=8]="ManaChanged",t[t.UpdatePerSec=9]="UpdatePerSec",t[t.GameUpdate=10]="GameUpdate",t[t.TouchMove=11]="TouchMove",t[t.TouchEnd=12]="TouchEnd"}(r||(r=t("InGameEventID",{})));t("InGameEvent",o("InGameEvent")(a=function(){function t(){this.handlers={},this.supportEvent=void 0}var e=t.prototype;return e.on=function(t,e,n){var a={handler:e,target:n},r=this.handlers[t];r||(r=[],this.handlers[t]=r);for(var o=0;o<r.length;o++)if(!r[o])return r[o]=a,o;return r.push(a),r.length},e.off=function(t,e,n){var a=this.handlers[t];if(a)for(var r=a.length-1;r>=0;r--){var o=a[r];if(o.handler===e&&(!n||n===o.target)){a.splice(r,1);break}}},e.dispatchEvent=function(t){var e=this.handlers[t];if(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];for(var o=e.length-1;o>=0;o--){var c=e[o];c.handler&&c.handler.apply(c.target,a)}}},t}())||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/Interface.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"75a10nEMs9Jh5QM41hE54W/","Interface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/InventoryData.ts",["cc","./ConvertJsonObject2.ts"],(function(t){"use strict";var e,n,a,i,r;return{setters:[function(t){e=t.cclegacy,n=t._decorator},function(t){a=t.convertToString,i=t.convertToArray,r=t.convertToUnstableNumber}],execute:function(){var s;e._RF.push({},"862a3n8eBZHXai+fa55xiZc","InventoryData",void 0);var o=n.ccclass,c=t("ItemData",function(){function t(t){this.id="",this.name="",this.amount=0,this.maxStack=0,this.id=a(t._id),this.name=a(t.name),this.amount=r(t.amount),this.maxStack=r(t.maxStack)}var e=t.prototype;return e.getItemRarity=function(){var t=this.name.split("_");return t[0]==this.name&&(t=this.name.split(" ")),t[0]},e.getNameType=function(){var t=this.name.split("_");return t[0]==this.name&&(t=this.name.split(" ")),t[1]},e.getItemType=function(){var t=this.name.split("_");if(t[0]==this.name&&(t=this.name.split(" ")),t.length<1)return"";var e=t[1];if(t.length>1)for(var n=2;n<t.length;n++)e+="_"+t[n];return e},t}());t("default",o("InventoryData")(s=function(){function t(t){this.id="",this.ownerId="",this.itemData=[],this.createdAt="",this.updatedAt="",this.UpdateData(t)}return t.prototype.UpdateData=function(t){this.id=a(t._id),this.ownerId=a(t.ownerId),this.createdAt=a(t.createdAt),this.updatedAt=a(t.updatedAt);for(var e=i(t.items),n=0;n<e.length;n++){var r=e[n];r&&this.itemData.push(new c(r))}},t}())||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/IsoAddLand.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IsoAddLandItem.ts"],(function(t){"use strict";var n,e,i,s,o,a,d,r,l,c,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,d=t.Prefab,r=t.Node,l=t.instantiate,c=t.Component},function(t){h=t.IsoAddLandItem}],execute:function(){var u,I,f,p,L,m,A;o._RF.push({},"5fbe4sYTBFHPJaHVKX6Rlve","IsoAddLand",void 0);var v=a.ccclass,b=a.property;t("IsoAddLand",(u=v("IsoAddLand"),I=b(d),f=b(r),u((m=n((L=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o))||this,i(n,"IsoAddLandItemPrefab",m,s(n)),i(n,"Content",A,s(n)),n.isoAddLandItems=[],n.json=void 0,n.fakeData='{"Lands":[{"size":0,"season":"spring","skin":0},{"size":2,"season":"spring","skin":0}]}',n.isoFarmManager=void 0,n.onHide=void 0,n}e(n,t);var o=n.prototype;return o.Show=function(t,n){this.node.active=!0,this.isoFarmManager=t,this.onHide=n,this.InitLand()},o.InitLand=function(){this.DiableAllItem(),this.json=JSON.parse(this.fakeData);for(var t=0;t<this.json.Lands.length;t++){this.GetIsoAddLandItemPrefab(t).Init(this.json.Lands[t],this)}},o.GetIsoAddLandItemPrefab=function(t){var n;t<this.isoAddLandItems.length?n=this.isoAddLandItems[t]:(n=l(this.IsoAddLandItemPrefab).getComponent(h),this.isoAddLandItems.push(n));return n.node.active=!0,n.node.setParent(this.Content),n},o.DiableAllItem=function(){for(var t=0;t<this.isoAddLandItems.length;t++)this.isoAddLandItems[t].node.active=!1},o.OnCloseClick=function(){null!=this.onHide&&(this.onHide(),this.onHide=null,this.isoFarmManager.HideisoAddLand())},o.Hide=function(){this.node.active=!1},n}(c)).prototype,"IsoAddLandItemPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=n(L.prototype,"Content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=L))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/IsoAddLandItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,o,r,a,s,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Label,d=e.Component}],execute:function(){var c,l,u,p,L;r._RF.push({},"71a9fH4mWNAM7799kHGgwCE","IsoAddLandItem",void 0);var f=a.ccclass,h=a.property;e("IsoAddLandItem",(c=f("IsoAddLandItem"),l=h(s),c((L=t((p=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"SizeLabel",L,o(t)),t.json=void 0,t.isoAddLand=void 0,t}i(t,e);var r=t.prototype;return r.Init=function(e,t){this.json=e,this.isoAddLand=t,this.SizeLabel.string=e.size.toString()},r.onClick=function(){this.isoAddLand.isoFarmManager.AddLand(this.json)},t}(d)).prototype,"SizeLabel",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=p))||u));r._RF.pop()}}}));

System.register("chunks:///_virtual/IsoAddLandItemTouch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIItemPlantNew.ts","./IsoPlantItem.ts"],(function(t){"use strict";var n,e,o,s,i,T,h;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,s=t.Node,i=t.Component},function(t){T=t.UIItemPlantNew},function(t){h=t.IsoPlantItem}],execute:function(){var a;e._RF.push({},"3d108GkrcZOQKeB4vwPs5h5","IsoAddLandItemTouch",void 0);var c=o.ccclass;o.property,t("IsoAddLandItemTouch",c("IsoAddLandItemTouch")(a=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(n=t.call.apply(t,[this].concat(o))||this).isoPlantItem=void 0,n}n(e,t);var o=e.prototype;return o.onLoad=function(){this.isoPlantItem=this.node.parent.getComponent(h),null==this.isoPlantItem&&(this.isoPlantItem=this.node.parent.parent.getComponent(T)),this.node.on(s.EventType.TOUCH_START,this.TOUCH_START,this),this.node.on(s.EventType.TOUCH_END,this.TOUCH_END,this),this.node.on(s.EventType.TOUCH_CANCEL,this.TOUCH_END,this),this.node.on(s.EventType.TOUCH_MOVE,this.TOUCH_MOVE,this)},o.TOUCH_START=function(t,n){this.isoPlantItem.TOUCH_START(t,n)},o.TOUCH_MOVE=function(t,n){this.isoPlantItem.TOUCH_MOVE(t,n)},o.TOUCH_END=function(t,n){this.isoPlantItem.TOUCH_END(t,n)},o.onDestroy=function(){this.node.off(s.EventType.TOUCH_START,this.TOUCH_START,this),this.node.off(s.EventType.TOUCH_END,this.TOUCH_END,this),this.node.off(s.EventType.TOUCH_CANCEL,this.TOUCH_END,this),this.node.off(s.EventType.TOUCH_MOVE,this.TOUCH_MOVE,this)},e}(i))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/IsoAddPlant.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IsoAddPlantItem.ts"],(function(t){"use strict";var e,n,i,o,a,s,l,r,d,c,u,I,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,l=t.Prefab,r=t.Node,d=t.Widget,c=t.Sprite,u=t.instantiate,I=t.Component},function(t){h=t.IsoAddPlantItem}],execute:function(){var f,P,m,p,g,b,v,A,y,w,D;a._RF.push({},"1b729K6uTtGoprlMe+1mWR0","IsoAddPlant",void 0);var j=s.ccclass,C=s.property;t("IsoAddPlant",(f=j("IsoAddPlant"),P=C(l),m=C(r),p=C(d),g=C(c),f((A=e((v=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(e,"IsoAddPlantItemPrefab",A,o(e)),i(e,"Content",y,o(e)),i(e,"widget",w,o(e)),i(e,"DragIcon",D,o(e)),e.isoAddPlantItems=[],e.json=null,e.fakeData='{"Plants":[{"id":"4_1"},{"id":"30_1"}]}',e.isoFarmManager=void 0,e}n(e,t);var a=e.prototype;return a.Show=function(t){null==this.json&&(this.json=JSON.parse(this.fakeData)),this.node.active=!0,this.isoFarmManager=t,this.InitPlantItem(),this.DragIcon.node.active=!1,this.MoveIn()},a.InitPlantItem=function(){this.DiableAllItem();for(var t=0;t<this.json.Plants.length;t++){this.GetIsoAddPlantItemPrefab(t).Init(this.json.Plants[t],this,t)}},a.GetIsoAddPlantItemPrefab=function(t){var e;t<this.isoAddPlantItems.length?e=this.isoAddPlantItems[t]:(e=u(this.IsoAddPlantItemPrefab).getComponent(h),this.isoAddPlantItems.push(e));return e.node.active=!0,e.node.setParent(this.Content),e},a.DiableAllItem=function(){for(var t=0;t<this.isoAddPlantItems.length;t++)this.isoAddPlantItems[t].node.active=!1},a.removeItem=function(t){this.json.Plants.splice(t,1)},a.AddItem=function(t){this.json.Plants.push(t),this.InitPlantItem()},a.OnCloseClick=function(){this.isoFarmManager.OnEditPlantClick()},a.Hide=function(){this.node.active=!1},a.MoveOut=function(t){void 0===t&&(t=-400),this.widget.left=t},a.MoveIn=function(){this.widget.left=0},e}(I)).prototype,"IsoAddPlantItemPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(v.prototype,"Content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(v.prototype,"widget",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(v.prototype,"DragIcon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=v))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/IsoAddPlantItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts"],(function(t){"use strict";var i,o,s,n,e,a,h,r,d,c,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){e=t.cclegacy,a=t._decorator,h=t.Sprite,r=t.Node,d=t.Vec3,c=t.Component},function(t){l=t.ResourcesManager}],execute:function(){var T,u,P,v,I;e._RF.push({},"8bc32G/w39G5bFwfVw3Dr1F","IsoAddPlantItem",void 0);var D=a.ccclass,g=a.property;t("IsoAddPlantItem",(T=D("IsoAddPlantItem"),u=g(h),T((I=i((v=function(t){function i(){for(var i,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return i=t.call.apply(t,[this].concat(e))||this,s(i,"Icon",I,n(i)),i.json=void 0,i.isoAddPlant=void 0,i.DoneLoading=!1,i.isTouchStart=!1,i.isMoving=!1,i.isMoveTo3D=!1,i.currentPos=void 0,i.isoPlantItem=null,i.index=void 0,i}o(i,t);var e=i.prototype;return e.Init=function(t,i,o){var s=this;this.json=t,this.isoAddPlant=i,this.DoneLoading=!1,this.isTouchStart=!1,this.index=o,this.node.setScale(1,1,1);l.Instance.LoadPlant(t.id,(function(t){s.Icon.spriteFrame=t,s.DoneLoading=!0}))},e.onLoad=function(){this.node.on(r.EventType.TOUCH_START,this.TOUCH_START,this),this.node.on(r.EventType.TOUCH_END,this.TOUCH_END,this),this.node.on(r.EventType.TOUCH_CANCEL,this.TOUCH_END,this),this.node.on(r.EventType.TOUCH_MOVE,this.TOUCH_MOVE,this)},e.update=function(t){if(this.isMoving&&this.DoneLoading){var i=new d(0,0,0);d.lerp(i,this.isoAddPlant.DragIcon.node.worldPosition,this.currentPos,15*t),this.isoAddPlant.DragIcon.node.setWorldPosition(this.currentPos)}},e.TOUCH_START=function(t,i){this.DoneLoading&&(this.isTouchStart||(this.isTouchStart=!0,this.isMoving=!0,this.isMoveTo3D=!1,this.isoPlantItem=null,this.isoAddPlant.DragIcon.spriteFrame=this.Icon.spriteFrame,this.isoAddPlant.DragIcon.node.setWorldPosition(this.Icon.node.worldPosition),this.isoAddPlant.DragIcon.node.active=!0,this.currentPos=this.isoAddPlant.DragIcon.node.getWorldPosition(),this.node.setScale(0,0,0)))},e.TOUCH_MOVE=function(t,i){if(this.DoneLoading&&this.isTouchStart&&(this.isMoveTo3D&&null!=this.isoPlantItem&&this.isoPlantItem.TOUCH_MOVE(t,i),!this.isMoveTo3D&&t.getUILocation().x>300&&(this.isoPlantItem=this.isoAddPlant.isoFarmManager.AddIsoPlant(this.json,this.isoAddPlant.DragIcon.node,t,i,this.isoAddPlant),this.isMoving=!1,this.isMoveTo3D=!0,this.isoAddPlant.DragIcon.node.active=!1,this.isoAddPlant.MoveOut(),this.isoAddPlant.removeItem(this.index)),this.isMoving)){var o=t.getUIDelta();this.currentPos.x+=o.x,this.currentPos.y+=o.y}},e.TOUCH_END=function(t,i){this.DoneLoading&&this.isTouchStart&&(this.isMoving=!1,this.isTouchStart=!1,this.isoAddPlant.DragIcon.node.active=!1,this.node.setScale(1,1,1),null!=this.isoPlantItem&&this.isoPlantItem.TOUCH_END(t,i))},e.onDestroy=function(){this.node.off(r.EventType.TOUCH_START,this.TOUCH_START,this),this.node.off(r.EventType.TOUCH_END,this.TOUCH_END,this),this.node.off(r.EventType.TOUCH_CANCEL,this.TOUCH_END,this),this.node.off(r.EventType.TOUCH_MOVE,this.TOUCH_MOVE,this)},i}(c)).prototype,"Icon",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=v))||P));e._RF.pop()}}}));

System.register("chunks:///_virtual/IsoEditControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts"],(function(e){"use strict";var t,i,o,n,r,l,a,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Node,s=e.RichText},function(e){u=e.PopUpBase}],execute:function(){var c,p,b,h,d,N,v,B,f,y,m,g,C,w,z,P,x,T,R;r._RF.push({},"d21a9sNiD9NgLb0NTi7Xivz","IsoEditControl",void 0);var I=l.ccclass,O=l.property;e("IsoEditControl",(c=I("IsoEditControl"),p=O(a),b=O(a),h=O(a),d=O(a),N=O(s),v=O(a),B=O(a),f=O(a),c((g=t((m=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,o(t,"YesBtn",g,n(t)),o(t,"NoBtn",C,n(t)),o(t,"NoBtnBG",w,n(t)),o(t,"RemoveBtn",z,n(t)),o(t,"text",P,n(t)),o(t,"NodeBtn",x,n(t)),o(t,"NodeText",T,n(t)),o(t,"NodeParent",R,n(t)),t.yesCb=void 0,t.noCb=void 0,t.removeCb=void 0,t}i(t,e);var r=t.prototype;return r.Show=function(t,i,o,n,r){e.prototype.OnShow.call(this),this.yesCb=t,this.noCb=i,this.removeCb=o,this.YesBtn.active=null!=t,this.NoBtn.active=null!=i,this.NoBtnBG.active=n,this.RemoveBtn.active=null!=o,null!=r?(this.text.string=r,this.NodeText.active=!0,this.NodeBtn.setParent(this.NodeText),this.NodeBtn.setPosition(0,0,0)):(this.NodeBtn.setParent(this.NodeParent),this.NodeBtn.setPosition(0,0,0),this.NodeText.active=!1)},r.Hide=function(){e.prototype.OnHide.call(this)},r.OnYes=function(){this.yesCb()},r.OnNo=function(){this.noCb()},r.OnRemove=function(){this.removeCb()},t}(u)).prototype,"YesBtn",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(m.prototype,"NoBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(m.prototype,"NoBtnBG",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(m.prototype,"RemoveBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(m.prototype,"text",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(m.prototype,"NodeBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(m.prototype,"NodeText",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(m.prototype,"NodeParent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=m))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/IsoFarmManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./FarmingServicesApi.ts","./ChoppingBG.ts","./ResourcesManager.ts","./SoundController.ts","./UIPopupManager.ts","./UIScreenFram.ts","./UIPopupChooseLand.ts","./UIPopupChoosePlant.ts","./UserModel.ts","./PrefabController.ts","./SimplePool.ts","./Utility.ts","./FarmFerInfo.ts","./FarmFerUI.ts","./IsoEditControl.ts","./IsoFarmMap.ts","./IsoFarmViewController.ts","./IsoLand.ts","./IsoLandSign.ts","./IsoPlantItem.ts","./UIPopupConfirmTool.ts"],(function(n){"use strict";var t,e,r,o,a,i,s,l,u,c,d,h,I,f,p,m,L,v,P,C,g,F,b,S,A,y,w,U,M,E,_,D,T,z,R,B,H,j;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,r=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,i=n._decorator,s=n.Node,l=n.JsonAsset,u=n.UITransform,c=n.Prefab,d=n.SpriteFrame,h=n.resources,I=n.Sprite,f=n.Component},function(n){p=n.ConfigApi},function(n){m=n.FarmingServicesApi},function(n){L=n.ChoppingBG},function(n){v=n.ResourcesManager},function(n){P=n.SoundController,C=n.EnumSound},function(n){g=n.UIPopupManager},function(n){F=n.UIScreenFram},function(n){b=n.UIPopupChooseLand},function(n){S=n.UIPopupChoosePlant},function(n){A=n.UserModel},function(n){y=n.PrefabController,w=n.PrefabEnum},function(n){U=n.SimplePool},function(n){M=n.Utility},function(n){E=n.FarmFerInfo},function(n){_=n.FarmFerUI},function(n){D=n.IsoEditControl},function(n){T=n.IsoFarmMap},function(n){z=n.IsoFarmViewController},function(n){R=n.IsoLand},function(n){B=n.IsoLandSign},function(n){H=n.IsoPlantItem},function(n){j=n.UIPopupConfirmTool}],execute:function(){var O,G,k,N,X,Y,x,J,W,q,V,K,Q,Z,$,nn,tn,en,rn,on,an,sn,ln,un,cn,dn,hn,In,fn,pn,mn,Ln,vn,Pn,Cn,gn,Fn,bn,Sn,An,yn;a._RF.push({},"b1b22ejM85PsY0fJfUNcquc","IsoFarmManager",void 0);var wn=i.ccclass,Un=i.property;n("IsoFarmManager",(O=wn("IsoFarmManager"),G=Un(z),k=Un(s),N=Un(s),X=Un(s),Y=Un(l),x=Un(L),J=Un(u),W=Un(s),q=Un(c),V=Un(c),K=Un(c),Q=Un(d),Z=Un(s),$=Un(s),nn=Un(s),tn=Un(s),en=Un(s),rn=Un(s),on=Un(s),O((ln=t((sn=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return t=n.call.apply(n,[this].concat(a))||this,r(t,"isoFarmViewController",ln,o(t)),r(t,"LandParent",un,o(t)),r(t,"AncorParent",cn,o(t)),r(t,"MaterialParent",dn,o(t)),r(t,"LandSizeConfig",hn,o(t)),r(t,"choppingBG",In,o(t)),r(t,"gameCanvas",fn,o(t)),r(t,"Camera3d",pn,o(t)),r(t,"IsoLandSign",mn,o(t)),r(t,"IsoPlantItem",Ln,o(t)),t.isEditPlant=!1,r(t,"IsoDecor",vn,o(t)),r(t,"Decor",Pn,o(t)),r(t,"BtnHarvestAll",Cn,o(t)),r(t,"BtnCollectMaterial",gn,o(t)),r(t,"UI2D",Fn,o(t)),r(t,"UI3D",bn,o(t)),r(t,"UIFarm",Sn,o(t)),r(t,"UIScreenFramFarm",An,o(t)),r(t,"Fx_Water_All",yn,o(t)),t.uiPopupConfirmTool=void 0,t.uiPopupChooseLand=void 0,t.uiPopupChoosePlant=void 0,t.isoEditControl=void 0,t.isoFarmMap=void 0,t.farmFerUI=void 0,t.farmFerInfo=void 0,t._UIScreenFram=void 0,t.farmArray=void 0,t.json=void 0,t.prefabPool=new Map,t.currentIsoLand=null,t.currentX=4,t.currentY=4,t.totalHarvestable=void 0,t.totalMaterial=void 0,t.newPlantAdd=[],t}e(t,n);var a=t.prototype;return a.onLoad=function(){this.uiPopupChooseLand=this.UI2D.getComponentInChildren(b),this.uiPopupChoosePlant=this.UI3D.getComponentInChildren(S),this.isoEditControl=this.UI2D.getComponentInChildren(D),this.isoFarmMap=this.UI2D.getComponentInChildren(T),this.farmFerUI=this.UI2D.getComponentInChildren(_),this.farmFerInfo=this.UI2D.getComponentInChildren(E),this._UIScreenFram=this.UIScreenFramFarm.getComponent(F),this.uiPopupConfirmTool=this.UI2D.getComponentInChildren(j)},a.onEnable=function(){this.choppingBG.StartCloudMove(),this.LoadLandData()},a.onDisable=function(){this.choppingBG.StopCloudMove()},a.LoadLandData=function(){var n=this;m.F3_2_RequestMyLand((function(t){var e=JSON.parse(t);if(0==e.status){n.currentX=4,n.currentY=4;var r=!1;n.ResetFarmArray(e.data.lands);var o=-1;null!=e.data.additionalInfo.viewing&&(o=e.data.additionalInfo.viewing);for(var a=n.json,i=0;i<a.length;i++){var s=a[i];2==s.status&&(null==s.x||null==s.y?m.F3_2_RemoveLand(s._id,(function(n){}),null,!1):(n.farmArray[s.x][s.y]=s,s.landId==o&&(n.currentX=s.x,n.currentY=s.y,r=!0)))}if(!r)for(var l=0;l<a.length;l++){var u=a[l];if(2==u.status&&null!=u.x&&null!=u.y){n.currentX=u.x,n.currentY=u.y;break}}n.LoadLand(!0,!0)}else g.Instance.ShowToast("Error",v.Instance.GetErrorMessage(e.status),0)}),null)},a.ResetFarmArray=function(n){this.newPlantAdd=[],this.json=n,this.farmArray=[];for(var t=0;t<10;t++){for(var e=[],r=0;r<10;r++)e.push(null);this.farmArray.push(e)}},a.InitFarmArray=function(n){for(var t=0;t<n.length;t++){var e=n[t];2==e.status&&(null==e.x||null==e.y?m.F3_2_RemoveLand(e._id,(function(n){}),null,!1):this.farmArray[e.x][e.y]=e)}},a.LoadLand=function(n,t){var e=this,r=this.farmArray[this.currentX][this.currentY];null!=r?m.F3_2_DetailLand(r.landId,(function(t){var r=JSON.parse(t);0==r.status?e.InitIsoLand(r.data,!0,n):g.Instance.ShowToast("Error",v.Instance.GetErrorMessage(r.status),0)}),null,t):this.InitIsoLand(null,!0,n)},a.InitIsoLand=function(n,t,e,r){var o=this;void 0===r&&(r=!1),this.currentIsoLand&&this.currentIsoLand.ReleaseAllPrefab(),U.releaseAll(this.AncorParent),y.Instance.ReturnAllPrefab(w.MaterialDrop);var a=function(a){o.currentIsoLand=a;var i=a.node;i.setParent(o.AncorParent),i.setScale(1,1,1),i.setPosition(0,0,0),a.Init(o,n,t,o.currentX,o.currentY,r),e&&o.isoFarmViewController.ResetCamera(),null!=n&&null!=o.farmArray[o.currentX][o.currentY]&&(o.farmArray[o.currentX][o.currentY].hp=n.hp)},i="isofarm/prefab/empty";if(null!=n){var s=n.seasonType;"circle"==s&&(s=A.SeasonData.season),i="isofarm/prefab/"+M.GetLandSize(n.landRef.size).toString()+s+"0"}if(this.prefabPool.has(i)){var l=U.get(R,this.prefabPool.get(i),this.AncorParent);a(l)}else h.load(i,c,(function(n,t){o.prefabPool.set(i,t);var e=U.get(R,t,o.AncorParent);a(e)}))},a.GetDecor=function(n,t){var e=U.getNode(this.IsoDecor,t);return e.active=!0,e.setPosition(0,0,0),e.setScale(1,1,1),e.getComponentInChildren(I).spriteFrame=this.Decor[n-28],e},a.AddIsoPlant=function(n,t,e,r,o,a){var i=U.get(H,this.IsoPlantItem,t);return i.node.setPosition(0,0,0),i.node.setParent(this.currentIsoLand.IsoPlantItemParent,!0),i.node.setScale(1,1,1),i.Init(n,this.currentIsoLand,o,!0,e,a),i},a.InitIsoPlant=function(n,t){var e=U.get(H,this.IsoPlantItem,t.IsoPlantItemParent);return e.node.setScale(1,1,1),e.Init(n,t,this.uiPopupChoosePlant,!1,null,null),e},a.GetIsoLandSign=function(n){return U.get(B,this.IsoLandSign,n)},a.MoveLandDelta=function(n,t){this.currentX+=n,this.currentY+=t,this.LoadLand(!0,!0)},a.MoveLand=function(n,t){this.currentX=n,this.currentY=t},a.AddLand=function(n){this.InitIsoLand(n,!1,!0)},a.OnAddLandClick=function(){var n=this;this.ShowisoAddLand((function(){n.HideIsoEditControl(),n.InitIsoLand(null,!0,!0)}))&&(this.currentIsoLand.BtnMoveParent.active=!1,this.ShowIsoEditControl((function(){n.OnConfirmAddLand()}),null,(function(){n.InitIsoLand(null,!1,!0)}),!1,null))},a.OnConfirmAddLand=function(){var n=this;null==this.currentIsoLand.json?this.currentIsoLand.BtnMoveParent.active=!0:m.F3_2_PlaceLand(this.currentIsoLand.json._id,this.currentX,this.currentY,(function(t){var e=JSON.parse(t);0==e.status?(n.HideisoAddLand(),n.HideIsoEditControl(),n.ResetFarmArray(e.data),n.InitFarmArray(n.json),n.LoadLand(!1,!1)):g.Instance.ShowToast("Error",v.Instance.GetErrorMessage(e.status),0)}),null)},a.RemoveLand=function(n,t){var e=this;m.F3_2_RemoveLand(n._id,(function(n){var r=JSON.parse(n);0==r.status?(t(),e.ResetFarmArray(r.data),e.InitFarmArray(e.json)):g.Instance.ShowToast("Error",v.Instance.GetErrorMessage(r.status),0)}),null)},a.OnEditPlantClick=function(){this.isEditPlant=!this.isEditPlant,this.isEditPlant?(this.ShowisoAddPlant(!1),this.currentIsoLand&&(this.currentIsoLand.BtnMoveParent.active=!1,this.currentIsoLand.EnterEditMode(!0))):(this.HideisoAddPlant(),this.currentIsoLand&&(this.currentIsoLand.BtnMoveParent.active=!0,this.currentIsoLand.curPlantEdit&&this.currentIsoLand.curPlantEdit.CancelEdit(),this.currentIsoLand.EnterEditMode(!1)))},a.OnBtnHarvestAllClick=function(){var n=this;null!=this.currentIsoLand&&m.F3_2_RequestHarvestAll(this.currentIsoLand.json.landId,(function(t){var e=JSON.parse(t);0==e.status?(n._UIScreenFram.TweenLE(e.data.amount,!0),n.InitIsoLand(e.data,!0,!1)):g.Instance.ShowToast("Error",v.Instance.GetErrorMessage(e.status),0)}),null)},a.OnBtnCollectMaterialClick=function(){var n=this;null!=this.currentIsoLand&&m.F3_2_RequestCollectMaterial(this.currentIsoLand.json._id,(function(t){var e=JSON.parse(t);0==e.status?n.InitIsoLand(e.data,!0,!1):g.Instance.ShowToast("Error",v.Instance.GetErrorMessage(e.status),0)}),null)},a.OnBtnCrowAllClick=function(){var n=this,t=0;if(null!=this.currentIsoLand.json){for(var e=0,r=this.currentIsoLand.isoPlantItems,o=0;o<r.length;o++)r[o].NotiCrow.node.active&&e++;t=50*e*p.CROWALL[this.currentIsoLand.json.landRef.size],t=this.CaculateLeCostToolBySkill(t)}this.ShowUIPopupConfirmTool(t,4,(function(){n.ApplyToolAll(4,t)}))},a.OnBtnWaterAllClick=function(){var n=this,t=0;if(null!=this.currentIsoLand.json){for(var e=0,r=this.currentIsoLand.isoPlantItems,o=0;o<r.length;o++)r[o].NotiWater.active&&e++;t=20*e*p.WATERALL[this.currentIsoLand.json.landRef.size],t=this.CaculateLeCostToolBySkill(t)}this.ShowUIPopupConfirmTool(t,3,(function(){n.ApplyToolAll(3,t)}))},a.CaculateLeCostToolBySkill=function(n){if(A.UserSkillTreeData)for(var t=A.UserSkillTreeData,e=0;e<t.length;e++)if("MASS_CATER"==t[e].type){var r=v.Instance.skilltree_config.json.MASS_CATER.config[t[e].currentLevel];return n-=Math.floor(n*(r/100))}return n},a.ApplyToolAll=function(n,t){var e=this;null!=this.currentIsoLand&&m.F3_2_RequestApplyToolAll(this.currentIsoLand.json.landId,n,(function(r){var o=JSON.parse(r);0==o.status?(3==n&&(M.PlayParticle(e.Fx_Water_All),P.Instance.PlaySound(C.UI_SFX_Watering_All)),e._UIScreenFram.TweenLE(-t,!0),e.InitIsoLand(o.data,!0,!1)):g.Instance.ShowToast("Error",v.Instance.GetErrorMessage(o.status),0)}),null)},a.ShowFarmFerInfo=function(n){this.farmFerInfo.Show(n)},a.ShowFarmFerUI=function(n){var t=this;this.farmFerUI.Show(this,n,(function(n){t.InitIsoLand(n,!0,!1,!0)}))},a.HideFarmFerUI=function(){this.farmFerUI.Hide()},a.ShowIsoEditControl=function(n,t,e,r,o){this.isoEditControl.Show(n,t,e,r,o)},a.HideIsoEditControl=function(){this.isoEditControl.Hide()},a.ShowisoAddLand=function(n){return 0!=this.uiPopupChooseLand.node.active||(this.DiableAllUI(),this.uiPopupChooseLand.Show(this,n,this.json),!0)},a.HideisoAddLand=function(){this.uiPopupChooseLand.OnHide(),this.UIFarm.active=!0},a.ShowisoAddPlant=function(n){n||this.DiableAllUI(),this.uiPopupChoosePlant.Show(this,n)},a.HideisoAddPlant=function(){var n=this;this.uiPopupChoosePlant.Hide((function(){n.UIFarm.active=!0}))},a.ShowisoFarmMap=function(){this.DiableAllUI(),this.LandParent.active=!1,this.isoFarmMap.Show(this,this.json)},a.HideisoFarmMap=function(n){this.isoFarmMap.Hide(),this.UIFarm.active=!0,this.LandParent.active=!0,n?this.LoadLand(!0,!0):this.LoadLand(!1,!1)},a.ShowUIPopupConfirmTool=function(n,t,e){this.uiPopupConfirmTool.Show(n,t,e)},a.DiableAllUI=function(){this.UIFarm.active=!1,this.UI2D.children.forEach((function(n){n.active=!1})),this.UI3D.children.forEach((function(n){n.active=!1}))},t}(f)).prototype,"isoFarmViewController",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),un=t(sn.prototype,"LandParent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cn=t(sn.prototype,"AncorParent",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dn=t(sn.prototype,"MaterialParent",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hn=t(sn.prototype,"LandSizeConfig",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),In=t(sn.prototype,"choppingBG",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fn=t(sn.prototype,"gameCanvas",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pn=t(sn.prototype,"Camera3d",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mn=t(sn.prototype,"IsoLandSign",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ln=t(sn.prototype,"IsoPlantItem",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vn=t(sn.prototype,"IsoDecor",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pn=t(sn.prototype,"Decor",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Cn=t(sn.prototype,"BtnHarvestAll",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gn=t(sn.prototype,"BtnCollectMaterial",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fn=t(sn.prototype,"UI2D",[nn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bn=t(sn.prototype,"UI3D",[tn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sn=t(sn.prototype,"UIFarm",[en],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),An=t(sn.prototype,"UIScreenFramFarm",[rn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yn=t(sn.prototype,"Fx_Water_All",[on],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),an=sn))||an));a._RF.pop()}}}));

System.register("chunks:///_virtual/IsoFarmMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts","./UserModel.ts","./IsoMapLandEmpty.ts","./IsoMapLandItem.ts","./MapLandInfo.ts"],(function(e){"use strict";var t,n,a,i,o,r,s,l,p,c,u,d,m,f,h,I,L,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Node,l=e.Prefab,p=e.SpriteFrame,c=e.Sprite,u=e.instantiate,d=e.v3,m=e.Component},function(e){f=e.ResourcesManager},function(e){h=e.UserModel},function(e){I=e.IsoMapLandEmpty},function(e){L=e.IsoMapLandItem},function(e){M=e.MapLandInfo}],execute:function(){var b,v,y,g,P,S,F,D,E,w,z,N,j,H,R,B,C,G,_;o._RF.push({},"16608L82npGGLz3q/LTO+XN","IsoFarmMap",void 0);var k=r.ccclass,x=r.property;e("IsoFarmMap",(b=k("IsoFarmMap"),v=x(s),y=x(l),g=x(s),P=x(l),S=x(p),F=x(M),D=x(s),E=x(c),b((N=t((z=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,a(t,"NodeParent",N,i(t)),a(t,"isoMapLandItemPrefab",j,i(t)),a(t,"EmptyParent",H,i(t)),a(t,"isoMapLandEmptyPrefab",R,i(t)),a(t,"season",B,i(t)),a(t,"mapLandInfo",C,i(t)),a(t,"EmptyNode",G,i(t)),a(t,"seasonBaner",_,i(t)),t.isoMapLandItems=[],t.isoFarmManager=void 0,t.jData=void 0,t.currentLandSelect=void 0,t.isInit=!1,t}n(t,e);var o=t.prototype;return o.Show=function(e,t){var n=this;if(!this.isInit){this.isInit=!0;for(var a=0;a<10;a++)for(var i=0;i<10;i++){var o=u(this.isoMapLandEmptyPrefab);o.setParent(this.EmptyParent),o.getComponent(I).Init(this,a,i)}}this.currentLandSelect=null,this.isoFarmManager=e,this.jData=t,this.InitItem(),this.mapLandInfo.node.active=!1,this.DeSelect();f.Instance.LoadSeason(h.SeasonData.season+"_banner",(function(e){n.seasonBaner.spriteFrame=e})),this.node.active=!0},o.indexToPos=function(e,t){return d(90*(e-t),-45*(e+t),0)},o.Hide=function(){this.node.active=!1},o.OnHideClick=function(){this.isoFarmManager.HideisoFarmMap(!1)},o.InitItem=function(){this.DiableAllItem();for(var e=this.jData,t=0;t<e.length;t++){if(2==e[t].status)this.GetItemPrefab(t).Init(e[t],this)}this.isoMapLandItems.sort((function(e,t){return e.j==t.j?t.i-e.i:t.j-e.j}));for(var n=0;n<this.isoMapLandItems.length;n++)this.isoMapLandItems[n].node.setSiblingIndex(0)},o.DiableAllItem=function(){for(var e=0;e<this.isoMapLandItems.length;e++)this.isoMapLandItems[e].node.active=!1},o.GetItemPrefab=function(e){var t;e<this.isoMapLandItems.length?t=this.isoMapLandItems[e]:(t=u(this.isoMapLandItemPrefab).getComponent(L),this.isoMapLandItems.push(t));return t.node.active=!0,t.node.setParent(this.NodeParent),t},o.RemoveLand=function(e,t){this.isoFarmManager.RemoveLand(e,(function(){t.active=!1}))},o.ShowMapLandInfo=function(e,t,n,a,i){var o=this;this.DeSelect(),t?(this.currentLandSelect=e,this.currentLandSelect.Select(!0)):(this.EmptyNode.setPosition(n),this.EmptyNode.active=!0),this.mapLandInfo.Init(t,n,a,i,(function(e,t){o.isoFarmManager.MoveLand(e,t),o.isoFarmManager.HideisoFarmMap(!0)}),this)},o.HideMapLandInfo=function(){this.mapLandInfo.Hide()},o.DeSelect=function(){this.currentLandSelect&&(this.currentLandSelect.Select(!1),this.currentLandSelect=null),this.EmptyNode.active=!1},o.OnBGClick=function(){this.DeSelect(),this.HideMapLandInfo()},t}(m)).prototype,"NodeParent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(z.prototype,"isoMapLandItemPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(z.prototype,"EmptyParent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(z.prototype,"isoMapLandEmptyPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(z.prototype,"season",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(z.prototype,"mapLandInfo",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(z.prototype,"EmptyNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(z.prototype,"seasonBaner",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=z))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/IsoFarmViewController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts"],(function(o){"use strict";var t,i,s,e,a,n,r,h,m,u,c,l,p,D,T,y,g,Z,f;return{setters:[function(o){t=o.applyDecoratedDescriptor,i=o.inheritsLoose,s=o.initializerDefineProperty,e=o.assertThisInitialized},function(o){a=o.cclegacy,n=o._decorator,r=o.UITransform,h=o.Camera,m=o.Node,u=o.CCFloat,c=o.v3,l=o.systemEvent,p=o.SystemEvent,D=o.Vec3,T=o.math,y=o.Vec2,g=o.v2,Z=o.Component},function(o){f=o.Utility}],execute:function(){var M,v,w,E,C,x,d,P,U,I,S,O,_,b,A,L,H,z,V;a._RF.push({},"264a7+sJaVMqo2+LT0mKGeQ","IsoFarmViewController",void 0);var N=n.ccclass,R=n.property;o("IsoFarmViewController",(M=N("IsoFarmViewController"),v=R(r),w=R(h),E=R(m),C=R(u),x=R(u),d=R(u),P=R(u),U=R(u),M((O=t((S=function(o){function t(){for(var t,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return t=o.call.apply(o,[this].concat(a))||this,s(t,"gameCanvas",O,e(t)),s(t,"Camera",_,e(t)),s(t,"Zoom",b,e(t)),s(t,"MaxZoom",A,e(t)),s(t,"MaxMinZoom",L,e(t)),s(t,"MinMinZoom",H,e(t)),s(t,"DefaultZoom",z,e(t)),s(t,"ZoomSpeed",V,e(t)),t.MinZoom=void 0,t.TargetZoom=1.5,t.ismouseDown0=!1,t.ismouseDown1=!1,t.mouseDownPos0=void 0,t.mouseDownPos1=void 0,t.mouscePosDistance=0,t.cameraTargetpos=c(0,0,100),t.cameraZ=void 0,t.TouchIDArray=[],t.touch0ID=-1,t.touch1ID=-1,t.maxx=void 0,t.minx=void 0,t.maxy=void 0,t.miny=void 0,t.isPause=!0,t.isDoneInit=!1,t}i(t,o);var a=t.prototype;return a.onLoad=function(){this.cameraZ=this.Camera.node.position.z,l.on(p.EventType.MOUSE_WHEEL,this.onMOUSE_WHEEL,this),l.on(p.EventType.TOUCH_START,this.onMOUSE_DOWN,this),l.on(p.EventType.TOUCH_END,this.onMOUSE_UP,this),l.on(p.EventType.TOUCH_CANCEL,this.onMOUSE_UP,this),l.on(p.EventType.TOUCH_MOVE,this.onMOUSE_MOVE,this),f.addResizeCallBack(this.node,function(){this.CaculateZoomAndBound()}.bind(this))},a.start=function(){this.Init(3300,-3300,1650,-1650)},a.Init=function(o,t,i,s){this.maxx=o,this.minx=t,this.maxy=i,this.miny=s,this.TargetZoom=this.DefaultZoom,this.Zoom.setScale(this.DefaultZoom,this.DefaultZoom,1),this.CaculateZoomAndBound(),this.ResetCamera(),this.isDoneInit=!0,this.isPause=!1},a.Pause=function(o){this.isPause=o,o&&(this.TouchIDArray=[],this.ismouseDown0=!1,this.ismouseDown1=!1)},a.update=function(o){if(this.isDoneInit){var t=new D(0,0,0);D.lerp(t,this.Camera.node.position,this.cameraTargetpos,15*o),this.Camera.node.setPosition(t);var i=T.lerp(this.Zoom.scale.x,this.TargetZoom,15*o);this.Zoom.setScale(i,i,1)}},a.onMOUSE_DOWN=function(o,t){if(!(this.isPause||this.TouchIDArray.length>=2)){var i=t.getID();this.TouchIDArray.push(i),1==this.TouchIDArray.length&&(this.ismouseDown0=!0,this.mouseDownPos0=t.getUILocation(),this.touch0ID=i),2==this.TouchIDArray.length&&(this.ismouseDown1=!0,this.mouseDownPos1=t.getUILocation(),this.touch1ID=i),this.ismouseDown1&&this.ismouseDown0&&(this.mouscePosDistance=y.distance(this.mouseDownPos0,this.mouseDownPos1))}},a.onMOUSE_UP=function(o,t){this.isPause||this.TouchIDArray.length<=0||(this.ismouseDown0=!1,this.touch0ID=-1,this.ismouseDown1=!1,this.touch1ID=-1,1==this.TouchIDArray.length&&this.SetCamPos(g(this.cameraTargetpos.x,this.cameraTargetpos.y)),this.TouchIDArray=[])},a.onMOUSE_MOVE=function(o,t){if(this.ismouseDown0)if(this.ismouseDown1){var i=t.getID();i==this.touch0ID&&(this.mouseDownPos0=t.getUILocation()),i==this.touch1ID&&(this.mouseDownPos1=t.getUILocation());var s=y.distance(this.mouseDownPos0,this.mouseDownPos1),e=s-this.mouscePosDistance,a=this.TargetZoom+.01*e;a<this.MinZoom&&(a=this.MinZoom),a>this.MaxZoom&&(a=this.MaxZoom);var n=a/this.TargetZoom;this.TargetZoom=a,this.SetCamPos(g(this.cameraTargetpos.x*n,this.cameraTargetpos.y*n)),this.mouscePosDistance=s}else{var r=t.getUILocation(),h=new y(this.cameraTargetpos.x,this.cameraTargetpos.y);y.subtract(r,r,this.mouseDownPos0);y.multiplyScalar(r,r,-1),y.add(h,h,r),this.SetCamPos(h),this.mouseDownPos0=t.getUILocation()}},a.onMOUSE_WHEEL=function(o){if(!this.isPause){var t=o.getScrollY(),i=this.TargetZoom-(t<0?this.ZoomSpeed:-this.ZoomSpeed);i<this.MinZoom&&(i=this.MinZoom),i>this.MaxZoom&&(i=this.MaxZoom);var s=i/this.TargetZoom;this.TargetZoom=i,this.SetCamPos(g(this.cameraTargetpos.x*s,this.cameraTargetpos.y*s))}},a.SetCamPos=function(o,t){void 0===t&&(t=!1);var i=this.maxx-this.minx,s=this.maxy-this.miny,e=this.TargetZoom-this.MinZoom;if(s*=e,i*=e,s+=this.ismouseDown0||this.ismouseDown1?300:100,i+=this.ismouseDown0||this.ismouseDown1?300:100,o.x>i&&(o.x=i),o.x<-i&&(o.x=-i),o.y>s&&(o.y=s),o.y<-s&&(o.y=-s),t){var a=g(this.cameraTargetpos.x,this.cameraTargetpos.y);return this.cameraTargetpos=new D(o.x,o.y,this.cameraZ),g(this.cameraTargetpos.x-a.x,this.cameraTargetpos.y-a.y)}return this.cameraTargetpos=new D(o.x,o.y,this.cameraZ),o},a.MoveCam=function(o){return this.SetCamPos(g(o.x+this.cameraTargetpos.x,o.y+this.cameraTargetpos.y),!0)},a.ResetCamera=function(){this.SetCamPos(g(0,0)),this.Camera.node.setPosition(this.cameraTargetpos)},a.CaculateZoomAndBound=function(){var o=this.gameCanvas.width/(this.maxx-this.minx),t=this.gameCanvas.height/(this.maxy-this.miny);this.MinZoom=o<t?o:t,this.MinZoom*=.9,this.MinZoom<this.MaxMinZoom&&(this.MinZoom=this.MaxMinZoom),this.MinZoom>this.MinMinZoom&&(this.MinZoom=this.MinMinZoom)},a.onDestroy=function(){f.removeResizeCallBack(this.node),l.off(p.EventType.MOUSE_WHEEL,this.onMOUSE_WHEEL,this),l.off(p.EventType.TOUCH_START,this.onMOUSE_DOWN,this),l.off(p.EventType.TOUCH_END,this.onMOUSE_UP,this),l.off(p.EventType.TOUCH_CANCEL,this.onMOUSE_UP,this),l.off(p.EventType.TOUCH_MOVE,this.onMOUSE_MOVE,this)},a.MaxZoomOut=function(){this.TargetZoom=this.MinZoom,this.cameraTargetpos=new D(0,0,this.cameraZ)},t}(Z)).prototype,"gameCanvas",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(S.prototype,"Camera",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(S.prototype,"Zoom",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(S.prototype,"MaxZoom",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2.5}}),L=t(S.prototype,"MaxMinZoom",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),H=t(S.prototype,"MinMinZoom",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=t(S.prototype,"DefaultZoom",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),V=t(S.prototype,"ZoomSpeed",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),I=S))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/IsoLand.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./SimplePool.ts","./PlantSlot.ts"],(function(t){"use strict";var e,i,n,a,o,l,r,s,h,u,c,P,f,m,v,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,r=t.Node,s=t.Prefab,h=t.TextAsset,u=t.Label,c=t.CCInteger,P=t.v3,f=t.Component},function(t){m=t.ConfigApi},function(t){v=t.SimplePool},function(t){p=t.PlantSlot}],execute:function(){var g,I,d,M,b,S,y,B,z,F,L,C,j,x,w,A,_,D,E,T,k;o._RF.push({},"fcc52SuKOBLj6BneQhkf85J","IsoLand",void 0);var O=l.ccclass,H=l.property;t("IsoLand",(g=O("IsoLand"),I=H(r),d=H(s),M=H(r),b=H(r),S=H(r),y=H(h),B=H(u),z=H(c),F=H(c),g((j=e((C=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,n(e,"BtnMoveParent",j,a(e)),n(e,"PlantSlotItem",x,a(e)),n(e,"PlantSlotItemParent",w,a(e)),n(e,"IsoPlantItemParent",A,a(e)),n(e,"BtnMove",_,a(e)),n(e,"DecorConfig",D,a(e)),n(e,"EmptyLabel",E,a(e)),e.PlantSlot=[],n(e,"size_i",T,a(e)),n(e,"size_j",k,a(e)),e.isoFarmManager=void 0,e.json=void 0,e.isoPlantItems=[],e.curPlantEdit=null,e}i(e,t);var o=e.prototype;return o.Init=function(t,e,i,n,a,o){this.isoFarmManager=t,this.json=e,this.BtnMoveParent.active=i,this.curPlantEdit=null,this.ActiveMoveBtn(n,a),this.DecorConfig?(this.InitPlantSlot(o),this.InitPlants()):this.EmptyLabel.string=m.LOCATIONJ[a]+""+(n+1)},o.InitPlantSlot=function(t){this.PlantSlot=[];for(var e=this.DecorConfig.text.split("\n"),i=0;i<e.length;i++)for(var n=e[i].split(","),a=0;a<n.length;a++){var o=parseInt(n[a]);if(33==o){var l=v.getNode(this.PlantSlotItem,this.PlantSlotItemParent),r=l.getComponent(p);r.Init(!1,a+1,i+1),this.PlantSlot.push(r),l.setPosition(this.indexToPos(r.x,r.y))}else if(34==o){this.isoFarmManager.GetIsoLandSign(this.PlantSlotItemParent).Init(this.json,this,this.indexToPos(a+1,i+1),t)}else o>-1&&32!=o&&this.isoFarmManager.GetDecor(n[a],this.PlantSlotItemParent).setPosition(this.indexToPos(a+1,i+1))}},o.InitPlants=function(){this.isoFarmManager.totalHarvestable=0,this.isoFarmManager.totalMaterial=0,this.isoPlantItems=[];var t=this.json.farms;if(null!=t){for(var e=0;e<t.length;e++){var i=this.isoFarmManager.InitIsoPlant(t[e],this);this.isoPlantItems.push(i),this.isoFarmManager.totalHarvestable+=t[e].totalHarvest,null!=t[e].spawnedMaterials&&(this.isoFarmManager.totalMaterial+=t[e].spawnedMaterials.length)}this.SortPlants(),this.isoFarmManager.BtnHarvestAll.active=this.isoFarmManager.totalHarvestable>0,this.isoFarmManager.BtnCollectMaterial.active=this.isoFarmManager.totalMaterial>0}},o.SortPlants=function(){this.isoPlantItems.sort((function(t,e){return t.j==e.j?e.i-t.i:e.j-t.j}));for(var t=0;t<this.isoPlantItems.length;t++)this.isoPlantItems[t].node.setSiblingIndex(0)},o.EnterEditMode=function(t){for(var e=0;e<this.isoPlantItems.length;e++)this.isoPlantItems[e].EnterEditMode(t)},o.ReleaseAllPrefab=function(){v.releaseAll(this.PlantSlotItemParent),v.releaseAll(this.IsoPlantItemParent)},o.indexToPos=function(t,e){return P(150*(t-e),-75*(t+e),0)},o.snapPlantToGrid=function(t,e,i,n){var a=Math.round(.5*(e/150+i/-75)),o=Math.round(-.5*(e/150-i/-75)),l=!0;a<0&&(a=0,l=!1);var r=this.size_i-1;a>r&&(a=r,l=!1),o<0&&(o=0,l=!1),o>(r=this.size_j-1)&&(o=r,l=!1);for(var s=!1,h=0;h<this.PlantSlot.length;h++){var u=this.PlantSlot[h];if(!(a!=u.x&&a!=u.x+1||o!=u.y&&o!=u.y+1)){(s=this.isSlotOccupied(u.x,u.y,t))&&(a=u.x,o=u.y);break}}n(l,s,s?this.indexToPos(a,o):P(e,i,0),a,o)},o.isSlotOccupied=function(t,e,i){for(var n=!0,a=0;a<this.isoPlantItems.length;a++)if(t==this.isoPlantItems[a].i&&e==this.isoPlantItems[a].j&&this.isoPlantItems[a]!=i){n=!1;break}return n},o.ActiveMoveBtn=function(t,e){for(var i=t,n=e,a=0;a<this.BtnMove.length;a++)this.BtnMove[a].active=!0;i<=0&&(this.BtnMove[0].active=!1),n<=0&&(this.BtnMove[1].active=!1),i>=9&&(this.BtnMove[2].active=!1),n>=9&&(this.BtnMove[3].active=!1)},o.ButtonMoveClick=function(t,e){var i=0,n=0;"up"==e?i=-1:"down"==e?i=1:n="left"==e?1:-1,this.isoFarmManager.MoveLandDelta(i,n)},o.OnAddLandClick=function(){this.isoFarmManager.OnAddLandClick()},e}(f)).prototype,"BtnMoveParent",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(C.prototype,"PlantSlotItem",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(C.prototype,"PlantSlotItemParent",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(C.prototype,"IsoPlantItemParent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(C.prototype,"BtnMove",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=e(C.prototype,"DecorConfig",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(C.prototype,"EmptyLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(C.prototype,"size_i",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(C.prototype,"size_j",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=C))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/IsoLandSign.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./Utility.ts"],(function(e){"use strict";var i,t,n,r,a,l,o,s,c,p,u,f,h,d,g;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Label,s=e.Sprite,c=e.Node,p=e.UIOpacity,u=e.tween,f=e.v3,h=e.Component},function(e){d=e.ConfigApi},function(e){g=e.Utility}],execute:function(){var b,y,F,I,v,L,m,S,z,H,w,O,k,M,N,U,R,j,C,D,P,T,A;a._RF.push({},"2330dpNAjlNIY64F0gmqir4","IsoLandSign",void 0);var x=l.ccclass,_=l.property;e("IsoLandSign",(b=x("IsoLandSign"),y=_(o),F=_(o),I=_(s),v=_(o),L=_(s),m=_(s),S=_(c),z=_(c),H=_(c),w=_(p),b((M=i((k=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return i=e.call.apply(e,[this].concat(a))||this,n(i,"location",M,r(i)),n(i,"LandID",N,r(i)),n(i,"HpIcon",U,r(i)),n(i,"HpLabel",R,r(i)),n(i,"HpFill",j,r(i)),n(i,"FerFill",C,r(i)),n(i,"FerMark",D,r(i)),n(i,"FerMark1",P,r(i)),n(i,"ScaleNode",T,r(i)),n(i,"fadeUIOpacity",A,r(i)),i.isoLand=void 0,i.json=void 0,i}t(i,e);var a=i.prototype;return a.start=function(){for(var e=0;e<this.FerMark.length;e++){var i=350*d.FertilizerLevel[e+1]/d.FertilizerLevel[4];this.FerMark[e].setPosition(i,0,0),this.FerMark1[e].setPosition(i,0,0)}},a.Init=function(e,i,t,n){if(null!=e.y){if(this.node.active=!0,this.json=e,this.isoLand=i,this.node.setPosition(t),this.location.string=d.LOCATIONJ[e.y]+""+(e.x+1),this.LandID.string="#"+e.landId,e.hp<=0&&null!=e.meta.nextTimeRegenHP){this.HpIcon.grayscale=!0,this.HpFill.fillRange=0;var r=Date.parse(e.meta.nextTimeRegenHP.toString())-g.GetTimeNow(),a=Math.floor(r/1e3);a<0&&(a=0),this.HpLabel.string=g.SecondsToTime_ver1(a).toUpperCase()}else{this.HpIcon.grayscale=!1;var l=e.hp/e.landRef.hp;this.HpLabel.string=Math.floor(100*l).toString()+"%",this.HpFill.fillRange=l}this.InitFer()}else this.node.active=!1},a.InitFer=function(){this.FerFill.fillRange=this.json.fertilizerExp/d.FertilizerLevel[4];for(var e=0;e<this.FerMark.length;e++)this.FerMark[e].active=e<this.json.fertilizerLevel},a.OnClick=function(){this.ScaleNode.active?this.OnHideInfo():this.OnShowInfo()},a.OnAddFerClick=function(){this.isoLand.isoFarmManager.ShowFarmFerUI(this.json)},a.OnShowInfo=function(){this.ScaleNode.active=!0,this.ScaleNode.setScale(.5,.5,.5),this.fadeUIOpacity.opacity=0,u(this.fadeUIOpacity).to(.2,{opacity:255}).start(),u(this.ScaleNode).to(.3,{scale:f(1,1,1)},{easing:"backOut"}).start()},a.OnHideInfo=function(){var e=this;u(this.fadeUIOpacity).to(.2,{opacity:0}).start(),u(this.ScaleNode).to(.3,{scale:f(.5,.5,.5)},{easing:"circOut"}).call((function(){e.ScaleNode.active=!1})).start()},i}(h)).prototype,"location",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(k.prototype,"LandID",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(k.prototype,"HpIcon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(k.prototype,"HpLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=i(k.prototype,"HpFill",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(k.prototype,"FerFill",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(k.prototype,"FerMark",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=i(k.prototype,"FerMark1",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=i(k.prototype,"ScaleNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=i(k.prototype,"fadeUIOpacity",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=k))||O));a._RF.pop()}}}));

System.register("chunks:///_virtual/IsoMapLandEmpty.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,o,i,s;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,s=t.Component}],execute:function(){var a;o._RF.push({},"d6ae6i8/s5HIJglN+Mmst9X","IsoMapLandEmpty",void 0);var r=i.ccclass;i.property,t("IsoMapLandEmpty",r("IsoMapLandEmpty")(a=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=t.call.apply(t,[this].concat(i))||this).i=0,n.j=0,n.isoFarmMap=void 0,n}n(o,t);var i=o.prototype;return i.Init=function(t,n,o){this.isoFarmMap=t,this.i=n,this.j=o,this.node.setPosition(t.indexToPos(n,o))},i.OnClick=function(){this.isoFarmMap.ShowMapLandInfo(null,null,this.node.position,this.i,this.j)},o}(s))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/IsoMapLandItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var e,t,o,n,s,a,r,l,h,c,d,p,m;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){s=i.cclegacy,a=i._decorator,r=i.Sprite,l=i.Node,h=i.Label,c=i.sp,d=i.Color,p=i.tween,m=i.Component}],execute:function(){var u,v,f,T,M,b,y,C,H,g,E,I,A,S,w;s._RF.push({},"859026f/wlKEoQ3ta696zqd","IsoMapLandItem",void 0);var _=a.ccclass,L=a.property;i("IsoMapLandItem",(u=_("IsoMapLandItem"),v=L(r),f=L(r),T=L(l),M=L(l),b=L(h),y=L(c.Skeleton),u((g=e((H=function(i){function e(){for(var e,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return e=i.call.apply(i,[this].concat(s))||this,o(e,"Icon",g,n(e)),o(e,"SignView",E,n(e)),o(e,"Move",I,n(e)),o(e,"Content",A,n(e)),o(e,"Size",S,n(e)),o(e,"removeAnim",w,n(e)),e.i=0,e.j=0,e.isoFarmMap=void 0,e.isHold=!1,e.holdTime=0,e.json=void 0,e}t(e,i);var s=e.prototype;return s.Init=function(i,e){var t;switch(this.isoFarmMap=e,this.Size.string=i.landRef.size,this.json=i,this.i=i.x,this.j=i.y,this.node.setPosition(e.indexToPos(this.i,this.j)),this.isHold=!1,this.Select(!1),this.EnterMoveMode(!1),i.seasonType){case"spring":t=e.season[0];break;case"summer":t=e.season[1];break;case"autumn":t=e.season[2];break;case"winter":t=e.season[3];break;default:t=e.season[4]}this.Icon.spriteFrame=t,i.hp<=0?(this.SignView.grayscale=!0,this.Icon.grayscale=!0):(this.SignView.grayscale=!1,this.Icon.grayscale=!1)},s.onLoad=function(){this.node.on(l.EventType.TOUCH_START,this.TOUCH_START,this),this.node.on(l.EventType.TOUCH_END,this.TOUCH_END,this),this.node.on(l.EventType.TOUCH_CANCEL,this.TOUCH_END,this)},s.update=function(i){var e=this;if(this.isHold&&(this.holdTime+=i,!this.removeAnim.node.active&&this.holdTime>=.2&&(this.removeAnim.node.active=!0,this.removeAnim.color=d.WHITE,this.removeAnim.setAnimation(0,"Appear",!1),this.isoFarmMap.HideMapLandInfo()),this.holdTime>=1.2)){this.isHold=!1;p(this.removeAnim).to(.15,{color:{r:255,g:255,b:255,a:0}}).call((function(){e.removeAnim.node.active=!1})).start(),this.EnterMoveMode(!0),this.isoFarmMap.isoFarmManager.ShowIsoEditControl(null,(function(){e.EnterMoveMode(!1),e.isoFarmMap.isoFarmManager.HideIsoEditControl()}),(function(){e.isoFarmMap.isoFarmManager.HideIsoEditControl(),e.isoFarmMap.RemoveLand(e.json,e.node)}),!0,"Remove this Land?<br/>Plants on Land will be remove also.")}},s.EnterMoveMode=function(i){i?(this.Move.active=!0,this.Content.setPosition(0,18,0)):(this.Content.setPosition(0,0,0),this.Move.active=!1)},s.TOUCH_START=function(i,e){this.isHold||(this.isHold=!0,this.holdTime=0)},s.TOUCH_END=function(i,e){var t=this;if(this.isHold)if(this.isHold=!1,this.holdTime>=.2){p(this.removeAnim).to(.15,{color:{r:255,g:255,b:255,a:0}}).call((function(){t.removeAnim.node.active=!1})).start()}else this.isoFarmMap.ShowMapLandInfo(this,this.json,this.node.position,this.i,this.j)},s.onDestroy=function(){this.node.off(l.EventType.TOUCH_START,this.TOUCH_START,this),this.node.off(l.EventType.TOUCH_END,this.TOUCH_END,this),this.node.off(l.EventType.TOUCH_CANCEL,this.TOUCH_END,this)},s.Select=function(i){},e}(m)).prototype,"Icon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(H.prototype,"SignView",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(H.prototype,"Move",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(H.prototype,"Content",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(H.prototype,"Size",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(H.prototype,"removeAnim",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=H))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/IsoPlantItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FarmingServicesApi.ts","./MaterialDropBase.ts","./ResourcesManager.ts","./SoundController.ts","./UIPopupManager.ts","./UserModel.ts","./PrefabController.ts","./SimplePool.ts","./Utility.ts"],(function(t){"use strict";var i,e,n,a,o,s,r,l,d,h,c,u,f,v,p,g,m,S,I,P,w,M,_,E,L,C,T,b,y,F,A;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,r=t.sp,l=t.Material,d=t.Sprite,h=t.SpriteFrame,c=t.Node,u=t.Label,f=t.randomRange,v=t.Layers,p=t.v2,g=t.v3,m=t.Vec3,S=t.Color,I=t.tween,P=t.Component},function(t){w=t.FarmingServicesApi},function(t){M=t.MaterialDropBase},function(t){_=t.ResourcesManager},function(t){E=t.SoundController,L=t.EnumSound},function(t){C=t.UIPopupManager},function(t){T=t.UserModel},function(t){b=t.PrefabController,y=t.PrefabEnum},function(t){F=t.SimplePool},function(t){A=t.Utility}],execute:function(){var J,N,D,U,x,H,G,R,W,k,z,O,j,q,V,B,X,Y,Z,K,Q,$,tt,it,et,nt,at,ot,st,rt,lt;o._RF.push({},"302cdS/J0ZMYo8qGzxss2w0","IsoPlantItem",void 0);var dt=s.ccclass,ht=s.property;t("IsoPlantItem",(J=dt("IsoPlantItem"),N=ht(r.Skeleton),D=ht(l),U=ht(d),x=ht(h),H=ht(h),G=ht(r.Skeleton),R=ht(c),W=ht(u),k=ht(u),z=ht(u),O=ht(u),j=ht(c),q=ht(c),V=ht(d),J((Y=i((X=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,n(i,"Icon",Y,a(i)),n(i,"GrayscaleMaterial",Z,a(i)),n(i,"Moving",K,a(i)),n(i,"MovingError",Q,a(i)),n(i,"MovingOk",$,a(i)),n(i,"RemoveArow",tt,a(i)),n(i,"Content",it,a(i)),i.isoLand=void 0,i.AddLandCb=null,i.i=0,i.j=0,i._i=0,i._j=0,i.nodePos=void 0,i.isMoving=!1,i.isConfirmEdit=!1,i.Targetpos=void 0,i.touchPos=void 0,i.isInGrid=void 0,i.isPosValid=void 0,i.uiPopupChoosePlant=void 0,i.uiItemPlantNew=void 0,i.Jdata=void 0,i.isHold=!1,i.holdTime=0,i.showInfoLeTimer=0,i.offSetSpine=void 0,i.isEditMode=!1,i.materials=[],n(i,"info_ID",et,a(i)),n(i,"info_Fatigue_lv",nt,a(i)),n(i,"info_harvestLabelLE",at,a(i)),n(i,"info_harvestTime",ot,a(i)),n(i,"NotiWater",st,a(i)),n(i,"NotiLE",rt,a(i)),n(i,"NotiCrow",lt,a(i)),i}e(i,t);var o=i.prototype;return o.Init=function(t,i,e,n,a,o){var s=this;this.Jdata=t,this.isoLand=i,this.uiPopupChoosePlant=e,this.uiItemPlantNew=o,this.isHold=!1,this.RemoveArow.node.active=!1,clearTimeout(this.showInfoLeTimer),this.Icon.node.active=!1;var r=this.Jdata.plant,l=function(t,i){t||null!=i&&null!=s.Icon&&(s.Icon.node.active=!0,s.Icon.skeletonData=i,null!=r?null!=r.sunflowerId?s.Icon.setSkin(r.seasonType):s.Icon.setSkin("default"):s.Icon.setSkin(s.Jdata.seasonType),s.Icon.findAnimation("Idle")?s.Icon.setAnimation(0,"Idle",!0):s.Icon.setAnimation(0,"idle",!0))};if(null!=r&&null==r.sunflowerId)if(this.info_ID.string="#"+this.Jdata.plantId,null!=this.Jdata.totalHarvest?this.info_harvestLabelLE.string=this.Jdata.totalHarvest.toString()+" LE":this.info_harvestLabelLE.string="0 LE",1==r.type){var d=this.Jdata.plantData,h=100,c=0;null!=d&&(null!=d.level&&(c=d.level),null!=d.maxFatigue&&null!=d.currentFatigue&&(h=Math.floor(100*d.currentFatigue/d.maxFatigue))),this.info_Fatigue_lv.string=h.toString()+"%   Lv."+c.toString(),this.Icon.node.setScale(1.75,1.75,1),this.offSetSpine=[0,-15,25],A.getStaticSkeletonData("plants_spine/"+r.name,l)}else{this.info_Fatigue_lv.string="";var u=r.iconUrl,f=u.split("/");u=f[f.length-1].split(".")[0],this.Icon.node.setScale(.75,.75,1),u.includes("90")||u.includes("91")?this.offSetSpine=[0,90,127]:u.includes("92")?this.offSetSpine=[0,80,117]:this.offSetSpine=[0,90,127],A.getStaticSkeletonData("plants_spine/"+u,l)}else this.info_ID.string="",this.info_Fatigue_lv.string="",null!=this.Jdata.totalHarvest?this.info_harvestLabelLE.string=this.Jdata.totalHarvest.toString()+" LE":this.info_harvestLabelLE.string="0 LE",1==this.Jdata.plantType?(this.Icon.node.setScale(.5,.5,1),this.offSetSpine=[0,-15,30],A.getStaticSkeletonData("plants_spine/sapling",l)):(this.Icon.node.setScale(.5,.5,1),this.offSetSpine=[0,-30,10],A.getStaticSkeletonData("plants_spine/mama_sunflower",l));this.info_ID.node.active=!1,this.info_harvestLabelLE.node.parent.active=!1,this.info_Fatigue_lv.node.parent.active=!1,n?(this.EnterMoveMode(!0),this.EnterEditMode(!0),this.isMoving=!0,this.isConfirmEdit=!1,this.nodePos=this.node.getPosition(),this.Targetpos=this.node.getPosition(),this.touchPos=a.getUILocation(),this.isoLand.curPlantEdit=this,this.snapToGrid(),this.Icon.customMaterial=null):(this.EnterMoveMode(!1),this.EnterEditMode(!1),this.isMoving=!1,this.isConfirmEdit=!0,this.i=t.x,this.j=t.y,this.node.setPosition(i.indexToPos(this.i,this.j)),this.UpdateStage(this.Jdata),this.ChangePlantSlotState(!0)),this.materials=[],null!=this.Jdata.spawnedMaterials&&this.spawnMaterial(this.Jdata.spawnedMaterials)},o.spawnMaterial=function(t){for(var i=0;i<t.length;i++){var e=t[i].name,n=b.Instance.GetPrefab(y.MaterialDrop);this.materials.push(n);var a=n.getComponent(M),o=this.node.getWorldPosition(),s=this.node.worldScale.x;o.x+=(f(0,1)>.5?f(-200,-100):f(100,200))*s,o.y+=f(-200,200)*s,a.node.setParent(this.isoLand.isoFarmManager.MaterialParent),a.node.setWorldPosition(o),a.Init(e,1.2,1),a.setClaimCallback(null),a.ChangeLayer(v.Enum.UI_3D),a.setReleaseCallback(null),a.StartAnim2()}},o.ChangePlantSlotState=function(t){var i=this,e=this.isoLand.PlantSlot.findIndex((function(t){return t.x==i.i&&t.y==i.j}));e>-1&&this.isoLand.PlantSlot[e].ChangeState(t)},o.UpdateStage=function(t){if(null!=t.hasCrow&&1==t.hasCrow){var i=JSON.stringify(t.plantId),e=parseInt(i.charAt(i.length-1))%2==0;this.NotiCrow.node.active=!0,this.NotiCrow.spriteFrame=e?_.Instance.crow_art[1]:_.Instance.crow_art[0]}else this.NotiCrow.node.active=!1;if(this.Icon.customMaterial=null,this.NotiLE.active=!1,this.HasPause(t)){this.NotiLE.active=t.totalHarvest>0;var n=this.getRemainHarvestSec(t);this.info_harvestTime.string=A.ConvertSecondsToTime_v1(n),n<=0&&(this.Icon.customMaterial=this.GrayscaleMaterial)}else if(null==t.harvestTime)if("new"==t.stage){var a=3600*t.plant.farmConfig.hours;this.info_harvestTime.string=A.ConvertSecondsToTime_v1(a)}else this.info_harvestTime.string="00H : 59M";else{this.NotiLE.active=t.totalHarvest>0;var o=Date.parse(t.harvestTime.toString())-A.GetTimeNow(),s=Math.floor(o/1e3);this.info_harvestTime.string=A.ConvertSecondsToTime_v1(s),s<=0&&(this.Icon.customMaterial=this.GrayscaleMaterial)}null!=t.needWater&&1==t.needWater?this.NotiWater.active=!0:this.NotiWater.active=!1},o.getRemainHarvestSec=function(t){if(null==t)return 0;var i=Date.parse(t.harvestTime.toString()),e=0;if(this.HasPause(t)){var n=A.GetTimeNow();if(null!=t.cancelAt&&"null"!=t.cancelAt)n=Date.parse(t.cancelAt.toString())-864e5;if(null!=t.crowAppearAt&&"null"!=t.crowAppearAt){var a=Date.parse(t.crowAppearAt.toString());a<n&&(n=a)}if(t.pausedTime&&"null"!=t.pausedTime){var o=Date.parse(t.pausedTime.toString());o<n&&(n=o)}e=Math.floor((i-n)/1e3)}else e=Math.floor((i-A.GetTimeNow())/1e3);return e},o.HasPause=function(t){return null!=t&&(null!=t.stage&&("paused"==t.stage||(1==t.hasCrow||(null!=t.cancelAt&&"null"!=t.cancelAt||null!=t.crowAppearAt&&"null"!=t.crowAppearAt))))},o.EnterEditMode=function(t){this.isEditMode=t,this.Content.active=!t},o.EnterMoveMode=function(t,i){void 0===i&&(i=!1),t?(this.Content.active=!1,this.Moving.node.active=!0,this.Icon.node.setPosition(this.offSetSpine[0],this.offSetSpine[2],0),this.node.setSiblingIndex(this.node.parent.children.length-1)):(this.isEditMode||(this.Content.active=!0),this.Moving.node.active=!1,i?(E.Instance.PlaySound(L.UI_SFX_Deploy_Plant),this.ShowEffecPlace()):this.Icon.node.setPosition(this.offSetSpine[0],this.offSetSpine[1],0))},o.ConfirmEdit=function(){var t,i=this;this.isInGrid&&this.isPosValid&&(t=null==this.Jdata.sunflowerId?{plantId:this.Jdata.plantId,landId:this.isoLand.json.landId,x:this._i,y:this._j}:{sunflowerId:this.Jdata.sunflowerId,landId:this.isoLand.json.landId,x:this._i,y:this._j},w.F3_2_PlacePlant(t,(function(t){var e=JSON.parse(t);if(0==e.status){i.i=i._i,i.j=i._j,i.isConfirmEdit=!0,i.EnterMoveMode(!1,!0),i.isoLand.curPlantEdit=null,i.isoLand.isoPlantItems.push(i),i.isoLand.SortPlants(),i.isoLand.isoFarmManager.HideIsoEditControl(),i.uiPopupChoosePlant.MoveIn(),i.uiItemPlantNew.ConfirmAdd();var n=i.Jdata.plant;if(null!=n&&null==n.sunflowerId&&1==n.type){var a=i.Jdata,o=100,s=0;null!=a.level&&(s=a.level),null!=a.maxFatigue&&null!=a.currentFatigue&&(o=Math.floor(100*a.currentFatigue/a.maxFatigue)),i.info_Fatigue_lv.string=o.toString()+"%   Lv."+s.toString()}else i.info_Fatigue_lv.string="";i.Jdata=e.data,i.UpdateStage(i.Jdata),i.ChangePlantSlotState(!0),i.isoLand.isoFarmManager.newPlantAdd.push({land_id:i.isoLand.json._id,isMotherTree:i.isMotherTree(),delta:1}),null!=T.SeasonData&&"rainy"==T.SeasonData.name.toLowerCase()?i.NotiWater.active=!1:i.NotiWater.active=!0}else C.Instance.ShowToast("Error",_.Instance.GetErrorMessage(e.status),0)}),null))},o.isMotherTree=function(){return null!=this.Jdata.plant&&null==this.Jdata.plant.sunflowerId?1!=this.Jdata.plant.type:1!=this.Jdata.plantType},o.CancelEdit=function(){this.isoLand.isoFarmManager.HideIsoEditControl(),this.isoLand.curPlantEdit=null,F.releaseNode(this.node),this.uiPopupChoosePlant.MoveIn(),this.uiItemPlantNew.CancelAdd()},o.update=function(t){var i=this;if(this.isMoving){var e=0,n=0,a=2e3*t,o=this.isoLand.isoFarmManager.gameCanvas.contentSize;if(this.touchPos.x<100&&(e=-a),this.touchPos.x>o.width-100&&(e=a),this.touchPos.y<100&&(n=-a),this.touchPos.y>o.height-100&&(n=a),0!=e||0!=n){var s=this.isoLand.isoFarmManager.isoFarmViewController.MoveCam(p(e,n));this.nodePos=g(this.nodePos.x+s.x/this.node.worldScale.x,this.nodePos.y+s.y/this.node.worldScale.x,0),this.snapToGrid()}var r=new m(0,0,0);m.lerp(r,this.node.position,this.Targetpos,15*t),this.node.setPosition(r)}if(this.isHold&&(this.holdTime+=t,!this.RemoveArow.node.active&&this.holdTime>=.2&&(this.RemoveArow.node.active=!0,this.RemoveArow.color=S.WHITE,this.RemoveArow.setAnimation(0,"Appear",!1)),this.holdTime>=1.2)){this.isHold=!1;I(this.RemoveArow).to(.15,{color:{r:255,g:255,b:255,a:0}}).call((function(){i.RemoveArow.node.active=!1})).start(),this.EnterMoveMode(!0),this.isoLand.isoFarmManager.UIFarm.active=!1,this.isoLand.isoFarmManager.ShowIsoEditControl(null,(function(){i.EnterMoveMode(!1),i.isoLand.isoFarmManager.HideIsoEditControl(),i.uiPopupChoosePlant.node.active||(i.isoLand.isoFarmManager.UIFarm.active=!0)}),(function(){w.RequestDeactive(i.Jdata._id,(function(t){var e=JSON.parse(t);if(0==e.status){i.isoLand.isoFarmManager.newPlantAdd.push({land_id:i.isoLand.json._id,isMotherTree:i.isMotherTree(),delta:-1}),i.isoLand.isoFarmManager.HideIsoEditControl();var n=i.isoLand.isoPlantItems.indexOf(i);n>-1&&i.isoLand.isoPlantItems.splice(n,1),i.uiPopupChoosePlant.node.active?i.isoLand.isoFarmManager.ShowisoAddPlant(!0):i.isoLand.isoFarmManager.UIFarm.active=!0,i.ChangePlantSlotState(!1);for(var a=0;a<i.materials.length;a++)b.Instance.ReturnPrefab(y.MaterialDrop,i.materials[a]);F.releaseNode(i.node)}else C.Instance.ShowToast("Error",_.Instance.GetErrorMessage(e.status),0)}),null)}),!0,"Remove this Plant from Plant?<br/>You will lose all LE in this cycle.")}},o.TOUCH_START=function(t,i){if(this.isConfirmEdit)return this.isHold=!0,void(this.holdTime=0);this.isoLand.curPlantEdit==this&&(this.isMoving||(this.nodePos=this.node.getPosition(),this.Targetpos=this.node.getPosition(),this.touchPos=t.getUILocation(),this.isMoving=!0,this.isoLand.curPlantEdit=this,this.EnterMoveMode(!0)))},o.TOUCH_END=function(t,i){var e=this;if(this.isConfirmEdit){if(this.isHold=!1,this.holdTime>=.2){return void I(this.RemoveArow).to(.15,{color:{r:255,g:255,b:255,a:0}}).call((function(){e.RemoveArow.node.active=!1})).start()}this.info_harvestLabelLE.node.parent.active=!0,""!=this.info_ID.string&&(this.info_ID.node.active=!0),""!=this.info_Fatigue_lv.string&&(this.info_Fatigue_lv.node.parent.active=!0),clearTimeout(this.showInfoLeTimer),this.showInfoLeTimer=setTimeout((function(){e.info_harvestLabelLE.node.parent.active=!1,e.info_ID.node.active=!1,e.info_Fatigue_lv.node.parent.active=!1}),3e3)}this.isMoving&&(this.isMoving=!1,this.node.setPosition(this.Targetpos),this.isInGrid?this.isPosValid?this.isoLand.isoFarmManager.ShowIsoEditControl((function(){e.ConfirmEdit()}),null,(function(){e.CancelEdit()}),!1,null):this.isoLand.isoFarmManager.ShowIsoEditControl(null,null,(function(){e.CancelEdit()}),!1,null):this.CancelEdit())},o.TOUCH_MOVE=function(t,i){if(!this.isConfirmEdit&&this.isMoving){var e=t.getUIDelta().multiplyScalar(1/this.node.worldScale.x);this.nodePos=g(this.nodePos.x+e.x,this.nodePos.y+e.y,0),this.snapToGrid(),this.touchPos=t.getUILocation()}},o.snapToGrid=function(){var t=this;this.isoLand.snapPlantToGrid(this,this.nodePos.x,this.nodePos.y,(function(i,e,n,a,o){t.isInGrid=i,t.isPosValid=e,t._i=a,t._j=o,i?(t.Targetpos=n,t.Moving.spriteFrame=e?t.MovingOk:t.MovingError):(t.Targetpos=t.nodePos,t.Moving.spriteFrame=t.MovingError)}))},o.OnNotiWaterClick=function(){this.ShowEffectWater(),this.requestUseWater()},o.requestUseWater=function(){var t=this;w.RequestApplyTool(this.Jdata._id,3,(function(i){var e=JSON.parse(i);0==e.status?(t.Jdata=e.data,t.UpdateStage(t.Jdata)):(t.UpdateStage(t.Jdata),C.Instance.ShowToast("Error",_.Instance.GetErrorMessage(e.status),0))}),(function(t){}))},o.ShowEffectWater=function(){this.NotiWater.active=!1;var t=b.Instance.GetPrefab(y.Water_single),i=this.node.worldPosition,e=this.node.worldScale.x;return t.setWorldScale(this.node.worldScale),t.setWorldPosition(i.x-165*e,i.y+400*e,i.z),A.PlayAnimation(t),E.Instance.PlaySound(L.UI_fx_Give_water_farm),!0},o.OnCrowClick=function(){var t=this;this.ShowEffectChaseCrow();w.RequestApplyTool(this.Jdata._id,4,(function(i){var e=JSON.parse(i);0==e.status?(t.Jdata=e.data,t.UpdateStage(t.Jdata)):(t.UpdateStage(t.Jdata),C.Instance.ShowToast("Error",_.Instance.GetErrorMessage(e.status),0))}),null)},o.ShowEffectChaseCrow=function(){this.NotiCrow.node.active=!1;var t=b.Instance.GetPrefab(y.ChaseCrow);return t.setWorldScale(this.node.worldScale),t.setWorldPosition(this.NotiCrow.node.worldPosition),A.PlayParticle(t),E.Instance.PlaySound(L.UI_fx_chase_crows),!0},o.OnLEClick=function(){var t=this;this.ShowEffectLE();w.RequestHarvestPlant(this.Jdata._id,(function(i){var e=JSON.parse(i);0==e.status?(t.isoLand.isoFarmManager._UIScreenFram.TweenLE(e.data.amount,!0),t.isoLand.isoFarmManager.InitIsoLand(e.data,!0,!1)):(t.UpdateStage(t.Jdata),C.Instance.ShowToast("Error",_.Instance.GetErrorMessage(e.status),0))}),null)},o.ShowEffectLE=function(){this.NotiLE.active=!1;var t=b.Instance.GetPrefab(y.Harvest);return t.setScale(this.node.worldScale),t.setWorldPosition(this.node.worldPosition),A.PlayParticle(t),E.Instance.PlaySound(L.UI_SFX_Collect_LE),!0},o.ShowEffecPlace=function(){var t=this.Icon.node,i=t.scale.x;I(t).to(.15,{position:g(this.offSetSpine[0],this.offSetSpine[1],0),scale:g(1.3*i,.6*i,1)}).to(.2,{scale:g(i,i,1)}).union().start();var e=b.Instance.GetPrefab(y.PlacePlant);e.setScale(this.node.worldScale),e.setWorldPosition(this.node.worldPosition),A.PlayParticle(e)},o.OnErrorClick=function(){},i}(P)).prototype,"Icon",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=i(X.prototype,"GrayscaleMaterial",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=i(X.prototype,"Moving",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=i(X.prototype,"MovingError",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=i(X.prototype,"MovingOk",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=i(X.prototype,"RemoveArow",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=i(X.prototype,"Content",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=i(X.prototype,"info_ID",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=i(X.prototype,"info_Fatigue_lv",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=i(X.prototype,"info_harvestLabelLE",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=i(X.prototype,"info_harvestTime",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=i(X.prototype,"NotiWater",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=i(X.prototype,"NotiLE",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=i(X.prototype,"NotiCrow",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=X))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/IsoViewController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts"],(function(o){"use strict";var t,i,s,e,n,a,h,r,m,u,c,l,D,p,y,Z,f,M,g;return{setters:[function(o){t=o.applyDecoratedDescriptor,i=o.inheritsLoose,s=o.initializerDefineProperty,e=o.assertThisInitialized},function(o){n=o.cclegacy,a=o._decorator,h=o.UITransform,r=o.Camera,m=o.Node,u=o.CCFloat,c=o.v3,l=o.systemEvent,D=o.SystemEvent,p=o.Vec3,y=o.math,Z=o.Vec2,f=o.v2,M=o.Component},function(o){g=o.Utility}],execute:function(){var T,v,E,w,C,d,P,U,x,I,S,O,_,b,A,L,H,z,V;n._RF.push({},"767d5DAWnNOvZJ7Z3HgNvXD","IsoViewController",void 0);var N=a.ccclass,W=a.property;o("IsoViewController",(T=N("IsoViewController"),v=W(h),E=W(r),w=W(m),C=W(u),d=W(u),P=W(u),U=W(u),x=W(u),T((O=t((S=function(o){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=o.call.apply(o,[this].concat(n))||this,s(t,"gameCanvas",O,e(t)),s(t,"Camera",_,e(t)),s(t,"Zoom",b,e(t)),s(t,"MaxZoom",A,e(t)),s(t,"MaxMinZoom",L,e(t)),s(t,"MinMinZoom",H,e(t)),s(t,"DefaultZoom",z,e(t)),s(t,"ZoomSpeed",V,e(t)),t.MinZoom=void 0,t.TargetZoom=1.5,t.ismouseDown0=!1,t.ismouseDown1=!1,t.mouseDownPos0=void 0,t.mouseDownPos1=void 0,t.mouscePosDistance=0,t.cameraTargetpos=c(0,0,100),t.cameraZ=void 0,t.TouchIDArray=[],t.touch0ID=-1,t.touch1ID=-1,t.maxx=void 0,t.minx=void 0,t.maxy=void 0,t.miny=void 0,t.isPause=!0,t.isDoneInit=!1,t}i(t,o);var n=t.prototype;return n.onLoad=function(){this.cameraZ=this.Camera.node.position.z,l.on(D.EventType.MOUSE_WHEEL,this.onMOUSE_WHEEL,this),l.on(D.EventType.TOUCH_START,this.onMOUSE_DOWN,this),l.on(D.EventType.TOUCH_END,this.onMOUSE_UP,this),l.on(D.EventType.TOUCH_CANCEL,this.onMOUSE_UP,this),l.on(D.EventType.TOUCH_MOVE,this.onMOUSE_MOVE,this),g.addResizeCallBack(this.node,function(){this.CaculateZoomAndBound()}.bind(this))},n.Init=function(o,t,i,s){this.maxx=o,this.minx=t,this.maxy=i,this.miny=s,this.TargetZoom=this.DefaultZoom,this.Zoom.setScale(this.DefaultZoom,this.DefaultZoom,1),this.CaculateZoomAndBound(),this.ResetCamera(),this.isDoneInit=!0,this.isPause=!1},n.Pause=function(o){this.isPause=o,o&&(this.TouchIDArray=[],this.ismouseDown0=!1,this.ismouseDown1=!1)},n.update=function(o){if(this.isDoneInit){var t=new p(0,0,0);p.lerp(t,this.Camera.node.getPosition(),this.cameraTargetpos,15*o),this.Camera.node.setPosition(t);var i=y.lerp(this.Zoom.scale.x,this.TargetZoom,15*o);this.Zoom.setScale(i,i,1)}},n.onMOUSE_DOWN=function(o,t){if(!(this.isPause||this.TouchIDArray.length>=2)){var i=t.getID();this.TouchIDArray.push(i),1==this.TouchIDArray.length&&(this.ismouseDown0=!0,this.mouseDownPos0=t.getUILocation(),this.touch0ID=i),2==this.TouchIDArray.length&&(this.ismouseDown1=!0,this.mouseDownPos1=t.getUILocation(),this.touch1ID=i),this.ismouseDown1&&this.ismouseDown0&&(this.mouscePosDistance=Z.distance(this.mouseDownPos0,this.mouseDownPos1))}},n.onMOUSE_UP=function(o,t){this.isPause||this.TouchIDArray.length<=0||(this.ismouseDown0=!1,this.touch0ID=-1,this.ismouseDown1=!1,this.touch1ID=-1,1==this.TouchIDArray.length&&this.SetCamPos(f(this.cameraTargetpos.x,this.cameraTargetpos.y)),this.TouchIDArray=[])},n.onMOUSE_MOVE=function(o,t){if(this.ismouseDown0)if(this.ismouseDown1){var i=t.getID();i==this.touch0ID&&(this.mouseDownPos0=t.getUILocation()),i==this.touch1ID&&(this.mouseDownPos1=t.getUILocation());var s=Z.distance(this.mouseDownPos0,this.mouseDownPos1),e=s-this.mouscePosDistance,n=this.TargetZoom+.01*e;n<this.MinZoom&&(n=this.MinZoom),n>this.MaxZoom&&(n=this.MaxZoom);var a=n/this.TargetZoom;this.TargetZoom=n,this.SetCamPos(f(this.cameraTargetpos.x*a,this.cameraTargetpos.y*a)),this.mouscePosDistance=s}else{var h=t.getUILocation(),r=new Z(this.cameraTargetpos.x,this.cameraTargetpos.y);Z.subtract(h,h,this.mouseDownPos0);Z.multiplyScalar(h,h,-1),Z.add(r,r,h),this.SetCamPos(r),this.mouseDownPos0=t.getUILocation()}},n.onMOUSE_WHEEL=function(o){if(!this.isPause){var t=o.getScrollY(),i=this.TargetZoom-(t<0?this.ZoomSpeed:-this.ZoomSpeed);i<this.MinZoom&&(i=this.MinZoom),i>this.MaxZoom&&(i=this.MaxZoom);var s=i/this.TargetZoom;this.TargetZoom=i,this.SetCamPos(f(this.cameraTargetpos.x*s,this.cameraTargetpos.y*s))}},n.SetCamPos=function(o){var t=this.maxx-this.minx,i=this.maxy-this.miny,s=this.TargetZoom-this.MinZoom;i*=s,t*=s,i+=this.ismouseDown0||this.ismouseDown1?300:100,t+=this.ismouseDown0||this.ismouseDown1?300:100,o.x>t&&(o.x=t),o.x<-t&&(o.x=-t),o.y>i&&(o.y=i),o.y<-i&&(o.y=-i),this.cameraTargetpos=new p(o.x,o.y,this.cameraZ)},n.ResetCamera=function(){this.SetCamPos(f(0,0)),this.Camera.node.setPosition(this.cameraTargetpos)},n.CaculateZoomAndBound=function(){var o=this.gameCanvas.width/(this.maxx-this.minx),t=this.gameCanvas.height/(this.maxy-this.miny);this.MinZoom=o<t?o:t,this.MinZoom*=.9,this.MinZoom<this.MaxMinZoom&&(this.MinZoom=this.MaxMinZoom),this.MinZoom>this.MinMinZoom&&(this.MinZoom=this.MinMinZoom)},n.onDestroy=function(){g.removeResizeCallBack(this.node),l.off(D.EventType.MOUSE_WHEEL,this.onMOUSE_WHEEL,this),l.off(D.EventType.TOUCH_START,this.onMOUSE_DOWN,this),l.off(D.EventType.TOUCH_END,this.onMOUSE_UP,this),l.off(D.EventType.TOUCH_CANCEL,this.onMOUSE_UP,this),l.off(D.EventType.TOUCH_MOVE,this.onMOUSE_MOVE,this)},t}(M)).prototype,"gameCanvas",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(S.prototype,"Camera",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(S.prototype,"Zoom",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(S.prototype,"MaxZoom",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2.5}}),L=t(S.prototype,"MaxMinZoom",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),H=t(S.prototype,"MinMinZoom",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=t(S.prototype,"DefaultZoom",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),V=t(S.prototype,"ZoomSpeed",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),I=S))||I));n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemShopTool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,r,o,a,l,s,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Sprite,s=t.Label,u=t.CCInteger,p=t.Component}],execute:function(){var c,h,d,b,g,y,f,m,v,z,B,I,S,w,L,C,D;o._RF.push({},"350203GaZNKNp36DNceD6Vn","ItemShopTool",void 0);var T=a.ccclass,_=a.property;t("ItemShopTool",(c=T("ItemShopTool"),h=_(l),d=_(s),b=_(s),g=_(s),y=_(s),f=_(s),m=_({type:u}),c((B=e((z=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"icon",B,r(e)),n(e,"nameLable",I,r(e)),n(e,"duration",S,r(e)),n(e,"usage",w,r(e)),n(e,"des",L,r(e)),n(e,"cost",C,r(e)),n(e,"typeShop",D,r(e)),e.data=void 0,e.onBtnBuy=function(t,e,i){},e}i(e,t);var o=e.prototype;return o.Init=function(t,e){void 0===e&&(e=function(t,e,i){}),this.data=t,this.onBtnBuy=e,this.nameLable.string=t.name.toUpperCase(),this.des.string=t.description,this.usage.string=t.usages,this.cost.string=t.price+" LE",1==parseInt(t.duration)?this.duration.string=t.duration+" day":parseInt(t.duration)>1?this.duration.string=t.duration+" days":this.duration.string="-",this.des.string=this.des.string.replace(/\n/g," ")},o.OnBtnBuyClick=function(){this.onBtnBuy(this.data,this.icon.spriteFrame,this.typeShop)},e}(p)).prototype,"icon",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(z.prototype,"nameLable",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(z.prototype,"duration",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(z.prototype,"usage",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(z.prototype,"des",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(z.prototype,"cost",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(z.prototype,"typeShop",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=z))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/KickUpEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameplayConfig.ts","./EffectBase.ts"],(function(t){"use strict";var e,n,c,i,o,f;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator,i=t.tween},function(t){o=t.GameplayConfig},function(t){f=t.EffectBase}],execute:function(){var r;n._RF.push({},"d5ccaSzkv5D3qpXERp3uIjc","KickUpEffect",void 0);var s=c.ccclass;c.property,t("KickUpEffect",s("KickUpEffect")(r=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))||this).kickUpAmount=100,e}e(n,t);var c=n.prototype;return c.Init=function(e,n,c){t.prototype.Init.call(this,e,n,c),o.DebugWarning&&console.warn("TODO: check duplicate kickup effect");var f=c.root,r=n.EffectTime;c.Stunned(),n.kickUpAmount&&(this.kickUpAmount=n.kickUpAmount);var s=f.node.worldPosition.clone(),a=s.clone();a.y+=this.kickUpAmount,i(f.node).to(r/2,{worldPosition:a}).call(function(){i(f.node).to(r/2,{worldPosition:s}).call(this.RemoveEffect.bind(this)).start()}.bind(this)).start()},n.ApplyEffect=function(t,e){t.initEffect(e)},c.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.node.destroy(),this.thisTarget.EndStunned()},n}(f))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/LabelTween.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,i,n,a,l,o,c,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.UIOpacity,c=e.Label,u=e.Component}],execute:function(){var p,s,b,y,f,h,w;a._RF.push({},"9296a/bcRhDs6XoErnZpnRD","LabelTween",void 0);var L=l.ccclass,g=l.property;e("LabelTween",(p=L("LabelTween"),s=g(o),b=g(c),p((h=r((f=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return r=e.call.apply(e,[this].concat(a))||this,i(r,"uIOpacity",h,n(r)),i(r,"label",w,n(r)),r}return t(r,e),r}(u)).prototype,"uIOpacity",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=r(f.prototype,"label",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=f))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/LandItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FarmingServicesApi.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(t){"use strict";var e,i,n,a,r,l,o,s,u,p,c,h,m,f,b,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,o=t.Label,s=t.UITransform,u=t.Sprite,p=t.SpriteFrame,c=t.Node,h=t.color,m=t.Component},function(t){f=t.FarmingServicesApi},function(t){b=t.ResourcesManager},function(t){S=t.UIPopupManager}],execute:function(){var d,v,I,y,g,x,M,P,D,F,T,_,w,U,z,C,R,L,N,A,k,B,E,O,q,G,H,Y,j;r._RF.push({},"8902dCxDstHx5tlEsnQZv7c","LandItem",void 0);var J=l.ccclass,Q=l.property;t("LandItem",(d=J("LandItem"),v=Q({type:o}),I=Q(s),y=Q(u),g=Q(o),x=Q(o),M=Q(u),P=Q(o),D=Q(u),F=Q(p),T=Q(p),_=Q(o),w=Q(c),U=Q(c),d((R=e((C=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"info_ID",R,a(e)),n(e,"info_ID_UITransform",L,a(e)),n(e,"typeSpriteArray",N,a(e)),n(e,"txtLocation",A,a(e)),n(e,"txtPlant",k,a(e)),n(e,"SpritePlant",B,a(e)),n(e,"txtMt",E,a(e)),n(e,"SpriteMt",O,a(e)),n(e,"SpriteFrameInfoPlantDe",q,a(e)),n(e,"SpriteFrameInfoPlant",G,a(e)),n(e,"txtStatus",H,a(e)),n(e,"btnRemove",Y,a(e)),n(e,"btnClaim",j,a(e)),e.landData=void 0,e.plant=void 0,e.plantMax=void 0,e.mtMax=void 0,e.mt=void 0,e}i(e,t);var r=e.prototype;return r.Init=function(t){this.node.active=!0,null!=this.btnClaim&&(this.btnClaim.active=!1),this.landData=t,1==t.isDefaultLand?this.info_ID_UITransform.node.active=!1:(this.info_ID_UITransform.node.active=!0,this.info_ID.string="#"+t.landId.toString(),this.info_ID_UITransform.getComponent(u).spriteFrame=b.Instance.GetRarity(t.land.rarity)),this.txtLocation.string=t.land.x+","+t.land.y,this.UpdateTypes(t),this.plant=t.totalFarming.plant,this.plantMax=t.land.capacity.plant,this.mt=t.totalFarming.motherTree,this.mtMax=t.land.capacity.motherTree,this.UpdateNumPlantsMotherTree(),this.UpdateStatus(t)},r.InitDefault=function(){this.node.active=!0,null!=this.btnClaim&&(this.btnClaim.active=!0),null!=this.btnRemove&&(this.btnRemove.active=!1),null!=this.txtStatus&&(this.txtStatus.node.parent.active=!1),this.info_ID_UITransform.node.active=!1,this.txtLocation.string="0,0",this.plant=0,this.plantMax=5,this.mt=0,this.mtMax=1,this.UpdateNumPlantsMotherTree()},r.OnBtnClaimClick=function(){f.RequestClaimDefaultLand((function(t){}),(function(t){}))},r.UpdateStatus=function(t){null!=this.btnRemove&&(this.btnRemove.active=!1);var e=0;switch(null!=t.status&&(e=t.status),e){case 0:null!=this.txtStatus&&(this.txtStatus.node.parent.active=!1);break;case 2:null!=this.btnRemove&&(this.btnRemove.active=!0),null!=this.txtStatus&&(this.txtStatus.node.parent.active=!1);break;case 1:null!=this.txtStatus&&(this.txtStatus.node.parent.active=!0,this.txtStatus.string="For Sale")}},r.OnBtnCleanClick=function(){var t=this,e=function(t){var e=JSON.parse(t);0==e.status?S.Instance.ShowToast("Success","You've clean the land successfully",1):S.Instance.ShowToast("Error",b.Instance.GetErrorMessage(e.status),0)},i=function(t){};S.Instance.ShowUINotifyConfirm("Stop Farming","You are cleaning all items from<br/>every slot of this land.<br/>Are you sure?",(function(){f.RequestDeactiveLand(t.landData.landId,e,i)}),!0)},r.UpdateNumPlantsMotherTree=function(){this.txtPlant.string=this.plant+"/"+this.plantMax,this.txtMt.string=this.mt+"/"+this.mtMax,null!=this.SpritePlant&&(this.plant>=this.plantMax?(this.SpritePlant.spriteFrame=this.SpriteFrameInfoPlantDe,this.SpritePlant.color=h(255,255,255,178)):(this.SpritePlant.spriteFrame=this.SpriteFrameInfoPlant,this.SpritePlant.color=h(255,255,255,255))),null!=this.SpriteMt&&(this.mt>=this.mtMax?(this.SpriteMt.spriteFrame=this.SpriteFrameInfoPlantDe,this.SpriteMt.color=h(255,255,255,178)):(this.SpriteMt.spriteFrame=this.SpriteFrameInfoPlant,this.SpriteMt.color=h(255,255,255,255)))},r.PlanTreeSuccess=function(t){t?this.mt++:this.plant++,this.UpdateNumPlantsMotherTree()},r.UpdateTypes=function(t){},e}(m)).prototype,"info_ID",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(C.prototype,"info_ID_UITransform",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(C.prototype,"typeSpriteArray",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=e(C.prototype,"txtLocation",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(C.prototype,"txtPlant",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(C.prototype,"SpritePlant",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(C.prototype,"txtMt",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(C.prototype,"SpriteMt",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(C.prototype,"SpriteFrameInfoPlantDe",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(C.prototype,"SpriteFrameInfoPlant",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(C.prototype,"txtStatus",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(C.prototype,"btnRemove",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(C.prototype,"btnClaim",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=C))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/LaserBeam.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./UserModel.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,i,a,n,o,s,r,l,c,h,u,d,m,g,f,p,A,k,S,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,r=t.CCInteger,l=t.Node,c=t.AudioSource,h=t.UITransform,u=t.Vec3},function(t){d=t.SoundController,m=t.EnumSoundPVE},function(t){g=t.UserModel},function(t){f=t.PVEGameplayControl},function(t){p=t.PVEHelper},function(t){A=t.AttackType,k=t.DamageType},function(t){S=t.InGameEventID},function(t){L=t.SkillBase}],execute:function(){var P,I,T,v,y,D,z,N,b,E,C,x,B;o._RF.push({},"2fb59A0DRBGA73SzFBgeUbe","LaserBeam",void 0);var F=s.ccclass,w=s.property;t("LaserBeam",(P=F("LaserBeam"),I=w(r),T=w(l),v=w(l),y=w(l),D=w(c),P((b=e((N=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).delayTimeAttack=0,a(e,"Index",b,n(e)),a(e,"Line",E,n(e)),e.LineUITransforms=[],a(e,"impactNode",C,n(e)),a(e,"muzzleNode",x,n(e)),a(e,"SoundFX",B,n(e)),e.lastTarget=null,e.curStack=0,e.curTarget=void 0,e.curDamage=void 0,e.AttackAnimStage=0,e}i(e,t);var o=e.prototype;return o.onLoad=function(){this.LineUITransforms=this.Line.getComponentsInChildren(h),this.LineUITransforms.push(this.Line.getComponent(h))},o.Init=function(e,i){t.prototype.Init.call(this,e,i),this.root.root.event.on(S.OnDead,this.onPlantDead,this)},o.update=function(t){null!=this.curTarget?this.updateLinePos():(0==this.Index&&this.Line.active&&(this.SoundFX.stop(),this.root.root.animationComponent.setIdleAnim()),this.Line.active&&(this.Line.active=!1),null!=this.muzzleNode&&(this.muzzleNode.active=!1),this.impactNode.active=!1,this.AttackAnimStage=0),this.root.attackAble&&(this.delayTimeAttack>0?this.delayTimeAttack-=t:this.root.targets.length<=this.Index?this.curTarget=null:(this.delayTimeAttack=1/this.root.getAttackSpeed(),this.attack(this.root.targets[this.Index])))},o.addAttackData=function(t,e){if(t==A.NormalAttack){var i=this.root.GetRandomBasicDamage();this.lastTarget==this.root.targets[this.Index]?this.curStack++:(this.lastTarget=this.root.targets[this.Index],this.curStack=0);var a=this.root.root.data.SkillData[this.Index].EffectData[0];i*=1+this.curStack*a.StackDmgPerHit,i*=a.DmgMultiply,e.AddDamage(k.Normal,i)}},o.attack=function(t){if(p.RandomActive(this.root.root.data.attackData.BlindPercent))console.error("Blind");else if(0==this.Index){if(0==this.AttackAnimStage){if(this.curTarget=t,this.curDamage=this.root.Attack(A.NormalAttack,this.curTarget,this.Index),null==this.curDamage)return;this.AttackAnimStage=1,this.root.root.event.on(S.AttackAnimEvent,this.endCast,this),this.root.beginNormalAttack()}else if(2==this.AttackAnimStage){if(this.curTarget=t,this.curDamage=this.root.Attack(A.NormalAttack,this.curTarget,this.Index),null==this.curDamage)return;this.endCast1()}}else if(2==this.root.skills[0].AttackAnimStage){if(this.curTarget=t,this.curDamage=this.root.Attack(A.NormalAttack,this.curTarget,this.Index),null==this.curDamage)return;this.EnableLine(),this.endCast1()}},o.endCast=function(){null!=this.curTarget?(this.root.root.event.off(S.AttackAnimEvent,this.endCast,this),this.curTarget.TakeDamage(this.curDamage),this.root.root.animationComponent.setSkillAttackAnim(this.skillData.LoopAnimName,!0),this.AttackAnimStage=2,this.EnableLine(),d.Instance.PlaySoundPvE(m.SFX_LaserBeam_attack),this.PlaySoundLoop(.25)):console.error("this.curTarget null")},o.endCast1=function(){null!=this.curTarget?this.curTarget.TakeDamage(this.curDamage):console.error("this.curTarget null")},o.EnableLine=function(){this.impactNode.active=!0,this.impactNode.setParent(f.Instance.getEffParent()),this.impactNode.setSiblingIndex(0),null!=this.muzzleNode&&(this.muzzleNode.setParent(f.Instance.getEffParent()),this.muzzleNode.setWorldPosition(this.root.getAttackPos().worldPosition),this.muzzleNode.active=!0),this.Line.active=!0,this.Line.setParent(f.Instance.getEffParent()),this.Line.setSiblingIndex(0),this.Line.setWorldPosition(this.root.getAttackPos().worldPosition),this.updateLinePos()},o.updateLinePos=function(){if(1!=this.AttackAnimStage){var t=this.curTarget.getTargetPos().worldPosition,e=this.root.getAttackPos().worldPosition,i=this.Line,a=u.distance(t,e);this.UpdateLineSize(a);var n=Math.atan2(t.y-e.y,t.x-e.x);n*=180/Math.PI,i.setWorldRotationFromEuler(0,0,n),this.impactNode.setWorldPosition(t)}},o.UpdateLineSize=function(t){for(var e=0;e<this.LineUITransforms.length;e++)this.LineUITransforms[e].width=t},o.onPlantDead=function(){this.root.root.event.off(S.OnDead,this.onPlantDead,this),this.Line.destroy(),null!=this.muzzleNode&&this.muzzleNode.destroy(),this.impactNode.destroy()},o.PlaySoundLoop=function(t){void 0===t&&(t=.5),g.userLocalData.soundOn&&(this.SoundFX.volume=t,this.SoundFX.loop=!0,this.SoundFX.clip=d.Instance.AudioClipsPVE[m.SFX_LaserBeam_loop],this.SoundFX.play())},e}(L)).prototype,"Index",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=e(N.prototype,"Line",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(N.prototype,"impactNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(N.prototype,"muzzleNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(N.prototype,"SoundFX",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=N))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/LaserFx.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,a,s,n,o,p,l,u,c,h,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,s=e.createClass},function(e){n=e.cclegacy,o=e._decorator,p=e.Sprite,l=e.Material,u=e.CCBoolean,c=e.CCInteger,h=e.Vec2,f=e.Component}],execute:function(){var m,d,b,g,y,v,w,z,x,C,F,L,M,O,D,H;n._RF.push({},"17890kU1zhGzoOgvnVbRtPs","LaserFx",void 0);var P=o.ccclass,_=o.property,k=o.executeInEditMode;e("LaserFx",(m=P("LaserFx"),d=_(p),b=_(l),g=_(u),y=_(u),v=_(c),w=_(c),z=_(h),m(x=k((F=t((C=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return t=e.call.apply(e,[this].concat(s))||this,r(t,"sprite",F,a(t)),r(t,"mat",L,a(t)),r(t,"isMoving",M,a(t)),r(t,"preview",O,a(t)),r(t,"speedX",D,a(t)),r(t,"speedY",H,a(t)),t.params=new h(0,0),t.handle=null,t}i(t,e);var n=t.prototype;return n.start=function(){this.mat=this.sprite.material,this.handle=this.mat.passes[0].getHandle("params")},n.onDisable=function(){this.handle=null},n.update=function(e){this.isMoving&&(null==this.handle&&(this.mat=this.sprite.material,this.handle=this.mat.passes[0].getHandle("params")),this.params.x+=e*this.speedX,this.params.y+=e*this.speedY,this.mat.passes[0].setUniform(this.handle,this.params))},s(t,[{key:"Offset",get:function(){return this.params},set:function(e){if(this.params=e,this.mat){var t=this.mat.passes[0].getHandle("params");this.mat.passes[0].setUniform(t,this.params)}}}]),t}(f)).prototype,"sprite",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(C.prototype,"mat",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(C.prototype,"isMoving",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),O=t(C.prototype,"preview",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=t(C.prototype,"speedX",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=t(C.prototype,"speedY",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(C.prototype,"Offset",[z],Object.getOwnPropertyDescriptor(C.prototype,"Offset"),C.prototype),x=C))||x)||x));n._RF.pop()}}}));

System.register("chunks:///_virtual/LEMarketData.ts",["cc","./ConvertJsonObject2.ts","./Utility.ts"],(function(t){"use strict";var e,i,a,r,s,n,h;return{setters:[function(t){e=t.cclegacy,i=t._decorator},function(t){a=t.convertToString,r=t.convertToUnstableNumber,s=t.convertToBoolean,n=t.convertToArray},function(t){h=t.Utility}],execute:function(){var o;e._RF.push({},"80b3dExMzNGmZtnDIny8mfz","LEMarketData",void 0);var c=i.ccclass,u=(i.property,["WOOD","FRUIT","INSECT","MINERAL","GEM","METAL","FISH","CRUSTACEAN","FAUNA"]),p=t("UserMarketData",function(){function t(t){this.ownerId="",this.code=0,this.name="",this.type="",this.createAt="",this.updateAt="",this.totalPurchased=0,this.UpdateData(t)}return t.prototype.UpdateData=function(t){t&&(this.ownerId=a(t.ownerId),this.name=a(t.name),this.type=a(t.type),this.code=r(t.code),this.totalPurchased=r(t.totalPurchased))},t}()),m=t("MarketItemData",function(){function t(t){this.id="",this.code=0,this.name="",this.rarity="",this.type="",this.amount=0,this.maxAmount=0,this.cost=0,this.price=0,this.percentSale=0,this.isFlashSale=!1,this.isMaterial=!1,this.userMarket=void 0,this.UpdateData(t)}var e=t.prototype;return e.UpdateData=function(t){this.id=a(t._id),this.name=a(t.name),this.rarity=a(t.rarity),this.type=a(t.type),this.maxAmount=r(t.maxAmount),this.cost=r(t.cost),this.code=r(t.code),this.percentSale=r(t.percentSale),this.isFlashSale=s(t.isFlashSale),this.userMarket=new p(t.userMarket),this.price=r(t.price),this.amount=r(this.userMarket.totalPurchased)},e.isSoldOut=function(){return this.amount>=this.maxAmount},e.getTotalItemCanBuy=function(){return this.maxAmount-this.amount},e.getPrice=function(){return this.cost*(100-this.percentSale)/100},e.getItemName=function(){return this.name.replace("_"," ")},e.getItemType=function(){return this.type.replace("","_")},e.getItemRarity=function(){var t=this.name.split("_");return t[0]==this.name&&(t=this.name.split(" ")),t[0]},e.getNameType=function(){return"FERTILIZER"==(this.type.indexOf("_")>=0?this.type.split("_")[0]:this.type.split(" ")[0])?this.getSpriteNameFertilizer(this.type):"CHEST_KEY"==this.type||"KING KEY"==this.type?"EPIC_CHEST_KEY":"KEY"==this.type?"KEY":this.rarity+"_"+h.getNameWithType(this.type,this.rarity)},e.getSpriteNameFertilizer=function(t){switch(t){case"FERTILIZER_S":return"FERTILIZER_SMALL";case"FERTILIZER_M":return"FERTILIZER_MEDIUM";case"FERTILIZER_L":return"FERTILIZER_LARGE";case"FERTILIZER_XL":return"FERTILIZER_EXTRA_LARGE"}return""},t}());t("LEMarketData",c("LEMarketData")(o=function(){function t(t){this.materialMarket=[],this.dealMarket=[],this.UpdateData(t)}return t.prototype.UpdateData=function(t){for(var e=this,i=n(t.miscMarket),a=function(){var t=i[r];if(!t)return"continue";var a=new m(t),s=a.type.toUpperCase(),n=u.findIndex((function(t){return t==s}));a.isMaterial=n>=0,e.materialMarket.push(a)},r=0;r<i.length;r++)a();for(var s=n(t.dealMarket),h=0;h<s.length;h++){var o=s[h];o&&this.dealMarket.push(new m(o))}},t}())||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/LevelStat.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8adf6nN+ENJRrKFSY9cBe8+","LevelStat",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/LifetimePassive.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DamageData.ts","./SkillBase.ts"],(function(t){"use strict";var e,a,i,s,n,o,r,l,c,u,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,r=t.CCBoolean,l=t.Node,c=t.instantiate},function(t){u=t.DamageData},function(t){f=t.SkillBase}],execute:function(){var m,z,p,h,D,P,v;n._RF.push({},"87acekw9E1IDqKEgrYQPcgw","LifetimePassive",void 0);var k=o.ccclass,d=o.property;t("LifetimePassive",(m=k("LifetimePassive"),z=d(r),p=d(l),m((P=e((D=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,i(e,"muzzleInAttackPos",P,s(e)),i(e,"muzzlePrefab",v,s(e)),e}a(e,t);var n=e.prototype;return n.Init=function(t,e){this.root=t,this.skillData=e;var a=new u;(a.AddEffects(this.skillData.EffectData),a.AddDamages(this.skillData.damageData),null!=this.skillData.ImmuneSilence&&1==this.skillData.ImmuneSilence&&(t.root.data.statsData.ImmuneSilence=!0),null!=e.EvasionAttackPercent&&(t.root.data.statsData.EvasionAttackPercent+=e.EvasionAttackPercent),e.Res)&&e.Res.forEach((function(e){t.root.data.statsData.AddRes(e)}));t.root.targetComponent.TakeDamage(a),this.activeMuzzle()},n.activeMuzzle=function(){if(null!=this.muzzlePrefab){var t=c(this.muzzlePrefab);t.parent=this.muzzleInAttackPos?this.root.getAttackPos():this.root.getRootPos(),t.setPosition(0,0,0),t.active=!0}},e}(f)).prototype,"muzzleInAttackPos",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=e(D.prototype,"muzzlePrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=D))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/ListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,s=e.Component}],execute:function(){var l;n._RF.push({},"9a06fwLc/ZIB4oyfNMsSVJu","ListItem",void 0);var r=i.ccclass;i.property,e("default",r(l=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).index=-1,t.cellData=null,t.eventHandler=null,t}t(n,e);var i=n.prototype;return i.updateCellView=function(e,t,n){this.index=e,this.cellData=t,this.eventHandler=n},i.sendCustomEvent=function(e,t){this.eventHandler&&"function"==typeof this.eventHandler&&this.eventHandler(e,t)},i.select=function(){this.sendCustomEvent("item:selected",{index:this.index,cellData:this.cellData,itemHandler:this})},n}(s))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/ListView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTween.ts","./ListItem.ts"],(function(t){"use strict";var i,e,n,s,o,h,a,r,l,c,v,m,g,u,w,d,f,p,z,S,y,C,b,x;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.createClass,h=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){r=t.cclegacy,l=t._decorator,c=t.CCFloat,v=t.Node,m=t.CCInteger,g=t.ValueType,u=t.Vec2,w=t.Size,d=t.NodePool,f=t.ScrollView,p=t.UITransform,z=t.Vec3,S=t.instantiate,y=t.UIOpacity,C=t.Component},function(t){b=t.BaseTween},function(t){x=t.default}],execute:function(){var I,_,P,E,L,V,M,X,D,O,Y,T,B,R,F,U,k,N,Z;r._RF.push({},"1be2cIlVHdDX5ERMr68gRE/","ListView",void 0);var H=l.ccclass,A=l.property,G=t("Bound",(I=A(c),_=A(c),P=A(c),E=A(c),V=i((L=function(t){function i(i,e,o,h){var a;return void 0===i&&(i=0),void 0===e&&(e=0),void 0===o&&(o=0),void 0===h&&(h=0),a=t.call(this)||this,n(a,"top",V,s(a)),n(a,"left",M,s(a)),n(a,"bottom",X,s(a)),n(a,"right",D,s(a)),a.top=i,a.left=e,a.bottom=o,a.right=h,a}return e(i,t),i.create=function(t,e,n,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=0),new i(t,e,n,s)},i}(g)).prototype,"top",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=i(L.prototype,"left",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=i(L.prototype,"bottom",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=i(L.prototype,"right",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L));t("default",(O=A(v),Y=A(m),T=A(m),B=A(m),H((U=i((F=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),h=0;h<e;h++)o[h]=arguments[h];return i=t.call.apply(t,[this].concat(o))||this,n(i,"itemPrefab",U,s(i)),n(i,"spacingX",k,s(i)),n(i,"spacingY",N,s(i)),n(i,"itemStorageCount",Z,s(i)),i.data=[],i.rowItemCounts=0,i.items=[],i.itemSize=u.ZERO,i.contentSize=w.ZERO,i.lastList=u.ZERO,i.initialized=!1,i}e(i,t);var r=i.prototype;return r.onLoad=function(){this.data=[],this.rowItemCounts=0,this.items=[],this.itemSize=u.ZERO,this.contentBound=new G(0,0,0,0),this.lastList=u.ZERO,this.itemStorage=new d("StorageList"),0==this.itemStorageCount&&(this.itemStorageCount=20);var t=this.getComponent(b);t&&(this.tween=t);var i=this.node.getComponent(f);i&&(this.view=i,this.content=i.content),this.preInitListView()},r.start=function(){this.view.node.on(f.EventType.SCROLL_ENDED,this.scrollEnded.bind(this)),this.view.node.on(f.EventType.SCROLL_BEGAN,this.scrollBegan.bind(this))},r.clear=function(){this.setContent([])},r.getContent=function(){var t=this.content.getComponent(p),i=new w(0,0);return t&&(i=t.contentSize),i},r.getViewSize=function(){var t=this.node.getComponent(p),i=new w(0,0);return t&&(i=t.contentSize),i},r.setContent=function(){var t=h(a().mark((function t(i){var e=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initialized){t.next=4;break}return this.initPromise||(this.initPromise=new Promise((function(t,i){e.schedule((function i(){e.initialized&&(e.initPromise=null,t(),e.unschedule(i))}),1)}))),t.next=4,this.initPromise;case 4:this.data=i,this.initListView(),i.length&&this.scheduleOnce((function(){e.tween&&e.tween.startTween(e.items)}),.2);case 7:case"end":return t.stop()}}),t,this)})));return function(i){return t.apply(this,arguments)}}(),r.update=function(t){var i=this.getContent(),e=!!this.view.vertical&&this.content.getPosition().y>this.lastList.y;e=this.view.horizontal?this.content.getPosition().x<this.lastList.x:e;var n=this.items.length,s=this.data.length,o=this.view.vertical&&i.width!==this.contentSize.width||this.view.horizontal&&i.height!==this.contentSize.height,h=this.getViewSize();for(var a in this.items){var r=this.items[a];o&&(r.width=this.view.vertical?i.width:r.width,r.height=this.view.horizontal?i.height:r.height);var l=r.getWorldPosition();if(l.y-=this.view.vertical?h.height:0,l.x+=this.view.horizontal?h.width/2:0,e){if(this.view.vertical&&l.y>this.contentBound.top||this.view.horizontal&&l.x<this.contentBound.left){var c=r.__itemID+n;if(c>=s)return;r.__itemID=c;var v=this.view.vertical?r.getPosition().y-n*this.itemSize.y-n*this.spacingY:r.getPosition().y,m=this.view.horizontal?r.getPosition().x+n*this.itemSize.x+n*this.spacingX:r.getPosition().x;r.setPosition(new z(m,v)),this.onCellItemUpdate(r,r.__itemID,this.data[r.__itemID])}}else if(this.view.vertical&&l.y<this.contentBound.bottom||this.view.horizontal&&l.x>this.contentBound.right){var g=r.__itemID-n;if(g<0)return;r.__itemID=g;var w=this.view.vertical?r.getPosition().y+n*this.itemSize.y+n*this.spacingY:r.getPosition().y,d=this.view.horizontal?r.getPosition().x-n*this.itemSize.x-n*this.spacingX:r.getPosition().x;r.setPosition(new z(d,w)),this.onCellItemUpdate(r,r.__itemID,this.data[r.__itemID])}}this.lastList=new u(this.content.getPosition().x,this.content.getPosition().y),this.contentSize=o?i:this.contentSize},r.scrollTo=function(t){if(this.__isValid&&!(t>this.data.length)){var i=this.view.getMaxScrollOffset(),e=this.view.horizontal?t*(this.itemSize.x+this.spacingX):0,n=this.view.vertical?t*(this.itemSize.y+this.spacingY):0;e=Math.min(e,i.x),n=Math.min(n,i.y);var s=new u(e,n);this.view.scrollToOffset(s,.02*t)}},r.scrollToNext=function(){var t=this.view.getScrollOffset(),i=this.view.getMaxScrollOffset(),e=this.view.horizontal?(1+Math.ceil(Math.abs(t.x)/(this.itemSize.x+this.spacingX)))*(this.itemSize.x+this.spacingX):0,n=this.view.vertical?(1+Math.ceil(Math.abs(t.y)/(this.itemSize.y+this.spacingY)))*(this.itemSize.y+this.spacingY):0;e=Math.min(e,i.x),n=Math.min(n,i.y);var s=new u(e,n);this.view.scrollToOffset(s,.2)},r.scrollToPrev=function(){var t=this.view.getScrollOffset(),i=this.view.horizontal?(-1+Math.floor(Math.abs(t.x)/(this.itemSize.x+this.spacingX)))*(this.itemSize.x+this.spacingX):0,e=this.view.vertical?(-1+Math.floor(Math.abs(t.y)/(this.itemSize.y+this.spacingY)))*(this.itemSize.y+this.spacingY):0;i=Math.max(i,0),e=Math.max(e,0);var n=new u(i,e);this.view.scrollToOffset(n,.2)},r.onScrolling=function(t){this.node.emit("scroll-view:onListScrollEvent",t)},r.scrollBegan=function(t,i){this.node.emit("scroll-view:scrollBegan",t)},r.scrollEnded=function(t,i){this.node.emit("scroll-view:onScrollEnded",t)},r.preInitListView=function(){if(this.__isValid){this.preInitItems();var t=this.getItemFromStorage();if(t){var i=t.getComponent(p),e=i?i.contentSize:new w(0,0);this.itemSize=new u(e.width,e.height)}this.initialized=!0}},r.preInitItems=function(){if(this.__isValid){this.itemStorage||(this.itemStorage=new d("StorageList"));for(var t=0;t<this.itemStorageCount;t++)this.itemStorage.put(S(this.itemPrefab))}},r.getItemFromStorage=function(){if(!this.__isValid)return null;this.itemStorage||this.preInitItems();var t=this.itemStorage.size()>0?this.itemStorage.get():S(this.itemPrefab),i=t.getComponent(p);return i&&(i.anchorX=.5,i.anchorY=.5),t.active=!0,t},r.initListView=function(){this.view.vertical=!this.view.vertical&&!this.view.horizontal||this.view.vertical;var t=this.content.getComponent(p);t&&(this.view.vertical?(t.anchorY=1,t.anchorX=.5):(t.anchorY=.5,t.anchorX=0)),this.rowItemCounts=this.view.vertical?Math.ceil(this.getViewSize().height/(this.itemSize.y+this.spacingY)):Math.ceil(this.getViewSize().width/(this.itemSize.x+this.spacingX));var i,e=0,n=Math.max(this.rowItemCounts+10,this.items.length),s=this.getContent();do{if(e>=this.rowItemCounts+10||void 0===this.data[e]){for(var o=e;o<this.items.length;o++){var h=this.items[o];h.active=!1,h.parent=null,this.itemStorage.put(h)}this.items.splice(e,this.items.length-e);break}e<this.items.length?i=this.items[e]:((i=this.getItemFromStorage()).name="__listItem__"+e,this.content.addChild(i));var a=i.getComponent(y);a&&(a.opacity=null==this.tween?255:0),i.__itemID=e,this.onCellItemUpdate(i,e,this.data[e]);var r=this.view.horizontal?this.itemSize.x/2+e*(this.itemSize.x+this.spacingX):i.getPosition().x,l=this.view.vertical?-(this.itemSize.y/2+e*(this.itemSize.y+this.spacingY)):i.getPosition().y;i.setPosition(r,l,0);var c=i.getComponent(p);if(c){var v=this.view.vertical?s.width:c.width,m=this.view.horizontal?s.height:c.height;c.setContentSize(v,m)}this.items.push(i),++e}while(e<n);var g=this.view.vertical?this.data.length*this.itemSize.y+(this.data.length-1)*this.spacingY:this.getContent().height,w=this.view.horizontal?this.data.length*this.itemSize.x+(this.data.length-1)*this.spacingX:this.getContent().width;t&&t.setContentSize(w,g);var d=this.view.vertical?5*this.itemSize.y+4*this.spacingY:0,f=this.view.vertical?-(this.getViewSize().height+d):0,z=this.view.horizontal?-(5*this.itemSize.x+4*this.spacingX):0,S=this.view.horizontal?this.getViewSize().width-z:0;this.contentBound=new G(d,z,f,S),this.lastList=new u(this.content.getPosition().x,this.content.getPosition().y),this.contentSize=s},r.onCellItemUpdate=function(t,i,e){var n=t.getComponent(x);n&&n.updateCellView(i,e,this.onCellCustomEvent.bind(this))},r.onCellCreatedEvent=function(t,i){var e={index:t,itemHandler:i};this.node.emit("scroll-view:onItemCreatedEvent",e)},r.onCellCustomEvent=function(t,i){var e={event:t,eventData:i};this.node.emit("scroll-view:customEvent",e)},r.onCellSelectedEvent=function(t,i,e){var n={index:t,itemHandler:e,data:i};this.node.emit("scroll-view:onItemSelectedEvent",n)},o(i,[{key:"__isValid",get:function(){return!!this.view&&!!this.itemPrefab&&!!this.content}}]),i}(C)).prototype,"itemPrefab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(F.prototype,"spacingX",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=i(F.prototype,"spacingY",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=i(F.prototype,"itemStorageCount",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=F))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/LiveenaAttackComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AttackComponent.ts","./TargetComponent.ts"],(function(t){"use strict";var n,o,e,a,i;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator},function(t){a=t.AttackComponent},function(t){i=t.TargetComponent}],execute:function(){var r;o._RF.push({},"b82aeCUvfZAY5O+WJtbVtrG","LiveenaAttackComponent",void 0);var s=e.ccclass;e.property,t("LiveenaAttackComponent",s("LiveenaAttackComponent")(r=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.BeginContact=function(t,n,o){var e=n.getComponent(i);null!=e&&null!=e.root&&0!=e.canTarget&&(0==e.root.isUndead&&0==this.canAttackPlant||0==e.root.isDead&&e.root.team===this.root.team&&this.targets.indexOf(e)<0&&(this.targets.push(e),this.root.stopMoving()))},e.EndContact=function(t,n,o){var e=n.getComponent(i);if(e&&e.root.team==this.root.team){var a=this.targets.indexOf(e);a>=0&&this.targets.splice(a,1),this.targets.length<=0&&(this.root.checkCountinueMoving(),this.scheduleOnce(this.checkFaceDir,2))}},e.beginNormalAttack=function(){this.root.animationComponent.setSkillAttackAnim(this.root.data.statsData.DefaultAttackAnimName)},o}(a))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/LoginManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FarmingServicesApi.ts","./UserModel.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(e){"use strict";var n,t,a,o,i,r,s,c,l,u,g,f,h,p,L;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,l=e.Node,u=e.sys,g=e.Component},function(e){f=e.FarmingServicesApi},function(e){h=e.UserModel},function(e){p=e.ResourcesManager},function(e){L=e.UIPopupManager}],execute:function(){var d,v,M,S,m,I,b,k,w,R,_,T,y,C,E;s._RF.push({},"a27dd8sK+pAE4uLsIQ4dGik","LoginManager",void 0);var O=c.ccclass,F=c.property;e("LoginManager",(d=O("LoginManager"),v=F(l),M=F(l),S=F(l),m=F(l),I=F(l),b=F(l),d((R=n((w=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return n=e.call.apply(e,[this].concat(i))||this,a(n,"Logo",R,o(n)),a(n,"Login",_,o(n)),a(n,"Scan",T,o(n)),a(n,"ScanMask",y,o(n)),a(n,"MobileBtn",C,o(n)),a(n,"WebBtn",E,o(n)),n._refreshToken=void 0,n}t(n,e);var s=n.prototype;return s.start=function(){this.registerEvent(),null!=h.GetToken()?L.Instance.OnLoginSuccess():null!=h.GetRefresh_Token()?this.CallLogin():this.showLogin()},s.showLogin=function(){this.Login.active=!0,this.Logo.active=!1,this.WebBtn.active=u.isBrowser,this.MobileBtn.active=!u.isBrowser},s.registerEvent=function(){cc.OnQRCodeRespone=function(e){this.ScanMask.active=!1,console.log("QR respone: ",e),f.PostRequestRefreshToken(e,(function(n){var t=JSON.parse(n);0===t.status?(h.SetRefresh_Token(e),L.Instance.OnLoginSuccess()):L.Instance.ShowToast("Error",p.Instance.GetErrorMessage(t.status),0)}),L.Instance._LoginManager.LoginFail.bind(L.Instance._LoginManager))}.bind(this),cc.OnQRCodeResponeError=function(e){this.ScanMask.active=!1,L.Instance.ShowToast("Error","Cannot read Image",0)}.bind(this)},s.OnBtnScanClick=function(){if(this.registerEvent(),u.platform==u.Platform.ANDROID)jsb.reflection.callStaticMethod("com/cocos/game/QR_CodeReader","scan","(Ljava/lang/String;)V","this is a message from JavaScript");else{this.ScanMask.active=!0;jsb.reflection.callStaticMethod("AppDelegate","callNativeUIWithTitle:andContent:","cocos2d-js","Yes! you call a Native UI from Reflection")}},s.stopScan=function(){jsb.reflection.callStaticMethod("AppDelegate","cancelScanQR:andContent:","cocos2d-js","Yes! you call a Native UI from Reflection")},s.OnBtnChoseClick=function(){if(u.platform==u.Platform.ANDROID)jsb.reflection.callStaticMethod("com/cocos/game/QR_CodeReader","ChooseImage","(Ljava/lang/String;)V","this is a message from JavaScript");else jsb.reflection.callStaticMethod("AppDelegate","chooseQRImage:andContent:","cocos2d-js","Yes! you call a Native UI from Reflection")},s.OnBtnMetaClick=function(){L.Instance.Loading(!0);var e="PVU plantvsundead.com signing:",n="",t="",a="";function o(){return s.apply(this,arguments)}function s(){return(s=i(r().mark((function o(){var i,s,c;return r().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=window.ethereum,o.next=3,i.request({method:"personal_sign",params:[e+" "+a,t]}).catch((function(e){L.Instance._LoginManager.LoginFail(),L.Instance.ShowToast("Error","MetaMask Login failed!",0)}));case 3:(s=o.sent)?(n=s.toString(),c=function(e){console.log(e);var n=JSON.parse(e);0==n.status?(h.SetToken(n.data.token),L.Instance.OnLoginSuccess()):l(n.status)},f.PostRequestV3_AUTH(t,n,e,c,u)):(L.Instance._LoginManager.LoginFail(),L.Instance.ShowToast("Error","MetaMask Login failed!",0));case 6:case"end":return o.stop()}}),o)})))).apply(this,arguments)}function c(){return(c=i(r().mark((function e(){var n,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.ethereum,e.next=3,n.request({method:"eth_requestAccounts"}).catch((function(e){L.Instance._LoginManager.LoginFail(),L.Instance.ShowToast("Error","MetaMask Login failed!",0)}));case 3:(s=e.sent)?(t=s[0],c=function(){var e=i(r().mark((function e(n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),0!=(i=JSON.parse(n)).status){e.next=7;break}a=i.data.nonce,o(),e.next=14;break;case 7:if(7!=i.status){e.next=13;break}return e.next=10,f.RequestRegisterAccount(t);case 10:f.RequestLoginWithMeta(t,c,u),e.next=14;break;case 13:l(i.status);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),f.RequestLoginWithMeta(t,c,u)):(L.Instance._LoginManager.LoginFail(),L.Instance.ShowToast("Error","MetaMask Login failed!",0));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=function(e){L.Instance._LoginManager.LoginFail(),L.Instance.ShowToast("Error",p.Instance.GetErrorMessage(e),0)},u=function(e){L.Instance._LoginManager.LoginFail()};void 0!==window.ethereum&&window.ethereum.isMetaMask?function(){c.apply(this,arguments)}():(L.Instance.ShowToast("Error","Can not detect MetaMask!",0),L.Instance._LoginManager.LoginFail())},s.LoginFail=function(){this.Login.active=!0,this.Logo.active=!1,L.Instance.Loading(!1)},s.CallLogin=function(){var e=this,n=h.GetRefresh_Token();null!=n&&(this._refreshToken=n,this.Login.active=!1,this.Logo.active=!0,f.PostRequestRefreshToken(this._refreshToken,(function(n){var t=JSON.parse(n);0==t.status?(h.SetRefresh_Token(e._refreshToken),L.Instance.OnLoginSuccess()):(e.Login.active=!0,e.Logo.active=!1,L.Instance.ShowToast("Error",p.Instance.GetErrorMessage(t.status),0))}),(function(n){e.Login.active=!0,e.Logo.active=!1})))},n}(g)).prototype,"Logo",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=n(w.prototype,"Login",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=n(w.prototype,"Scan",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=n(w.prototype,"ScanMask",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=n(w.prototype,"MobileBtn",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=n(w.prototype,"WebBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=w))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BtnAnim.ts","./FarmFerInfo.ts","./FarmFerUI.ts","./FertilizerStatus.ts","./IsoAddLand.ts","./IsoAddLandItem.ts","./IsoAddLandItemTouch.ts","./IsoAddPlant.ts","./IsoAddPlantItem.ts","./IsoEditControl.ts","./IsoFarmManager.ts","./IsoFarmMap.ts","./IsoFarmViewController.ts","./IsoLand.ts","./IsoLandSign.ts","./IsoMapLandEmpty.ts","./IsoMapLandItem.ts","./IsoPlantItem.ts","./MapLandInfo.ts","./PlantSlot.ts","./UI3dHelper.ts","./UIPopupConfirmTool.ts","./WaveData.ts","./demoVFX.ts","./ConvertJsonObject.ts","./PVEDataProvider.ts","./PlantCardData.ts","./UndeadCardData.ts","./UserCardData.ts","./WaveParser.ts","./IgnorePauseSystem.ts","./CloneableObject.ts","./AoEBullet.ts","./BezierBullet.ts","./BombardBullet.ts","./BulletBase.ts","./DirectionBullet.ts","./RapidFireBullet.ts","./RapidFireBulletDirection.ts","./SnipeBullet.ts","./SoftPollenBullet.ts","./SplashAttackBullet.ts","./StickyLiquidBullet.ts","./ThornAssaultBullet.ts","./AttackComponent.ts","./GOAnimComponent.ts","./MovingComponent.ts","./TargetComponent.ts","./GameplayConfig.ts","./AttackData.ts","./CardData.ts","./DamageData.ts","./Enums.ts","./GameplayDataInterface.ts","./IngameData.ts","./LevelStat.ts","./ObjectData.ts","./StatsData.ts","./AmpedEffect.ts","./BleedEffect.ts","./BlindEffect.ts","./BrokenEffect.ts","./BurnEffect.ts","./DamageDecreasePercentEffect.ts","./DashEffect.ts","./DecreaseResEffect.ts","./EffectBase.ts","./FeebleEffect.ts","./FleetEffect.ts","./HasteEffect.ts","./KickUpEffect.ts","./PoisonEffect.ts","./RegenEffect.ts","./RepelEffect.ts","./SilenceEffect.ts","./SlowEffect.ts","./StunEffect.ts","./InGameEvent.ts","./LabelTween.ts","./CardFakeData.ts","./GameplayFakeData.ts","./GameplayModel.ts","./GameplayObject.ts","./GameplayObjectUI.ts","./PlantBase.ts","./FreezieAttackComponent.ts","./LiveenaAttackComponent.ts","./TerrastAttackComponent.ts","./ZigganAttackComponent.ts","./SkillBase.ts","./AcidSpray.ts","./AoEAttack.ts","./Assassination.ts","./AttackPassiveWithCountdown.ts","./AttackWithRandomActivePassive.ts","./Bombard.ts","./ChainLightning.ts","./ChargeSkill.ts","./DarkPowder.ts","./Feralism.ts","./FlameThrower.ts","./FreezingAura.ts","./IcicleWave.ts","./LaserBeam.ts","./LifetimePassive.ts","./ManaCondense.ts","./Meltdown.ts","./NormalAttack.ts","./PassiveAcidBlood.ts","./PassivePiercingBarb.ts","./PassiveRapidFire.ts","./PassiveStaticShock.ts","./PassiveStickyLiquid.ts","./PassiveThornShell.ts","./PassiveWeaknessExploit.ts","./Passive_AeroBlessing.ts","./Passive_BerserkMode.ts","./Passive_SoftPollen.ts","./Passive_WoolBody.ts","./PiercingBarbV2.ts","./PrimalShell.ts","./Snipe.ts","./SoftPollen.ts","./SplashAttack.ts","./StickyLiquid.ts","./StoneCarapace.ts","./StoneFormSkill.ts","./ThornAssault.ts","./ThunderStrike.ts","./Tremor.ts","./VacuumBlast.ts","./WaterTranquility.ts","./SpellBase.ts","./Spell_FreezingField.ts","./Spell_HealingWind.ts","./Spell_Ominous_Mist.ts","./Spell_ScorchingZone.ts","./Spell_StoneBarrage.ts","./Spell_Thunderbolt.ts","./Spell_Zephyr_Blessing.ts","./UndeadBase.ts","./WaveControl.ts","./EffParentSetter.ts","./ParticleHelper.ts","./Test_NodeOrder.ts","./FarmLobbyHelper.ts","./PVE_Lobby.ts","./PVEResHttp.ts","./PVEService.ts","./PVE_Constant.ts","./PVE_Enum.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./PVE_Map_Controller.ts","./PVE_Map_Slot.ts","./PVE_ResourceManager.ts","./UI_CardItem.ts","./UI_CardScrollview.ts","./PVE_GamePlay_UI_Controller.ts","./PausePopup.ts","./ConfirmEndPopup.ts","./PVEPopupBase.ts","./PVEPopupManager.ts","./PVEUIToast.ts","./SpriteFollowCursor.ts","./UIDeckBuilder.ts","./UIDeckCardItem.ts","./UIEndGamePopup.ts","./UISetting.ts","./UIWaveTitle.ts","./LaserFx.ts","./BeterPlayAnim.ts","./CCLineHelper.ts","./ConfigApi.ts","./ExpeditionServiceApi.ts","./FarmingServicesApi.ts","./GatheringServicesApi.ts","./ResHttp.ts","./CraftingData.ts","./Interface.ts","./InventoryData.ts","./LEMarketData.ts","./MiningGameData.ts","./MiningMapData.ts","./MiningResultData.ts","./SaplingData.ts","./StateData.ts","./UnDeadData.ts","./UserGatherLevelData.ts","./EventManager.ts","./OneToMultiListener.ts","./UIScreenAltar.ts","./SlotCraftItem.ts","./SynthesisCraftItem.ts","./TravelBagItem.ts","./UICraftSuccess.ts","./UIMysticCraft.ts","./UIScreenCraft.ts","./UISynthesisCraft.ts","./UITravelBag.ts","./AddUndeadItem.ts","./EggItem.ts","./ExpeditionConfig.ts","./ExpeditionHelper.ts","./ExpeditionItem.ts","./TreasureAssetsItem.ts","./TreasureAssetsOpen.ts","./TreasureAssetsOpenFX.ts","./UIAddUndead.ts","./UIBarn.ts","./UIEggItem.ts","./UIExRewardItem.ts","./UIExpeditionFood.ts","./UIExpeditionFoodItem.ts","./UIExpeditionPopup.ts","./UIFinishExpeditionPopup.ts","./UINotifyExpedition.ts","./UINotifyExpeditionItem.ts","./UIPopupNurtureUndead.ts","./UIPopupOpenEgg.ts","./UIPopupUndeadInfo.ts","./UIScreenChooseExpedition.ts","./UIScreenExpedition.ts","./UIScreenUndead.ts","./UISelectEgg.ts","./UIUndeadAnim.ts","./UIUndeadItem.ts","./UIUndeadView.ts","./UIUpgradeBarn.ts","./UndeadAssetItem.ts","./UndeadAssetItem_v2.ts","./Filter.ts","./ChoseLandItem.ts","./FarmPage.ts","./FramItem.ts","./FramTool.ts","./ItemShopTool.ts","./LandItem.ts","./PlantISunflowertem.ts","./PlantItem.ts","./PopupConvertSapling.ts","./ShopMarket.ts","./ShopToolsPurchase.ts","./SkillItem.ts","./UIFarmOverlay.ts","./UIItemMaterial.ts","./UIPopupBuyStamina.ts","./UIPopupChangeLog.ts","./UIPopupExtractPowder.ts","./ChoppingBG.ts","./ChoppingHpLabel.ts","./ChoppingManager.ts","./ChoppingMiniGame.ts","./TreeClick.ts","./TreePrefab.ts","./CloudTween.ts","./FishObjectShadow.ts","./FishShadow.ts","./FishingManager.ts","./FishingMap.ts","./UIPopupPullFishing.ts","./GarderingBagItem.ts","./GatherEndPopup.ts","./GatheringLevelTop.ts","./GatheringManager.ts","./GatheringMiniGameUI.ts","./GatheringRoutesMap.ts","./MaterialDrop.ts","./MaterialDropBase.ts","./BlockItem.ts","./HpLossItem.ts","./MiningNewManager.ts","./SetupMiningMap.ts","./TestEffectTool.ts","./ToolItem.ts","./MaterialDropMining.ts","./MiningManager.ts","./MiningRock.ts","./MiningStartPannel.ts","./MysteryPopup.ts","./RoutesItem.ts","./TreasureOpenItem.ts","./UIGarderingBag.ts","./UIGarderingLevel.ts","./UIGarderingLevelFX.ts","./UIPopupEndGatherWarning.ts","./UIPopupMaterialWarning.ts","./ZoomInOut.ts","./MarketItem.ts","./UILEMarket.ts","./UIPopupBuy.ts","./LoginManager.ts","./ResourcesManager.ts","./SkillBookInfo.ts","./SkillBookRequireItem.ts","./SoundController.ts","./UIBugReport.ts","./UIItemInfo.ts","./UINotifyConfirm.ts","./UIPopupManager.ts","./UIPopupNewSeason.ts","./UIPopupSetting.ts","./UIScreenAssets.ts","./UIScreenFram.ts","./UIScreenMain.ts","./UIScreenSkillBook.ts","./UIScreenWeather.ts","./UIThanks.ts","./UIToast.ts","./UITutorial.ts","./UIFloatingLeftPopupBase.ts","./UIItemPlantNew.ts","./UIPopupChooseLand.ts","./UIPopupChoosePlant.ts","./UISetupLandItem.ts","./UImanager.ts","./UserModel.ts","./HeaderShowAnim.ts","./BaseTween.ts","./DropDown.ts","./ListItem.ts","./ListView.ts","./PageNumber.ts","./TutorialSkillLevel.ts","./ButtonAnim.ts","./ConvertJsonObject2.ts","./EditorHelper.ts","./EngineHelper.ts","./IsoViewController.ts","./ParticlePlayHelper.ts","./PopUpBase.ts","./PrefabController.ts","./SimplePool.ts","./SpriteRatioHelper.ts","./Timer.ts","./UIFitWidthHelper.ts","./Utility.ts","./DestroyPaticle.ts","./PlayAnim.ts","./UFXBlur.ts","./UFXDissolve.ts","./UFXFlashLight.ts","./UFXGlowInner.ts","./UFXMosaic.ts","./UFXOutLine.ts","./UFXPointLight.ts","./UFXWaveLight.ts","./MoveUVParticle.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ManaCondense.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./PVE_GameplayControl.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,n,o,i,a,s,l,r,c,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,l=t.Node},function(t){r=t.Utility},function(t){c=t.PVEGameplayControl},function(t){u=t.InGameEventID},function(t){h=t.SkillBase}],execute:function(){var d,k,y,z,m,p,f;a._RF.push({},"c519dwonFtDj6dq5Q5cN3UV","ManaCondense",void 0);var P=s.ccclass,D=s.property;t("ManaCondense",(d=P("ManaCondense"),k=D(l),y=D(l),d((p=e((m=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).delayTimeAttack=0,o(e,"muzzletFront",p,i(e)),o(e,"muzzletBack",f,i(e)),e}n(e,t);var a=e.prototype;return a.Init=function(e,n){t.prototype.Init.call(this,e,n),this.delayTimeAttack=this.skillData.Cooldown,this.root.root.event.on(u.OnDestroy,this.onPlantDestroy,this),this.muzzletBack.parent=c.Instance.getEffParentBack(),this.muzzletBack.setWorldPosition(this.root.getAttackPos().worldPosition),this.muzzletFront.parent=c.Instance.getEffParentFront(),this.muzzletFront.setWorldPosition(this.root.getAttackPos().worldPosition)},a.update=function(t){this.delayTimeAttack>0?this.delayTimeAttack-=t:(this.delayTimeAttack=this.skillData.Cooldown,this.attack())},a.attack=function(){console.log("ManaCondense => Mana gen: "+this.skillData.PercentMana+"%  ---  FakeLE gen :"+this.skillData.FakeLEGenMin+"-"+this.skillData.FakeLEGenMax),this.root.root.event.on(u.AttackAnimEvent,this.endCast,this),this.root.beginNormalAttack()},a.endCast=function(){r.PlayParticle(this.muzzletBack),r.PlayParticle(this.muzzletFront)},a.onPlantDestroy=function(){this.root.root.event.off(u.OnDestroy,this.onPlantDestroy,this),this.muzzletBack.destroy(),this.muzzletFront.destroy()},e}(h)).prototype,"muzzletFront",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=e(m.prototype,"muzzletBack",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=m))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/MapLandInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./PopUpBase.ts"],(function(t){"use strict";var i,o,e,n,a,r,l,s,c,p,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Node,s=t.Label,c=t.tween},function(t){p=t.ConfigApi},function(t){u=t.PopUpBase}],execute:function(){var f,h,y,d,m,b,_,I,g,L,E,v,G,B,P,w,z,M,R,T,F;a._RF.push({},"b7acc5oyrhNf7VGfOW5ySop","MapLandInfo",void 0);var D=r.ccclass,O=r.property;t("MapLandInfo",(f=D("MapLandInfo"),h=O(l),y=O(s),d=O(s),m=O(s),b=O(s),_=O(l),I=O(l),g=O(s),L=O(l),f((G=i((v=function(t){function i(){for(var i,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,e(i,"Info",G,n(i)),e(i,"Location",B,n(i)),e(i,"LandID",P,n(i)),e(i,"tree",w,n(i)),e(i,"m_tree",z,n(i)),e(i,"BG",M,n(i)),e(i,"Empty_Info",R,n(i)),e(i,"Empty_Location",T,n(i)),e(i,"Empty_BG",F,n(i)),i.onGo=void 0,i.location_i=void 0,i.location_j=void 0,i}o(i,t);var a=i.prototype;return a.Init=function(i,o,e,n,a,r){this.onGo=a,this.location_i=e,this.location_j=n;var l=e<=2&&n<=2;if(i){this.Empty_Info.active=!1,this.Info.active=!0,this.Location.string=this.IndexToLocation(e,n),l?(this.BG.setPosition(0,38,0),this.BG.setRotationFromEuler(0,0,180),this.Info.setPosition(0,-140,0)):(this.BG.setPosition(0,11,0),this.BG.setRotationFromEuler(0,0,0),this.Info.setPosition(0,150,0));for(var s=i.totalPlants,p=i.totalMotherTrees,u=i._id,f=r.isoFarmManager.newPlantAdd,h=0;h<f.length;h++)f[h].land_id==u&&(f[h].isMotherTree?p+=f[h].delta:s+=f[h].delta);p<0&&(p=0),s<0&&(s=0),this.tree.string=s.toString()+"/"+i.landRef.capacity.plant,this.m_tree.string=p.toString()+"/"+i.landRef.capacity.motherTree,this.LandID.string="#"+i.landId}else this.Empty_Info.active=!0,this.Info.active=!1,this.Empty_Location.string=this.IndexToLocation(e,n),l?(this.Empty_BG.setPosition(0,30,0),this.Empty_BG.setRotationFromEuler(0,0,180),this.Empty_Info.setPosition(0,-180,0)):(this.Empty_BG.setPosition(0,0,0),this.Empty_BG.setRotationFromEuler(0,0,0),this.Empty_Info.setPosition(0,93,0));this.node.active?c(this.node).to(.1,{position:o}).start():(this.node.setPosition(o),t.prototype.OnShow.call(this))},a.IndexToLocation=function(t,i){return""+p.LOCATIONJ[i]+(t+1)},a.Hide=function(){t.prototype.OnHide.call(this)},a.OnBtnGoClick=function(){this.onGo(this.location_i,this.location_j)},i}(u)).prototype,"Info",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(v.prototype,"Location",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=i(v.prototype,"LandID",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(v.prototype,"tree",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(v.prototype,"m_tree",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(v.prototype,"BG",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(v.prototype,"Empty_Info",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(v.prototype,"Empty_Location",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(v.prototype,"Empty_BG",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=v))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/MarketItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./ResourcesManager.ts"],(function(t){"use strict";var e,i,r,a,n,l,o,s,c,u,p,h,b,y,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized,n=t.createClass},function(t){l=t.cclegacy,o=t._decorator,s=t.Sprite,c=t.Node,u=t.Label,p=t.Button,h=t.Component},function(t){b=t.MaterialRarity,y=t.Utility},function(t){m=t.ResourcesManager}],execute:function(){var d,f,g,I,v,S,L,k,D,C,R,F,z,E,M,w,B,P,N,O,_;l._RF.push({},"61703tSNF9Pcb9ccroAFLP4","MarketItem",void 0);var A=o.ccclass,T=o.property;t("MarketItem",(d=A("MarketItem"),f=T(s),g=T(s),I=T(s),v=T(s),S=T(c),L=T(c),k=T(u),D=T(u),C=T(p),d((z=e((F=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n))||this,r(e,"sprItem",z,a(e)),r(e,"sprRarity",E,a(e)),r(e,"sprIconLE",M,a(e)),r(e,"sprIconFlashSale",w,a(e)),r(e,"uiLock",B,a(e)),r(e,"lbSoldOut",P,a(e)),r(e,"lbLECost",N,a(e)),r(e,"lbPercentSale",O,a(e)),r(e,"btnBuy",_,a(e)),e.itemID="",e.code=-1,e.rarity=b.NONE,e.itemData=void 0,e.isSoldOut=!1,e.available=!1,e}i(e,t);var l=e.prototype;return l.onLoad=function(){this.btnBuy.node.on(p.EventType.CLICK,this.onBuyClicked,this)},l.loadData=function(t){var e=this;this.node.active=!0,this.available=!1,this.itemData=t,this.itemID=t.id,this.code=t.code,this.sprIconFlashSale.node.active=t.isFlashSale,this.lbPercentSale.string=t.isFlashSale?"-"+t.percentSale.toString()+"%":"",this.rarity=y.getRarityWithName(t.getItemRarity());var i=t.name;this.lbLECost.string=Math.round(t.getPrice()).toString();var r="BG_"+y.getNameRarity(this.rarity);m.Instance.LoadMaterialSprite(i,(function(t){e.sprItem.spriteFrame=t}));m.Instance.LoadMaterialRaritySprite(r,(function(t){e.sprRarity.spriteFrame=t}))},l.resetData=function(){this.available=!0,this.sprItem.spriteFrame=null,this.lbPercentSale.string="",this.lbLECost.string="",this.lbSoldOut.active=!1,this.uiLock.active=!1,this.sprIconLE.node.active=!1,this.itemData=null,this.itemID="",this.code=-1,this.node.active=!1},l.activeItem=function(t){var e=this.btnBuy.getComponent(s);e&&(e.grayscale=!t),this.btnBuy.interactable=t,this.lbLECost.node.active=t,this.sprIconLE.node.active=t,this.lbSoldOut.active=!t,this.uiLock.active=!t},l.onBuyClicked=function(){this.node.emit("marketItem:onClicked",this.itemData)},n(e,[{key:"ItemID",get:function(){return this.itemID},set:function(t){this.itemID=t}},{key:"Code",get:function(){return this.code},set:function(t){this.code=t}},{key:"Rarity",get:function(){return this.rarity},set:function(t){this.rarity=t}}]),e}(h)).prototype,"sprItem",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(F.prototype,"sprRarity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(F.prototype,"sprIconLE",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(F.prototype,"sprIconFlashSale",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(F.prototype,"uiLock",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(F.prototype,"lbSoldOut",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(F.prototype,"lbLECost",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(F.prototype,"lbPercentSale",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(F.prototype,"btnBuy",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=F))||R));l._RF.pop()}}}));

System.register("chunks:///_virtual/MaterialDrop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./PrefabController.ts","./Utility.ts","./ResourcesManager.ts"],(function(e){"use strict";var t,i,n,r,o,a,s,l,c,u,h,p,d,f,w,T,y,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Sprite,l=e.MotionStreak,c=e.Node,u=e.color,h=e.tween,p=e.v3,d=e.Component},function(e){f=e.GatheringServicesApi},function(e){w=e.PrefabController,T=e.PrefabEnum},function(e){y=e.Utility},function(e){S=e.ResourcesManager}],execute:function(){var v,C,b,g,m,I,P,M,k,R,A,D,G;o._RF.push({},"8ffa3GdAMNKkbZBqf6AI1X6","MaterialDrop",void 0);var B=a.ccclass,N=a.property;e("MaterialDrop",(v=B("MaterialDrop"),C=N(s),b=N(l),g=N(c),m=N(c),I=N(c),v((k=t((M=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"IconSprite",k,r(t)),n(t,"motionStreak",R,r(t)),n(t,"Rare",A,r(t)),n(t,"Epic",D,r(t)),n(t,"Key",G,r(t)),t.isColect=!1,t.releaseCB=function(e){},t.rewardToken=void 0,t.rewardType=void 0,t.onGetKey=function(){},t.CurrentTween=void 0,t.onTweenToBag=function(){},t.rewardName=void 0,t}i(t,e);var o=t.prototype;return o.Init=function(e,t,i,n,r,o,a,s,l,c){var u=this;void 0===a&&(a=function(e){}),void 0===s&&(s=function(){}),void 0===l&&(l=function(){}),void 0===c&&(c=function(){}),null!=this.CurrentTween&&this.CurrentTween.stop(),this.ChangeLayer(o),this.rewardToken=n,this.releaseCB=a,this.onGetKey=s,this.onTweenToBag=l,this.isColect=!1,this.rewardType=i,this.node.active=!1,this.IconSprite.node.active=!0,this.rewardName=r,this.motionStreak.enabled=!1,y.StopParticle(this.Rare),y.StopParticle(this.Epic),y.StopParticle(this.Key);var h=function(e){u.IconSprite.spriteFrame=e,u.node.active=!0,c()};null==r&&(r="COMMON_BARK"),"SAPLING"==this.rewardType||"MAMA"==this.rewardType?(this.IconSprite.node.setScale(.25,.25,1),S.Instance.LoadPlant(r,h)):(this.IconSprite.node.setScale(.5,.5,1),S.Instance.LoadMaterialSprite(r,h))},o.onLoad=function(){var e=this;this.node.on(c.EventType.TOUCH_START,(function(t){e.OnClick()}),this)},o.OnClick=function(){var e=this;this.isColect||(this.isColect=!0,this.IconSprite.node.active=!0,f.CHOPPING_GET_REWARD(this.rewardToken,(function(t){null!=f.CheckStatus(JSON.parse(t))?"KEY"==e.rewardType?(e.onGetKey(),e.TweenScaleDown()):"SAPLING"==e.rewardType||"MAMA"==e.rewardType?e.TweenScaleDown():e.onTweenToBag():e.isColect=!1}),(function(t){e.isColect=!1})))},o.Release=function(){this.releaseCB(this),w.Instance.ReturnPrefab(T.MaterialDrop,this.node)},o.TweenToBag=function(e,t){var i=this;this.motionStreak.enabled=!0;var n=S.Instance.GetMaterialData(this.rewardName).rarity;0==n?this.motionStreak.color=u(75,255,75,150):1==n?(y.PlayParticle(this.Rare),this.motionStreak.color=u(75,241,255,150)):(y.PlayParticle(this.Epic),this.motionStreak.color=u(255,75,75,150)),null!=this.CurrentTween&&this.CurrentTween.stop(),this.CurrentTween=h(this.node).to(.8,{worldPosition:e},{easing:"cubicIn"}).call((function(){i.Release(),t()})),this.CurrentTween.start()},o.TweenScaleDown=function(){var e=this;null!=this.CurrentTween&&this.CurrentTween.stop(),this.CurrentTween=h(this.node).to(.2,{scale:p(0,0,1)},{easing:"cubicIn"}).call((function(){e.Release()})),this.CurrentTween.start()},o.ChangeLayer=function(e){this.node.layer=e;for(var t=this.node.children,i=0;i<t.length;i++)t[i].layer=e},t}(d)).prototype,"IconSprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(M.prototype,"motionStreak",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(M.prototype,"Rare",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(M.prototype,"Epic",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(M.prototype,"Key",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=M))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/MaterialDropBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./PrefabController.ts","./Utility.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(t){"use strict";var e,i,n,r,a,o,s,l,c,h,u,m,d,f,p,v,y,w,T,S,C,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.MotionStreak,l=t.Animation,c=t.Sprite,h=t.Node,u=t.color,m=t.randomRangeInt,d=t.view,f=t.tween,p=t.v3,v=t.Component},function(t){y=t.GatheringServicesApi},function(t){w=t.PrefabController,T=t.PrefabEnum},function(t){S=t.Utility},function(t){C=t.ResourcesManager},function(t){I=t.UIPopupManager}],execute:function(){var g,b,k,F,R,B,P,D,A,M,N;a._RF.push({},"c6e2dtWREBOibXq/LsczlEU","MaterialDropBase",void 0);var L=o.ccclass,O=o.property,z=["It takes talent to fish up this trash. Congrats!","Why am I seeing myself in you, dear Trash?","Who would put this in here?!","Nevermind... I'm saving the Earth anyway.","What did you expect? A shiny diamond?","Not again... Just my luck, lol.","This is a weird fish... Huh?"];t("MaterialDropBase",(g=L("MaterialDropBase"),b=O(s),k=O([l]),F=O([c]),R=O([h]),g((D=e((P=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).rewardToken=void 0,e.rewardType=void 0,e.rewardName=void 0,e.showItemTime=void 0,e.indicatorDestroyTime=void 0,e.BlinkDuration=200,e.timeOut=0,e.isColect=!1,e.targetPos=void 0,e.onClaimCallback=function(){},e.onGetKey=function(){},e.onTweenToBag=function(){},e.releaseCB=function(t){},e.IconSprite=void 0,e.curAnim=void 0,e.curItem=void 0,e.CurrentTween=void 0,e.curRarity=void 0,n(e,"motionStreak",D,r(e)),n(e,"materialAnim",A,r(e)),n(e,"materialSprite",M,r(e)),n(e,"materialItems",N,r(e)),e.TrailColor=[u("#FFFFFF00"),u("#FFFFFF00"),u("#4BF1FF96"),u("#FFF63A96"),u("#FF86F596")],e}i(e,t);var a=e.prototype;return a.onLoad=function(){var t=this;this.materialSprite.forEach((function(e){return e.node.on(h.EventType.TOUCH_START,t.OnClick,t)}))},a.Init=function(t,e,i){var n=this;void 0===e&&(e=1),void 0===i&&(i=0);var r=function(t){n.IconSprite.node.active=!0,n.IconSprite.spriteFrame=t};this.node.active=!0,this.rewardName=t;var a=C.Instance.GetMaterialData(this.rewardName);return this.curRarity=0,null!=a&&(this.curRarity=a.rarity||0),0==this.curRarity&&(this.curRarity+=i),this.setRarity(this.curRarity),t.includes("sapling")||t.includes("mama")?(this.node.setScale(e,e,1),C.Instance.LoadPlant(t,r)):(this.node.setScale(1.5*e,1.5*e,1),C.Instance.LoadMaterialSprite(t,r)),this.motionStreak.enabled=!1,this.isColect=!1,this},a.setRarity=function(t){this.materialAnim.forEach((function(t){return t.node.active=!1})),this.IconSprite=this.materialSprite[t],this.curAnim=this.materialAnim[t],this.curItem=this.materialItems[t],this.IconSprite.node.active=!1},a.OnClick=function(){if(!this.isColect){if(clearTimeout(this.timeOut),this.isColect=!0,this.IconSprite.node.active=!0,"TRASH"==this.rewardName){this.TweenScaleDown();var t=z[m(0,z.length)];return I.Instance.ShowToast("Information",t,2),this}"KEY"==this.rewardName?(this.onGetKey(),this.TweenScaleDown()):null!=this.onClaimCallback&&this.onClaimCallback()}},a.SetTime=function(t,e){return this.showItemTime=1e3*t+this.BlinkDuration,this.indicatorDestroyTime=1e3*e,this.Blink(),this},a.onVerifyServerCallback=function(t){null!=y.CheckStatus(JSON.parse(t))?this.rewardName.includes("sapling")||this.rewardName.includes("mama")?this.TweenScaleDown():this.onTweenToBag():(this.Blink(),this.isColect=!1)},a.onVerifyServerFail=function(){this.Blink(),this.isColect=!1},a.setTweenToTravelBagCallback=function(t){return this.onTweenToBag=t,this},a.setOnGetKeyCallback=function(t){return this.onGetKey=t,this},a.setReleaseCallback=function(t){return this.releaseCB=t,this},a.setClaimCallback=function(t){return this.onClaimCallback=t,this},a.SetPosition=function(t,e){var i=d.getDesignResolutionSize();return this.node.setWorldPosition(i.width/2,i.height/2,0),this.curItem.setWorldPosition(t),this.targetPos=e,this},a.TweenToBag=function(t,e){this.motionStreak.node.parent=this.curItem,this.motionStreak.node.setPosition(0,0,0),this.motionStreak.enabled=!0,this.motionStreak.color=this.TrailColor[this.curRarity],null!=this.CurrentTween&&this.CurrentTween.stop(),this.CurrentTween=f(this.curItem).to(.8,{worldPosition:t},{easing:"cubicIn"}).call(function(){this.Release(this),e()}.bind(this)),this.CurrentTween.start()},a.ChangeLayer=function(t){this._changeLayer(this.node,t)},a._changeLayer=function(t,e){if(t.layer=e,!(t.children.length<=0))for(var i=0;i<t.children.length;i++)this._changeLayer(t.children[i],e)},a.TweenScaleDown=function(){var t=this;null!=this.CurrentTween&&this.CurrentTween.stop(),this.CurrentTween=f(this.curItem).to(.2,{scale:p(0,0,1)},{easing:"cubicIn"}).call((function(){t.Release()})),this.CurrentTween.start()},a.StartAnim=function(){this.node.active=!0,this.curAnim.node.active=!0,S.PlayParticle(this.curItem),this.curAnim.play(),f(this.curItem).to(.75,{worldPosition:this.targetPos}).start()},a.StartAnim2=function(){this.node.active=!0,this.curAnim.node.active=!0,this.curItem.setScale(1,1,1),S.PlayParticle(this.curItem)},a.Release=function(){clearTimeout(this.timeOut),null!=this.releaseCB&&this.releaseCB(this),w.Instance.ReturnPrefab(T.MaterialDrop,this.node)},a.Blink=function(){var t=this;!function e(){if(t.showItemTime-=t.BlinkDuration,t.showItemTime<0)t.Release();else{if(null==t.IconSprite)return void t.Release();t.showItemTime<=t.indicatorDestroyTime&&(t.IconSprite.node.active=!t.IconSprite.node.active),t.timeOut=setTimeout(e,t.BlinkDuration)}}()},e}(v)).prototype,"motionStreak",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(P.prototype,"materialAnim",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=e(P.prototype,"materialSprite",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=e(P.prototype,"materialItems",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=P))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/MaterialDropMining.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./PrefabController.ts","./Utility.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(e){"use strict";var t,i,n,o,r,a,s,l,c,u,h,p,d,f,m,w,T,y,g,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Sprite,l=e.MotionStreak,c=e.Node,u=e.randomRangeInt,h=e.color,p=e.tween,d=e.v3,f=e.Component},function(e){m=e.GatheringServicesApi},function(e){w=e.PrefabController,T=e.PrefabEnum},function(e){y=e.Utility},function(e){g=e.ResourcesManager},function(e){v=e.UIPopupManager}],execute:function(){var S,C,I,b,k,D,B,M,P,R,K,E,G;r._RF.push({},"1e5da2WqnxEoKRO0fjhywIo","MaterialDropMining",void 0);var O=a.ccclass,A=a.property,_=["It takes talent to fish up this trash. Congrats!","Why am I seeing myself in you, dear Trash?","Who would put this in here?!","Nevermind... I'm saving the Earth anyway.","What did you expect? A shiny diamond?","Not again... Just my luck, lol.","This is a weird fish... Huh?"];e("MaterialDropMining",(S=O("MaterialDropMining"),C=A(s),I=A(l),b=A(c),k=A(c),D=A(c),S((P=t((M=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"IconSprite",P,o(t)),n(t,"motionStreak",R,o(t)),n(t,"Rare",K,o(t)),n(t,"Epic",E,o(t)),n(t,"Key",G,o(t)),t.showItemTime=void 0,t.indicatorDestroyTime=void 0,t.isColect=!1,t.releaseCB=function(e){},t.guid=void 0,t.rewardname=void 0,t.timeOut=0,t.BlinkDuration=200,t.onGetKey=function(){},t.CurrentTween=void 0,t.onTweenToBag=function(){},t.type=void 0,t.onColect=function(e){},t}i(t,e);var r=t.prototype;return r.Init=function(e,t,i,n,o,r,a,s,l){var c=this;void 0===o&&(o=function(e){}),void 0===r&&(r=function(){}),void 0===a&&(a=function(){}),void 0===l&&(l=function(e){}),null!=this.CurrentTween&&this.CurrentTween.stop(),this.motionStreak.enabled=!1,y.StopParticle(this.Rare),y.StopParticle(this.Epic),y.StopParticle(this.Key),this.type=s,this.guid=e,this.releaseCB=o,this.onGetKey=r,this.onTweenToBag=a,this.onColect=l,this.showItemTime=1e3*i+this.BlinkDuration,this.indicatorDestroyTime=1e3*n,this.isColect=!1,this.rewardname=t,this.node.active=!1,this.IconSprite.node.active=!0,this.node.setScale(.2,.2,1);g.Instance.LoadMaterialSprite(this.rewardname,function(e){c.IconSprite.spriteFrame=e,c.node.active=!0,p(c.node).to(.25,{scale:d(1,1,1)}).call(function(){"KEY"==this.rewardname&&(this.Key.active=!0,y.PlayParticle(this.Key))}.bind(c)).start()}.bind(this)),this.Blink()},r.Blink=function(){var e=this;!function t(){e.showItemTime-=e.BlinkDuration,e.showItemTime<0?e.Release():(e.showItemTime<=e.indicatorDestroyTime&&(e.IconSprite.node.active=!e.IconSprite.node.active),e.timeOut=setTimeout(t,e.BlinkDuration))}()},r.onLoad=function(){var e=this;this.node.on(c.EventType.TOUCH_START,(function(t){e.OnClick()}),this)},r.OnClick=function(){var e=this;if(!this.isColect)if(this.isColect=!0,clearTimeout(this.timeOut),this.IconSprite.node.active=!0,1==this.type)m.MINING_ADD_TRAVEL_BAG(this.rewardname,this.guid,(function(t){null!=m.CheckStatus(JSON.parse(t))?(e.onColect(e.rewardname),"KEY"==e.rewardname?(e.onGetKey(),e.TweenScaleDown()):e.onTweenToBag()):(e.isColect=!1,e.Blink())}),(function(t){e.isColect=!1,e.Blink()}));else if(2==this.type)if("TRASH"==this.rewardname){this.TweenScaleDown();var t=_[u(0,_.length)];v.Instance.ShowToast("Information",t,2)}else"KEY"==this.rewardname?(this.onGetKey(),this.TweenScaleDown()):m.Fishing_Catch(this.rewardname,this.guid,(function(t){null!=m.CheckStatus(JSON.parse(t))?"KEY"==e.rewardname?(e.onGetKey(),e.TweenScaleDown()):e.onTweenToBag():(e.isColect=!1,e.Blink())}),(function(t){e.isColect=!1,e.Blink()}))},r.Release=function(){clearTimeout(this.timeOut),this.releaseCB(this),w.Instance.ReturnPrefab(T.MaterialDropMining,this.node)},r.TweenToBag=function(e,t){var i=this;this.motionStreak.enabled=!0;var n=g.Instance.GetMaterialData(this.rewardname).rarity;0==n?this.motionStreak.color=h(75,255,75,150):1==n?(y.PlayParticle(this.Rare),this.motionStreak.color=h(75,241,255,150)):(y.PlayParticle(this.Epic),this.motionStreak.color=h(255,75,75,150)),null!=this.CurrentTween&&this.CurrentTween.stop(),this.CurrentTween=p(this.node).to(.8,{worldPosition:e},{easing:"cubicIn"}).call((function(){i.Release(),t()})),this.CurrentTween.start()},r.TweenScaleDown=function(){var e=this;null!=this.CurrentTween&&this.CurrentTween.stop(),this.CurrentTween=p(this.node).to(.2,{scale:d(0,0,1)},{easing:"cubicIn"}).call((function(){e.Release()})),this.CurrentTween.start()},t}(f)).prototype,"IconSprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(M.prototype,"motionStreak",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(M.prototype,"Rare",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(M.prototype,"Epic",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(M.prototype,"Key",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=M))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/Meltdown.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./AttackPassiveWithCountdown.ts"],(function(t){"use strict";var a,e,n,s,o;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){s=t.AttackType},function(t){o=t.AttackPassiveWithCountdown}],execute:function(){var c;e._RF.push({},"85d5c7d33JNBpPH1Xf/4WvY","Meltdown",void 0);var i=n.ccclass;n.property,t("Meltdown",i("Meltdown")(c=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.addAttackData=function(t,a,e){t==s.NormalAttack&&(a.AddEffects(this.skillData.EffectData),a.AddDamage(this.skillData.damageType,e.root.data.statsData.getMaxHp()*(this.skillData.PercentMaxHpAsDmg/100)))},e}(o))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/MiningGameData.ts",["cc","./ConvertJsonObject2.ts","./MiningMapData.ts","./UserGatherLevelData.ts"],(function(t){"use strict";var a,e,i,s,n,r,o;return{setters:[function(t){a=t.cclegacy,e=t._decorator},function(t){i=t.convertToUnstableNumber,s=t.convertToString,n=t.convertToArray},function(t){r=t.default},function(t){o=t.default}],execute:function(){var h;a._RF.push({},"7b0e8ZJkYtPgqy2LtG2DB1S","MiningGameData",void 0);var u=e.ccclass,c=(e.property,t("ToolData",function(){function t(t){this.id=0,this.name="",this.damage=0,this.stamina=0,this.aoeDamage=0,this.requireLevel=0,this.UpdateData(t)}return t.prototype.UpdateData=function(t){this.id=i(t.id),this.name=s(t.name),this.damage=i(t.damage),this.aoeDamage=i(t.aoeDamage),this.requireLevel=i(t.requireLevel),this.stamina=i(t.stamina)},t}()));t("default",u("MiningGameData")(h=function(){function t(t){this.stamina=0,this.userGatherLevel=void 0,this.mapData=[],this.tools=[],this.size=0,this.maxSize=0,this.UpdateData(t)}var a=t.prototype;return a.UpdateData=function(t){this.stamina=i(t.stamina),this.userGatherLevel=new o(t.userGatherLevels),this.size=i(t.size),this.maxSize=i(t.maxSize);for(var a=n(t.mapData),e=0;e<a.length;e++){var s=a[e];if(s){var r={layerID:e,mapData:this.getMapData(s)};this.mapData.push(r)}}for(var h=n(t.tools),u=0;u<h.length;u++){var m=h[u];m&&this.tools.push(new c(m))}},a.getMapData=function(t){for(var a=[],e=0;e<t.length;e++){var i=t[e];a.push(new r(i))}return a},t}())||h);a._RF.pop()}}}));

System.register("chunks:///_virtual/MiningManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./UserModel.ts","./PrefabController.ts","./Utility.ts","./ResourcesManager.ts","./SoundController.ts","./UIPopupManager.ts","./UITutorial.ts","./ChoppingHpLabel.ts","./GatheringManager.ts","./GatheringMiniGameUI.ts","./MiningRock.ts","./MiningStartPannel.ts"],(function(e){"use strict";var t,i,n,a,o,r,s,l,c,u,h,p,g,m,d,f,S,M,I,b,k,w,G,T,R,v,y,_,L,C,D,U,P,B,H,N,O,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.sp,l=e.UITransform,c=e.Collider2D,u=e.Node,h=e.Prefab,p=e.Label,g=e.LabelOutline,m=e.Contact2DType,d=e.tween,f=e.v3,S=e.color,M=e.instantiate,I=e.randomRangeInt,b=e.Component,k=e.randomRange,w=e.Vec3,G=e.Layers},function(e){T=e.GatheringServicesApi},function(e){R=e.UserModel},function(e){v=e.PrefabController,y=e.PrefabEnum},function(e){_=e.Utility},function(e){L=e.ResourcesManager},function(e){C=e.SoundController,D=e.EnumSound},function(e){U=e.UIPopupManager},function(e){P=e.UITutorial},function(e){B=e.ChoppingHpLabel},function(e){H=e.GatheringManager},function(e){N=e.GatheringMiniGameUI},function(e){O=e.MiningRock},function(e){A=e.MiningStartPannel}],execute:function(){var E,z,j,F,x,W,V,J,K,Z,q,Q,X,Y,$,ee,te,ie,ne,ae,oe,re,se,le,ce,ue,he,pe,ge,me,de,fe,Se,Me,Ie;o._RF.push({},"8c5ce90tfNISrxIaZj0TwTZ","MiningManager",void 0);var be=r.ccclass,ke=r.property;e("MiningManager",(E=be("MiningManager"),z=ke(N),j=ke(A),F=ke(s.Skeleton),x=ke(l),W=ke(c),V=ke(u),J=ke(l),K=ke(l),Z=ke(h),q=ke(h),Q=ke(h),X=ke(h),Y=ke(p),$=ke(g),ee=ke(P),te=ke(B),E((ae=t((ne=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"gatheringMiniGameUI",ae,a(t)),n(t,"miningStartPannel",oe,a(t)),n(t,"mining_crow",re,a(t)),n(t,"Line",se,a(t)),n(t,"HookCollider2D",le,a(t)),n(t,"HookRockParent",ce,a(t)),t.lineTweenRotate=void 0,t.RotateSpeed=100,t.RotateAngle=85,t.RotatetDirection=-1,t._isStartGame=!1,t._isFire=!1,t._isBack=!1,t.fireSpeed=600,t.backSpeed=0,t.json=void 0,n(t,"RockParent",ue,a(t)),n(t,"MaterialDropMiningParent",he,a(t)),n(t,"RockL",pe,a(t)),n(t,"RockM",ge,a(t)),n(t,"RockS",me,a(t)),n(t,"RockT",de,a(t)),t.currentRockHook=null,n(t,"TimeLabel",fe,a(t)),n(t,"TimeLabelOutline",Se,a(t)),t.validUntil=0,t.timeUpdateTimeOut=0,t.isOutOfTime=!1,t.isChangeTimeColor=!1,t.Mining_Shootjson=void 0,t.timeWarning=0,t.MaterialDrops=[],n(t,"uITutorial",Me,a(t)),n(t,"choppingHpLabel",Ie,a(t)),t.CompleteListener=function(e){"dynamite"==t.mining_crow.animation&&t.mining_crow.setAnimation(0,"idle",!0)},t.tweenHp1=void 0,t.tweenHp2=void 0,t}i(t,e);var o=t.prototype;return o.start=function(){C.Instance.SetBgMusic(D.BG_Mining),this.mining_crow.setCompleteListener(this.CompleteListener),this.mining_crow.setAnimation(0,"idle",!0),this.HookCollider2D.on(m.BEGIN_CONTACT,this.onBeginContact,this,!1),this.GetMap()},o.update=function(e){this._isFire&&(this.Line.height+=e*(this._isBack?-this.backSpeed:this.fireSpeed),this.Line.height<=40&&(this.Line.height=40,this._isFire=!1,this._isBack=!1,this.startLineTween(),this.mining_crow.setAnimation(0,"idle",!0),this.HookDone()),this.Line.height>2500&&this.BoundHit())},o.OnBGClick=function(){var e=this;this._isStartGame&&(this.isOutOfTime?U.Instance.ShowToast("Error","Mining map is timeout!",0):this._isFire||(this.mining_crow.setAnimation(0,"dynamite",!1),this.stopLineTween(),T.Mining_Shoot((function(t){var i=T.CheckStatus(JSON.parse(t));if(null!=i){if(1010==i.status)return void U.Instance.ShowUINotifyConfirm("Insufficient Stamina",L.Instance.GetErrorMessage(1010),function(){this.BackToSceneGathering()}.bind(e),!1,!1,0,!0);e.Mining_Shootjson=i,e._isFire=!0,e._isBack=!1,R.userGatherData.currentStamina=i.data.stamina,e.gatheringMiniGameUI.UpdateStaminaLabel()}else e.startLineTween()}),(function(t){e.startLineTween()}))))},o.OnBtnPlayClick=function(){var e=this;T.MINING_START((function(t){var i=JSON.parse(t);0==i.status?(e.validUntil=i.data.validUntil,e.miningStartPannel.OnBtnPlay(),e._isStartGame=!0,e.isChangeTimeColor=!1,e.startLineTween(),e.StartCoundDown()):U.Instance.ShowToast("Error",L.Instance.GetErrorMessage(i.status),0)}),(function(e){}))},o.startLineTween=function(){var e=this,t=this.Line.node.eulerAngles.z,i=this.RotateAngle*this.RotatetDirection,n=Math.abs(t-i)/this.RotateSpeed;this.lineTweenRotate=d(this.Line.node).to(n,{eulerAngles:f(0,0,i)}).call((function(){e.RotatetDirection*=-1,e.startLineTween()})),this.lineTweenRotate.start()},o.stopLineTween=function(){null!=this.lineTweenRotate&&this.lineTweenRotate.stop()},o.StartCoundDown=function(){var e=this,t=Math.floor((this.validUntil-_.GetTimeNow())/1e3);t<0?(this.gatheringMiniGameUI.skipGameBtnstate=2,this.isOutOfTime=!0,t=0):this.timeUpdateTimeOut=setTimeout((function(){e.StartCoundDown()}),1e3),!this.isChangeTimeColor&&t<=this.timeWarning&&(this.isChangeTimeColor=!0,this.TimeLabel.color=S(255,0,0,255),this.TimeLabelOutline.color=S(255,255,255,255)),this.TimeLabel.string=t.toString()},o.onBeginContact=function(e,t,i){this._isFire&&!this._isBack&&(8==t.group?this.BoundHit():4==t.group&&this.RockHit(t))},o.BoundHit=function(){this.mining_crow.setAnimation(0,"hook",!0),this.backSpeed=1200,this._isBack=!0},o.RockHit=function(e){var t=e.node.getComponent(O);if(R.userGatherData.MINING_level.level<4&&t.node.name.includes("Rock_T_0"))U.Instance.ShowToast("Error","Upgrade Level to exploite treasure!",0),this.BoundHit(),this.gatheringMiniGameUI.curItem=this.gatheringMiniGameUI.curItem-1,_.AsyncDelay(100).then((function(){t.node.destroy()}));else{t.node.setParent(this.HookRockParent),t.node.setPosition(0,0,0),t.node.setRotationFromEuler(0,0,0),t.node.setWorldScale(1,1,1),this.currentRockHook=t;var i=1;R.userGatherData.MINING_level.level>=8&&(i=2),"ROCK"==t.json.type?this.backSpeed=100*i:"MINERAL"==t.json.type?this.backSpeed=300*i:"GEM"==t.json.type?this.backSpeed=600*i:"TREASURE"==t.json.type&&(this.backSpeed=300*i),this.mining_crow.setAnimation(0,"hook",!0),this._isBack=!0,C.Instance.PlaySoundLoop(D.Minning_pulling,.5)}},o.HookDone=function(){null!=this.currentRockHook&&(C.Instance.StopSoundLoop(),T.MINING_GET_REWARD(this.json.mapId,this.currentRockHook.json.id,this.Mining_Shootjson.data.token,function(e){var t=this,i=JSON.parse(e);if(0==i.status){R.userGatherData.MINING_level.exp=i.data.player.exp,R.userGatherData.MINING_level.level=i.data.player.level,this.gatheringMiniGameUI.gatheringLevelTop.UpdateView(1);for(var n=this.MaterialDropMiningParent.node.getWorldPosition(),a=i.data.rewards.length,o=function(){var e=i.data.rewards[r],a=H.Instance.SpawnMaterial();a.node.setParent(t.MaterialDropMiningParent.node);var o=t.MaterialDropMiningParent.width/2;o=k(0,1)>.5?k(-o,-150):k(150,o);var s=new w(o+n.x,k(40,65)+n.y,0),l=s.clone(),c=e.name,u=e.guid;a.Init(e.name),a.SetPosition(s,l),a.setOnGetKeyCallback(t.OnGetKey),a.setClaimCallback((function(){T.MINING_ADD_TRAVEL_BAG(c,u,a.onVerifyServerCallback.bind(a),null),console.log("claim")})),a.setReleaseCallback(t.ReleaseMaterialDrop.bind(t)),a.setTweenToTravelBagCallback((function(){t.gatheringMiniGameUI.OpenBag(),C.Instance.PlaySound(D.UI_Item_Slide_to_Bag),a.TweenToBag(t.gatheringMiniGameUI.BagSprite.node.worldPosition,(function(){t.gatheringMiniGameUI.CloseBag(!0)}))})),a.ChangeLayer(G.Enum.UI_2D),a.StartAnim(),t.MaterialDrops.push(a)},r=0;r<a;r++)o();a<=0?this.spawnNothingFx():C.Instance.PlaySound(D.UI_Item_Appear)}else U.Instance.ShowToast("Error",L.Instance.GetErrorMessage(i.status),0)}.bind(this),function(e){}.bind(this)),this.gatheringMiniGameUI.curItem=this.gatheringMiniGameUI.curItem-1,this.currentRockHook.node.destroy(),this.currentRockHook=null)},o.GetMap=function(){var e=this;T.Mining_GetMap(R.curWorldMapData.playingMiniGameId,function(t){var i=JSON.parse(t);0==i.status?e.InitMapData(i.data):(U.Instance.ShowToast("Error",L.Instance.GetErrorMessage(i.status),0,!1),e.BackToSceneGathering())}.bind(this),function(t){e.BackToSceneGathering()}.bind(this))},o.InitMapData=function(e){var t=this;this.json=e;var i=e.size;this.timeWarning=0==i?10:1==i?30:45;var n=e.objects.length;this.gatheringMiniGameUI.Init(1,n,(function(){t.OnBtnSkip()})),R.userGatherData.currentStamina=e.stamina,this.gatheringMiniGameUI.UpdateStaminaLabel(),this.miningStartPannel.Show(e.actionStamina);for(var a=-this.RockParent.height/100,o=this.RockParent.width/100,r=0;r<n;r++){var s=e.objects[r],l=null;if("ROCK"==s.type?l=M(this.RockL[I(0,this.RockL.length)]):"MINERAL"==s.type?l=M(this.RockM[I(0,this.RockM.length)]):"GEM"==s.type?l=M(this.RockS[I(0,this.RockS.length)]):"TREASURE"==s.type&&(l=M(this.RockT[I(0,this.RockT.length)])),null!=l)l.getComponent(O).Init(s),l.setParent(this.RockParent.node),l.setPosition(s.x*o,s.y*a,0),l.active=!0;else console.error("Can not find rock type: "+s.type)}},o.OnBtnSkip=function(){0==this.gatheringMiniGameUI.skipGameBtnstate?H.Instance.ShowMaterialWarning(50,"Next mini game fee:",this.ValidateSkipGameServer.bind(this)):2==this.gatheringMiniGameUI.skipGameBtnstate?this.ValidateFinishGameServer():H.Instance.ShowMaterialWarning(-1,"Skip This Mini Game",this.ValidateFinishGameServer.bind(this))},o.ValidateFinishGameServer=function(){var e=this;T.MINING_FINISH(function(t){var i=T.CheckStatus(JSON.parse(t));null!=i&&(R.curWorldMapData=i.data.route,e.BackToSceneGathering())}.bind(this),(function(e){}))},o.ValidateSkipGameServer=function(){var e=this;T.MINING_SKIP(function(t){var i=T.CheckStatus(JSON.parse(t));null!=i&&(R.curWorldMapData=i.data.route,R.userGatherData.currentStamina=i.data.stamina,e.BackToSceneGathering())}.bind(this),(function(e){}))},o.BackToSceneGathering=function(){for(clearTimeout(this.timeUpdateTimeOut),C.Instance.SetBgMusic(D.BG_Chopping);this.MaterialDrops.length>0;)this.MaterialDrops[0].Release();v.Instance.ReturnAllPrefab(y.Bag_effect),U.Instance.HideToast(),null!=this.currentRockHook&&C.Instance.StopSoundLoop(),U.Instance.LoadScene("1.Gathering")},o.ReleaseMaterialDrop=function(e){var t=this.MaterialDrops.findIndex((function(t){return t.guid==e.guid}));t>-1&&this.MaterialDrops.splice(t,1)},o.OnBtnUITutorial=function(){this.uITutorial.Show(3)},o.spawnNothingFx=function(){var e=this.choppingHpLabel;e.node.active=!0,e.node.setPosition(0,-120,0),e.uIOpacity.opacity=255,this.tweenHp1&&this.tweenHp1.stop(),this.tweenHp2&&this.tweenHp1.stop(),this.tweenHp1=d(e.node).to(.5,{position:f(0,-50,0)},{easing:"cubicOut"}).call((function(){e.node.active=!1})),this.tweenHp1.start(),this.tweenHp2=d(e.uIOpacity).delay(.3).to(.2,{opacity:0}),this.tweenHp2.start()},t}(b)).prototype,"gatheringMiniGameUI",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(ne.prototype,"miningStartPannel",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(ne.prototype,"mining_crow",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(ne.prototype,"Line",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(ne.prototype,"HookCollider2D",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(ne.prototype,"HookRockParent",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(ne.prototype,"RockParent",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(ne.prototype,"MaterialDropMiningParent",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(ne.prototype,"RockL",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ge=t(ne.prototype,"RockM",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),me=t(ne.prototype,"RockS",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),de=t(ne.prototype,"RockT",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fe=t(ne.prototype,"TimeLabel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=t(ne.prototype,"TimeLabelOutline",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=t(ne.prototype,"uITutorial",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=t(ne.prototype,"choppingHpLabel",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=ne))||ie));o._RF.pop()}}}));

System.register("chunks:///_virtual/MiningMapData.ts",["cc","./ConvertJsonObject2.ts"],(function(t){"use strict";var i,n,a,e,s,o;return{setters:[function(t){i=t.cclegacy,n=t._decorator,a=t.Vec2},function(t){e=t.convertToUnstableNumber,s=t.convertToString,o=t.convertToArray}],execute:function(){var c;i._RF.push({},"6e16aGtfFBJ+p05aaEQG1Kk","MiningMapData",void 0);var r=n.ccclass;n.property,t("default",r("MiningMapData")(c=function(){function t(t){this.guid="",this.id=0,this.name="",this.hp=0,this.exp=0,this.maxHP=0,this.location=a.ZERO,this.UpdateData(t)}return t.prototype.UpdateData=function(t){this.id=e(t.id),this.guid=s(t.guid),this.name=s(t.name),this.exp=e(t.exp),this.hp=e(t.hp),this.maxHP=e(t.maxHP);var i=o(t.position);2==i.length&&(this.location=new a(i[0],i[1]))},t}())||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/MiningNewManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IsoViewController.ts","./UIPopupManager.ts","./GatheringManager.ts","./GatheringMiniGameUI.ts","./ToolItem.ts","./BlockItem.ts","./Utility.ts","./GatheringServicesApi.ts","./UserModel.ts","./ResourcesManager.ts","./MiningGameData.ts","./MiningResultData.ts","./SoundController.ts","./UITutorial.ts","./PrefabController.ts","./HpLossItem.ts"],(function(e){"use strict";var i,t,a,n,o,r,l,s,c,u,h,p,m,d,f,g,b,I,v,k,D,T,M,x,P,y,H,L,w,S,G,B,_,C,A,U,E;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.Camera,s=e.ToggleContainer,c=e.Node,u=e.TiledMap,h=e.sp,p=e.instantiate,m=e.Vec3,d=e.randomRangeInt,f=e.randomRange,g=e.Layers,b=e.Component,I=e.log},function(e){v=e.IsoViewController},function(e){k=e.UIPopupManager},function(e){D=e.GatheringManager},function(e){T=e.GatheringMiniGameUI},function(e){M=e.ToolItem},function(e){x=e.BlockItem},function(e){P=e.MAP_SIZE,y=e.Utility},function(e){H=e.GatheringServicesApi},function(e){L=e.UserModel},function(e){w=e.ResourcesManager},function(e){S=e.default},function(e){G=e.default},function(e){B=e.SoundController,_=e.EnumSound},function(e){C=e.UITutorial},function(e){A=e.PrefabController,U=e.PrefabEnum},function(e){E=e.HpLossItem}],execute:function(){var R,z,F,N,V,O,K,W,X,q,J,Z,j,Q,Y,$,ee,ie,te,ae,ne,oe,re,le,se,ce,ue,he,pe,me,de,fe,ge,be,Ie,ve,ke,De,Te,Me,xe,Pe,ye;e("ToolType",void 0),o._RF.push({},"2191faQmNNGB6Hiq4sPvLx2","MiningNewManager",void 0);var He,Le=r.ccclass,we=r.property;!function(e){e[e.PICK_AXE=0]="PICK_AXE",e[e.HAMMER=1]="HAMMER",e[e.DRILL=2]="DRILL"}(He||(He=e("ToolType",{})));e("default",(R=Le("MiningNewManager"),z=we(l),F=we(l),N=we(v),V=we(s),O=we(c),K=we(u),W=we(c),X=we(c),q=we(c),J=we(c),Z=we(h.Skeleton),j=we(c),Q=we(h.Skeleton),Y=we(c),$=we(c),ee=we(h.Skeleton),ie=we(c),te=we(C),ae=we(T),ne=we(c),R((le=i((re=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return i=e.call.apply(e,[this].concat(o))||this,a(i,"Camera",le,n(i)),a(i,"UICamera",se,n(i)),a(i,"isoViewController",ce,n(i)),a(i,"togsTool",ue,n(i)),a(i,"ZoomView",he,n(i)),a(i,"groundTile",pe,n(i)),a(i,"EffectTool",me,n(i)),a(i,"MapParent",de,n(i)),a(i,"LayerPrefab",fe,n(i)),a(i,"BlockPrefab",ge,n(i)),a(i,"ToolPickAxe",be,n(i)),a(i,"particlePickAxe",Ie,n(i)),a(i,"ToolHammer",ve,n(i)),a(i,"particleHammerFront",ke,n(i)),a(i,"particleHammerBack",De,n(i)),a(i,"ToolDrill",Te,n(i)),a(i,"particleDrill",Me,n(i)),a(i,"uiTutorial",xe,n(i)),a(i,"gatheringMiniGameUI",Pe,n(i)),a(i,"itemHpLoss",ye,n(i)),i.poolItem=[],i.layerMap=[],i.blockItems=[],i.maxSize=0,i.countBlock=0,i.currentLayerID=0,i.currentToolID=He.PICK_AXE,i.tools=[],i.mapData=[],i.MaterialDrops=[],i.isFinishDigging=!1,i}t(i,e);var o=i.prototype;return o.onLoad=function(){},o.start=function(){B.Instance.SetBgMusic(_.BG_Mining),this.ToolPickAxe.node.active=!1,this.particlePickAxe.active=!1,this.ToolPickAxe.animation="Hold",this.ToolHammer.node.active=!1,this.particleHammerFront.active=!1,this.particleHammerBack.active=!1,this.ToolHammer.animation="Hold",this.ToolDrill.node.active=!1,this.particleDrill.active=!1,this.ToolDrill.animation="Hold",this.isFinishDigging=!0,this.countBlock=0;for(var e=this.togsTool.toggleItems,i=0;i<e.length;i++){e[i].node.on("toggle",this.onSelectedTool,this)}this.isoViewController.Init(500,-500,500,-500),this.getMap()},o.getFakeDataMap=function(){return{stamina:559,userGatherLevels:{exp:1395,level:4,type:"MINING"},mapData:[[{guid:"17bf78ec-45fb-46d0-9014-7fb9f46e0e7d",id:3,name:"magic_mineral",hp:100,exp:2,maxHP:100,position:[3,0]},{guid:"31a4289e-163d-44e1-a8ab-ab88600a8ac2",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[4,0]},{guid:"6e5c2eb0-4712-4a8e-9e82-5a36e58f7f67",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[4,1]},{guid:"d47dd850-da16-4fe0-94d1-4da16672115d",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[4,2]},{guid:"2811e9e0-2d42-4082-8a11-3e1d82ae0c4b",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[5,0]},{guid:"9e8c1da4-1ba6-4f02-8b3a-384124d51b29",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[5,1]},{guid:"0e3bea32-b120-40f1-9ebb-be2c963e2152",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[5,2]},{guid:"019b7718-9ccb-4001-9839-b22c40c1033b",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[6,0]},{guid:"93912828-2019-495f-96fb-11a1d7bc6a9d",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[6,1]},{guid:"ce7f9bbe-d482-46c0-9a57-e14144ec5667",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[6,2]},{guid:"ba8ca543-f616-4642-b50a-3cd690d435f0",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[6,3]},{guid:"b8831640-d682-4e58-8935-01270714b769",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[7,0]},{guid:"b8bedf10-5818-4448-bfb5-d27eb39c9b95",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[7,1]},{guid:"62c3afcd-2cb3-4629-9ccb-849c7534fc61",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,2]},{guid:"04930215-e178-444c-8706-264b66dfda8b",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,3]},{guid:"dff8fea3-7e0c-491b-acd6-913723fb2047",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[7,4]}],[{guid:"392da5df-bfd3-450f-bc6a-1c3218548938",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[4,0]},{guid:"fa388d46-6711-45f4-a77c-27084f782f65",id:3,name:"magic_mineral",hp:100,exp:2,maxHP:100,position:[5,0]},{guid:"8086d1f0-6179-4eea-adff-b9ed362b0a57",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[5,1]},{guid:"228d9638-9d90-457c-ab1e-20aa529623a7",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[6,0]},{guid:"36b873d6-568f-402d-99d1-22327c98ab7d",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[6,1]},{guid:"dca6ab0b-55dc-4307-96c6-6da95e1dc1a9",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,0]},{guid:"b7f82f72-17bc-4c1a-979d-6d88b7008738",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,1]},{guid:"1317b81a-a85b-4304-ac6b-3c0494e6ceb2",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,2]},{guid:"0977778c-e0d0-45b4-a128-63128882bbc1",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,3]}],[{guid:"86f051ef-ec9c-476b-9ca8-fcfc52ab3a26",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[5,0]},{guid:"1318aeea-4658-4b98-8ec5-4255ae7d12c9",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[6,0]},{guid:"4d472f1c-8222-409d-ac5f-8a6aee230025",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,0]},{guid:"00e9772d-a0af-4d9f-a79f-a25b42b30fcf",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,1]}]],tools:[{id:0,name:"pick",damage:10,aoeDamage:0,stamina:4,requireLevel:0},{id:1,name:"hammer",damage:25,aoeDamage:5,stamina:7,requireLevel:2},{id:2,name:"driller",damage:50,aoeDamage:0,stamina:11,requireLevel:6}],size:0,maxSize:8}},o.getItemHpLoss=function(){var e=this.poolItem.find((function(e){return 1==e.available}));if(this.poolItem.length<=0||null==e||null==e){var i=p(this.itemHpLoss),t=i.getComponent(E);i.active=!0,this.ZoomView.addChild(i),t&&(t.initItem(),this.poolItem.push(t),e=t)}return e},o.showHpLoss=function(e,i){var t=this.layerMap[this.currentLayerID].position,a=new m(e.x+t.x,e.y+t.y);this.getItemHpLoss().onShow(a,i)},o.initMap=function(){for(var e=this,i=this.mapData.length,t=0,a=0;a<i;a++){var n=p(this.LayerPrefab);n.active=!0,n.setParent(this.MapParent),n.setPosition(new m(-75,-315,0)),this.layerMap.push(n),t+=this.mapData[a].mapData.length}var o=L.getCurrentMapSize();this.loadGroundMap(o);for(var r=0;r<i;r++){var l=this.layerMap[r],s=this.mapData[r].mapData,c=this.mapData[r].layerID,u=this.maxSize;if(r>0){var h=this.layerMap[r-1].position.x,d=this.layerMap[r-1].position.y+75;l.position=new m(h,d,0)}this.initMapFull(u,75,c,l,s)}this.currentLayerID=i-1,this.activeItemWithLayer(this.currentLayerID),this.gatheringMiniGameUI.Init(1,t,(function(){e.onBtnSkip()}),(function(){e.OnLevelUp()}),this.onBtnUITutorial.bind(this))},o.OnLevelUp=function(){var e=L.userGatherData.MINING_level.level;this.unLockTool(),console.log("OnLevelUp lv: "+e)},o.updateLayerActive=function(){var e=this,i=this.blockItems.filter((function(i){return i.LayerID==e.currentLayerID}));(null==i||i.length<=0)&&(this.currentLayerID--,this.currentLayerID<=0&&(this.currentLayerID=0),this.activeItemWithLayer(this.currentLayerID))},o.activeItemWithLayer=function(e){var i=this.blockItems.length;if(!(null==this.blockItems||i<=0))for(var t=0;t<i;t++){var a=this.blockItems[t];if(a){var n=e==a.LayerID;a.activeTouch(n)}}},o.initMapFull=function(e,i,t,a,n){for(var o=this,r=e*i,l=function(l){for(var s=function(s){var c=n.find((function(e){return e.location.x==l&&e.location.y==s}));if(!c)return"continue";var u=c.location,h=p(o.BlockPrefab),d=h.getComponent(x);if(!d)return"continue";var f=.08*o.countBlock;h.setParent(a),h.active=!0,d.InitBlock(c,t),d.showBlock(f),o.countBlock++,d.node.on("blockItem:onClicked",o.onBlockClicked,o);var g=new m((e-u.x)*i-r,(e-u.y)*i);o.blockItems.push(d),h.setPosition(o.positionToIsometric(g))},c=0;c<e;c++)s(c)},s=e-1;s>=0;s--)l(s)},o.initRock=function(e,i,t,a,n){var o=t*i;if(e){var r=this.layerMap[a],l=e.location,s=p(this.BlockPrefab),c=s.getComponent(x);if(c)if(s.setParent(r),s.active=!0,c.InitBlock(e,a),c.showBlock(.08),c.node.on("blockItem:onClicked",this.onBlockClicked,this),this.blockItems.push(c),null!=n)s.setPosition(n.position),s.setSiblingIndex(n.getSiblingIndex());else{var u=new m(l.x*i-o,(t-l.y)*i);u=this.positionToIsometric(u),s.setPosition(u)}else console.error("rock item null")}},o.ReleaseMaterialDrop=function(e){var i=this.MaterialDrops.findIndex((function(i){return i==e}));i>-1&&this.MaterialDrops.splice(i,1)},o.loadGroundMap=function(e){var i=this,t="S_"+d(1,2);switch(e){case P.MEDIUM:t="M_"+d(1,3);break;case P.MEDIUM_BUFF:t="M_buff";break;case P.LARGE:t="L_"+d(1,3);break;case P.LARGE_BUFF:t="L_buff"}var a="mining_new/mining_map/"+t;y.getStaticTileMap(a,(function(e,t){null!=t&&null!=i.groundTile&&(i.groundTile.tmxAsset=t)}))},o.showMaterialDrop=function(e,i,t){var a=this,n=D.Instance.SpawnMaterial();this.MaterialDrops.push(n),n.node.setParent(this.node),n.node.setPosition(t);var o=n.node.getWorldPosition(),r=o.clone();r.x+=f(0,1)>.5?f(-200,-100):f(100,200),r.y+=f(-50,0),n.Init(e),n.SetTime(60,10),n.SetPosition(o,r),n.setOnGetKeyCallback(this.OnGetKey.bind(this)),n.setClaimCallback((function(){H.Mining_AddTravelBag(i,n.onVerifyServerCallback.bind(n),null)})),n.setReleaseCallback(this.ReleaseMaterialDrop.bind(this)),n.setTweenToTravelBagCallback((function(){var e=a.Camera.node.getWorldPosition(),i=a.UICamera.node.getWorldPosition(),t=new m(e.x-i.x,e.y-i.y,0);n.ChangeLayer(g.Enum.UI_2D);var o=n.node.getWorldPosition().subtract(t);n.node.setWorldPosition(o),a.gatheringMiniGameUI.OpenBag(),B.Instance.PlaySound(_.UI_Item_Slide_to_Bag),n.TweenToBag(a.gatheringMiniGameUI.BagSprite.node.worldPosition,(function(){a.gatheringMiniGameUI.CloseBag(!0)}))})),n.ChangeLayer(g.Enum.UI_3D),n.StartAnim(),B.Instance.PlaySound(_.UI_Item_Appear)},o.OnGetKey=function(){this.gatheringMiniGameUI.skipGameBtnstate=1},o.isometricToPosition=function(e){return new m(e.x/2-e.y,e.x/2+e.y)},o.positionToIsometric=function(e){return new m(e.x+e.y,(e.y-e.x)/2)},o.activeTool=function(e){for(var i=this.togsTool.toggleItems,t=this.convertToolIdToName(e),a=0;a<i.length;a++){var n=i[a];n.node.name==t&&(n.isChecked=!0),n.node.position=n.node.name==t?new m(n.node.position.x,50):new m(n.node.position.x,20)}this.currentToolID=e},o.unLockTool=function(){var e=this.togsTool.toggleItems,i=L.userGatherData.MINING_level.level;if(this.tools.length==e.length)for(var t=0;t<e.length;t++){var a=e[t],n=this.tools[t],o=n.requireLevel,r=a.getComponent(M);r&&r.activeTool(n.id,i<o,n.stamina)}else console.warn("Data tool not match")},o.getToolDelayTime=function(){switch(this.currentToolID){case He.PICK_AXE:return.1;case He.HAMMER:return.2;case He.DRILL:return.4}return.1},o.showEffectTool=function(){var e=this;switch(this.currentToolID){case He.PICK_AXE:this.ToolPickAxe.node.active=!0,this.ToolPickAxe.animation="Dig",this.scheduleOnce((function(){e.particlePickAxe.active=!0,B.Instance.PlaySound(_.UI_SFX_PickAxe_Hit)}),.1),this.scheduleOnce((function(){e.particlePickAxe.active=!1,e.ToolPickAxe.node.active=!1,e.isFinishDigging=!0,e.isoViewController.Pause(!1)}),1.1);break;case He.HAMMER:this.ToolHammer.node.active=!0,this.ToolHammer.animation="Dig",this.scheduleOnce((function(){e.particleHammerFront.active=!0,e.particleHammerBack.active=!0,B.Instance.PlaySound(_.UI_SFX_Hammer_Hit)}),.2),this.scheduleOnce((function(){e.particleHammerFront.active=!1,e.particleHammerBack.active=!1,e.ToolHammer.node.active=!1,e.isFinishDigging=!0,e.isoViewController.Pause(!1)}),1);break;case He.DRILL:this.ToolDrill.node.active=!0,this.ToolDrill.animation="Dig",this.scheduleOnce((function(){e.particleDrill.active=!0,B.Instance.PlaySound(_.UI_SFX_Drill_Hit)}),.4),this.scheduleOnce((function(){e.particleDrill.active=!1,e.ToolDrill.node.active=!1,e.isFinishDigging=!0,e.isoViewController.Pause(!1)}),1.3)}},o.hideEffectTool=function(){this.ToolPickAxe.node.active=!1,this.ToolHammer.node.active=!1,this.ToolDrill.node.active=!1,this.ToolPickAxe.animation="hold",this.ToolDrill.animation="hold",this.ToolHammer.animation="hold"},o.convertToolIdToName=function(e){return e==He.HAMMER?"Tog_Hammer":e==He.DRILL?"Tog_Drill":"Tog_Pickaxe"},o.convertToolNameToID=function(e){return"Tog_Hammer"==e?He.HAMMER:"Tog_Drill"==e?He.DRILL:He.PICK_AXE},o.updateView=function(e,i,t){L.userGatherData.MINING_level.level=t,L.userGatherData.MINING_level.exp=i,L.userGatherData.currentStamina=e,this.gatheringMiniGameUI.gatheringLevelTop.UpdateView(1),this.gatheringMiniGameUI.UpdateStaminaLabel()},o.getMap=function(){var e=this,i=L.getCurrentMiniGameId();H.Mining_GetMapV2(i,function(i){var t=JSON.parse(i);if(0==t.status){var a=new S(t.data),n=a.userGatherLevel,o=a.stamina;e.mapData=a.mapData,e.maxSize=a.maxSize,e.tools=a.tools,e.initMap(),e.currentToolID=He.PICK_AXE,e.unLockTool(),e.activeTool(e.currentToolID),e.updateView(o,n.exp,n.level)}else k.Instance.ShowToast("Error",w.Instance.GetErrorMessage(t.status),0,!1),e.BackToSceneGathering()}.bind(this),function(i){e.BackToSceneGathering()}.bind(this))},o.onDamage=function(e){var i=this;H.Mining_DamageV2(e,this.currentToolID,function(t){var a=JSON.parse(t);if(null!=a){var n=a.status;if(console.log("TAKE DAME 1",n),0==n){var o=new G(a.data),r=o.damageResult,l=r.targets,s=o.userGatherLevels,c=o.stamina;i.updateView(c,s.exp,s.level);var u=r.damage,h=(r.aoeDamage,i.currentToolID==He.DRILL?25:40),p=l.find((function(i){return i.guid==e})),d=i.blockItems.find((function(i){return i.BlockID==e}));if(!d)return;2==d.getStateBlock()&&(h=i.currentToolID==He.DRILL?15:25),3==d.getStateBlock()&&(h=i.currentToolID==He.DRILL?0:15),4==d.getStateBlock()&&(h=-5);var f=i.layerMap[d.LayerID].position,g=new m(d.node.position.x+f.x,d.node.position.y+f.y+h);i.EffectTool.position=g,i.showEffectTool(),console.log("itemMainData.hp",p,d.Health,"hpLost",u),i.scheduleOnce(function(){var i=this;this.showHpLoss(d.node.position,d.Health-p.hp),d.updateHealth(d.Health-p.hp),d.updateDataBlock(p);for(var t=l.length,a=function(){var t=l[n];if(!t||t.guid==e)return"continue";var a=i.blockItems.find((function(e){return e.BlockID==t.guid}));if(!a)return"continue";i.showHpLoss(a.node.position,a.Health-t.hp),a.updateHealth(a.Health-t.hp),a.updateDataBlock(t)},n=0;n<t;n++)a();var s=r.destroyedObjects,c=r.newObjects,u=this.maxSize;if(null!=c&&c.length>0)for(var h=function(){var e=c[m],t=i.blockItems.find((function(i){return i.Location.equals(e.location)}));null!=t?i.initRock(e,75,u,i.currentLayerID,t.node):d.Health<=0&&d.Location.x==e.location.x&&d.Location.y==e.location.y?d.updateDataBlock(e):i.initRock(e,75,u,i.currentLayerID)},m=0;m<c.length;m++)h();if(null!=s&&s.length>0){for(var f=function(){var e=s[g];if(!e)return"continue";var t=i.blockItems.findIndex((function(i){return i.BlockID==e.guid}));if(t<0)return"continue";var a=i.blockItems[t];if(!a)return"continue";a.destroyBlock(),i.blockItems.splice(t,1)},g=0;g<s.length;g++)f();var b=this.blockItems.length;this.gatheringMiniGameUI.curItem=b,this.updateLayerActive()}var v=o.newRewards;if(null!=v&&v.length>0)for(var k=v.length,D=0;D<k;D++){var T=v[D];if(T&&"NOTHING"!=T.name&&null!=T.name){I("Reward !!! ",T);var M=d.getPositionParent();this.showMaterialDrop(T.name,T.guid,M)}}}.bind(i),i.getToolDelayTime())}else{if(1010==n)return void k.Instance.ShowUINotifyConfirm("Insufficient Stamina",w.Instance.GetErrorMessage(1010),function(){this.BackToSceneGathering()}.bind(i),!1,!1,0,!0);k.Instance.ShowToast("Error",w.Instance.GetErrorMessage(n),0)}}else k.Instance.ShowToast("Error","Can't Get Data From Server",0,!0)}.bind(this),function(e){i.BackToSceneGathering()}.bind(this))},o.onSelectedTool=function(e){if(0!=e.isChecked){var i=e.node.name,t=this.convertToolNameToID(i),a=this.tools.find((function(e){return e.id==t})).requireLevel,n=L.userGatherData.MINING_level.level;t!=this.currentToolID&&(t==He.HAMMER&&n<a&&(t=this.currentToolID),t==He.DRILL&&n<a&&(t=this.currentToolID),this.activeTool(t))}},o.BackToSceneGathering=function(){for(B.Instance.SetBgMusic(_.BGM_Farm2);this.MaterialDrops.length>0;)this.MaterialDrops[0].Release();A.Instance.ReturnAllPrefab(U.Bag_effect),L.IsGatherPremium?k.Instance.LoadScene("1.Gathering-Premium"):k.Instance.LoadScene("1.Gathering")},o.onBlockClicked=function(e){var i=e.blockID,t=e.unUsePickAxe;this.currentToolID==He.PICK_AXE&&t?k.Instance.ShowToast("Warning","You need better Tools to continue digging this tile...",0,!0):(console.log("TAKE DAME 0",this.isFinishDigging),this.isFinishDigging&&(this.isoViewController.Pause(!0),this.onDamage(i)))},o.validateFinishGameServer=function(){var e=this;H.Mining_Finish_V2(function(i){var t=H.CheckStatus(JSON.parse(i));null!=t&&(L.curWorldMapData=t.data.route,e.BackToSceneGathering())}.bind(this),(function(e){}))},o.validateSkipGameServer=function(){var e=this;H.Mining_Skip_V2(function(i){var t=H.CheckStatus(JSON.parse(i));null!=t&&(L.curWorldMapData=t.data.route,L.userGatherData.currentStamina=t.data.stamina,e.BackToSceneGathering())}.bind(this),(function(e){}))},o.onBtnUITutorial=function(){this.uiTutorial.Show(3)},o.onBtnSkip=function(){0==this.gatheringMiniGameUI.skipGameBtnstate?D.Instance.ShowMaterialWarning(50,"Next mini game fee:",this.validateSkipGameServer.bind(this)):2==this.gatheringMiniGameUI.skipGameBtnstate?this.validateFinishGameServer():D.Instance.ShowMaterialWarning(-1,"Skip This Mini Game",this.validateFinishGameServer.bind(this))},i}(b)).prototype,"Camera",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=i(re.prototype,"UICamera",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=i(re.prototype,"isoViewController",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=i(re.prototype,"togsTool",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=i(re.prototype,"ZoomView",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=i(re.prototype,"groundTile",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=i(re.prototype,"EffectTool",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=i(re.prototype,"MapParent",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=i(re.prototype,"LayerPrefab",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=i(re.prototype,"BlockPrefab",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=i(re.prototype,"ToolPickAxe",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=i(re.prototype,"particlePickAxe",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=i(re.prototype,"ToolHammer",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=i(re.prototype,"particleHammerFront",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=i(re.prototype,"particleHammerBack",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=i(re.prototype,"ToolDrill",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=i(re.prototype,"particleDrill",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe=i(re.prototype,"uiTutorial",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=i(re.prototype,"gatheringMiniGameUI",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=i(re.prototype,"itemHpLoss",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=re))||oe));o._RF.pop()}}}));

System.register("chunks:///_virtual/MiningResultData.ts",["cc","./ConvertJsonObject2.ts","./MiningMapData.ts","./UserGatherLevelData.ts"],(function(t){"use strict";var e,a,s,n,i,r;return{setters:[function(t){e=t.cclegacy,a=t._decorator},function(t){s=t.convertToUnstableNumber,n=t.convertToArray},function(t){i=t.default},function(t){r=t.default}],execute:function(){var h;e._RF.push({},"9f1b1n4GKdGkI8Hhl1I9ncQ","MiningResultData",void 0);var u=a.ccclass,o=(a.property,t("DamageResultData",function(){function t(t){this.damage=0,this.aoeDamage=0,this.targets=[],this.stamina=0,this.expGain=0,this.critical=!1,this.newObjects=[],this.destroyedObjects=[],this.UpdateData(t)}return t.prototype.UpdateData=function(t){this.stamina=s(t.stamina),this.damage=s(t.damage),this.expGain=s(t.expGain);for(var e=n(t.targets),a=0;a<e.length;a++){var r=e[a];r&&this.targets.push(new i(r))}for(var h=n(t.newObjects),u=0;u<h.length;u++){var o=h[u];o&&this.newObjects.push(new i(o))}for(var c=n(t.destroyedObjects),d=0;d<c.length;d++){var l=c[d];l&&this.destroyedObjects.push(new i(l))}},t}()));t("default",u("MiningResultData")(h=function(){function t(t){this.damageResult=void 0,this.newRewards=[],this.stamina=0,this.userGatherLevels=void 0,this.UpdateData(t)}return t.prototype.UpdateData=function(t){this.stamina=s(t.stamina),this.damageResult=new o(t.damageResult),this.userGatherLevels=new r(t.userGatherLevels);for(var e=n(t.newRewards),a=0;a<e.length;a++){var i=e[a];i&&this.newRewards.push(i)}},t}())||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/MiningRock.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,o,i,r;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,i=n._decorator,r=n.Component}],execute:function(){var c;o._RF.push({},"2ffddMqxOpKSb/qTgs5KkBr","MiningRock",void 0);var e=i.ccclass;i.property,n("MiningRock",e("MiningRock")(c=function(n){function o(){for(var t,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(t=n.call.apply(n,[this].concat(i))||this).json=void 0,t}return t(o,n),o.prototype.Init=function(n){this.json=n},o}(r))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/MiningStartPannel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts"],(function(t){"use strict";var n,e,i,a,r,o,l,c;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,l=t.Label},function(t){c=t.PopUpBase}],execute:function(){var s,p,u,h,y;r._RF.push({},"d93b7ObayRD0b2Wzo7JBH2I","MiningStartPannel",void 0);var f=o.ccclass,b=o.property;t("MiningStartPannel",(s=f("MiningStartPannel"),p=b(l),s((y=n((h=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n=t.call.apply(t,[this].concat(r))||this,i(n,"StaminaLabel",y,a(n)),n}e(n,t);var r=n.prototype;return r.Show=function(n){t.prototype.OnShow.call(this),this.StaminaLabel.string='Each shot costs "'+n+'" Stamina'},r.OnBtnPlay=function(){t.prototype.OnHide.call(this)},n}(c)).prototype,"StaminaLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=h))||u));r._RF.pop()}}}));

System.register("chunks:///_virtual/MoveUVParticle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,a,n,o,s,l,p,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,s=e.Material,l=e.CCBoolean,p=e.CCInteger,c=e.v2,u=e.Component}],execute:function(){var f,m,h,v,b,d,g,y,M,P,z;n._RF.push({},"76cb0PujYxOJaoxfSAKJHpD","MoveUVParticle",void 0);var w=o.ccclass,C=o.property;e("MoveUVParticle",(f=w("MoveUVParticle"),m=C(s),h=C(l),v=C(p),b=C(p),f((y=t((g=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,r(t,"mat",y,a(t)),r(t,"isMoving",M,a(t)),r(t,"speedX",P,a(t)),r(t,"speedY",z,a(t)),t.params=c(0,0),t}return i(t,e),t.prototype.update=function(e){if(this.isMoving){this.params.x+=e*this.speedX,this.params.y+=e*this.speedY;var t=this.mat.passes[0].getHandle("params");this.mat.passes[0].setUniform(t,this.params)}},t}(u)).prototype,"mat",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(g.prototype,"isMoving",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=t(g.prototype,"speedX",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=t(g.prototype,"speedY",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=g))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/MovingComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./PVE_Helper.ts","./Enums.ts"],(function(t){"use strict";var e,o,i,n,s,a,h,r,c;return{setters:[function(t){e=t.inheritsLoose,o=t.createClass},function(t){i=t.cclegacy,n=t._decorator,s=t.Vec3,a=t.Component},function(t){h=t.PVEGameplayControl},function(t){r=t.PVEHelper},function(t){c=t.GameplayTeam}],execute:function(){var l;i._RF.push({},"2d5c1zEFVJI4YRnQSI9KsR3","MovingComponent",void 0);var d=n.ccclass;n.property,t("MovingComponent",d("MovingComponent")(l=function(t){function i(){for(var e,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this).root=void 0,e.movePath=void 0,e._moveable=!0,e.moving=!1,e.curPathIndex=0,e.targetPos=void 0,e.deltaDistance=void 0,e.distance=void 0,e.newPos=void 0,e.lerpRatio=void 0,e.needCheckFaceDir=!1,e.targetMoving=null,e.isOffscreen=!0,e}e(i,t);var n=i.prototype;return n.Init=function(t){this.root=t,this.moving=!1,this.newPos=new s},n.DoPath=function(t,e){this.moving=!0,this.movePath=e,this.curPathIndex=0,this.targetPos=new s(e[1].x,e[1].y,0),this.newPos=new s,this.node.setWorldPosition(new s(e[0].x,e[0].y)),this.root.animationComponent.setMovingAnim(),this.needCheckFaceDir=!0},n.stopMoving=function(){this.moving=!1,this.targetMoving=null},n.checkCountinueMoving=function(){this.moving||null!=this.root&&(this.root.attackComponent.hasTarget()||(0==this.root.targetComponent.anyControlMoving()&&(this.moveable=!0),this.moveable&&(this.root.animationComponent.unPauseAnim(),this.root.team!=c.MyTeam?(this.needCheckFaceDir=!0,this.moving=!0,this.root.animationComponent.setMovingAnim()):0==this.root.attackComponent.hasTarget()&&this.root.animationComponent.setIdleAnim())))},n.movingToTarget=function(t){this.moveable&&(this.targetMoving&&this.targetMoving==t||(this.root.animationComponent.setMovingAnim(),this.moving=!0,this.targetMoving=t,this.needCheckFaceDir=!0))},n.getMoveSpeed=function(){return this.root.data.statsData.MovementSpeed+this.root.data.statsData.MovementSpeedModifier},n.update=function(t){if(0!=this.moving){if(this.deltaDistance=this.getMoveSpeed()*t,null!=this.targetMoving){null==this.targetMoving.node?console.error(this.targetMoving):this.targetPos=this.targetMoving.node.worldPosition.clone();var e=r.LeftScreenUndead();return this.targetPos.x>e&&(this.targetPos.x=e),this.needCheckFaceDir&&(this.needCheckFaceDir=!1,this.root.animationComponent.setFaceToTarget(this.targetPos.x)),this.distance=s.distance(this.node.worldPosition.clone(),this.targetPos),this.distance<=5?(this.moving=!1,void this.root.animationComponent.setIdleAnim()):(this.lerpRatio=this.deltaDistance/this.distance,s.lerp(this.newPos,this.node.worldPosition,this.targetPos,this.lerpRatio),void this.node.setWorldPosition(this.newPos.x,this.newPos.y,0))}this.distance=s.distance(this.node.worldPosition,this.targetPos),this.needCheckFaceDir&&(this.needCheckFaceDir=!1,this.root.animationComponent.setFaceToTarget(this.targetPos.x)),this.distance>0&&this.deltaDistance<this.distance?(this.lerpRatio=this.deltaDistance/this.distance,s.lerp(this.newPos,this.node.worldPosition,this.targetPos,this.lerpRatio),this.node.setWorldPosition(this.newPos.x,this.newPos.y,0)):this.curPathIndex+2<this.movePath.length?this.nextPoint():(this.moving=!1,console.log("complete"),this.root.node.active=!1,this.root.removeObject(),h.Instance.onEnemyCompletePath(this.root)),this.isOffscreen&&this.newPos.x<h.OffscreenLeft&&(this.isOffscreen=!1,this.root.EnableAttack(),this.root.EnableTarget(),console.log("enable offscreen"))}},n.nextPoint=function(){this.curPathIndex++,this.targetPos=new s(this.movePath[this.curPathIndex+1].x,this.movePath[this.curPathIndex+1].y,0)},o(i,[{key:"moveable",get:function(){return this._moveable},set:function(t){this._moveable=t,0==t&&this.moving&&(this.moving=!1)}}]),i}(a))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/MysteryPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserModel.ts","./PopUpBase.ts","./ResourcesManager.ts"],(function(e){"use strict";var t,i,a,r,n,s,o,l,c,u,p,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,o=e.Node,l=e.Label,c=e.Sprite,u=e.SpriteFrame},function(e){p=e.UserModel},function(e){h=e.PopUpBase},function(e){g=e.ResourcesManager}],execute:function(){var B,b,y,m,F,M,S,E,_,U,R,d,f,T,I,v,L,A,P,w,x,k,D,G,N;e("MYSTERY_RESULT_TYPE",void 0),n._RF.push({},"cad2dJjT+9PnpFZyLtPnygO","MysteryPopup",void 0);var z,O=s.ccclass,Y=s.property;!function(e){e[e.BUFF_BLESSING=0]="BUFF_BLESSING",e[e.BUFF_WING=1]="BUFF_WING",e[e.BUFF_PERSONAL_BUTLER=2]="BUFF_PERSONAL_BUTLER",e[e.BUFF_WEALTH=3]="BUFF_WEALTH",e[e.DEBUFF_ROBBERY=4]="DEBUFF_ROBBERY",e[e.DEBUFF_SWARM=5]="DEBUFF_SWARM",e[e.MEDIUM_MAP=6]="MEDIUM_MAP",e[e.SMALL_MAP=7]="SMALL_MAP",e[e.CART=8]="CART"}(z||(z=e("MYSTERY_RESULT_TYPE",{})));e("MysteryPopup",(B=O("MysteryPopup"),b=Y(o),y=Y(l),m=Y(l),F=Y(c),M=Y(u),S=Y(o),E=Y(l),_=Y(c),U=Y(u),R=Y(u),d=Y(u),B((I=t((T=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,a(t,"Box0",I,r(t)),a(t,"title0",v,r(t)),a(t,"result0",L,r(t)),a(t,"Box0Icon",A,r(t)),a(t,"MysteryIcon",P,r(t)),a(t,"Box1",w,r(t)),a(t,"title1",x,r(t)),a(t,"MiniGameIcon",k,r(t)),a(t,"chopping",D,r(t)),a(t,"fishing",G,r(t)),a(t,"mining",N,r(t)),t.callback=void 0,t.callbackType=void 0,t.gametype=void 0,t.treasureName={BURRIED_TREASURE:"Burried Treasure",HIDDEN_TREASURE:"Hidden Treasure",SUNKEN_TREASURE:"Sunken Treasure"},t}i(t,e);var n=t.prototype;return n.Show=function(t,i,a){if(this.callback=a,t.data.treasureName)this.ShowTreasurePopup(t.data.treasureName);else{switch(this.Box0.active=!0,this.title0.string="Blessing",this.callbackType=1,this.gametype=-1,t.data.mysteryResult){case z.SMALL_MAP:case z.MEDIUM_MAP:this.ShowMiniGamePopUp(t);break;case z.BUFF_BLESSING:this.result0.string="The next 3 actions will not cost Stamina (3 actions in any minigame)";break;case z.BUFF_PERSONAL_BUTLER:this.result0.string="Increase 5 slots in travel bag";break;case z.BUFF_WEALTH:this.result0.string="+500 LE";break;case z.DEBUFF_ROBBERY:this.title0.string="Curse",this.result0.string="Lost 3 random items in Travel Bag";break;case z.DEBUFF_SWARM:this.title0.string="Curse",this.result0.string="Lost 100 Stamina",p.userGatherData.currentStamina-=100,p.userGatherData.currentStamina<0&&(p.userGatherData.currentStamina=0),i();break;case z.CART:this.result0.string="All items in travel bag moved to Inventory"}this.Box1.active=!this.Box0.active,this.Box0.active&&(this.Box0Icon.node.active=!0,this.Box0Icon.spriteFrame=this.MysteryIcon,this.Box0Icon.node.setScale(1.8,1.8,0)),e.prototype.OnShow.call(this)}},n.OnOk=function(){this.callback(this.callbackType,this.gametype),e.prototype.OnHide.call(this)},n.ShowTreasurePopup=function(t){var i=this;this.Box0.active=!0,this.Box1.active=!1,this.Box0Icon.node.active=!1,this.Box0Icon.node.setScale(.8,.8,0);g.Instance.LoadMaterialSprite(t,(function(e){i.Box0Icon.spriteFrame=e,i.Box0Icon.node.active=!0})),this.title0.string="Congratulation!",this.result0.string="You got a "+this.treasureName[t],e.prototype.OnShow.call(this)},n.ShowMiniGamePopUp=function(e){this.Box0.active=!1,this.callbackType=0;var t=e.data.data.miniGame;switch(this.gametype=t.nodeType,this.gametype){case 0:this.title1.string="Foraging Map",this.MiniGameIcon.spriteFrame=this.chopping;break;case 1:this.title1.string="Mining Map",this.MiniGameIcon.spriteFrame=this.mining;break;case 2:this.title1.string="Fishing Map",this.MiniGameIcon.spriteFrame=this.fishing}},t}(h)).prototype,"Box0",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(T.prototype,"title0",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(T.prototype,"result0",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(T.prototype,"Box0Icon",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(T.prototype,"MysteryIcon",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(T.prototype,"Box1",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(T.prototype,"title1",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(T.prototype,"MiniGameIcon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(T.prototype,"chopping",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(T.prototype,"fishing",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(T.prototype,"mining",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=T))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/NormalAttack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./PVE_Helper.ts","./BulletBase.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,a,i,r,o,n,l,c,s,u,h,m,f,p,g,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,n=t._decorator,l=t.Node,c=t.CCBoolean,s=t.instantiate},function(t){u=t.PVEGameplayControl},function(t){h=t.PVEHelper},function(t){m=t.BulletBase},function(t){f=t.AttackType,p=t.DamageType},function(t){g=t.InGameEventID},function(t){b=t.SkillBase}],execute:function(){var d,z,A,v,k,P,y,T,D,I,B;o._RF.push({},"0f5250CDy5MOIHG0lyXDcIN","NormalAttack",void 0);var C=n.ccclass,E=n.property;t("NormalAttack",(d=C("NormalAttack"),z=E(l),A=E(l),v=E(c),k=E(l),d((T=e((y=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this).delayTimeAttack=0,i(e,"bulletPrefab",T,r(e)),i(e,"impactPrefab",D,r(e)),i(e,"muzzleActiveInstance",I,r(e)),i(e,"muzzlePrefab",B,r(e)),e.curTarget=void 0,e.curDamage=void 0,e}a(e,t);var o=e.prototype;return o.Init=function(e,a){t.prototype.Init.call(this,e,a)},o.update=function(t){this.root.attackAble&&(this.delayTimeAttack>0?this.delayTimeAttack-=t:this.root.targets.length<=0||(this.delayTimeAttack=1/this.root.getAttackSpeed(),this.attack(this.root.targets[0])))},o.addAttackData=function(t,e){t==f.NormalAttack&&e.AddDamage(p.Normal,this.root.GetRandomBasicDamage())},o.activeMuzzle=function(){if(null!=this.muzzlePrefab){var t=s(this.muzzlePrefab);t.parent=this.root.getAttackPos(),t.setPosition(0,0,0),t.active=!0}},o.attack=function(t){h.RandomActive(this.root.root.data.attackData.BlindPercent)?console.error("Blind"):(this.curTarget=t,this.curDamage=this.root.Attack(f.NormalAttack,this.curTarget),null!=this.curDamage&&(this.root.root.event.on(g.AttackAnimEvent,this.endCast,this),this.root.beginNormalAttack(),this.root.root.animationComponent.setFaceToTarget(t.node.worldPosition.x),this.muzzleActiveInstance&&this.activeMuzzle()))},o.endCast=function(){if(null!=this.curTarget)if(this.root.root.event.off(g.AttackAnimEvent,this.endCast,this),!this.muzzleActiveInstance&&this.activeMuzzle(),null!=this.bulletPrefab){s(this.bulletPrefab).getComponent(m).init(this.root,this.curTarget,this.curDamage)}else{if(this.impactPrefab){var t=s(this.impactPrefab);t.parent=u.Instance.getEffParent(),t.setWorldPosition(this.curTarget.getTargetPos().getWorldPosition()),t.active=!0}this.curTarget.TakeDamage(this.curDamage)}else console.error("this.curTarget null")},e}(b)).prototype,"bulletPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(y.prototype,"impactPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(y.prototype,"muzzleActiveInstance",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),B=e(y.prototype,"muzzlePrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=y))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CloneableObject.ts","./Enums.ts"],(function(t){"use strict";var a,e,s,i;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy},function(t){s=t.default},function(t){i=t.ConfigType}],execute:function(){e._RF.push({},"228d8xLWUxOPL64wSowLzAu","ObjectData",void 0);t("default",function(t){function e(){for(var a,e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return(a=t.call.apply(t,[this].concat(s))||this).code=void 0,a.ID="",a.level=0,a.attackData=void 0,a.statsData=void 0,a.SkillData=void 0,a.configType=void 0,a.ManaCost=0,a.LECost=0,a.Rarity="",a.CombatPower=0,a}a(e,t);var s=e.prototype;return s.Init=function(){this.statsData.Init()},s.getBaseAttackSpeed=function(){return this.attackData.AttackSpeed},s.upgradeStateMyTeam=function(){this.attackData.AttackDamage*=1.5,this.attackData.DefaultAttackFrom*=1.5,this.attackData.DefaultAttackTo*=1.5,this.attackData.Magic*=1.5,this.statsData.HP*=1.5,this.statsData.Defense*=1.5},s.upgradeLevel=function(t){this.level=t,this.attackData.Level=t,this.statsData.Level=t;var a=t-1;this.statsData.HP=this.statsData.MaxHp=this.statsData.MaxHp+a*this.statsData.Level_HP,this.statsData.Defense=this.statsData.Defense+a*this.statsData.Level_Def,this.attackData.AttackDamage+=a*this.attackData.Level_Atk,this.attackData.DefaultAttackFrom+=a*this.attackData.Level_DefaultAtk,this.attackData.DefaultAttackTo+=a*this.attackData.Level_DefaultAtk,this.attackData.Magic+=a*this.attackData.Level_Mag},s.cheatHp=function(){this.statsData.MaxHp=1500,this.statsData.HP=1500},s.getElementName=function(){switch(this.configType){case i.Dark:return"dark";case i.Earth:return"earth";case i.Thunder:return"electric";case i.Fire:return"fire";case i.Ice:return"ice";case i.Plant:return"plant";case i.Water:return"water";case i.Wind:return"wind"}return""},e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/OneToMultiListener.ts",["cc"],(function(r){"use strict";var t,n,e;return{setters:[function(r){t=r.cclegacy,n=r._decorator,e=r.error}],execute:function(){var a,i;t._RF.push({},"10a25g6TDNP2IICdF4Htopx","OneToMultiListener",void 0);var s=n.ccclass;r("OneToMultiListener",s("OneToMultiListener")(((i=function(){function r(){}return r.on=function(r,t,n){var e={handler:t,target:n},a=this.handlers[r];a||(a=[],this.handlers[r]=a);for(var i=0;i<a.length;i++)if(!a[i])return a[i]=e,i;return a.push(e),a.length},r.off=function(r,t,n){var e=this.handlers[r];if(e)for(var a=0;a<e.length;a++){var i=e[a];if(i.handler===t&&(!n||n===i.target)){e.splice(a,1);break}}},r.dispatchEvent=function(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),e=1;e<t;e++)n[e-1]=arguments[e];var a,i=this.handlers[r];for(a=1;a<arguments.length;a++);if(i)for(a=0;a<i.length;a++){var s=i[a];s.handler&&s.handler.apply(s.target,n)}},r.setSupportEventList=function(r){if(!(r instanceof Array))return e("supportEvent was not array"),!1;for(var t in this.supportEvent={},r){var n=r[t];this.supportEvent[n]=t}return!0},r}()).handlers=void 0,i.supportEvent=void 0,a=i))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/PageNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts"],(function(t){"use strict";var e,i,n,r,a,o,u,s,l,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,u=t.Button,s=t.Label,l=t.CCInteger,c=t.Component},function(t){h=t.Utility}],execute:function(){var g,P,b,p,d,v,N,m,f,y,C;a._RF.push({},"f83caxThphKvKH+0SkLCRtR","PageNumber",void 0);var T=o.ccclass,x=o.property;t("PageNumber",(g=T("PageNumber"),P=x(u),b=x(u),p=x(s),d=x({type:l}),g((m=e((N=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"btnNext",m,r(e)),n(e,"btnPrev",f,r(e)),n(e,"lbNumPage",y,r(e)),n(e,"LIMIT_PAGE",C,r(e)),e.currentPage=0,e.totalPage=1,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.btnNext.node.on(u.EventType.CLICK,this.onNextClicked,this),this.btnPrev.node.on(u.EventType.CLICK,this.onPrevClicked,this),this.lbNumPage.string=""},a.activePage=function(){this.node.active=this.totalPage>1,this.btnNext.node.active=this.totalPage>1,this.btnPrev.node.active=this.totalPage>1,this.lbNumPage.node.active=this.totalPage>1},a.setTotalPage=function(t){this.totalPage=t,this.currentPage=0,this.activePage(),this.lbNumPage.string=this.AddZeroToNumber(this.currentPage+1)+" / "+this.AddZeroToNumber(this.totalPage),h.activeButton(this.btnPrev,this.currentPage>0),h.activeButton(this.btnNext,this.currentPage+1<this.totalPage)},a.onNextClicked=function(){this.currentPage>=this.totalPage&&(this.currentPage=this.totalPage),this.toPage(this.currentPage+1)},a.onPrevClicked=function(){this.currentPage<0&&(this.currentPage=0),this.toPage(this.currentPage-1)},a.toPage=function(t){null!=t&&null!=t||(t=0),this.currentPage=t,this.lbNumPage.string=this.AddZeroToNumber(this.currentPage+1)+" / "+this.AddZeroToNumber(this.totalPage),h.activeButton(this.btnPrev,this.currentPage>0),h.activeButton(this.btnNext,this.currentPage+1<this.totalPage),this.node.emit("pageNumber:clicked",this.currentPage)},a.AddZeroToNumber=function(t){return null!=t&&null!=t||(t=0),t<10?"0"+t.toString():t.toString()},e}(c)).prototype,"btnNext",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=e(N.prototype,"btnPrev",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(N.prototype,"lbNumPage",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(N.prototype,"LIMIT_PAGE",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=N))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/ParticleHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts"],(function(e){"use strict";var t,r,i,n,o,l,a,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.CCBoolean,c=e.CCFloat,s=e.Component},function(e){u=e.Utility}],execute:function(){var p,f,y,b,d,h,P;o._RF.push({},"948b57smqlALKLLC4tlDg2i","ParticleHelper",void 0);var g=l.ccclass,m=l.property;e("ParticleHelper",(p=g("ParticleHelper"),f=m(a),y=m(c),p((h=t((d=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,i(t,"autoDestroy",h,n(t)),i(t,"destroyAfterTime",P,n(t)),t}r(t,e);var o=t.prototype;return o.onEnable=function(){u.PlayParticle(this.node)},o.destroyEff=function(){},t}(s)).prototype,"autoDestroy",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=t(d.prototype,"destroyAfterTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=d))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/ParticlePlayHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts"],(function(e){"use strict";var t,i,l,r,a,n,c,o,p,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,n=e._decorator,c=e.ParticleSystem,o=e.CCBoolean,p=e.Component},function(e){s=e.Utility}],execute:function(){var u,y,h,f,b,P,g;a._RF.push({},"4026bc2gHlCz6c6pJFsh8Jj","ParticlePlayHelper",void 0);var m=n.ccclass,v=n.property;e("ParticlePlayHelper",(u=m("ParticlePlayHelper"),y=v(c),h=v(o),u((P=t((b=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a))||this,l(t,"particle",P,r(t)),l(t,"playOnEnable",g,r(t)),t}return i(t,e),t.prototype.onEnable=function(){this.playOnEnable&&(null==this.particle&&(this.particle=this.getComponent(c)),null!=this.particle&&(console.log("play particle",s.GetTimeNow()),this.particle.stop(),this.particle.clear(),this.particle.play()))},t}(p)).prototype,"particle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(b.prototype,"playOnEnable",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),f=b))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/Passive_AeroBlessing.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(e){"use strict";var t,a,i,n,r,s,o,c,l,u,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.Node,c=e.instantiate},function(e){l=e.AttackType},function(e){u=e.InGameEventID},function(e){g=e.SkillBase}],execute:function(){var p,f,v,m,d;r._RF.push({},"52bf51vaexEH6JThMe0F898","Passive_AeroBlessing",void 0);var P=s.ccclass,z=s.property;e("PassiveAeroBlessing",(p=P("PassiveAeroBlessing"),f=z(o),p((d=t((m=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"muzzlePrefab",d,n(t)),t}a(t,e);var r=t.prototype;return r.addAttackData=function(e,t){if(e==l.NormalAttack){var a=this.skillData.damageData[0],i=this.root.GetRandomBasicDamage()*a.damagePercentOnAtk/100;t.AddDamage(a.damageType,i);var n=t.IgnoreResPercent.get(a.damageType);a.IgnoreResPercent,t.IgnoreResPercent.set(a.damageType,n),t.on(u.OnHit,this.activeMuzzle,this)}},r.activeMuzzle=function(e,t){if(null!=this.muzzlePrefab){var a=c(this.muzzlePrefab);a.parent=t.getTargetPos(),a.setPosition(0,0,0),a.active=!0}},t}(g)).prototype,"muzzlePrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=m))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/Passive_BerserkMode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./DamageData.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,i,a,n,r,o,s,c,l,u,f,p,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.Node,c=t.instantiate},function(t){l=t.PVEGameplayControl},function(t){u=t.DamageData},function(t){f=t.AttackType},function(t){p=t.InGameEventID},function(t){v=t.SkillBase}],execute:function(){var h,m,d,z,D;r._RF.push({},"e0839hFku1I7bQtr7RxLJ/2","Passive_BerserkMode",void 0);var y=o.ccclass,P=o.property;t("PassiveBerserkMode",(h=y("PassiveBerserkMode"),m=P(s),h((D=e((z=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).NextTimeActive=0,a(e,"muzzlePrefab",D,n(e)),e}i(e,t);var r=e.prototype;return r.Init=function(e,i){t.prototype.Init.call(this,e,i),this.NextTimeActive=0},r.addAttackData=function(t,e){t==f.NormalAttack&&e.on(p.OnDead,this.onTargetDead,this)},r.onTargetDead=function(){if(!(l.Instance.CurrentTime<this.NextTimeActive)){this.NextTimeActive=l.Instance.CurrentTime+this.skillData.Cooldown;var t=new u;t.AddEffects(this.skillData.EffectData),this.root.root.targetComponent.applyEffect(t),this.activeMuzzle()}},r.activeMuzzle=function(){if(null!=this.muzzlePrefab){var t=c(this.muzzlePrefab);t.parent=this.root.getRootPos(),t.setPosition(0,0,0),t.active=!0}},e}(v)).prototype,"muzzlePrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=z))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Passive_SoftPollen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SkillBase.ts"],(function(t){"use strict";var e,s,o,n;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy,o=t._decorator},function(t){n=t.SkillBase}],execute:function(){var i;s._RF.push({},"01b59VkRfJEx7iBxLX5JIwq","Passive_SoftPollen",void 0);var r=o.ccclass;o.property,t("PassiveSoftPollen",r("PassiveSoftPollen")(i=function(t){function s(){return t.apply(this,arguments)||this}return e(s,t),s.prototype.start=function(){},s}(n))||i);s._RF.pop()}}}));

System.register("chunks:///_virtual/Passive_WoolBody.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./Enums.ts","./SkillBase.ts"],(function(t){"use strict";var e,o,i,a,n,r,s,l,c,u,p,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,s=t.Node,l=t.instantiate},function(t){c=t.SoundController,u=t.EnumSoundPVE},function(t){p=t.AttackType,f=t.DamageType},function(t){d=t.SkillBase}],execute:function(){var y,v,P,h,z;n._RF.push({},"a3f72TkLXNNY6UpHRJgbRBC","Passive_WoolBody",void 0);var m=r.ccclass,g=r.property;t("PassiveWoolBody",(y=m("PassiveWoolBody"),v=g(s),y((z=e((h=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).isFirstAttack=!0,i(e,"muzzlePrefab",z,a(e)),e}o(e,t);var n=e.prototype;return n.Init=function(e,o){t.prototype.Init.call(this,e,o)},n.addAttackData=function(t,e){0!=this.isFirstAttack&&t==p.NormalAttack&&(this.isFirstAttack=!1,e.damages=[],e.AddDamage(f.Chaos,1),this.activeMuzzle(),c.Instance.PlaySoundPvE(u.SFX_Woolbody_Passive_fix1_2))},n.activeMuzzle=function(){if(null!=this.muzzlePrefab){var t=l(this.muzzlePrefab);t.parent=this.root.root.targetComponent.getTargetPos(),t.setPosition(0,0,0),t.active=!0}},e}(d)).prototype,"muzzlePrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=h))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/PassiveAcidBlood.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./DamageData.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var a,o,e,i,n,r,s,l,c,u,d,p,g,f,m,v,h;return{setters:[function(t){a=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,s=t.Node,l=t.instantiate,c=t.Vec3},function(t){u=t.SoundController,d=t.EnumSoundPVE},function(t){p=t.PVEGameplayControl},function(t){g=t.PVEHelper},function(t){f=t.DamageData},function(t){m=t.SkillDamageData},function(t){v=t.InGameEventID},function(t){h=t.SkillBase}],execute:function(){var D,P,y,k,E;n._RF.push({},"8a2895aavJISL29RO+DypdG","PassiveAcidBlood",void 0);var S=r.ccclass,A=r.property;t("PassiveAcidBlood",(D=S("PassiveAcidBlood"),P=A(s),D((E=a((k=function(t){function a(){for(var a,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return a=t.call.apply(t,[this].concat(n))||this,e(a,"impact",E,i(a)),a}o(a,t);var n=a.prototype;return n.Init=function(t,a){this.root=t,this.skillData=a,this.root.root.event.on(v.OnHit,this.OnHit,this)},n.OnHit=function(){var t=this;if(0!=g.RandomActive(this.skillData.PercentActive)){var a=this.root.root.targetComponent.getTargetPos(),o=l(this.impact);o.parent=p.Instance.getEffParentFront(),o.setWorldPosition(a.getWorldPosition()),o.active=!0,u.Instance.PlaySoundPvE(d.Worm_Acid_Blood);var e=this.root.root.node.worldPosition,i=this.root.root.getAllTargetObjects(),n=!1;i.forEach((function(a,o,i){!n&&a.isUndead&&(c.distance(e,a.node.worldPosition)<=t.skillData.castRange&&(t.activeSkill(a),n=!0))}))}},n.activeSkill=function(t){var a=this.skillData.damageData,o=this.root.root.data.attackData,e=new f;e.attacker=this.root.root,a.forEach((function(t){var a=m.getDamage(t,o.getNormalDamage(),o.getMagicDamage());e.AddDamage(t.damageType,a)})),t.targetComponent.TakeDamage(e)},a}(h)).prototype,"impact",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=k))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/PassivePiercingBarb.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SkillBase.ts","./PassiveRapidFire.ts"],(function(i){"use strict";var e,t,r,n,s;return{setters:[function(i){e=i.inheritsLoose},function(i){t=i.cclegacy,r=i._decorator},function(i){n=i.SkillBase},function(i){s=i.PassiveRapidFire}],execute:function(){var c;t._RF.push({},"557521vDqdBHpzUXzs480WJ","PassivePiercingBarb",void 0);var o=r.ccclass;r.property,i("PassivePiercingBarb",o("PassivePiercingBarb")(c=function(i){function t(){return i.apply(this,arguments)||this}return e(t,i),t.prototype.Init=function(e,t){i.prototype.Init.call(this,e,t),e.skillNodes.forEach((function(i){var e=i.getComponent(s);e&&(e.randomDirection=!0,e.randomPercent=t.PercentActive)}))},t}(n))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/PassiveRapidFire.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./BulletBase.ts","./DamageData.ts","./Enums.ts","./InGameEvent.ts","./NormalAttack.ts"],(function(t){"use strict";var e,a,i,n,o,r,s,c,l,u,h,m,d,g,f,p,v,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Node,c=t.instantiate},function(t){l=t.SoundController,u=t.EnumSoundPVE},function(t){h=t.PVEGameplayControl},function(t){m=t.PVEHelper},function(t){d=t.BulletBase},function(t){g=t.DamageData},function(t){f=t.AttackType,p=t.DamageType},function(t){v=t.InGameEventID},function(t){P=t.NormalAttack}],execute:function(){var D,A,k,B,y;o._RF.push({},"59ca14WcZpO9ZKkeS6N7YpA","PassiveRapidFire",void 0);var E=r.ccclass,R=r.property;t("PassiveRapidFire",(D=E("PassiveRapidFire"),A=R(s),D((y=e((B=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"directionBullet",y,n(e)),e.randomDirection=!1,e.randomPercent=50,e.hitRandom=!1,e.curDamage=void 0,e}a(e,t);var o=e.prototype;return o.addAttackData=function(t,e){t==f.NormalAttack&&e.AddDamage(p.Normal,this.root.GetRandomBasicDamage())},o.getBullet=function(){return this.hitRandom?this.directionBullet:this.bulletPrefab},o.attack=function(t){m.RandomActive(this.root.root.data.attackData.BlindPercent)?console.error("Blind"):(this.curTarget=t,this.curDamage=this.root.Attack(f.NormalAttack,this.curTarget),null!=this.curDamage&&(this.root.root.event.on(v.AttackAnimEvent,this.endCast,this),this.root.beginNormalAttack(),this.root.root.animationComponent.setFaceToTarget(t.node.worldPosition.x),this.muzzleActiveInstance&&this.activeMuzzle()))},o.endCast=function(){var t=this;if(this.hitRandom=this.randomDirection&&m.RandomActive(this.randomPercent),this.root.root.event.off(v.AttackAnimEvent,this.endCast,this),!this.muzzleActiveInstance&&this.activeMuzzle(),null!=this.getBullet()){if(c(this.getBullet()).getComponent(d).init(this.root,this.curTarget,this.curDamage),l.Instance.PlaySoundPvE(u.SFX_RapidFire_attack_single,.2),0!=m.RandomActive(this.skillData.PercentActive))this.skillData.Bullet.forEach((function(e){t.scheduleOnce((function(){t.moreBullet(e.DamagePercent)}),e.Delay)}))}else{if(this.impactPrefab){var e=c(this.impactPrefab);e.parent=h.Instance.getEffParent(),e.setWorldPosition(this.curTarget.getTargetPos().getWorldPosition()),e.active=!0}this.curTarget.TakeDamage(this.curDamage)}},o.moreBullet=function(t){var e=c(this.getBullet()),a=new g;a.damages=JSON.parse(JSON.stringify(this.curDamage.damages)),a.damages.forEach((function(e){e.damage*=t/100})),a.Effects=[],e.getComponent(d).init(this.root,this.curTarget,a),l.Instance.PlaySoundPvE(u.SFX_RapidFire_attack_single,.2)},e}(P)).prototype,"directionBullet",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=B))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/PassiveStaticShock.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./TargetComponent.ts","./DamageData.ts"],(function(t){"use strict";var e,i,a,r,o,n,c,s,l,f,p,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,n=t._decorator,c=t.CircleCollider2D,s=t.Node,l=t.Contact2DType,f=t.Component},function(t){p=t.PVEGameplayControl},function(t){u=t.TargetComponent},function(t){h=t.DamageData}],execute:function(){var d,g,m,D,v,y,k,b,C;o._RF.push({},"077bcTC8IlLGIoVnkZjTRjq","PassiveStaticShock",void 0);var E=n.ccclass,P=n.property;t("PassiveStaticShock",(d=E("PassiveStaticShock"),g=P(c),m=P(s),D=P(s),d((k=e((y=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,a(e,"collider2D",k,r(e)),a(e,"impactBack",b,r(e)),a(e,"impactFront",C,r(e)),e.skillData=void 0,e.target=void 0,e.root=void 0,e.targetAffect=[],e}i(e,t);var o=e.prototype;return o.Init=function(t,e,i){this.collider2D.on(l.BEGIN_CONTACT,this.BeginContact.bind(this),this),this.skillData=i,this.target=e,this.root=t,this.collider2D.radius=i.Effect_AOE,this.node.active=!0,this.impactBack.active=!0,this.impactFront.setParent(p.Instance.getEffParentFront(),!0),this.impactFront.active=!0,this.schedule(this.timeOut.bind(this),i.Effect_Duration)},o.BeginContact=function(t,e,i){var a=this,r=e.getComponent(u);r&&this.target!=r&&p.Instance.enemiesObject.forEach((function(t,e,i){if(t==r.root){for(var o=0;o<a.targetAffect.length;o++)if(a.targetAffect[o]==r)return;a.targetAffect.push(r);var n=new h;n.attacker=a.root.root;var c=r.root.data.statsData.getMaxHp()*(a.skillData.Effect_PrecentHpDmg/100);return n.AddDamage(a.skillData.Effect_DmgType,c),n.AddEffects(a.skillData.EffectData),void r.TakeDamage(n)}}))},o.timeOut=function(){this.impactFront.destroy(),this.node.destroy()},e}(f)).prototype,"collider2D",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=e(y.prototype,"impactBack",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(y.prototype,"impactFront",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=y))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/PassiveStickyLiquid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./PVE_Helper.ts","./Enums.ts","./InGameEvent.ts","./AttackPassiveWithCountdown.ts"],(function(t){"use strict";var i,e,n,a,s,c,o,r;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){a=t.PVEGameplayControl},function(t){s=t.PVEHelper},function(t){c=t.AttackType},function(t){o=t.InGameEventID},function(t){r=t.AttackPassiveWithCountdown}],execute:function(){var u;e._RF.push({},"6ab5cyYbvRFHKmUoIygHgHR","PassiveStickyLiquid",void 0);var l=n.ccclass;n.property,t("PassiveStickyLiquid",l("PassiveStickyLiquid")(u=function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e.prototype.addAttackData=function(t,i){t==c.NormalAttack&&(a.Instance.CurrentTime<this.NextTimeRandom||(i.AddDamages(this.skillData.damageData),0!=s.RandomActive(this.skillData.PercentActive)&&(this.NextTimeRandom=a.Instance.CurrentTime+this.skillData.Cooldown,i.AddEffects(this.skillData.EffectData),this.activeMuzzle(),null!=this.impactPrefab&&i.on(o.OnHit,this.OnHit,this))))},e}(r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/PassiveThornShell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_Helper.ts","./DamageData.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,a,i,n,o,r,l,s,c,u,h,f,p,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.CCBoolean,s=t.Node,c=t.instantiate},function(t){u=t.PVEHelper},function(t){h=t.DamageData},function(t){f=t.SkillDamageData},function(t){p=t.InGameEventID},function(t){m=t.SkillBase}],execute:function(){var v,g,z,D,P,k,d;o._RF.push({},"42c55peOeVMqINFGa/f6wia","PassiveThornShell",void 0);var y=r.ccclass,b=r.property;t("PassiveThornShell",(v=y("PassiveThornShell"),g=b(l),z=b(s),v((k=e((P=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"muzzleInAttackPos",k,n(e)),i(e,"muzzlePrefab",d,n(e)),e}a(e,t);var o=e.prototype;return o.Init=function(e,a){t.prototype.Init.call(this,e,a),this.root.root.event.on(p.OnHit,this.active,this)},o.active=function(t){if(null!=t&&0!=u.RandomActive(this.skillData.PercentActive)){var e=this.skillData.damageData,a=this.root.root.data.attackData,i=new h;i.attacker=this.root.root,e.forEach((function(t){var e=f.getDamage(t,a.getNormalDamage(),a.getMagicDamage());i.AddDamage(t.damageType,e)})),t.targetComponent.TakeDamage(i),this.activeMuzzle()}},o.activeMuzzle=function(){if(null!=this.muzzlePrefab){var t=c(this.muzzlePrefab);t.parent=this.muzzleInAttackPos?this.root.getAttackPos():this.root.getRootPos(),t.setPosition(0,0,0),t.active=!0}},e}(m)).prototype,"muzzleInAttackPos",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=e(P.prototype,"muzzlePrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=P))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/PassiveWeaknessExploit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./InGameEvent.ts","./AttackPassiveWithCountdown.ts"],(function(t){"use strict";var e,a,s,n,i,o,r;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,s=t._decorator},function(t){n=t.AttackType,i=t.DamageType},function(t){o=t.InGameEventID},function(t){r=t.AttackPassiveWithCountdown}],execute:function(){var c;a._RF.push({},"5c0a8K49vhLgKr1Jr5gu4DL","PassiveWeaknessExploit",void 0);var u=s.ccclass;s.property,t("PassiveWeaknessExploit",u("PassiveWeaknessExploit")(c=function(t){function a(){return t.apply(this,arguments)||this}return e(a,t),a.prototype.addAttackData=function(t,e,a){if(void 0===a&&(a=null),t==n.NormalAttack&&null!=a){var s=Math.min(a.AdverseEffectCount(),this.skillData.MaxAdverseCount);if(!(s<=0)){var r=this.skillData.DamagePercentPerAdverse*s;e.AddDamage(i.Normal,e.getNormalDamage()*r/100),this.activeMuzzle(),null!=this.impactPrefab&&e.on(o.OnHit,this.OnHit,this)}}},a}(r))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/PausePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./SoundController.ts","./UIPopupManager.ts","./UserModel.ts","./PVE_GameplayControl.ts","./PVEPopupBase.ts","./PVE_GamePlay_UI_Controller.ts"],(function(e){"use strict";var o,n,t,i,a,s,l,u,c,r,g,p,h,d,f,P;return{setters:[function(e){o=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,l=e.Toggle,u=e.Label,c=e.UIOpacity},function(e){r=e.ConfigApi},function(e){g=e.SoundController},function(e){p=e.UIPopupManager},function(e){h=e.UserModel},function(e){d=e.PVEGameplayControl},function(e){f=e.PVEPopupBase},function(e){P=e.PVEGamePlayUIController}],execute:function(){var T,v,y,C,I,S,b,L,O;a._RF.push({},"8b377EtAVVDaZv8Sokjwnf2","PausePopup",void 0);var m=s.ccclass,M=s.property;e("PausePopup",(T=m("PausePopup"),v=M(l),y=M(l),C=M(u),T((b=o((S=function(e){function o(){for(var o,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return o=e.call.apply(e,[this].concat(a))||this,t(o,"ToggleMusic",b,i(o)),t(o,"ToggleSound",L,i(o)),t(o,"versionLabel",O,i(o)),o}n(o,e);var a=o.prototype;return a.show=function(){e.prototype.show.call(this),d.Instance.IsPause=!0,this.ToggleMusic.isChecked=h.userLocalData.musicOn,this.ToggleSound.isChecked=h.userLocalData.soundOn,this.activeToggle(this.ToggleMusic,h.userLocalData.musicOn),this.activeToggle(this.ToggleSound,h.userLocalData.soundOn),this.versionLabel.string="V"+r.VERSION},a.hide=function(){e.prototype.hide.call(this)},a.continueClick=function(){d.Instance.IsPause=!1,this.hide()},a.quitClick=function(){this.hide(),P.Instance.callEndGame()},a.OnToggleMusic=function(){this.activeToggle(this.ToggleMusic,this.ToggleMusic.isChecked),this.OnSave()},a.OnToggleSound=function(){this.activeToggle(this.ToggleSound,this.ToggleSound.isChecked),this.OnSave()},a.activeToggle=function(e,o){var n=e.getComponentInChildren(c);n&&(n.node.active=!o)},a.OnSave=function(){h.userLocalData.musicOn=this.ToggleMusic.isChecked,h.userLocalData.soundOn=this.ToggleSound.isChecked,h.SaveUserLocalData(),g.Instance.PlayBgMusic(h.userLocalData.musicOn)},a.OnInfo=function(){this.hide(),p.Instance.UIPopupChangeLog(null)},o}(f)).prototype,"ToggleMusic",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=o(S.prototype,"ToggleSound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=o(S.prototype,"versionLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=S))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/PiercingBarbV2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_Helper.ts","./SkillBase.ts"],(function(t){"use strict";var e,i,r,c,n;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,r=t._decorator},function(t){c=t.PVEHelper},function(t){n=t.SkillBase}],execute:function(){var s;i._RF.push({},"a2e7ccuq1JGU74AzD22EewH","PiercingBarbV2",void 0);var a=r.ccclass;r.property,t("PiercingBarbV2",a("PiercingBarbV2")(s=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.addAttackData=function(t,e,i){0!=c.RandomActive(this.skillData.PercentActive)&&e.setPiercing(this.skillData.DmgMultiply)},i}(n))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/PlantBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./InGameEvent.ts","./GameplayObject.ts"],(function(t){"use strict";var e,i,n,s,a,c,r;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,s=t._decorator},function(t){a=t.PVEGameplayControl},function(t){c=t.InGameEventID},function(t){r=t.GameplayObject}],execute:function(){var o;n._RF.push({},"dd023KjylpBDLBvB8oYjgKb","PlantBase",void 0);var u=s.ccclass;s.property,t("PlantBase",u("PlantBase")(o=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).curTime=0,e.lifeTime=0,e}e(n,t);var s=n.prototype;return s.detailInit=function(){this.InitLifeTime(this.data.statsData.LifeTime)},s.InitLifeTime=function(t){this.curTime=t,this.lifeTime=t,a.GamePlayEvent.on(c.UpdatePerSec,this.UpdatePerSec,this)},s.PickupDone=function(){t.prototype.PickupDone.call(this),this.curTime/=2,this.ui.refeshLifeTime(this.curTime,this.lifeTime)},s.onDestroy=function(){},s.UpdatePerSec=function(){a.Instance.isInWave&&(this.curTime-=1,this.curTime<=0&&(this.curTime=0,this.Dead()),this.ui.refeshLifeTime(this.curTime,this.lifeTime))},s.start=function(){this.attackComponent.Init(this)},i(n,[{key:"isUndead",get:function(){return!1}}]),n}(r))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/PlantCardData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConvertJsonObject.ts"],(function(t){"use strict";var i,e,a,n,s,l,o;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy,a=t._decorator},function(t){n=t.convertToString,s=t.convertToUnstableNumber,l=t.convertToBoolean,o=t.convertToPlainObject}],execute:function(){var h;e._RF.push({},"1526c3ZicZE5bjfpM+gH8RG","PlantCardData",void 0);var r=a.ccclass;a.property,t("default",r("PlantCardData")(h=function(){function t(t){this.id="",this.status=0,this.ownerId="",this.tokenId=0,this.usageCount=0,this.type=1,this.stage=1,this.plantId=0,this.plantUnitId=0,this.isUpgraded=!1,this.exp=0,this.level=0,this.plantDetail=null,this.rarity=0,this.name="",this.configPlant=null,this.leCost=0,this.manaCost=0,this.combatPower=0,this.element="",this.currentFatigue=0,this.maxFatigue=0,this._data=void 0,this.UpdateData(t)}return t.prototype.UpdateData=function(t){var i,e;this._data=t,this.id=n(t._id),this.status=s(t.status),this.ownerId=n(t.ownerId),this.tokenId=s(t.tokenId),this.usageCount=s(t.usageCount),this.type=s(t.type),this.stage=s(t.stage),this.plantId=s(t.plantId),this.plantUnitId=s(t.plantUnitId),this.plantUnitId=s(t.plantUnitId),this.isUpgraded=l(t.isUpgraded),this.exp=s(t.exp),this.level=s(t.level),this.plantDetail=o(t.plant),this.plantDetail&&(this.rarity=s(this.plantDetail.rarity),this.name=n(this.plantDetail.name)),this.configPlant=o(t.config),this.configPlant&&(this.leCost=s(this.configPlant.leCost),this.manaCost=s(this.configPlant.manaCost),this.combatPower=s(this.configPlant.combatPower),this.element=n(this.configPlant.element)),this.currentFatigue=null!=(i=t.currentFatigue)?i:1e3,this.maxFatigue=null!=(e=t.maxFatigue)?e:1e3},i(t,[{key:"fatiguePercent",get:function(){return Math.floor(this.currentFatigue/this.maxFatigue*100)}},{key:"getLevel",get:function(){return this.level}}]),t}())||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/PlantISunflowertem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts"],(function(t){"use strict";var e,n,a,i,s,l,r,o,c,u,p,h,b,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.RichText,o=t.Sprite,c=t.Label,u=t.Node,p=t.Component,h=t.tween,b=t.v3},function(t){f=t.ResourcesManager}],execute:function(){var d,y,v,m,g,_,S,J,P,w,L,I,z,T,R,F,A;s._RF.push({},"e73fbcvfFtJRZy1v+C1GZOk","PlantISunflowertem",void 0);var B=l.ccclass,O=l.property;t("PlantISunflowertem",(d=B("PlantISunflowertem"),y=O({type:r}),v=O({type:o}),m=O({type:c}),g=O({type:u}),_=O({type:u}),S=O({type:c}),J=O({type:o}),d((L=e((w=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,a(e,"info_Amount",L,i(e)),a(e,"Plant",I,i(e)),a(e,"info_harvestLabelLE",z,i(e)),a(e,"btn_select",T,i(e)),a(e,"btn_convert",R,i(e)),a(e,"status",F,i(e)),a(e,"season",A,i(e)),e.Jdata=void 0,e.onSelect=void 0,e}n(e,t);var s=e.prototype;return s.Init=function(t,e){var n=this;if(this.node.active=!0,this.Jdata=null,this.onSelect=e,this.Jdata=t,null!=this.Jdata){var a=function(t){n.Plant.spriteFrame=t,h(n.Plant.node).to(.3,{scale:b(1.3,1.3,1.3)},{easing:"backOut"}).start()};this.Plant.node.setScale(0,0,0),null!=this.Jdata.seasonType?(1==this.Jdata.plantType?f.Instance.LoadPlant("sapling_"+this.Jdata.seasonType,a):f.Instance.LoadPlant("mama_"+this.Jdata.seasonType,a),this.season.spriteFrame=f.Instance.GetSeasonTextSpriteByName(this.Jdata.seasonType)):1==this.Jdata.plantType?f.Instance.LoadPlant("sapling_spring",a):f.Instance.LoadPlant("mama_spring",a),this.info_Amount.string=this.Jdata.usages.toString(),this.info_harvestLabelLE.string=this.Jdata.rate.le+"/"+this.Jdata.rate.hours+" Hour",this.UpdateStatus()}},s.UpdateStatus=function(){null!=this.onSelect?(this.btn_select.active=!0,this.status.node.parent.active=!1,this.btn_convert.active=!1):(this.btn_select.active=!1,this.status.node.parent.active=!1,this.btn_convert.active=!1)},s.OnBtnConvert=function(){},s.OnBtnSelect=function(){null!=this.onSelect&&this.onSelect(this.Jdata)},e}(p)).prototype,"info_Amount",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(w.prototype,"Plant",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(w.prototype,"info_harvestLabelLE",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(w.prototype,"btn_select",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(w.prototype,"btn_convert",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(w.prototype,"status",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(w.prototype,"season",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=w))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlantItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./ResourcesManager.ts"],(function(t){"use strict";var e,a,i,n,r,s,l,o,c,u,p,f,h,b,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.Node,o=t.Sprite,c=t.Label,u=t.UITransform,p=t.Component,f=t.tween,h=t.v3},function(t){b=t.Utility},function(t){d=t.ResourcesManager}],execute:function(){var y,m,g,v,I,_,P,L,w,z,S,D,F,T,J,N,U,k,R,C,E;r._RF.push({},"66e82oR54FEiIxTzXeFQeGI","PlantItem",void 0);var M=s.ccclass,x=s.property;t("PlantItem",(y=M("PlantItem"),m=x(l),g=x({type:o}),v=x({type:c}),I=x({type:o}),_=x({type:o}),P=x({type:c}),L=x(u),w=x({type:l}),z=x({type:c}),y((F=e((D=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"PlantNode",F,n(e)),i(e,"Plant",T,n(e)),i(e,"info_harvestLabelLE",J,n(e)),i(e,"type_land",N,n(e)),i(e,"season",U,n(e)),i(e,"info_ID",k,n(e)),i(e,"info_ID_UITransform",R,n(e)),i(e,"btn_select",C,n(e)),i(e,"status",E,n(e)),e.Jdata=void 0,e.onSelect=void 0,e}a(e,t);var r=e.prototype;return r.Init=function(t,e,a,i){var n=this;if(this.node.active=!0,this.Jdata=null,this.onSelect=e,this.Jdata=t,null!=this.Jdata){var r=this.Jdata.plant,s=r.stats;if(null!=s){this.info_ID.string=this.Jdata.plantId,this.info_ID_UITransform.getComponent(o).spriteFrame=d.Instance.LoadRarity(this.info_ID.string);d.Instance.Loadtype(s.type,(function(t){n.type_land.spriteFrame=t})),this.season.spriteFrame=d.Instance.GetSeasonTextSprite(b.GetSeasonByTypePlant(s.type));var l=function(t){n.Plant.spriteFrame=t,1==r.type?f(n.PlantNode).to(.3,{scale:h(1,1,1)},{easing:"backOut"}).start():f(n.PlantNode).to(.3,{scale:h(.8,.8,1)},{easing:"backOut"}).start()};if(this.PlantNode.setScale(0,0,0),1==r.type){var c=r.name;this.PlantNode.setPosition(0,-200,0),d.Instance.LoadPlant(c,l)}else{var u=r.iconUrl,p=u.split("/");u=p[p.length-1].split(".")[0],this.PlantNode.setPosition(0,-165,0),d.Instance.LoadMotherTree(u,l)}this.info_harvestLabelLE.string="LE: "+r.farmConfig.le+"/"+r.farmConfig.hours+" Hour"}}if(a)this.btn_select.active=!0,this.status.node.parent.active=!1;else switch(this.btn_select.active=!1,this.status.node.parent.active=!1,this.Jdata.status){case 0:this.status.node.parent.active=!1;break;case 1:this.status.node.parent.active=!0,this.status.string="For Sale";break;case 2:this.status.node.parent.active=!0,this.status.string="Farming"}},r.OnBtnSelectClick=function(){null!=this.onSelect&&this.onSelect(this.Jdata)},e}(p)).prototype,"PlantNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(D.prototype,"Plant",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(D.prototype,"info_harvestLabelLE",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(D.prototype,"type_land",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(D.prototype,"season",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(D.prototype,"info_ID",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(D.prototype,"info_ID_UITransform",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(D.prototype,"btn_select",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(D.prototype,"status",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=D))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlantSlot.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,n,s,a,o,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,o=t.SpriteFrame,l=t.Sprite,p=t.Component}],execute:function(){var c,u,h,f,_;s._RF.push({},"8d06baAiQFDxayY30nHHMcQ","PlantSlot",void 0);var P=a.ccclass,m=a.property;t("PlantSlot",(c=P("PlantSlot"),u=m(o),c((_=e((f=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,r(e,"Plant_slot_spriteframe",_,n(e)),e.sprite=null,e.isHavePlant=void 0,e.x=void 0,e.y=void 0,e}i(e,t);var s=e.prototype;return s.Init=function(t,e,i){null==this.sprite&&(this.sprite=this.node.getComponent(l)),this.x=e,this.y=i,this.isHavePlant=t,this.sprite.spriteFrame=t?this.Plant_slot_spriteframe[0]:this.Plant_slot_spriteframe[1]},s.ChangeState=function(t){this.isHavePlant=t,this.sprite.spriteFrame=t?this.Plant_slot_spriteframe[0]:this.Plant_slot_spriteframe[1]},e}(p)).prototype,"Plant_slot_spriteframe",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=f))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayAnim.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,n,e,r,a,o,l,c,s,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,l=t.Animation,c=t.Node,s=t.ParticleSystem,p=t.Component}],execute:function(){var u,y,f,h,P,m,g;a._RF.push({},"49d3fsBt8hB/4o2XWq+2sth","PlayAnim",void 0);var v=o.ccclass,d=o.property;t("PlayAnim",(u=v("PlayAnim"),y=d(l),f=d(c),u((m=i((P=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,e(i,"animation",m,r(i)),e(i,"particles",g,r(i)),i}n(i,t);var a=i.prototype;return a.onPlay=function(){this.animation.play()},a.onPlayPar=function(){for(var t=0;t<this.particles.length;t++)this.PlayParticle(this.particles[t])},a.PlayParticle=function(t){t.active=!0;var i=t.getComponent(s);null!=i&&(i.isPlaying&&i.stop(),i.play());for(var n=t.getComponentsInChildren(s),e=0;e<n.length;e++)n[e].isPlaying&&n[e].stop(),n[e].play()},i}(p)).prototype,"animation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=i(P.prototype,"particles",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=P))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/PoisonEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./DamageData.ts","./Enums.ts","./EffectBase.ts"],(function(t){"use strict";var e,a,i,n,c,s,o;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,i=t._decorator},function(t){n=t.PVEGameplayControl},function(t){c=t.DamageData},function(t){s=t.DamageType},function(t){o=t.EffectBase}],execute:function(){var r;a._RF.push({},"4aac1ugU+VHe4lGO/YYNNt8","PoisonEffect",void 0);var f=i.ccclass;i.property,t("PoisonEffect",f("PoisonEffect")(r=function(t){function a(){for(var e,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this).endEffectTime=0,e}e(a,t);var i=a.prototype;return i.Init=function(e,a,i){t.prototype.Init.call(this,e,a,i),this.endEffectTime=n.Instance.CurrentTime+a.EffectTime,this.isApplying=!0,this.thisTarget.root.data.attackData.AllDamagePercentModifier-=this.data.DecreaseDamagePercent,this.schedule(this.exec,1)},i.exec=function(){var t=new c;t.AddDamage(s.Chaos,this.thisTarget.root.data.statsData.getMaxHp()*this.data.HPPercentPerSec/100),this.thisTarget.root.applyDamage(t)},a.ApplyEffect=function(t,e){var a=t.getEffectWithType(e.EffectType);if(null!=a)a.endEffectTime=n.Instance.CurrentTime+a.data.EffectTime;else t.initEffect(e)},i.update=function(t){n.Instance.CurrentTime>=this.endEffectTime&&this.RemoveEffect()},i.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.thisTarget.root.data.attackData.AllDamagePercentModifier+=this.data.DecreaseDamagePercent,this.node.destroy()},a}(o))||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/PopUpBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts"],(function(t){"use strict";var e,i,o,n,a,c,r,l,s,p,u,d,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,r=t.Node,l=t.UIOpacity,s=t.CCInteger,p=t.tween,u=t.v3,d=t.Component},function(t){f=t.SoundController,y=t.EnumSound}],execute:function(){var h,v,S,U,I,O,b,g,N;a._RF.push({},"47323uU4LdP+IOU3dOf1HDR","PopUpBase",void 0);var P=c.ccclass,m=c.property;t("PopUpBase",(h=P("PopUpBase"),v=m(r),S=m(l),U=m(s),h((b=e((O=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,o(e,"ScaleNode",b,n(e)),o(e,"fadeUIOpacity",g,n(e)),o(e,"order",N,n(e)),e}i(e,t);var a=e.prototype;return a.OnShow=function(t){void 0===t&&(t=function(){}),this.node.active?(this.fadeUIOpacity.opacity=255,this.ScaleNode.setScale(1,1,1),t&&"function"==typeof t&&t()):(this.node.active=!0,null!=this.ScaleNode&&null!=this.fadeUIOpacity&&(this.ScaleNode.setScale(.5,.5,.5),this.fadeUIOpacity.opacity=0,p(this.fadeUIOpacity).to(.2,{opacity:255}).start(),p(this.ScaleNode).to(.3,{scale:u(1,1,1)},{easing:"backOut"}).call((function(){t&&"function"==typeof t&&t()})).start()))},a.OnHide=function(t,e){var i=this;void 0===t&&(t=function(){}),void 0===e&&(e=!0),this.node.active&&(f.Instance&&e&&f.Instance.PlaySound(y.GameUI_closepopup),null!=this.ScaleNode?(p(this.fadeUIOpacity).to(.2,{opacity:0}).start(),p(this.ScaleNode).to(.3,{scale:u(.5,.5,.5)},{easing:"circOut"}).call((function(){i.node.active=!1,t&&"function"==typeof t&&t()})).start()):(this.node.active=!1,t&&"function"==typeof t&&t()))},e}(d)).prototype,"ScaleNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=e(O.prototype,"fadeUIOpacity",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(O.prototype,"order",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=O))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/PopupConvertSapling.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FarmingServicesApi.ts","./PopUpBase.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(t){"use strict";var n,e,i,o,r,a,s,u,l,p,c,g,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Sprite,u=t.Label,l=t.EditBox},function(t){p=t.FarmingServicesApi},function(t){c=t.PopUpBase},function(t){g=t.ResourcesManager},function(t){f=t.UIPopupManager}],execute:function(){var h,d,m,S,w,y,v,b,I,P,M,C,x;r._RF.push({},"505c8Ppfq1DybOMKDCEN2Hf","PopupConvertSapling",void 0);var B=a.ccclass,z=a.property;t("PopupConvertSapling",(h=B("PopupConvertSapling"),d=z(s),m=z(s),S=z(u),w=z(l),y=z(u),h((I=n((b=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,i(n,"icon",I,o(n)),i(n,"icon1",P,o(n)),i(n,"des",M,o(n)),i(n,"amount",C,o(n)),i(n,"powder",x,o(n)),n.sunflowerId=void 0,n.max=void 0,n}e(n,t);var r=n.prototype;return r.Show=function(n,e,i,o){var r=this;t.prototype.OnShow.call(this),this.max=e,this.sunflowerId=n;var a=function(t){r.icon.spriteFrame=t,r.icon1.spriteFrame=t};1==i?(g.Instance.LoadPlant("sapling_"+o,a),this.des.string="1 Sunflower Sapling = 1 Mysterious Powder"):(g.Instance.LoadPlant("mama_"+o,a),this.des.string="1 Sunflower Mama = 5 Mysterious Powder"),this.amount.string="1",this.UpdateQuantity()},r.UpdateQuantity=function(){var t=1;""==this.amount.string?t=1:((t=parseInt(this.amount.string))>this.max&&(t=this.max),t<1&&(t=1)),this.amount.string=t.toString(),1==this.sunflowerId?this.powder.string=(1*t).toString():this.powder.string=(5*t).toString()},r.OnBtnConvert=function(){var t=this,n=parseInt(this.amount.string);if(n<=0)f.Instance.ShowToast("Error","Quantity is at least one",0);else if(n>25)f.Instance.ShowToast("Error","You can only convert a maximum of 25 Sapling/Mama at a time",0);else{p.RequestSwapSunflower(this.sunflowerId.toString(),n.toString(),(function(n){var e=JSON.parse(n);0==e.status?(f.Instance.ShowToast("Congratulation","Swap Sunflower Success!",1),t.OnBtnClose()):f.Instance.ShowToast("Error",g.Instance.GetErrorMessage(e.status),0)}),(function(t){}))}},r.OnBtnClose=function(){t.prototype.OnHide.call(this)},r.onEditBoxChange=function(){this.UpdateQuantity()},n}(c)).prototype,"icon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=n(b.prototype,"icon1",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=n(b.prototype,"des",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=n(b.prototype,"amount",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=n(b.prototype,"powder",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=b))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/PrefabController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./Utility.ts"],(function(e){"use strict";var t,n,i,s,a,r,o,c,l,p,u,f,h,P,b,g,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,o=e.Prefab,c=e.CCInteger,l=e.Node,p=e.instantiate,u=e.game,f=e.systemEvent,h=e.SystemEvent,P=e.Component},function(e){b=e.SoundController,g=e.EnumSound},function(e){y=e.Utility}],execute:function(){var C,v,d,_,U,T,m,I,E,R,z,A,S,w,D;e("PrefabEnum",void 0),a._RF.push({},"f747eE1kDNBwZY0E3vvQZGI","PrefabController",void 0);var G,F=r.ccclass,H=r.property,x=e("zPrefabAsset",(C=F("zPrefabAsset"),v=H(o),d=H(c),C((T=t((U=function(){function e(){i(this,"prefab",T,this),i(this,"maxIntances",m,this),this.intances=[],this.intancesFree=[],this.intancesUse=[]}var t=e.prototype;return t.GetPrefab=function(e){if(this.intancesFree.length>0){var t=this.intancesFree[0];return this.intancesFree.splice(0,1),this.intancesUse.push(t),t}if(this.intances.length<this.maxIntances)return(t=p(this.prefab)).active=!1,t.setParent(e),this.intancesUse.push(t),this.intances.push(t),t;if(this.intancesUse.length>0){t=this.intancesUse[0];return this.intancesUse.splice(0,1),this.intancesUse.push(t),t}return null},t.ReturnPrefab=function(e,t){e.active=!1,e.setParent(t),this.intancesFree.push(e);var n=this.intancesUse.indexOf(e);n>-1&&this.intancesUse.splice(n,1)},t.ReturnAll=function(e){for(;this.intancesUse.length>0;){var t=this.intancesUse[0];t.active=!1,t.setParent(e),this.intancesFree.push(t),this.intancesUse.splice(0,1)}},e}()).prototype,"prefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(U.prototype,"maxIntances",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=U))||_));!function(e){e[e.ChaseCrow=0]="ChaseCrow",e[e.Tapping=1]="Tapping",e[e.MaterialDrop=2]="MaterialDrop",e[e.Chopping_Blue=3]="Chopping_Blue",e[e.Chopping_Green=4]="Chopping_Green",e[e.Chopping_Pink=5]="Chopping_Pink",e[e.Chopping_Red=6]="Chopping_Red",e[e.Chopping_Root=7]="Chopping_Root",e[e.Bag_effect=8]="Bag_effect",e[e.Chopping_HpLabel=9]="Chopping_HpLabel",e[e.Water_single=10]="Water_single",e[e.Harvest=11]="Harvest",e[e.PlacePlant=12]="PlacePlant"}(G||(G=e("PrefabEnum",{})));e("PrefabController",(I=F("PrefabController"),E=H(l),R=H(x),I(((D=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).isPlayTabEffect=!0,t.isPlayTabSound=!0,i(t,"PrefabContent",S,s(t)),i(t,"zPrefabAssets",w,s(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){null==t.Instance?(t.Instance=this,u.addPersistRootNode(this.node)):this.destroy(),f.on(h.EventType.MOUSE_DOWN,this.onMouseEvent,this)},a.onMouseEvent=function(e){if(this.isPlayTabEffect){var n=t.Instance.GetPrefab(G.Tapping),i=e.getUILocation();n.setPosition(i.x,i.y,0),y.PlayParticle(n),this.isPlayTabSound&&b.Instance.PlaySound(g.GameUI_openpopup,.3)}},a.onTOUCHDown=function(e,n){if(this.isPlayTabEffect){var i=t.Instance.GetPrefab(G.Tapping),s=n.getUILocation();i.setPosition(s.x,s.y,0),y.PlayParticle(i),this.isPlayTabSound&&b.Instance.PlaySound(g.GameUI_openpopup,.3)}},a.onDestroy=function(){f.off(h.EventType.TOUCH_START,this.onTOUCHDown,this)},a.GetPrefab=function(e){return this.zPrefabAssets[e].GetPrefab(this.PrefabContent)},a.ReturnPrefab=function(e,t){this.zPrefabAssets[e].ReturnPrefab(t,this.PrefabContent)},a.ReturnAllPrefab=function(e){this.zPrefabAssets[e].ReturnAll(this.PrefabContent)},t}(P)).Instance=void 0,S=t((A=D).prototype,"PrefabContent",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(A.prototype,"zPrefabAssets",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=A))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/PrimalShell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,n,i,r,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){r=t.InGameEventID},function(t){a=t.SkillBase}],execute:function(){var s;n._RF.push({},"d2ab43Qwo5CkanH0Zk4oDd3","PrimalShell",void 0);var o=i.ccclass;i.property,t("PrimalShell",o("PrimalShell")(s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).isApplying=!1,e.TiggerHPPercent=100,e}e(n,t);var i=n.prototype;return i.Init=function(e,n){t.prototype.Init.call(this,e,n),this.TiggerHPPercent=n.TiggerHPPercent,this.OnHpChanged(null,null,null),this.root.root.event.on(r.HpChanged,this.OnHpChanged,this)},i.OnHpChanged=function(t,e,n){this.root.root.getHpPercent()>this.TiggerHPPercent?this.add():this.remove()},i.add=function(){this.isApplying||(this.isApplying=!0,this.root.root.data.statsData.DecreaseDamagePercent+=this.skillData.DamageDecreasePercent)},i.remove=function(){this.isApplying&&(this.isApplying=!1,this.root.root.data.statsData.DecreaseDamagePercent-=this.skillData.DamageDecreasePercent)},n}(a))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/PVE_Constant.ts",["cc"],(function(_){"use strict";var A,E;return{setters:[function(_){A=_.cclegacy,E=_._decorator}],execute:function(){_("PVE_Constant",void 0),A._RF.push({},"5ce6abbDMVLfqp9D1zRT3G7","PVE_Constant",void 0);var t,N;E.ccclass,E.property;(N=t||(t=_("PVE_Constant",{}))).CallApi=!0,N.IS_CHEAT=!0,N.LAND_HEIGHT=160,N.ISO_HEIGHT_PERCENT=.65,N.MANA_MAX_AMOUNT=1e3,N.MANA_REGEN_WHEN_UNDEAD_HIT=.15,N.MANA_ON_START_AMOUNT=.25,N.MANA_ON_ENEMY_KILLED=.02,N.MANA_ON_ALLY_KILLED=.05,N.MANA_REGEN_PER_SEC=2,N.CARD_MAX_AMOUNT_VISIBLE=4,N.BLIGHT_MAX_STACK=3,N.BLIGHT_RES_ADD=-25,N.RES_MIN_CAP=-75,N.RES_MAX_CAP=100,A._RF.pop()}}}));

System.register("chunks:///_virtual/PVE_Enum.ts",["cc"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.cclegacy,e=n._decorator}],execute:function(){n("PVE_Enum",void 0),t._RF.push({},"f0dc4bOuAdKPbIUxp75qGwg","PVE_Enum",void 0);var o,c,r,u;e.ccclass,e.property;c=o||(o=n("PVE_Enum",{})),function(n){n[n.None=0]="None",n[n.Road=1]="Road",n[n.Soil=2]="Soil",n[n.Start=3]="Start",n[n.End=4]="End"}(r||(r={})),c.ESlotType=r,function(n){n[n.None=0]="None",n[n.Undead=1]="Undead",n[n.Plant=0]="Plant",n[n.Spell=2]="Spell"}(u||(u={})),c.ECardType=u,t._RF.pop()}}}));

System.register("chunks:///_virtual/PVE_GamePlay_UI_Controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./PVEDataProvider.ts","./GameplayConfig.ts","./InGameEvent.ts","./PVEService.ts","./PVE_Constant.ts","./PVE_Enum.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./PVE_Map_Controller.ts","./UI_CardScrollview.ts","./PausePopup.ts","./PVEPopupBase.ts","./SpriteFollowCursor.ts","./UIEndGamePopup.ts","./UIWaveTitle.ts"],(function(e){"use strict";var t,n,i,a,r,o,l,u,s,c,p,f,h,g,d,y,b,m,P,v,w,E,S,_,C,I,T,D,L,U,z,M,W,N,V,R,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass,o=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){u=e.cclegacy,s=e._decorator,c=e.Label,p=e.UITransform,f=e.SpriteFrame,h=e.UIOpacity,g=e.Node,d=e.Sprite,y=e.Toggle,b=e.PhysicsSystem2D,m=e.EPhysics2DDrawFlags,P=e.Tween,v=e.tween,w=e.Component},function(e){E=e.Utility},function(e){S=e.PVEDataProvider},function(e){_=e.GameplayConfig},function(e){C=e.InGameEventID},function(e){I=e.PVEService},function(e){T=e.PVE_Constant},function(e){D=e.PVE_Enum},function(e){L=e.PVEGameplayControl},function(e){U=e.PVEHelper},function(e){z=e.PVEMapController},function(e){M=e.UICardScrollview},function(e){W=e.PausePopup},function(e){N=e.PVEPopupBase},function(e){V=e.SpriteFollowCursor},function(e){R=e.UIEndGamePopup},function(e){x=e.UIWaveTitle}],execute:function(){var G,B,A,F,k,H,O,X,Z,j,J,K,q,Q,Y,$,ee,te,ne,ie,ae,re,oe,le,ue,se,ce,pe,fe,he,ge,de,ye,be,me,Pe,ve,we,Ee,Se,_e,Ce,Ie,Te,De,Le;u._RF.push({},"8dec9ZHJCdD44neZWs6KEi9","PVE_GamePlay_UI_Controller",void 0);var Ue=s.ccclass,ze=s.property;e("PVEGamePlayUIController",(G=Ue("PVEGamePlayUIController"),B=ze(c),A=ze(c),F=ze(p),k=ze(V),H=ze(M),O=ze(f),X=ze(f),Z=ze(z),j=ze(x),J=ze(h),K=ze(c),q=ze(c),Q=ze(g),Y=ze(g),$=ze(R),ee=ze(g),te=ze(h),ne=ze(d),ie=ze(W),ae=ze(N),re=ze(y),G(((Le=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"txtLE",ue,a(t)),i(t,"txtMana",se,a(t)),i(t,"manaProgress",ce,a(t)),t.fullProgressWidth=-1,i(t,"spriteFollow",pe,a(t)),i(t,"cardScrollview",fe,a(t)),t._dragging_cardIndex=void 0,i(t,"tempSprite",he,a(t)),i(t,"tempSprite_Spell",ge,a(t)),i(t,"parrentMapSlot",de,a(t)),i(t,"uiWave",ye,a(t)),i(t,"notifyRoot",be,a(t)),i(t,"notifyLabel",me,a(t)),i(t,"countdownWaveLabel",Pe,a(t)),i(t,"baseHealthParent",ve,a(t)),i(t,"handleTouch",we,a(t)),i(t,"endgamePopup",Ee,a(t)),i(t,"startWaveBtn",Se,a(t)),i(t,"lifeNotify",_e,a(t)),i(t,"sprPauseBtn",Ce,a(t)),i(t,"pausedPopup",Ie,a(t)),i(t,"confirmEndPopup",Te,a(t)),i(t,"showDamageToggle",De,a(t)),t.cacheWaveText="",t.regenManaState=!1,t}n(t,e);var u=t.prototype;return u.start=function(){var e=this;t._instance=this,_.DebugPhysic&&(b.instance.debugDrawFlags=m.Shape),this.notifyRoot.opacity=0,this.notifyRoot.node.active=!1,this.uiWave&&(this.uiWave.node.active=!1),this.enableStartBtn(!1),L.GamePlayEvent.on(C.UpdatePerSec,this.UpdatePerSec,this),this.BeginRegenMana(),_.ShowDamageLabel=this.showDamageToggle.isChecked,S.GetLE((function(t){E.TweenLE(t,!1,e.txtLE)}))},u.RefreshLE=function(){var e=this;S.RefreshLE((function(t){E.TweenLE(t,!1,e.txtLE)}))},u.onToggleShowDamageCheck=function(){_.ShowDamageLabel=this.showDamageToggle.isChecked},u.pauseClick=function(){this.pausedPopup.show()},u.callEndGame=function(){var e=o(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.confirmEndPopup.show();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.cancelEnd=function(){this.confirmEndPopup.hide(),L.Instance.IsPause=!1},u.confirmEnd=function(){var e=o(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.confirmEndPopup.hide(),T.CallApi,e.next=4,I.ForceEndGame();case 4:t=e.sent,console.log("endgame",t),L.Instance.forceEndgame(t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.NotifyWave=function(e){this.uiWave&&this.uiWave.show(e)},u.NotifyLostLife=function(e){var t=this;P.stopAllByTarget(this.lifeNotify),this.lifeNotify.node.active=!0,this.lifeNotify.opacity=0,v(this.lifeNotify).to(.4,{opacity:255}).call((function(){v(t.lifeNotify).to(.4,{opacity:0}).call((function(){t.lifeNotify.node.active=!1})).start()})).start()},u.Notify=function(e,n,i,a){var r=this;void 0===n&&(n=1.5),void 0===i&&(i=null),void 0===a&&(a=!0),T.IS_CHEAT&&(n=.1),console.log("TEXT INFO : ",e),a&&(t.pauseUI=!0),this.notifyLabel.string=e,this.notifyRoot.opacity=0,this.notifyRoot.node.active=!0,null!=i&&(this.notifyLabel.fontSize=i),v(this.notifyRoot).to(.2,{opacity:255}).call((function(){r.scheduleOnce((function(){v(r.notifyRoot).to(.2,{opacity:0}).call((function(){r.scheduleOnce((function(){a&&(t.pauseUI=!1),r.notifyRoot.opacity=0,r.notifyRoot.node.active=!1}),.1)})).start()}),n)})).start()},u.UpdatePerSec=function(){this.countdownWaveLabel.string=U.ConvertSecondsToTime(L.Instance.waveTime)},u.CountdownWave=function(e,t){},u.enableStartBtn=function(e){this.startWaveBtn.active=e},u.btnStart_Click=function(){var e=o(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L.Instance.IsPause){e.next=2;break}return e.abrupt("return");case 2:this.enableStartBtn(!1),L.Instance.waveTime=1;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.BeginRegenMana=function(){var e=this;this.schedule((function(){e.regenManaState&&L.Instance.AddMana(T.MANA_REGEN_PER_SEC)}),1)},u.StartDraggingCard=function(e,t){L.Instance.IsPause||null!=this.spriteFollow&&(this._dragging_cardIndex=e.Index,e.Type===D.ECardType.Spell?this.tempSprite_Spell:this.tempSprite,this.spriteFollow.StartDragging(e,t))},u.StopDraggingCard=function(e){L.Instance.OnDraggedCard(this._dragging_cardIndex,e),this.parrentMapSlot.activeMapslot(null)},u.CancelDraggingCard=function(){this.spriteFollow.CancelDragging()},u.UpdateMana=function(e){this.fullProgressWidth<0&&(this.fullProgressWidth=this.manaProgress.width),this.txtMana.string=e+"/"+T.MANA_MAX_AMOUNT,this.manaProgress.width=e/T.MANA_MAX_AMOUNT*this.fullProgressWidth},u.OnCardUsed=function(e){null!==this.cardScrollview&&this.cardScrollview.OnCardUsed(e)},u.updateBaseHealth=function(){for(var e=L.Instance.BaseHealth,t=this.baseHealthParent.children,n=0;n<t.length;n++)t[n].children[0].active=n<e;e<8&&this.NotifyLostLife()},r(t,null,[{key:"Instance",get:function(){return this._instance}}]),t}(w))._instance=null,Le.pauseUI=!0,ue=t((le=Le).prototype,"txtLE",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(le.prototype,"txtMana",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(le.prototype,"manaProgress",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(le.prototype,"spriteFollow",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(le.prototype,"cardScrollview",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(le.prototype,"tempSprite",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(le.prototype,"tempSprite_Spell",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(le.prototype,"parrentMapSlot",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=t(le.prototype,"uiWave",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=t(le.prototype,"notifyRoot",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(le.prototype,"notifyLabel",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=t(le.prototype,"countdownWaveLabel",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=t(le.prototype,"baseHealthParent",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=t(le.prototype,"handleTouch",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=t(le.prototype,"endgamePopup",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=t(le.prototype,"startWaveBtn",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=t(le.prototype,"lifeNotify",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=t(le.prototype,"sprPauseBtn",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=t(le.prototype,"pausedPopup",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=t(le.prototype,"confirmEndPopup",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=t(le.prototype,"showDamageToggle",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=le))||oe));u._RF.pop()}}}));

System.register("chunks:///_virtual/PVE_GameplayControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameplayConfig.ts","./PlantBase.ts","./WaveControl.ts","./PVE_Enum.ts","./PVE_Constant.ts","./PVE_Map_Slot.ts","./PVE_ResourceManager.ts","./PVE_GamePlay_UI_Controller.ts","./PVE_Helper.ts","./Enums.ts","./UndeadBase.ts","./GameplayObject.ts","./InGameEvent.ts","./SpellBase.ts","./PVEService.ts","./GameplayModel.ts","./SoundController.ts","./EngineHelper.ts"],(function(e){"use strict";var t,n,a,r,i,s,o,c,u,l,p,d,f,h,v,m,y,g,C,I,E,S,P,b,T,w,x,G,_,k,D,M,O,W,A,U,B,L,R;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createClass,s=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,l=e.Node,p=e.TextAsset,d=e.math,f=e.UITransform,h=e.instantiate,v=e.director,m=e.Component,y=e.SystemEvent,g=e.PhysicsSystem2D,C=e.rect},function(e){I=e.GameplayConfig},function(e){E=e.PlantBase},function(e){S=e.WaveControl},function(e){P=e.PVE_Enum},function(e){b=e.PVE_Constant},function(e){T=e.PVEMapSlot},function(e){w=e.PVEResourceManager},function(e){x=e.PVEGamePlayUIController},function(e){G=e.PVEHelper},function(e){_=e.GameplayTeam},function(e){k=e.UndeadBase},function(e){D=e.GameplayObject},function(e){M=e.InGameEventID,O=e.InGameEvent},function(e){W=e.SpellBase},function(e){A=e.PVEService},function(e){U=e.GameplayModel},function(e){B=e.SoundController,L=e.EnumSound},function(e){R=e.EngineHelper}],execute:function(){var V,j,H,N,z,F,K,J,X,Y,q,Q,Z,$,ee,te,ne,ae;c._RF.push({},"58143AP26RM7KASPrE3YRN+","PVE_GameplayControl",void 0);var re=u.ccclass,ie=u.property;e("PVEGameplayControl",(V=re("PVEGameplayControl"),j=ie(l),H=ie(l),N=ie(p),z=ie(p),F=ie(S),K=ie(l),J=ie([E]),V(((ae=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this)._CurrentId=0,t._CurrentTime=void 0,t._paused=!1,a(t,"effRoot_front",q,r(t)),a(t,"effRoot_back",Q,r(t)),a(t,"gameobjectConfig",Z,r(t)),a(t,"spellConfig",$,r(t)),a(t,"waveControl",ee,r(t)),a(t,"offscreenTop",te,r(t)),a(t,"cheatPlants",ne,r(t)),t.enemiesObject=new Map,t.myTeamObject=new Map,t._isEndGame=!1,t.TotalDamage=0,t.CurrentWaveIndex=-1,t.waveTime=0,t.isInWave=!1,t.PrepareTime=30,t.dirtyLayer=!0,t.dirtyObject=!0,t.sortLayer=[],t}n(t,e);var c=t.prototype;return c.AddMana=function(e){if(!b.IS_CHEAT){var n=this.GetMana+e;n=d.clamp(n,0,b.MANA_MAX_AMOUNT),U.waveData.stageDetail.mana=n,x.Instance.UpdateMana(n),t.GamePlayEvent.dispatchEvent(M.ManaChanged,n)}},c.RefreshMana=function(){x.Instance.UpdateMana(this.GetMana),t.GamePlayEvent.dispatchEvent(M.ManaChanged,this.GetMana)},c.refreshHP=function(){x.Instance.updateBaseHealth()},c.forceEndgame=function(e){x.Instance.endgamePopup.show(!1,e),this._isEndGame=!0},c.CustomLog=function(e){console.log(e)},c.onLoad=function(){t.GamePlayEvent=new O},c.start=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Instance=this,I.InitConfig(this.gameobjectConfig.text),I.InitSpellConfig(this.spellConfig.text),this._CurrentTime=0,this.TotalDamage=0,e.next=7,G.WaitForSec(.1);case 7:this.schedule(this.updatePerSec,1),x.Instance.cardScrollview.InitDeckCard(),b.IS_CHEAT?this.AddMana(b.MANA_MAX_AMOUNT):this.RefreshMana(),this.StartGame(),x.Instance.handleTouch.on(y.EventType.TOUCH_MOVE,this.pickupMouseMove,this),x.Instance.handleTouch.on(y.EventType.TOUCH_END,this.pickupMouseEnd,this),R.TouchEndWithoutStart(x.Instance.handleTouch),B.Instance.SetBgMusic(L.BG_PVE);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.pickupMouseMove=function(e){t.GamePlayEvent.dispatchEvent(M.TouchMove,e)},c.pickupMouseEnd=function(e){t.GamePlayEvent.dispatchEvent(M.TouchEnd,e)},c.StartGame=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.WaitForSec(2);case 2:x.Instance.Notify("DEPLOY TEAM!"),x.Instance.CountdownWave(this.PrepareTime,!1),this.waveTime=this.PrepareTime,x.Instance.enableStartBtn(!0);case 6:if(!(this.waveTime>0)){e.next=11;break}return e.next=9,G.WaitForSec(1);case 9:e.next=6;break;case 11:if(null!=x.Instance){e.next=13;break}return e.abrupt("return");case 13:this.startWave();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.startWave=function(){var e=s(o().mark((function e(){var t,n,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("start wave"),x.Instance.enableStartBtn(!1),!this.IsEndGame){e.next=4;break}return e.abrupt("return");case 4:if(x.Instance.regenManaState=!0,!b.CallApi){e.next=19;break}return e.next=8,A.Ingame_RequestStartWave();case 8:if(t=e.sent,"STOPPED"!==(n=JSON.parse(t)).status){e.next=14;break}return this._isEndGame=!0,this.forceEndgame(t),e.abrupt("return");case 14:this.CurrentWaveIndex=n.wave,x.Instance.NotifyWave(this.CurrentWaveIndex),this.waveControl.StartWaveWithWaveData(n.stageDetail),e.next=25;break;case 19:if(this.CurrentWaveIndex++,0!=this.waveControl.checkWave(this.CurrentWaveIndex)){e.next=23;break}return this._isEndGame=!0,e.abrupt("return");case 23:this.waveControl.StartWave(this.CurrentWaveIndex),x.Instance.NotifyWave(this.CurrentWaveIndex);case 25:this.scheduleOnce((function(){a.isInWave=!0}),2),this.waveTime=240,x.Instance.CountdownWave(this.waveTime,!0),this.dirtyObject=!0;case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.endWave=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.Instance.regenManaState=!1,!(this.enemiesObject.size<=0)){e.next=22;break}return this.isInWave=!1,x.pauseUI=!0,x.Instance.Notify("WAVE CLEARED!",1.5,null,!1),e.next=7,G.WaitForSec(1);case 7:return e.next=9,G.WaitForSec(3);case 9:if(null!=x.Instance){e.next=11;break}return e.abrupt("return");case 11:x.Instance.Notify("PREPARE PHASE"),x.Instance.CountdownWave(this.PrepareTime,!1),this.waveTime=this.PrepareTime,x.Instance.enableStartBtn(!0);case 15:if(!(this.waveTime>0)){e.next=20;break}return e.next=18,G.WaitForSec(1);case 18:e.next=15;break;case 20:if(null!=x.Instance){e.next=22;break}return e.abrupt("return");case 22:this.startWave();case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.onEnemyCompletePath=function(){var e=s(o().mark((function e(t){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.LostHP(t.SpawnCode);case 2:n=e.sent,console.log("LostHP",n),U.updateIngameData(n),null!=(a=JSON.parse(n)).status&&"STOPPED"==a.status&&(U.waveData.stageDetail.hp=0,this.IsPause=!0,this.forceEndgame(n)),this.refreshHP();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.updatePerSec=function(){t.GamePlayEvent.dispatchEvent(M.UpdatePerSec),this.waveTime>0&&this.waveTime--,this.isInWave&&(this.waveTime<=0||this.enemiesObject.size<=0)&&this.endWave()},c.update=function(e){this._CurrentTime+=e,this.updateSorting(),t.GamePlayEvent.dispatchEvent(M.GameUpdate)},c.updateSorting=function(){var e=Object.assign([],this.getSortingOrderList());e.sort((function(e,t){return t.node.position.y-t.contentSize.height/2-(e.node.position.y-e.contentSize.height/2)}));for(var t=0;t<e.length;t++)e[t].node.setSiblingIndex(t)},c.getSortingOrderList=function(){if(!this.dirtyObject)return this.sortLayer;this.sortLayer=[],this.dirtyObject=!1;for(var e=0;e<this.waveControl.node.children.length;e++){var t=this.waveControl.node.children[e];this.sortLayer.push(t.getComponent(f))}return this.sortLayer},c.btnStartWaveClick=function(){x.pauseUI||(console.log("start wave click"),this.waveControl.StartWave(0))},c.getEffParent=function(){return this.effRoot_front},c.getEffParentBack=function(){return this.effRoot_back},c.getEffParentFront=function(){return this.effRoot_front},t.GetGenerateObID=function(){return++t.Instance._CurrentId},c.SpawnTree=function(e,t){var n=this,a=e.ID,r=e.level;w.Instance.GetPlantPrefab(a,(function(i){if(null!=i){var s=h(i);s.setParent(n.waveControl.node),s.active=!0,s.setPosition(t.node.position);var o=s.getComponent(E);o.CardDataIndex=e.Index;var c=I.GetPlantData(a);b.IS_CHEAT?c.upgradeLevel(25):c.upgradeLevel(r),o.initConfig(_.MyTeam,c,e),o.mapSlot=t.slotIndex,n.dirtyObject=!0}else console.error("card with id null",a)}))},c.SpawnUndead=function(e,t){var n=this,a=e.ID,r=e.level;w.Instance.GetUndeadPrefab(a,(function(i){var s=h(i);s.setParent(n.waveControl.node),s.active=!0,s.setPosition(t.node.position);var o=s.getComponent(k);o.CardDataIndex=e.Index;var c=I.GetUndeadData(a);c.upgradeStateMyTeam(),c.upgradeLevel(r),o.initConfig(_.MyTeam,c,e),o.animationComponent.setIdleAnim(),n.dirtyObject=!0}))},c.SpawnSpell=function(e,t){var n=h(w.Instance.GetSpellPrefab(e));n.setParent(this.getEffParent()),n.setWorldPosition(t.node.worldPosition),n.active=!0;var a=n.getComponent(W),r=I.GetSpellConfig(e);a.init(r)},c.SpawnSpellOnTarget=function(e,t){var n=h(w.Instance.GetSpellPrefab(e));n.setParent(this.getEffParent()),n.setWorldPosition(t.targetComponent.targetPos.worldPosition.clone()),n.active=!0;var a=n.getComponent(W),r=I.GetSpellConfig(e);a.init(r,t)},c.GetCardByCardIndex=function(e){return x.Instance.cardScrollview.GetCardByCardIndex(e)},c.OnDraggedCard=function(){var e=s(o().mark((function e(n,a){var r,i,s,c,u,l,p,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.instance.testAABB(C(a.x,a.y,5,5)),i=null,s=null,r.forEach((function(e){null==s&&(s=e.getComponent(T)),null==i&&(i=e.getComponent(D))})),null!=(c=this.GetCardByCardIndex(n))){e.next=8;break}return console.error("card null",n),e.abrupt("return");case 8:if(!(this.GetMana<c.ManaPrice)){e.next=11;break}return console.log("not enough mana"),e.abrupt("return");case 11:if(u=!1,null==s){e.next=27;break}if(this.CustomLog("Drag to map slot: "+s.node.name+" type "+s.SlotType+" cardIndex"+n),u=!0,P.ECardType.Plant===c.Type&&P.ESlotType.Soil===s.SlotType?(l=!1,t.Instance.myTeamObject.forEach((function(e){0==e.isUndead&&e.mapSlot==s.slotIndex&&(l=!0)})),l&&(u=!1)):P.ECardType.Undead===c.Type&&P.ESlotType.Road===s.SlotType||P.ECardType.Spell===c.Type||(u=!1,console.error("Undefined dragged card action!!!")),!u){e.next=25;break}return e.next=19,A.UseCard(c.serverId,c.serverType,c.isSystemCard);case 19:if(p=e.sent,0!=U.updateIngameData(p)){e.next=22;break}return e.abrupt("return");case 22:console.log("resUseCardStr",p),P.ECardType.Plant===c.Type?this.SpawnTree(c,s):P.ECardType.Undead===c.Type?this.SpawnUndead(c,s):P.ECardType.Spell===c.Type&&(this.SpawnSpell(c.ID,s),x.Instance.cardScrollview.OnCardBack(c.Index)),x.Instance.OnCardUsed(c.Index);case 25:e.next=38;break;case 27:if(c.Type!=P.ECardType.Spell||null==i){e.next=38;break}if("Target"!==I.GetSpellConfig(c.ID).CastType){e.next=38;break}return e.next=32,A.UseCard(c.serverId,c.serverType,c.isSystemCard);case 32:if(d=e.sent,0!=U.updateIngameData(d)){e.next=35;break}return e.abrupt("return");case 35:u=!0,this.SpawnSpellOnTarget(c.ID,i),x.Instance.OnCardUsed(c.Index);case 38:x.Instance.RefreshLE();case 40:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.OnEnemyKilled=function(){var e=s(o().mark((function e(t,n){var a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=null),console.log("OnEnemyKilledBeb",t.SpawnCode),a=null,null!=n&&null!=n.cardData&&(a={id:n.cardData.serverId,type:n.cardData.serverType,isSystemCard:n.cardData.isSystemCard}),e.next=6,A.KillEnemy(t.SpawnCode,a);case 6:r=e.sent,console.log("OnEnemyKilled",r),null!=r&&U.updateIngameData(r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c.OnAllyKilled=function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.wounded(t.configId);case 2:n=e.sent,console.log("OnAllyKilled",n),U.updateIngameData(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.OnObjectDied=function(e,t,n){void 0===n&&(n=null),!0===e?this.OnEnemyKilled(t,n):this.OnAllyKilled(t)},i(t,[{key:"IsPause",get:function(){return this._paused},set:function(e){this._paused=e,0==this._paused?v.resume():v.pause()}},{key:"GetMana",get:function(){return b.IS_CHEAT?500:U.waveData.stageDetail.mana}},{key:"IsEndGame",get:function(){return this._isEndGame}},{key:"BaseHealth",get:function(){return b.IS_CHEAT?8:U.waveData.stageDetail.hp}},{key:"CurrentTime",get:function(){return this._CurrentTime}}]),t}(m)).OffscreenLeft=1960,ae.Instance=void 0,ae.GamePlayEvent=void 0,q=t((Y=ae).prototype,"effRoot_front",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(Y.prototype,"effRoot_back",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(Y.prototype,"gameobjectConfig",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(Y.prototype,"spellConfig",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(Y.prototype,"waveControl",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(Y.prototype,"offscreenTop",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(Y.prototype,"cheatPlants",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=Y))||X));c._RF.pop()}}}));

System.register("chunks:///_virtual/PVE_Helper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,n,o,u,c;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){n=e.cclegacy,o=e._decorator,u=e.view,c=e.randomRangeInt}],execute:function(){var i;n._RF.push({},"8c10btDljxJcI6wy4WRk+OD","PVE_Helper",void 0);var a=o.ccclass;o.property,e("PVEHelper",a("PVEHelper")(i=function(){function e(){}return e.LeftScreenUndead=function(){return u.getVisibleSize().x/2},e.ParseGameplayObjectCode=function(e){return"Fluffmoouse"==(e=e.replace("'",""))&&(e="Flufmoouse"),e},e.WaitForSec=function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout(e,1e3*r)}));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e.RandomActive=function(e){return c(0,100)<=e},e.ConvertSecondsToTime=function(e,r){if(void 0===r&&(r=!1),e<=0)return"0:00";var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),o=e-3600*t-60*n,u="";return r&&t>24&&(u=Math.floor(t/24)+"D ",t%=24),u+=n+":"+this.getStringNum2(o)},e.getStringNum2=function(e){return Math.floor(e)<10?"0"+Math.floor(e):Math.floor(e)},e}())||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/PVE_Lobby.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDeckBuilder.ts","./UISetting.ts","./GameplayConfig.ts","./PVEService.ts","./ConvertJsonObject.ts","./Utility.ts","./PVEDataProvider.ts","./FarmLobbyHelper.ts","./UIEndGamePopup.ts"],(function(e){"use strict";var t,i,n,a,r,o,l,u,c,s,v,f,b,p,h,g,m,d,y,w,S,E,L,W,P,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){l=e.cclegacy,u=e._decorator,c=e.TextAsset,s=e.Button,v=e.Node,f=e.Label,b=e.EditBox,p=e.sys,h=e.instantiate,g=e.Component},function(e){m=e.UIDeckBuilder},function(e){d=e.UISetting},function(e){y=e.GameplayConfig},function(e){w=e.PVEService},function(e){S=e.convertToPlainObject,E=e.convertToString},function(e){L=e.Utility},function(e){W=e.PVEDataProvider},function(e){P=e.FarmLobbyHelper},function(e){k=e.UIEndGamePopup}],execute:function(){var I,C,B,z,V,D,U,x,G,_,T,H,O,R,j,A,M,F,J,N,q,K,Q,X,Y,Z,$,ee,te,ie,ne,ae,re,oe,le;l._RF.push({},"1da3ecJhx5AR7EpiBO/yOf9","PVE_Lobby",void 0);var ue=u.ccclass,ce=u.property,se="peactivev",ve="Q88h",fe="H4GtC6m",be="2pnnfSJwD",pe=0,he=1,ge=2,me=3;e("PVELobby",(I=ue("PVELobby"),C=ce(c),B=ce(c),z=ce(P),V=ce(s),D=ce(v),U=ce(f),x=ce(v),G=ce(b),_=ce(v),T=ce(v),H=ce(v),O=ce(v),R=ce(v),j=ce(d),A=ce(m),M=ce(k),I((N=t((J=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"gameobjectConfig",N,a(t)),n(t,"spellConfig",q,a(t)),n(t,"farmHelper",K,a(t)),n(t,"btnBack",Q,a(t)),n(t,"uiOverLay",X,a(t)),n(t,"lbLE",Y,a(t)),n(t,"uiLogin",Z,a(t)),n(t,"edit",$,a(t)),n(t,"loading",ee,a(t)),n(t,"uiMain",te,a(t)),n(t,"uiSelectWaveView",ie,a(t)),n(t,"contentView",ne,a(t)),n(t,"itemSelectWave",ae,a(t)),n(t,"uiSetting",re,a(t)),n(t,"uiDeckBuilder",oe,a(t)),n(t,"uiEndGamePopup",le,a(t)),t.currentState=he,t.waveUser=0,t.listPoolItemWave=[],t.currentSelectedWave=1,t}i(t,e);var l=t.prototype;return l.start=function(){console.log=function(){},console.warn=function(){};p.localStorage.getItem(se);this.requestLoadWave()},l.onEnable=function(){this.RefreshLE()},l.RefreshLE=function(){var e=this;W.RefreshLE((function(t){L.TweenLE(t,!1,e.lbLE)}))},l.verify_c=function(){1==this.lg_verify(this.edit.string)&&p.localStorage.setItem(se,this.edit.string)},l.lg_verify=function(e){return e=="AH_"+ve+fe+be&&(this.uiLogin.active=!1,!0)},l.activeState=function(e){switch(this.uiSelectWaveView.active=!1,this.uiMain.active=!1,this.uiDeckBuilder.node.active=!1,this.uiLogin.active=!1,this.btnBack.node.active=!0,this.loading.active=!1,this.currentState=e,e){case he:this.uiMain.active=!0,this.btnBack.node.active=!0;break;case pe:this.uiLogin.active=!0,this.btnBack.node.active=!1;break;case me:this.uiDeckBuilder.show();break;case ge:this.uiSelectWaveView.active=!0,this.loadWaves()}},l.requestLoadWave=function(){var e=r(o().mark((function e(){var t,i,n,a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentSelectedWave=1,e.next=3,w.RequestLoadWave();case 3:if(i=e.sent,null!=(n=JSON.parse(E(i)))){e.next=7;break}return e.abrupt("return");case 7:if(a=S(n),this.waveUser=null!=(t=a.originWave)?t:a.wave,this.uiDeckBuilder.onInit(this),this.activeState(he),y.InitConfig(this.gameobjectConfig.text),y.InitSpellConfig(this.spellConfig.text),null==a||null==a.status||"STOPPED"===a.status){e.next=18;break}return e.next=16,w.ForceEndGame();case 16:r=e.sent,this.uiEndGamePopup.show(!0,r);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.loadWaves=function(){if(!(this.waveUser<=11)){this.listPoolItemWave.forEach((function(e){e.active=!1}));for(var e=1;e<this.waveUser;e+=10){var t=this.getItemWave(),i={waveNum:e};this.loadItemWave(t,i),t.active=!0}}},l.loadItemWave=function(e,t){var i=e.getComponentInChildren(f);i&&(i.string=t.waveNum)},l.getItemWave=function(){var e=this.listPoolItemWave.find((function(e){return 0==e.active}));if(null==e||null==e){var t=h(this.itemSelectWave),i=t.getComponent(s);t.setParent(this.contentView),i&&(i.node.on(s.EventType.CLICK,this.onSelectWaveClick,this),this.listPoolItemWave.push(t),e=t)}return e},l.onBackClicked=function(){var e=this;this.currentState==me?this.uiDeckBuilder.hide((function(){e.activeState(he)})):this.currentState==he?this.farmHelper.BackToMain():this.activeState(he)},l.onSelectWaveClick=function(e){if(null!=e){var t=e.getComponentInChildren(f);if(t){var i=parseInt(t.string);console.log("WAVE : ",i),this.currentSelectedWave=i,this.activeState(me)}}},l.btnPlayGame=function(){this.loading.active=!0;var e=this.waveUser<=11?me:ge;this.activeState(e)},l.btnSetting=function(){this.uiSetting.Show(!1)},l.btnAssets=function(){},t}(g)).prototype,"gameobjectConfig",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(J.prototype,"spellConfig",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(J.prototype,"farmHelper",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(J.prototype,"btnBack",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(J.prototype,"uiOverLay",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(J.prototype,"lbLE",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(J.prototype,"uiLogin",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(J.prototype,"edit",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(J.prototype,"loading",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(J.prototype,"uiMain",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(J.prototype,"uiSelectWaveView",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(J.prototype,"contentView",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(J.prototype,"itemSelectWave",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(J.prototype,"uiSetting",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(J.prototype,"uiDeckBuilder",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(J.prototype,"uiEndGamePopup",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=J))||F));l._RF.pop()}}}));

System.register("chunks:///_virtual/PVE_Map_Controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_Enum.ts","./PVE_Map_Slot.ts"],(function(t){"use strict";var o,n,e,i,r,a,l,c,p,u,s;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,e=t.inheritsLoose,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,c=t.Vec2,p=t.Component},function(t){u=t.PVE_Enum},function(t){s=t.PVEMapSlot}],execute:function(){var d,f,h,S,y,v,E,m,M,P,T;r._RF.push({},"edd2aQznnBPyaXWjgi8iKvT","PVE_Map_Controller",void 0);var _=a.ccclass,g=a.property,b=t("RoadMap",(d=_("RoadMap"),f=g(l),d((y=o((S=function(){n(this,"id",y,this),n(this,"nextSlotRoad",v,this)}).prototype,"id",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=o(S.prototype,"nextSlotRoad",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=S))||h));t("PVEMapController",(E=_("PVEMapController"),m=g([b]),E((T=o((P=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return(o=t.call.apply(t,[this].concat(r))||this).mapSlot=[],n(o,"roadMapList",T,i(o)),o}e(o,t);var r=o.prototype;return r.GetRoadPosition=function(t){for(var o=[],n=this.roadMapList[t].nextSlotRoad.length-1;n>=0;n--){var e=this.roadMapList[t].nextSlotRoad[n].worldPosition,i=new c(e.x,e.y);o[n]=i}return o},r.start=function(){this.mapSlot=this.getComponentsInChildren(s);for(var t=0;t<this.mapSlot.length;t++){var o=t;this.mapSlot[t].slotIndex=o}this.activeMapslot(null)},r.deactiveSlot=function(){this.mapSlot.forEach((function(t){return t.node.active=!1}))},r.activeMapslot=function(t){null==t?this.mapSlot.forEach((function(t){return t.node.active=!1})):t.Type==u.ECardType.Undead?this.mapSlot.forEach((function(t){return t.node.active=t.AllowSpawnUndead})):t.Type==u.ECardType.Plant?this.mapSlot.forEach((function(t){return t.node.active=t.SlotType==u.ESlotType.Soil})):this.mapSlot.forEach((function(t){return t.node.active=t.SlotType!==u.ESlotType.None}))},r.activeMapslotWithType=function(t){this.mapSlot.forEach((function(o){return o.node.active=o.SlotType==t}))},o}(p)).prototype,"roadMapList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=P))||M));r._RF.pop()}}}));

System.register("chunks:///_virtual/PVE_Map_Slot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_Enum.ts"],(function(t){"use strict";var e,n,o,r,a,i,l,p,u,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.createClass},function(t){i=t.cclegacy,l=t._decorator,p=t.Enum,u=t.CCBoolean,c=t.Component},function(t){s=t.PVE_Enum}],execute:function(){var y,f,d,S,E,w,_;i._RF.push({},"f7f14bKxy5CsaSz1Exp+P9W","PVE_Map_Slot",void 0);var h=l.ccclass,P=l.property;t("PVEMapSlot",(y=h("PVEMapSlot"),f=P({type:p(s.ESlotType)}),d=P(u),y((w=e((E=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a))||this,o(e,"slotType",w,r(e)),e.slotIndex=-1,o(e,"allowSpawnUndead",_,r(e)),e}return n(e,t),e.prototype.start=function(){},a(e,[{key:"AllowSpawnUndead",get:function(){return this.allowSpawnUndead}},{key:"SlotType",get:function(){return this.slotType}}]),e}(c)).prototype,"slotType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.ESlotType.Soil}}),_=e(E.prototype,"allowSpawnUndead",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=E))||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/PVE_ResourceManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,r,o,a,i,l,s,d,u,c,f,p,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){l=e.cclegacy,s=e._decorator,d=e.Node,u=e.resources,c=e.Prefab,f=e.SpriteFrame,p=e.Sprite,h=e.Component}],execute:function(){var P,_,g,m,v,b,R,S,U,z;l._RF.push({},"38c7eQfHKpNcaMCAKCanfJA","PVE_ResourceManager",void 0);var E=s.ccclass,w=s.property,y=e("UndeadSpawnCode",{A:"Splaslug","A+":"Drizzslug",B:"Oxxenga",C:"Valefang",D:"Slithreen","D+":"Mothsreen",E:"Buzzbat",F:"Turwar",G:"Ntyrr"});e("PVEResourceManager",(P=E("PVEResourceManager"),_=w(d),g=w(d),m=w(d),P(((z=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,r(n,"skillRoot",R,o(n)),r(n,"effectRoot",S,o(n)),r(n,"spellRoot",U,o(n)),n.skill=[],n.effects=[],n.spells=[],n.undeadPaths=["Undead_1000","Undead_1001","Undead_1002","Undead_1003","Undead_1004","Undead_1005","Undead_1006","Undead_1007","Undead_1008"],n}t(n,e);var l=n.prototype;return l.onLoad=function(){n.Instance=this,this.skill=this.skillRoot.children,this.effects=this.effectRoot.children,this.spells=this.spellRoot.children,this.preloadResoure()},l.preloadResoure=function(){for(var e=0;e<this.undeadPaths.length;e++)u.preload("_PVE/Undeads/"+this.undeadPaths[e])},l.GetSpellPrefab=function(e){var n="Spell_"+e.toString();return this.spells.find((function(e){return e.name==n}))},l.GetPlantPrefab=function(e,n){var t="Plant_"+e.toString();u.load("_PVE/Plants/"+t,c,(function(e,t){n(t)}))},l.GetUndeadPrefabWithSpawnCode=function(e,n){null!=y[e]&&null!=e?this.GetUndeadPrefab(y[e],n):console.error("UndeadSpawnCode[code]",e,y[e])},l.GetUndeadPrefab=function(e,n){var t="Undead_"+e.toString();u.load("_PVE/Undeads/"+t,c,(function(e,t){n(t)}))},l.GetSkillPrefab=function(e){var n=e.toString();return this.skill.find((function(e){return e.name.split("_")[0]==n}))},l.GetEffectPrefab=function(e){var n=e.toString();return this.effects.find((function(e){return e.name.split("_")[0]==n}))},l.LoadCardImg=function(e,n,t,r){void 0===t&&(t=!1),void 0===r&&(r=null),u.load("_PVE/Card/"+e+"/spriteFrame",f,(function(e,o){e&&console.warn(e),n.spriteFrame=o,t&&(n.sizeMode=p.SizeMode.RAW),r&&r()}))},l.LoadElementImg=function(e,n,t,r){void 0===t&&(t=!1),void 0===r&&(r=null),u.load("_PVE/Element/"+e+"/spriteFrame",f,(function(e,o){e&&console.warn(e),n.spriteFrame=o,t&&(n.sizeMode=p.SizeMode.RAW),r&&r()}))},l.LoadSkillImg=function(e,n,t,r){void 0===t&&(t=!1),void 0===r&&(r=null),u.load("_PVE/Skill/"+e+"/spriteFrame",f,(function(e,o){e&&console.warn(e),n.spriteFrame=o,t&&(n.sizeMode=p.SizeMode.RAW),r&&r()}))},l.GetPrefab=function(){var e=a(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){u.load("_PVE/"+n,c,(function(n,t){n&&console.error(n),e(t)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),n}(h)).Instance=void 0,R=n((b=z).prototype,"skillRoot",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=n(b.prototype,"effectRoot",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=n(b.prototype,"spellRoot",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=b))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/PVEDataProvider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FarmingServicesApi.ts","./UserModel.ts"],(function(e){"use strict";var t,r,n,u,a;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy,n=e._decorator},function(e){u=e.FarmingServicesApi},function(e){a=e.UserModel}],execute:function(){var s;r._RF.push({},"32444h9tLtCI6BOsrfp5Lmb","PVEDataProvider",void 0);var i=n.ccclass;n.property,e("PVEDataProvider",i("PVEDataProvider")(s=function(){function e(){}return e.GetLE=function(e){a.LE_num,e(a.LE_num)},e.RefreshLE=function(e){u.RequestFarmsStats((function(t){var r=JSON.parse(t);if(0==r.status){var n=r.data.leWallet;a.LE_num=n}e(a.LE_num)}),null)},t(e,null,[{key:"Token",get:function(){return a.Token}}]),e}())||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/PVEPopupBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IgnorePauseSystem.ts"],(function(e){"use strict";var t,i,o,a,n,c,r,s,l,u,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,r=e.Node,s=e.UIOpacity,l=e.tween,u=e.v3,p=e.Component},function(e){f=e.IgnorePauseSystem}],execute:function(){var d,y,h,v,P,I,g;n._RF.push({},"86485JwNqlMjYevsHp2tZCF","PVEPopupBase",void 0);var S=c.ccclass,m=c.property;e("PVEPopupBase",(d=S("PVEPopupBase"),y=m(r),h=m(s),d((I=t((P=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),c=0;c<i;c++)n[c]=arguments[c];return t=e.call.apply(e,[this].concat(n))||this,o(t,"ScaleNode",I,a(t)),o(t,"fadeUIOpacity",g,a(t)),t}i(t,e);var n=t.prototype;return n.show=function(e){if(void 0===e&&(e=null),this.node.active)this.fadeUIOpacity.opacity=255,this.ScaleNode.setScale(1,1,1),e&&"function"==typeof e&&e();else if(this.node.active=!0,null!=this.ScaleNode&&null!=this.fadeUIOpacity){this.ScaleNode.setScale(.5,.5,.5),this.fadeUIOpacity.opacity=0;var t=l(this.fadeUIOpacity).to(.2,{opacity:255}).call((function(){f.RemoveTween(t)})).start(),i=l(this.ScaleNode).to(.3,{scale:u(1,1,1)},{easing:"backOut"}).call((function(){e&&"function"==typeof e&&e(),f.RemoveTween(i)})).start();f.IgnoreDirectorPause(t),f.IgnoreDirectorPause(i)}},n.hide=function(e){var t=this;if(void 0===e&&(e=null),this.node.active)if(null!=this.ScaleNode){var i=l(this.fadeUIOpacity).to(.2,{opacity:0}).call((function(){f.RemoveTween(i)})).start(),o=l(this.ScaleNode).to(.3,{scale:u(.5,.5,.5)},{easing:"circOut"}).call((function(){t.node.active=!1,e&&"function"==typeof e&&e(),f.RemoveTween(o)})).start();f.IgnoreDirectorPause(i),f.IgnoreDirectorPause(o)}else this.node.active=!1,e&&"function"==typeof e&&e()},t}(p)).prototype,"ScaleNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(P.prototype,"fadeUIOpacity",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=P))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/PVEPopupManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVEUIToast.ts"],(function(e){"use strict";var o,i,n,t,a,r,l,d,c,s,u,p,g,h;return{setters:[function(e){o=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,d=e.Sprite,c=e.game,s=e.color,u=e.Tween,p=e.director,g=e.Component},function(e){h=e.PVEUIToast}],execute:function(){var v,f,m,S,y,P,N,b,T,E;e("PVELoadingType",void 0),a._RF.push({},"bcf95B8vypG1pxUvfn9EFQr","PVEPopupManager",void 0);var L,w=r.ccclass,V=r.property;!function(e){e[e.normal=0]="normal",e[e.noAnim=1]="noAnim",e[e.loadScene=2]="loadScene"}(L||(L=e("PVELoadingType",{})));e("PVEPopupManager",(v=w("PVEPopupManager"),f=V(h),m=V(l),S=V(d),v(((E=function(e){function o(){for(var o,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return o=e.call.apply(e,[this].concat(a))||this,n(o,"toast",N,t(o)),n(o,"loadingNode",b,t(o)),n(o,"loadingNodeSprite",T,t(o)),o.loadingTimeOut=void 0,o}i(o,e);var a=o.prototype;return a.onLoad=function(){null==o.Instance?(o.Instance=this,c.addPersistRootNode(this.node)):this.destroy()},a.ShowToast=function(e,o,i,n){void 0===n&&(n=!0),this.toast.Show(e,o,i,n)},a.Loading=function(e,o){var i=this;void 0===o&&(o=L.normal);if(e){switch(o){case L.normal:this.loadingNodeSprite.color=s(0,0,0,170),this.loadingNodeSprite.node.active=!0;break;case L.noAnim:this.loadingNodeSprite.node.active=!1;break;case L.loadScene:this.loadingNodeSprite.color=s(0,0,0,255),this.loadingNodeSprite.node.active=!0}this.loadingNode.active=!0,this.loadingTimeOut=setTimeout((function(){i.loadingNode.active=!1}),1e4)}else this.loadingNode.active=!1,clearTimeout(this.loadingTimeOut)},a.LoadScene=function(e,o){var i=this;void 0===o&&(o=null),u.stopAll(),this.Loading(!0),p.loadScene(e,(function(){i.Loading(!1),null!=o&&o()}))},o}(g)).Instance=void 0,N=o((P=E).prototype,"toast",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=o(P.prototype,"loadingNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=o(P.prototype,"loadingNodeSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=P))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/PVEResHttp.ts",["cc","./ConfigApi.ts","./UIPopupManager.ts","./PVEDataProvider.ts"],(function(e){"use strict";var t,n,s,a,o,r;return{setters:[function(e){t=e.cclegacy,n=e._decorator},function(e){s=e.ConfigApi},function(e){a=e.UIPopupManager,o=e.LoadingType},function(e){r=e.PVEDataProvider}],execute:function(){e("PVEResHttp",void 0),t._RF.push({},"bcc08PlC1hHzpyRLucGowMR","PVEResHttp",void 0);var i;n.ccclass,n.property;!function(e){function t(){return r.Token}e.GetToken=t,e.PostRequestRefreshToken=function(e,t,n,s,o){void 0===o&&(o=!0);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState)if(r.status>=200&&r.status<400){var t=r.responseText;console.log("PostRequestRefreshToken : ",e," --- ",t),o&&a.Instance.Loading(!1),n&&n(t)}else s&&s(r.responseText),o&&a.Instance.Loading(!1),""==r.responseText?a.Instance.ShowToast("Error","ERR_INTERNET_DISCONNECTED",0):a.Instance.ShowToast("Error","#"+r.status+": Something wrong",0)},r.open("POST",e),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.setRequestHeader("Accept","application/json"),r.setRequestHeader("x-u-a-check","Android-Unity-Farm"),null==t&&(t={}),r.send(JSON.stringify(t))},e.PostRequest=function(e,n,r,i,c,u){void 0===c&&(c=!0),void 0===u&&(u=o.normal),c&&a.Instance.Loading(!0,u);var p=new XMLHttpRequest;p.onreadystatechange=function(){if(4==p.readyState)if(p.status>=200&&p.status<400){var t=p.responseText;s.SHOW_LOG&&console.log("PostRequest : ",e,null==n?"":JSON.stringify(n)," --- ",t),c&&a.Instance.Loading(!1),r&&r(t)}else i&&i(p.responseText),c&&a.Instance.Loading(!1)},p.open("POST",e),p.setRequestHeader("Content-Type","application/json;charset=UTF-8"),p.setRequestHeader("Accept","application/json"),p.setRequestHeader("x-u-a-check","Android-Unity-Farm"),""!=t()&&p.setRequestHeader("authorization","Bearer "+t()),null==n&&(n={}),p.send(JSON.stringify(n))},e.PutRequest=function(e,n,r,i,c,u){void 0===c&&(c=!0),void 0===u&&(u=o.normal),c&&a.Instance.Loading(!0,u);var p=new XMLHttpRequest;p.onreadystatechange=function(){if(4==p.readyState)if(p.status>=200&&p.status<400){var t=p.responseText;s.SHOW_LOG&&console.log("PutRequest : ",e,null==n?"":JSON.stringify(n)," --- ",t),c&&a.Instance.Loading(!1),r&&r(t)}else i&&i(p.responseText),c&&a.Instance.Loading(!1),""==p.responseText?a.Instance.ShowToast("Error","ERR_INTERNET_DISCONNECTED",0):a.Instance.ShowToast("Error","#"+p.status+": Something wrong",0)},p.open("PUT",e),p.setRequestHeader("Content-Type","application/json;charset=UTF-8"),p.setRequestHeader("Accept","application/json"),p.setRequestHeader("x-u-a-check","Android-Unity-Farm"),""!=t()&&p.setRequestHeader("authorization","Bearer "+t()),null==n&&(n={}),p.send(JSON.stringify(n))},e.GetRequest=function(e,n,r,i,c,u){void 0===c&&(c=!0),void 0===u&&(u=o.normal),c&&a.Instance.Loading(!0,u);var p=e;if(null!=n&&Object.keys(n).length>0){for(var d in p+="?",n)p+=d+"="+n[d]+"&";p=p.substring(0,p.length-1)}var R=new XMLHttpRequest;R.onreadystatechange=function(){if(4==R.readyState)if(R.status>=200&&R.status<400){var e=R.responseText;s.SHOW_LOG&&console.log("GetRequest : ",p," --- ",e),c&&a.Instance.Loading(!1),r&&r(e)}else c&&a.Instance.Loading(!1),i&&i(R.responseText),""==R.responseText?a.Instance.ShowToast("Error","ERR_INTERNET_DISCONNECTED",0):a.Instance.ShowToast("Error","#"+R.status+": Something wrong",0)},R.open("GET",p),R.setRequestHeader("Content-Type","application/json;charset=UTF-8"),R.setRequestHeader("Accept","application/json"),R.setRequestHeader("x-u-a-check","Android-Unity-Farm"),""!=t()&&R.setRequestHeader("authorization","Bearer "+t()),R.send()}}(i||(i=e("PVEResHttp",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/PVEService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./PVEResHttp.ts","./PVE_Constant.ts"],(function(e){"use strict";var r,t,n,u,a,s,c;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){n=e.cclegacy,u=e._decorator},function(e){a=e.ConfigApi},function(e){s=e.PVEResHttp},function(e){c=e.PVE_Constant}],execute:function(){var i,o;n._RF.push({},"ea090gxYWRHhqCHyr2/HrIc","PVEService",void 0);var p=u.ccclass,f=(u.property,function(){return a.IS_PRO?"https://pvu-backend-pve.plantvsundead.com/v1/":"https://pvu-pve-dev.plantvsundead.com/v1/"});e("PVEService",p("PVEService")(((o=function(){function e(){}return e.RequestLoadUserCard=function(e,r,t){void 0===t&&(t=1),s.GetRequest(f()+"user/card/"+e,{page:t},r,null,!1)},e.RequestLoadUserCardAsync=function(){var e=r(t().mark((function e(r,n){var u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=1),e.next=3,new Promise((function(e){s.GetRequest(f()+"user/card/"+r,{page:n},e,e,!1)}));case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),e.RequestUserDeck=function(){var e=r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){s.GetRequest(f()+"user/deck-builder",{},e,e,!1)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.RequestSaveDeck=function(){var e=r(t().mark((function e(r){var n,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={cardIds:r},e.next=3,this.WaitForMyTurn();case 3:return e.next=5,new Promise((function(e){s.PostRequest(f()+"user/deck-builder/pick",n,e,e,!1)}));case 5:return u=e.sent,this.EndTurn(),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),e.RequestRandomCard=function(){var e=r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){s.PostRequest(f()+"user/deck-builder/random",{},e,e,!1)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.RequestLoadWave=function(){var e=r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){s.GetRequest(f()+"user/wave",{},e,e,!1)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.RequestStartGame=function(){var e=r(t().mark((function e(r){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r-=1,0!=c.CallApi){e.next=3;break}return e.abrupt("return","skip call api");case 3:return e.next=5,this.WaitForMyTurn();case 5:return e.next=7,new Promise((function(e){s.PostRequest(f()+"user/wave/start",{wave:r},e,e,!1)}));case 7:return n=e.sent,this.EndTurn(),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),e.Redraw4=function(){var e=r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=c.CallApi){e.next=2;break}return e.abrupt("return","skip call api");case 2:return e.next=4,new Promise((function(e){s.PostRequest(f()+"user/deck-builder/redraw",{},e,e,!1)}));case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.UseCard=function(){var e=r(t().mark((function e(r,n,u){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=c.CallApi){e.next=2;break}return e.abrupt("return","skip call api");case 2:return e.next=4,this.WaitForMyTurn();case 4:return e.next=6,new Promise((function(e){s.PostRequest(f()+"user/wave/use-card",{card:{id:r,type:n,isSystemCard:u}},e,e,!1)}));case 6:return a=e.sent,this.EndTurn(),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(r,t,n){return e.apply(this,arguments)}}(),e.KillEnemy=function(){var e=r(t().mark((function e(r,n){var u,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=c.CallApi){e.next=2;break}return e.abrupt("return","skip call api");case 2:return e.next=4,this.WaitForMyTurn();case 4:return u={enemyCode:r},null!=n&&(u.card=n),e.next=8,new Promise((function(e){s.PostRequest(f()+"user/wave/kill",u,e,e,!1)}));case 8:return a=e.sent,this.EndTurn(),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}(),e.wounded=function(){var e=r(t().mark((function e(r){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=c.CallApi){e.next=2;break}return e.abrupt("return","skip call api");case 2:return e.next=4,this.WaitForMyTurn();case 4:return e.next=6,new Promise((function(e){s.PostRequest(f()+"user/wave/wounded",{cardId:r},e,e,!1)}));case 6:return n=e.sent,this.EndTurn(),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),e.LostHP=function(){var e=r(t().mark((function e(r){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=c.CallApi){e.next=2;break}return e.abrupt("return","skip call api");case 2:return e.next=4,this.WaitForMyTurn();case 4:return e.next=6,new Promise((function(e){s.PostRequest(f()+"user/wave/intruded",{enemyCode:r},e,e,!1)}));case 6:return n=e.sent,this.EndTurn(),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),e.Ingame_RequestStartWave=function(){var e=r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=c.CallApi){e.next=2;break}return e.abrupt("return","skip call api");case 2:return e.next=4,new Promise((function(e){s.PostRequest(f()+"user/wave/play",{},e,e,!1)}));case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.ForceEndGame=function(){var e=r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=c.CallApi){e.next=2;break}return e.abrupt("return","skip call api");case 2:return e.next=4,new Promise((function(e){s.PostRequest(f()+"user/wave/stop",{},e,e,!1)}));case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.WaitForMyTurn=function(){var e=r(t().mark((function e(){var r,n=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.TotalExecute+=1,r=this.TotalExecute,this.TotalExecute-this.CurExeIndex!=1){e.next=4;break}return e.abrupt("return");case 4:return console.log("wait to exc"),e.next=7,new Promise((function(e){var t=setInterval((function(){if(r-n.CurExeIndex==1)return e(null),void clearInterval(t)}),100)}));case 7:e.sent,console.log("exc after wait");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.EndTurn=function(){this.CurExeIndex++},e}()).CurExeIndex=0,o.TotalExecute=0,i=o))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/PVEUIToast.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,o,n,r,s,l,u,a,c,p,h,v,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,l=e.CCInteger,u=e.Label,a=e.Sprite,c=e.SpriteFrame,p=e.Node,h=e.Vec3,v=e.tween,w=e.Component}],execute:function(){var f,b,m,I,d,M,g,T,y,O,x,C,z,B,N,P,E,D,S;r._RF.push({},"c317cN/ZtJEYqJp7gDPvB5N","PVEUIToast",void 0);var V=s.ccclass,F=s.property;e("PVEUIToast",(f=V("PVEUIToast"),b=F(l),m=F(u),I=F(u),d=F(a),M=F(c),g=F(c),T=F(c),y=F(p),f((C=t((x=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,o(t,"order",C,n(t)),o(t,"txtTitle",z,n(t)),o(t,"txtDes",B,n(t)),o(t,"imgIcon",N,n(t)),o(t,"spriteError",P,n(t)),o(t,"spriteInfo",E,n(t)),o(t,"spriteSuccess",D,n(t)),o(t,"BoxNode",S,n(t)),t.autoCloseTimeOut=void 0,t.tweenMoveIn=void 0,t.tweenMoveOut=void 0,t}i(t,e);var r=t.prototype;return r.Show=function(e,t,i,o){var n=this;this.node.active=!0,this.txtDes.string=t,this.txtTitle.string=e,o?this.MoveIn():this.BoxNode.setPosition(new h(0,-46,0)),this.imgIcon.spriteFrame=0==i?this.spriteError:1==i?this.spriteSuccess:this.spriteInfo,clearTimeout(this.autoCloseTimeOut);this.autoCloseTimeOut=setTimeout((function(){n.Close()}),5e3)},r.MoveIn=function(){null!=this.tweenMoveIn&&this.tweenMoveIn.stop(),null!=this.tweenMoveOut&&this.tweenMoveOut.stop(),this.BoxNode.setPosition(new h(1e3,-46,0)),this.tweenMoveIn=v(this.BoxNode).to(.2,{position:new h(0,-46,0)}),this.tweenMoveIn.start()},r.OnBtnCloseClick=function(){clearTimeout(this.autoCloseTimeOut),this.Close()},r.Close=function(){var e=this;null!=this.tweenMoveIn&&this.tweenMoveIn.stop(),null!=this.tweenMoveOut&&this.tweenMoveOut.stop(),this.tweenMoveOut=v(this.BoxNode).to(.2,{position:new h(1e3,-46,0)}).call((function(){e.node.active=!1})),this.tweenMoveOut.start()},r.HideToast=function(){clearTimeout(this.autoCloseTimeOut),null!=this.tweenMoveIn&&this.tweenMoveIn.stop(),null!=this.tweenMoveOut&&this.tweenMoveOut.stop(),this.node.active=!1},t}(w)).prototype,"order",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=t(x.prototype,"txtTitle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(x.prototype,"txtDes",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(x.prototype,"imgIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(x.prototype,"spriteError",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(x.prototype,"spriteInfo",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(x.prototype,"spriteSuccess",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(x.prototype,"BoxNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=x))||O));r._RF.pop()}}}));

System.register("chunks:///_virtual/RapidFireBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./BulletBase.ts"],(function(t){"use strict";var e,n,i,r,o,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){r=t.SoundController,o=t.EnumSoundPVE},function(t){u=t.BulletBase}],execute:function(){var l;n._RF.push({},"e15baTDnXRIf6Ay1Px5AK3x","RapidFireBullet",void 0);var s=i.ccclass;i.property,t("RapidFireBullet",s("RapidFireBullet")(l=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.hit=function(){r.Instance.PlaySoundPvE(o.SFX_RapidFire_hit_single,.2),t.prototype.hit.call(this)},n}(u))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/RapidFireBulletDirection.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./PVE_GameplayControl.ts","./DirectionBullet.ts"],(function(t){"use strict";var e,i,n,o,r,a,l,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,o=t.instantiate},function(t){r=t.SoundController,a=t.EnumSoundPVE},function(t){l=t.PVEGameplayControl},function(t){s=t.DirectionBullet}],execute:function(){var u;i._RF.push({},"95365ySgIRCtLl7nz/pkS3C","RapidFireBulletDirection",void 0);var c=n.ccclass;n.property,t("RapidFireBulletDirection",c("RapidFireBulletDirection")(u=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.hitOne=function(t){if(!(this.hitTarget.indexOf(t)>=0)){if(this.hitTarget.push(t),this.explosionPrefab){var e=o(this.explosionPrefab);e.parent=l.Instance.getEffParent(),e.worldPosition=t.targetComponent.getTargetPos().worldPosition,e.active=!0,r.Instance.PlaySoundPvE(a.SFX_RapidFire_hit_single,.2)}t&&t.TakeDamage(this.damageData)}},i}(s))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/RegenEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./EffParentSetter.ts","./PVE_GameplayControl.ts","./EffectBase.ts"],(function(e){"use strict";var t,n,i,r,f,a,c,o,s,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){f=e.cclegacy,a=e._decorator},function(e){c=e.Utility},function(e){o=e.EffParentSetter},function(e){s=e.PVEGameplayControl},function(e){l=e.EffectBase}],execute:function(){var p,u,h,y,E;f._RF.push({},"b73d0dMhDdFJru9dCsuAZ/N","RegenEffect",void 0);var g=a.ccclass,d=a.property;e("RegenEffect",(p=g("RegenEffect"),u=d(o),p((E=t((y=function(e){function t(){for(var t,n=arguments.length,f=new Array(n),a=0;a<n;a++)f[a]=arguments[a];return t=e.call.apply(e,[this].concat(f))||this,i(t,"effParent",E,r(t)),t}n(t,e);var f=t.prototype;return f.Init=function(t,n,i){e.prototype.Init.call(this,t,n,i),this.endEffectTime=s.Instance.CurrentTime+n.EffectTime,this.schedule(this.applyRegen.bind(this),1)},f.applyRegen=function(){this.effParent.effs.forEach((function(e){c.PlayParticle(e.effNode)}));var e=this.data.RegenHpPercentPerSec;this.thisTarget.root.getHpPercent()<33.33&&(e*=2),this.thisTarget.root.applyRegenHp(this.thisTarget.root.data.statsData.getMaxHp()*e/100)},f.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.node.destroy()},t.ApplyEffect=function(e,t){var n=e.getEffectWithType(t.EffectType);if(null!=n)n.endEffectTime=s.Instance.CurrentTime+n.data.EffectTime;else e.initEffect(t)},t}(l)).prototype,"effParent",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=y))||h));f._RF.pop()}}}));

System.register("chunks:///_virtual/RepelEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts"],(function(t){"use strict";var e,o,n,c,r,a;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,c=t.Vec3,r=t.tween},function(t){a=t.EffectBase}],execute:function(){var i;o._RF.push({},"5c02bc2rtlCwJrATKTeEOBK","RepelEffect",void 0);var s=n.ccclass;n.property,t("RepelEffect",s("RepelEffect")(i=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))||this).targetPos=void 0,e.curTween=void 0,e}e(o,t);var n=o.prototype;return n.Init=function(e,o,n){t.prototype.Init.call(this,e,o,n);var a=o.attackPos,i=n.root.node.getWorldPosition().clone(),s=o.RepelRange,f=n.root.movingComponent,h=a.x<i.x?1:-1,l=i.x+s*h;1==h&&l>f.movePath[f.curPathIndex].x?l=f.movePath[f.curPathIndex].x:-1==h&&l<f.targetPos.x&&(l=f.targetPos.x,f.movePath.length>f.curPathIndex+2&&Math.abs(f.movePath[f.curPathIndex+2].x-l)>50&&f.nextPoint()),this.targetPos=new c(l,i.y,0);var u=n.root;this.curTween=r(u.node).to(o.time,{worldPosition:this.targetPos}).call(this.RemoveEffect.bind(this)).start()},n.CancelEffect=function(){this.curTween&&this.curTween.stop(),this.thisTarget.RemoveEffect(this),this.node.destroy(),this.data.cancelCallback&&this.data.cancelCallback()},n.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.node.destroy()},o.ApplyEffect=function(t,e){t.initEffect(e)},o}(a))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/ResHttp.ts",["cc","./ResourcesManager.ts","./UIPopupManager.ts","./UserModel.ts","./ConfigApi.ts","./FarmingServicesApi.ts"],(function(e){"use strict";var t,n,s,o,a,r,i;return{setters:[function(e){t=e.cclegacy},function(e){n=e.ResourcesManager},function(e){s=e.UIPopupManager,o=e.LoadingType},function(e){a=e.UserModel},function(e){r=e.ConfigApi},function(e){i=e.FarmingServicesApi}],execute:function(){var c,u;e("ResHttp",void 0),t._RF.push({},"42e41DnM2BAYbq25esqpglK","ResHttp",void 0),(u=c||(c=e("ResHttp",{}))).PostRequestRefreshToken=function(e,t,n,o,a){void 0===a&&(a=!0),a&&s.Instance.Loading(!0);var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<400){var t=i.responseText;r.SHOW_LOG&&console.log("PostRequestRefreshToken : ",e," --- ",t),a&&s.Instance.Loading(!1),n&&n(t)}else o&&o(i.responseText),a&&s.Instance.Loading(!1),""==i.responseText?s.Instance.ShowToast("Error","ERR_INTERNET_DISCONNECTED",0):s.Instance.ShowToast("Error","#"+i.status+": Something wrong",0)},i.open("POST",e),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("x-u-a-check","Android-Unity-Farm"),null==t&&(t={}),i.send(JSON.stringify(t))},u.PostRequest=function e(t,c,u,p,T,d){void 0===T&&(T=!0),void 0===d&&(d=o.normal),T&&s.Instance.Loading(!0,d);var R=new XMLHttpRequest;R.onreadystatechange=function(){if(4==R.readyState)if(R.status>=200&&R.status<400){var o=R.responseText;r.SHOW_LOG&&console.log("PostRequest : ",t,null==c?"":JSON.stringify(c)," --- ",o),T&&s.Instance.Loading(!1);try{var g=o.indexOf('"status":'),f=o.indexOf(",",g),h=parseInt(o.substring(g+9,f));if(1===h||3===h||444===h)return void i.PostRequestRefreshToken(a.GetRefresh_Token(),(function(o){var a=JSON.parse(o);0==a.status?e(t,c,u,p,T,d):(s.Instance.ShowToast("Error",n.Instance.GetErrorMessage(a.status),0),s.Instance.ReturnToLoginScreen())}),(function(e){s.Instance.ReturnToLoginScreen()}))}catch(e){}u&&u(o)}else p&&p(R.responseText),T&&s.Instance.Loading(!1),""==R.responseText?s.Instance.ShowToast("Error","ERR_INTERNET_DISCONNECTED",0):s.Instance.ShowToast("Error","#"+R.status+": Something wrong",0)},R.open("POST",t),R.setRequestHeader("Content-Type","application/json;charset=UTF-8"),R.setRequestHeader("Accept","application/json"),R.setRequestHeader("x-u-a-check","Android-Unity-Farm"),""!=a.Token&&R.setRequestHeader("authorization","Bearer Token: "+a.Token),null==c&&(c={}),R.send(JSON.stringify(c))},u.GetRequest=function e(t,c,u,p,T,d){void 0===T&&(T=!0),void 0===d&&(d=o.normal),T&&s.Instance.Loading(!0,d);var R=t;if(null!=c&&Object.keys(c).length>0){for(var g in R+="?",c)R+=g+"="+c[g]+"&";R=R.substring(0,R.length-1)}var f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState)if(f.status>=200&&f.status<400){var o=f.responseText;r.SHOW_LOG&&console.log("GetRequest : ",R," --- ",o),T&&s.Instance.Loading(!1);try{var g=o.indexOf('"status":'),h=o.indexOf(",",g),S=parseInt(o.substring(g+9,h));if(1===S||3===S||444===S)return void i.PostRequestRefreshToken(a.GetRefresh_Token(),(function(o){var a=JSON.parse(o);0==a.status?e(t,c,u,p,T,d):(s.Instance.ShowToast("Error",n.Instance.GetErrorMessage(a.status),0),s.Instance.ReturnToLoginScreen())}),(function(e){s.Instance.ReturnToLoginScreen()}))}catch(e){}u&&u(o)}else T&&s.Instance.Loading(!1),p&&p(f.responseText),""==f.responseText?s.Instance.ShowToast("Error","ERR_INTERNET_DISCONNECTED",0):s.Instance.ShowToast("Error","#"+f.status+": Something wrong",0)},f.open("GET",R),f.setRequestHeader("Content-Type","application/json;charset=UTF-8"),f.setRequestHeader("Accept","application/json"),f.setRequestHeader("x-u-a-check","Android-Unity-Farm"),""!=a.Token&&f.setRequestHeader("authorization","Bearer Token: "+a.Token),f.send()},t._RF.pop()}}}));

System.register("chunks:///_virtual/ResourcesManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,a,i,s,o,u,l,f,h,m,d,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,o=e.SpriteFrame,u=e.JsonAsset,l=e.TextAsset,f=e.sp,h=e.game,m=e.resources,d=e.Texture2D,c=e.Component}],execute:function(){var p,y,_,g,b,w,x,v,S,R,B,D,I,T,F,G,k,z,L,M,N,C;i._RF.push({},"2e611/b+YZFRo0vE+CEapry","ResourcesManager",void 0);var A=s.ccclass,E=s.property;e("ResourcesManager",(p=A("ResourcesManager"),y=E(o),_=E(u),g=E(u),b=E(o),w=E(l),x=E(u),v=E(u),S=E(o),R=E([f.SkeletonData]),p(((C=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).plant_art=[],t.mother_tree_art=[],t.type_art=[],t.seasonBG=[],t.seasonNewBtn=[],t.season=[],t.weather=[],t.materials=[],t.materialsRarity=[],t.materialsSynthesis=[],t.nft_egg=new Map,t.nft_undead=new Map,r(t,"crow_art",I,a(t)),r(t,"errorCodeMerged",T,a(t)),r(t,"materialsRawData",F,a(t)),t.materialConfigObject=null,r(t,"seasonTextSprite",G,a(t)),r(t,"ChangeLog",k,a(t)),r(t,"GatheringLevelConfig",z,a(t)),r(t,"skilltree_config",L,a(t)),r(t,"RarityArt",M,a(t)),r(t,"undeadAnim",N,a(t)),t.undead_anim_path={oxxfome:"Sheep_Baby",nasherr:"Bat_Baby",slugma:"Snail_Baby",valefang:"Wolf_Baby",tbluyr:"Fairy_Baby",torramn:"Turtle_Baby",tyrannux:"Dragon_Baby",emprezza:"Dinosaur_Baby",trekwyrm:"Dinosaur_Baby",slithum:"Worm_Baby",oxxfome_1:"Fumebah/Fumebah",nasherr_1:"Wumbatt/Wumbatt",slugma_1:"Slugbie/Snail_Baby",valefang_1:"Baletooth/Baletooth",tbluyr_1:"Fflyrr/Fflyrr",torramn_1:"Turram/Turram",tyrannux_1:"Trekwyrm/Trekwyrm",emprezza_1:"Trekwyrm/Trekwyrm",trekwyrm_1:"Trekwyrm/Trekwyrm",slithum_1:"Slithum/Slithum",oxxfome_2:"Oxxenga/Oxxenga",nasherr_2:"Buzzbat/Buzzbat",slugma_2:"Splaslug/Splaslug",valefang_2:"Valefang/Valefang",tbluyr_2:"Ntyrr/Ntyrr",torramn_2:"Turwar/Turwar",tyrannux_2:"Drakwyrm/Drakwyrm",emprezza_2:"Drakwyrm/Drakwyrm",trekwyrm_2:"Drakwyrm/Drakwyrm",slithum_2:"Slithreen/Slithreen"},t}n(t,e);var i=t.prototype;return i.onLoad=function(){null==t.Instance?(t.Instance=this,h.addPersistRootNode(this.node)):this.destroy()},i.LoadPlant=function(e,t){var n=this,r=this.plant_art.findIndex((function(t){return t.name==e}));if(-1==r){var a;m.load("plants/"+e+"/spriteFrame",o,(function(r,i){a=i,-1==n.plant_art.findIndex((function(t){return t.name==e}))&&n.plant_art.push(a),t(a)}))}else t(this.plant_art[r])},i.LoadSeasonNewBtn=function(e,t){var n=this,r=this.seasonNewBtn.findIndex((function(t){return t.name==e}));if(-1==r){var a;m.load("season/new_"+e+"/spriteFrame",o,(function(r,i){a=i,-1==n.seasonNewBtn.findIndex((function(t){return t.name==e}))&&n.seasonNewBtn.push(a),t(a)}))}else t(this.seasonNewBtn[r])},i.LoadSeason=function(e,t){var n=this,r=this.season.findIndex((function(t){return t.name==e}));if(-1==r){var a;m.load("season/"+e+"/spriteFrame",o,(function(r,i){a=i,-1==n.season.findIndex((function(t){return t.name==e}))&&n.season.push(a),t(a)}))}else t(this.season[r])},i.LoadWeather=function(e,t){var n=this,r=this.weather.findIndex((function(t){return t.name==e}));if(-1==r){var a;m.load("weather/"+e+"/spriteFrame",o,(function(r,i){a=i,-1==n.weather.findIndex((function(t){return t.name==e}))&&n.weather.push(a),t(a)}))}else t(this.weather[r])},i.LoadSeasonBg=function(e,t){var n=this,r=this.seasonBG.findIndex((function(t){return t.name==e}));if(-1==r){var a;m.load("season/bg_"+e+"/spriteFrame",o,(function(r,i){a=i,-1==n.seasonBG.findIndex((function(t){return t.name==e}))&&n.seasonBG.push(a),t(a)}))}else t(this.seasonBG[r])},i.LoadMotherTree=function(e,t){var n=this,r=this.mother_tree_art.findIndex((function(t){return t.name==e}));if(-1==r){var a;m.load("mother_tree/"+e+"/spriteFrame",o,(function(r,i){a=i,-1==n.mother_tree_art.findIndex((function(t){return t.name==e}))&&n.mother_tree_art.push(a),t(a)}))}else t(this.mother_tree_art[r])},i.Loadtype=function(e,t){var n=this,r=this.type_art.findIndex((function(t){return t.name==e}));if(-1==r){var a;m.load("type/"+e+"/spriteFrame",o,(function(r,i){a=i,-1==n.type_art.findIndex((function(t){return t.name==e}))&&n.type_art.push(a),t(a)}))}else t(this.type_art[r])},i.LoadRarity=function(e){var t=parseInt(e.substring(6,8));return t<=59?this.RarityArt[0]:t<=88?this.RarityArt[1]:t<=98?this.RarityArt[2]:this.RarityArt[3]},i.GetRarity=function(e){return this.RarityArt[e]},i.GetErrorMessage=function(e){return null!=this.errorCodeMerged.json[e.toString()]?this.errorCodeMerged.json[e.toString()]:"Unknow"},i.GetSeasonTextSprite=function(e){return this.seasonTextSprite[e]},i.GetSeasonTextSpriteByName=function(e){e="button_"+e;var t=this.seasonTextSprite.findIndex((function(t){return t.name==e}));return this.seasonTextSprite[t]},i.LoadMaterialSprite=function(e,t){var n=this.materials.findIndex((function(t){return t.name==e}));-1==n?m.load("materials/"+e+"/spriteFrame",o,function(n,r){null!=r&&-1==this.materials.findIndex((function(t){return t.name==e}))&&this.materials.push(r),t(r)}.bind(this)):t(this.materials[n])},i.LoadMaterialRaritySprite=function(e,t){var n=this.materialsRarity.findIndex((function(t){return t.name==e}));-1==n?m.load("crafting/"+e+"/spriteFrame",o,function(n,r){null!=r&&-1==this.materialsRarity.findIndex((function(t){return t.name==e}))&&this.materialsRarity.push(r),t(r)}.bind(this)):t(this.materialsRarity[n])},i.LoadMaterialSynthesisSprite=function(e,t){var n=this.materialsSynthesis.findIndex((function(t){return t.name==e}));-1==n?m.load("crafting/synthesis_materials/"+e+"/spriteFrame",o,function(n,r){null!=r&&-1==this.materialsSynthesis.findIndex((function(t){return t.name==e}))&&this.materialsSynthesis.push(r),t(r)}.bind(this)):t(this.materialsSynthesis[n])},i.LoadMaterialTexture=function(e,t){m.load("materials/"+e+"/texture",d,function(e,n){e&&console.error(e),t(n)}.bind(this))},i.GetMaterialData=function(e){return this.materialsRawData.json[e]},i.GetMaterialWithTypeAndRarity=function(e,t){if(null==this.materialConfigObject)for(var n in this.materialConfigObject=this.materialsRawData.json,this.materialConfigObject){this.materialConfigObject[n].ConfigName=n}for(var r in this.materialsRawData.json){var a=this.materialsRawData.json[r];if(a.type==e&&a.rarity==t)return a}return null},i.LoadBarnSprite=function(e,t){m.load("barn/tier_"+e+"/spriteFrame",o,function(e,n){e&&console.error(e),t(n)}.bind(this))},i.GetNFTEgg=function(e,t){var n=this.nft_egg.get(e);null==n?m.load("nft_egg/"+e+"/spriteFrame",o,function(n,r){this.nft_egg.set(e,r),t(r)}.bind(this)):t(n)},i.GetNFTEggWithName=function(e,t){this.GetNFTEgg({COMMON_UNDEAD_EGG:1,RARE_UNDEAD_EGG:2,EPIC_UNDEAD_EGG:3}[e],t)},i.GetUndead=function(e,t,n){t>1&&(e="stage_"+t+"/"+e);var r="undead/"+e+"/spriteFrame",a=this.nft_undead.get(r);null==a?m.load(r,o,function(e,t){this.nft_egg.set(r,t),n(t)}.bind(this)):n(a)},i.LoadUndeadSpine=function(e,t,n){var r="undeads_spine/"+this.undead_anim_path[e+"_"+t];m.load(r,f.SkeletonData,(function(e,t){n(e,t)}))},t}(c)).Instance=void 0,I=t((D=C).prototype,"crow_art",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=t(D.prototype,"errorCodeMerged",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(D.prototype,"materialsRawData",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(D.prototype,"seasonTextSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(D.prototype,"ChangeLog",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(D.prototype,"GatheringLevelConfig",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(D.prototype,"skilltree_config",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(D.prototype,"RarityArt",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=t(D.prototype,"undeadAnim",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=D))||B));i._RF.pop()}}}));

System.register("chunks:///_virtual/RoutesItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIPopupManager.ts"],(function(e){"use strict";var t,i,s,a,n,o,r,h,l,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,r=e.Sprite,h=e.Node,l=e.SpriteFrame,p=e.Component},function(e){u=e.UIPopupManager}],execute:function(){var c,d,m,f,y,B,b,v,g,I,S,_,M;n._RF.push({},"3dcdeL4f69LqKXqkt8rsKrg","RoutesItem",void 0);var P=o.ccclass,R=o.property;e("RoutesItem",(c=P("RoutesItem"),d=R(r),m=R(r),f=R(h),y=R(l),B=R(l),c((g=t((v=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,s(t,"Base",g,a(t)),s(t,"Icon",I,a(t)),s(t,"Star",S,a(t)),s(t,"BaseNormal",_,a(t)),s(t,"BaseBuff",M,a(t)),t.BaseSpriteFrame=void 0,t._GatheringRoutesMap=void 0,t.json=void 0,t._i=void 0,t._j=void 0,t.isPassed=void 0,t.type=void 0,t.isPlayable=!1,t.accessAble=!1,t}i(t,e);var n=t.prototype;return n.onLoad=function(){this.Icon.node.on(h.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.Icon.node.on(h.EventType.MOUSE_LEAVE,this.onMouseLeave,this)},n.onMouseEnter=function(e){this.BaseSpriteFrame.name.includes("BaseNormal")?this.Base.spriteFrame=this.BaseNormal:this.Base.spriteFrame=this.BaseBuff},n.onMouseLeave=function(e){this.Base.spriteFrame=this.BaseSpriteFrame},n.Init=function(e,t,i,s,a,n,o,r){this.json=e,this._GatheringRoutesMap=t,this._i=i,this._j=s,this.isPassed=a,this.accessAble=o,this.node.active=!0,1==r?this.node.setPosition(188+i*n,-105,0):2==r?this.node.setPosition(188+i*n,180-570*s,0):this.node.setPosition(188+i*n,285*(1-s)-105,0),null!=e.nodeType?this.type=e.nodeType:this.type=5;var h=e.mapSize;null==h||3==h?h=0:2==h?h=3:4==h?h=2:5==h&&(h=4);for(var l=0;l<this.Star.length;l++)this.Star[l].active=l<=h},n.setisPlayAble=function(e){this.isPlayable=e,this.isPassed||e?this.Icon.spriteFrame=this._GatheringRoutesMap.NoteIconActive[this.type]:this.Icon.spriteFrame=this._GatheringRoutesMap.NoteIcon[this.type],this.type<3?this.BaseSpriteFrame=this._GatheringRoutesMap.BaseRound[this.isPassed||e?1:0]:this.BaseSpriteFrame=this._GatheringRoutesMap.BaseRectangle[this.isPassed||e?1:0],this.Base.spriteFrame=this.BaseSpriteFrame},n.OnClick=function(){this.isPlayable?this._GatheringRoutesMap.OnBtnMiniGameClick(this.type,this._j):this.accessAble?u.Instance.ShowToast("Error","You have already passed this node!",0):u.Instance.ShowToast("Info","Cannot be accessed!",2)},t}(p)).prototype,"Base",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(v.prototype,"Icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(v.prototype,"Star",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=t(v.prototype,"BaseNormal",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(v.prototype,"BaseBuff",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=v))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/SaplingData.ts",["cc","./ConvertJsonObject2.ts"],(function(t){"use strict";var e,s,a,i,n;return{setters:[function(t){e=t.cclegacy,s=t._decorator},function(t){a=t.convertToString,i=t.convertToPlainObject,n=t.convertToUnstableNumber}],execute:function(){var r;e._RF.push({},"d56adqtT4hDmqyQzfdT9I10","SaplingData",void 0);var o=s.ccclass;s.property,t("default",o("SaplingData")(r=function(){function t(t){this.id="",this.ownerId="",this.rate={le:0,hours:0},this.sunflowerId=0,this.duration=0,this.name="",this.plantType=0,this.seasonType="",this.total=0,this.type="",this.usages=0,this.createdAt="",this.updatedAt="",this.UpdateData(t)}return t.prototype.UpdateData=function(t){this.id=a(t._id),this.ownerId=a(t.ownerId),this.rate=i(t.rate),this.sunflowerId=n(t.sunflowerId),this.duration=n(t.duration),this.name=a(t.name),this.plantType=n(t.plantType),this.seasonType=a(t.seasonType),this.total=n(t.total),this.type=a(t.type),this.usages=n(t.usages),this.createdAt=a(t.createdAt),this.updatedAt=a(t.updatedAt)},t}())||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/SetupMiningMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MiningGameData.ts","./Utility.ts"],(function(e){"use strict";var a,i,d,p,o,n,t,c,m,b,r,f,s,x,u,l,g,h,P;return{setters:[function(e){a=e.applyDecoratedDescriptor,i=e.inheritsLoose,d=e.initializerDefineProperty,p=e.assertThisInitialized,o=e.createClass},function(e){n=e.cclegacy,t=e._decorator,c=e.Node,m=e.SpriteFrame,b=e.CCBoolean,r=e.Vec3,f=e.instantiate,s=e.Component,x=e.Vec2,u=e.Sprite,l=e.Label,g=e.randomRangeInt},function(e){h=e.default},function(e){P=e.MAP_SIZE}],execute:function(){var H,k,y,M,v,L,D,S,z,I,_,w,q;n._RF.push({},"21a95czZlFD9qcsRwi5x6eh","SetupMiningMap",void 0);var C=t.ccclass,F=t.property;e("SetupMiningMap",(H=C("SetupMiningMap"),k=F(c),y=F(c),M=F(c),v=F([m]),L=F({type:b,serializable:!0}),D=F({type:b,serializable:!0}),H((I=a((z=function(e){function a(){for(var a,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return a=e.call.apply(e,[this].concat(o))||this,d(a,"MapParent",I,p(a)),d(a,"LayerPrefab",_,p(a)),d(a,"BlockPrefab",w,p(a)),d(a,"ListBlock",q,p(a)),a._setup=!1,a._clear=!1,a.currentLayerID=0,a.layerMap=[],a}i(a,e);var n=a.prototype;return n.applyMap=function(){this.initLayerWithMapType(P.SMALL);for(var e=this.layerMap.length,a=new h(this.getFakeDataMap3()),i=(this.getSizeMap(P.SMALL),a.mapData),d=0;d<e;d++){var p=this.layerMap[d],o=i[d].mapData,n=i[d].layerID;if(d>0){var t=this.layerMap[d-1].position.x,c=this.layerMap[d-1].position.y+75;p.position=new r(t,c,0)}this.initMapFull(8,75,n,p,o)}this.currentLayerID=e-1},n.resetMap=function(){this.MapParent.removeAllChildren(),this.layerMap.length=0},n.start=function(){},n.initLayerWithMapType=function(e){for(var a=e==P.SMALL?3:5,i=0;i<a;i++){var d=f(this.LayerPrefab);d.active=!0,d.setParent(this.MapParent),d.setPosition(new r(-75,-315,0)),this.layerMap.push(d)}},n.getFakeDataMap1=function(){return{stamina:5,userGatherLevels:{exp:0,level:0,type:"MINING"},mapData:[[{guid:"03dbb852-111a-448a-8ca4-f8d2248cf9ce",id:3,name:"magic_mineral",hp:100,exp:2,maxHP:100,position:[3,1]},{guid:"564c25cd-ae84-487b-905f-44e2e0c36856",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[2,3]},{guid:"7d5a9699-afef-42e8-b68f-f8a724cdae05",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[2,2]},{guid:"016d6e61-4ab3-4084-8187-bc439db2102e",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[1,0]},{guid:"92d18d98-d30e-41cc-a4a3-f1bc0894ac65",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[3,0]},{guid:"6b30c964-f96f-46a8-9120-841028b28593",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[0,0]},{guid:"af61ab1c-6ffd-4782-a97f-66d64d094fff",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[1,3]},{guid:"be53cf80-42e9-48d1-9db7-1676b9272bb1",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[1,1]}],[{guid:"fe8b1cac-ada2-494d-baa2-ea082e5adee9",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[0,0]},{guid:"1cc6b414-5665-4633-aee5-fb95d0834d0f",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[1,0]},{guid:"3f9f4e07-5bfe-4c6e-966c-d97d4b8374dc",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[3,1]},{guid:"230e0dc6-55b8-4964-ae86-bfb2d1738d32",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[1,3]},{guid:"c05c1769-2c7f-4eeb-bbb0-b7c360a4f79e",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[3,0]}],[{guid:"630fba7d-0d1d-4054-9cf1-c84a9aa8e927",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[1,3]},{guid:"64958628-492a-4013-9c8d-da2da2858b9a",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[3,0]},{guid:"4bf2fdb2-ea13-4bcf-aad4-a55425cdf74c",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[1,0]}]],tools:[{id:0,name:"pick",damage:10,aoeDamage:0,requireLevel:0,stamina:1},{id:1,name:"hammer",damage:25,aoeDamage:5,requireLevel:2,stamina:5},{id:2,name:"driller",damage:50,aoeDamage:10,requireLevel:6,stamina:8}],size:0,maxSize:8}},n.getFakeDataMap2=function(){return{stamina:495,userGatherLevels:{exp:0,level:0,type:"MINING"},mapData:[[{guid:"67c95964-ad6d-4d61-89bc-6e611d9d4354",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[3,2]},{guid:"c4b1deea-1822-4ca9-a51f-223721db3225",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[2,2]},{guid:"fb973c8d-fff8-4bdb-bee3-4f64290c734e",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[2,1]},{guid:"ba229cdc-b274-4ab9-8873-171eeecf482c",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[0,2]},{guid:"2ddab22c-8ce6-4476-93c5-f12e1a5f46e3",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[2,0]},{guid:"d976da77-611b-447f-b750-2cafaee194df",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[1,3]},{guid:"3948bb99-92c6-4c68-9a50-552687888954",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[0,0]},{guid:"0ae4544e-a6be-4361-bc23-93ac0e786ebc",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[3,3]},{guid:"7c88ed49-4c11-4248-8e43-0f8e1c8cad48",id:3,name:"magic_mineral",hp:100,exp:2,maxHP:100,position:[1,2]},{guid:"6f2b943a-ff4b-4953-a949-bc4b6bf16633",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[3,0]}],[{guid:"e3d984b4-5907-4f76-a783-a93c2a344904",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[1,2]},{guid:"6f009eef-a295-4265-a5fb-c1a0ac21abb3",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[2,2]},{guid:"b12e7ede-168e-4862-999a-62703aa45ad5",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[0,0]},{guid:"2543b990-bbf0-4209-be4b-0c24bbed92c9",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[2,1]},{guid:"f985b51e-d292-4031-9608-6ba3fefb1410",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[3,3]}],[{guid:"9088edf7-eb89-42a6-96a8-9da668e0fe51",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[3,3]},{guid:"5b6ed00a-6853-4466-86ce-823e19801eb2",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[1,2]},{guid:"0ef73ad6-2a4d-4b8b-a50c-1e2548f9153a",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[0,0]}]],tools:[{id:0,name:"pick",damage:10,aoeDamage:0,stamina:5,requireLevel:0},{id:1,name:"hammer",damage:25,aoeDamage:5,stamina:8,requireLevel:2},{id:2,name:"driller",damage:50,aoeDamage:0,stamina:12,requireLevel:6}],size:0,maxSize:8}},n.getFakeDataMap3=function(){return{stamina:550,userGatherLevels:{exp:60137,level:8,type:"MINING"},mapData:[[{guid:"ff18bce9-6ec7-42e0-be37-3662859a2ecf",id:3,name:"magic_mineral",hp:100,exp:2,maxHP:100,position:[4,0]},{guid:"ea2b48b8-2b15-4f73-aa69-44d7d35b5bc7",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[4,1]},{guid:"853a1dc8-ac35-4d0a-863b-1eb656aa1105",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[4,2]},{guid:"b2b86d53-1956-4c0e-92e1-530d4dfbb6a4",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[4,3]},{guid:"1cdd0af6-2212-44e1-8a39-73eb8e7d4634",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[5,0]},{guid:"d1df07fb-cbb9-433f-97f0-fda8bfec7d07",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[5,1]},{guid:"e60abf36-1751-4350-bd1a-46f32a27d78c",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[5,2]},{guid:"c810e3cc-69e7-4002-acad-f6b3c3fc46ed",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[5,3]},{guid:"bb613f71-65c8-426a-bee7-ca3e78c1c2d3",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[6,0]},{guid:"37f841bd-b19f-40ce-b443-e7d494f818bd",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[6,1]},{guid:"307e7b40-e10f-4107-9d09-f3ba3968918d",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[6,2]},{guid:"15670b81-4fc1-4bab-8ddb-c9e324b21fae",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[6,3]},{guid:"1f73b6cb-426d-4bb5-91f7-ffbe19a47462",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[7,0]},{guid:"da2fdf02-e89b-46e1-89a6-1635e9d650c1",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,1]},{guid:"3ba24917-4882-4b8f-b04b-d1b9579994d2",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,2]},{guid:"0d4b3c03-496d-4189-98df-7e363b8d4944",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,3]}],[{guid:"966f5e81-35e6-4e10-8bd5-936b528939cd",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[5,0]},{guid:"4971aaa0-f852-4b40-91ba-5d3e6c38e3cf",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[5,1]},{guid:"4b055468-79ab-4acd-a123-df04ad412435",id:3,name:"magic_mineral",hp:100,exp:2,maxHP:100,position:[5,2]},{guid:"83f2edbd-8014-4378-8670-5bcb58ba4ecc",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[6,0]},{guid:"fb3a2354-3cce-477e-8976-1177acf64573",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[6,1]},{guid:"fc7212b4-4979-4501-a269-7fc740e099f9",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[6,2]},{guid:"d453d674-240e-4ea2-8bee-a4deffce1be0",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,0]},{guid:"9a57f27a-a531-4c5e-9053-8eeca37b7b75",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[7,1]},{guid:"eecb33cc-44d7-4993-9254-83c40feb5d54",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,2]}],[{guid:"ecc19ce9-3a6a-434e-95fa-a2b9993ae6a1",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[6,0]},{guid:"1fcaa5d9-5725-480f-91b0-d356b8501f5d",id:3,name:"magic_mineral",hp:100,exp:2,maxHP:100,position:[6,1]},{guid:"1253db29-b229-45fd-a8bc-5ff6c60d20a5",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,0]},{guid:"100da5b1-c0c1-4f17-966b-565482197b7c",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,1]}]],tools:[{id:0,name:"pick",damage:10,aoeDamage:0,stamina:1,requireLevel:0},{id:1,name:"hammer",damage:25,aoeDamage:5,stamina:4,requireLevel:2},{id:2,name:"driller",damage:50,aoeDamage:0,stamina:8,requireLevel:6}],size:0,maxSize:8}},n.getFakeDataMap4=function(){return{stamina:385,userGatherLevels:{exp:42,level:0,type:"MINING"},mapData:[[{guid:"b764b8e7-a644-41b0-ad57-e789842b7c02",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[2,4]},{guid:"1d83fd3a-5c55-4e7e-9140-538303590efa",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[2,5]},{guid:"f290907b-fe02-4aa3-8095-d7645c3eb9dd",id:2,name:"boulder",hp:300,exp:3,maxHP:300,position:[3,0]},{guid:"0d7bb72d-0766-4b2d-b74d-3fadbd79a46c",id:2,name:"boulder",hp:300,exp:3,maxHP:300,position:[3,2]},{guid:"fce9892a-89b2-47c3-beec-07a9ba5ff663",id:3,name:"magic_mineral",hp:100,exp:2,maxHP:100,position:[3,3]},{guid:"15e946ed-bf8c-4677-babb-3bbe8e9f31fa",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[3,4]},{guid:"b45ff0ed-2954-48d6-8636-a5146d2c0438",id:2,name:"boulder",hp:300,exp:3,maxHP:300,position:[3,5]},{guid:"297f88e6-c9f8-4519-9e46-4597b83b226d",id:2,name:"boulder",hp:300,exp:3,maxHP:300,position:[4,0]},{guid:"50eb879e-3798-495f-afbe-cf04ad19dc78",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[4,1]},{guid:"77b517f7-89ea-4764-b1be-a4cde0035d0d",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[4,2]},{guid:"8f2cf787-5db4-424f-b39c-6d03d1532422",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[4,3]},{guid:"7829796b-9ebc-473a-aa81-581330dac1c8",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[4,4]},{guid:"e11746e3-431f-4fbe-860b-f070e8ba6b4b",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[5,0]},{guid:"5a41dfbf-729f-407a-ac73-ba701904bf48",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[5,1]},{guid:"c0c43785-8699-4e5d-829b-30b62a166c4d",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[5,2]},{guid:"12e11393-a527-46be-b42a-829e0c787a9b",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[5,3]},{guid:"8cc1f312-4699-4f30-a7b8-efb2a37aff1e",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[5,4]},{guid:"3369a715-dec9-42be-a7a5-a535c3a73d27",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[6,0]},{guid:"31d2efd5-409c-4a7d-936e-e133a388fdb0",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[6,1]},{guid:"3996fe80-ff1b-41fb-b44e-55b34466776d",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[6,2]},{guid:"b0627288-f104-47cf-ad27-98a81271fa15",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[6,3]},{guid:"e1193936-10fe-4af3-b1c7-b01eb1d00b59",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,0]},{guid:"adeb1496-a29e-4831-9299-f269322cd0bc",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[7,1]},{guid:"9575309a-8db3-4134-b949-b7b258ec83a3",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[7,2]},{guid:"207f1b1c-d7d8-4ec9-bd36-8f96e8fe60ee",id:1,name:"stone",hp:125,exp:1,maxHP:125,position:[7,4]}],[{guid:"a9d66958-5682-438d-80af-82e9cda5408d",id:3,name:"magic_mineral",hp:100,exp:2,maxHP:100,position:[2,5]},{guid:"854249dd-2955-4f45-81bc-16d038159fb0",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[3,3]},{guid:"e3402e56-6c24-4bc0-8349-9b0e5667e1a4",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[3,4]},{guid:"51bebbc3-043f-4735-bde0-fe69baeefd00",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[4,2]},{guid:"22f49758-2352-4ca0-91ce-eb5ee5f299b5",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[4,3]},{guid:"60d70d18-eb9c-4a95-95d2-2ddd6b7b288f",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[4,4]},{guid:"5bd2aa97-dca8-49e4-92ff-92a2bb62888e",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[5,0]},{guid:"29545521-b9db-4b0a-abbe-c2d61950f1e6",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[5,1]},{guid:"7001d855-34bc-4225-a48d-1d4ba0b24120",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[5,2]},{guid:"65b550d7-6686-4637-8568-dedfcb512f1f",id:0,name:"rock",hp:50,exp:1,maxHP:50,position:[5,3]},{guid:"61a810b0-0591-4ff0-8faa-3647a813e5b1",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[6,0]},{guid:"978cc507-96a8-4fda-9ee1-83b1009034ea",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[6,1]},{guid:"f4f550b5-088d-4699-b74f-7ebcb153f7e8",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[6,2]},{guid:"e98d3e7a-88a4-4008-9cf7-fff9ff55776e",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[7,0]},{guid:"bb0b67b0-e22d-4892-9170-81bca42524e9",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[7,1]},{guid:"2d38ba53-ed6f-4590-8064-58039ece1d64",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[7,2]}],[{guid:"0d99359d-a83e-401b-a530-305fc4ba6617",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[3,4]},{guid:"6276c640-e5a7-4e70-8c21-7892a37f9d3d",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[4,3]},{guid:"a1a5234b-4575-4fc3-9e59-2a1a0015bb13",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[5,0]},{guid:"a48c2638-cbc3-45b5-b397-3867c50fac0f",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[5,2]},{guid:"017947bd-1a00-45f1-847a-0b617a4abc82",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[6,0]},{guid:"cb127ce4-2655-4462-b17d-6ddcaba6fa07",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[6,1]},{guid:"f6757c6a-8889-47e1-ac1c-6d95684d7696",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[7,0]},{guid:"868cb060-23d8-46f8-9a42-9fc85b6a3212",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[7,1]},{guid:"b3fd522d-4e74-48c2-a854-8452197d7291",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[7,2]}],[{guid:"730b4ab4-2300-47b8-8701-da315e9fb3b5",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[5,2]},{guid:"1e315e13-601e-4a7f-bceb-6a3678dc1e01",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[6,0]},{guid:"874ad83f-356a-41bf-a3bb-e02ec481f877",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[7,0]},{guid:"d525264f-8a0a-4e2c-931e-c87a09931da8",id:6,name:"filler",hp:1,exp:0,maxHP:1,position:[7,1]}]],tools:[{id:0,name:"pick",damage:50,aoeDamage:0,stamina:5,requireLevel:0},{id:1,name:"hammer",damage:75,aoeDamage:75,stamina:8,requireLevel:2},{id:2,name:"driller",damage:150,aoeDamage:0,stamina:12,requireLevel:6}],size:1,maxSize:8}},n.initMapFull=function(e,a,i,d,p){for(var o=this,n=e*a,t=function(i){for(var t=function(t){var c=p.find((function(e){return e.location.x==i&&e.location.y==t}));if(!c)return"continue";var m=null==c?new x(i,t):c.location,b=f(o.BlockPrefab),s=b.getComponentInChildren(u),h=b.getComponentInChildren(l);if(!s||!h)return"continue";b.setParent(d),b.active=!0,s.spriteFrame=null==c?o.ListBlock[g(0,1)]:o.ListBlock[c.id],h.string=m.x+" , "+m.y;var P=new r((e-m.x)*a-n,(e-m.y)*a);b.setPosition(o.positionToIsometric(P))},c=0;c<e;c++)t(c)},c=e-1;c>=0;c--)t(c)},n.positionToIsometric=function(e){return new r(e.x+e.y,(e.y-e.x)/2)},n.getSizeMap=function(e){return[8,8,8]},n.getDataMapS=function(){return[[[2,1,1,5],[1,1,2,1],[0,1,2,5],[0,0,4,0]],[[0,0,2],[3,1,1],[0,1,0]],[[1,3],[0,1]]]},o(a,[{key:"Setup",get:function(){return this._setup},set:function(e){this._setup=!1,this.resetMap(),this.applyMap()}},{key:"Clear",get:function(){return this._clear},set:function(e){this._clear=!1,this.resetMap()}}]),a}(s)).prototype,"MapParent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=a(z.prototype,"LayerPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=a(z.prototype,"BlockPrefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=a(z.prototype,"ListBlock",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a(z.prototype,"Setup",[L],Object.getOwnPropertyDescriptor(z.prototype,"Setup"),z.prototype),a(z.prototype,"Clear",[D],Object.getOwnPropertyDescriptor(z.prototype,"Clear"),z.prototype),S=z))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/ShopMarket.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,e,n,i,r,a,c,s,p,l;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Widget,s=t.tween,p=t.v3,l=t.Component}],execute:function(){var u,h,g,S,f;r._RF.push({},"2ea95M8PPtNTJa5ba6rv7ep","ShopMarket",void 0);var m=a.ccclass,y=a.property;t("ShopMarket",(u=m("ShopMarket"),h=y(c),u((f=o((S=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return o=t.call.apply(t,[this].concat(r))||this,n(o,"ComingSoon",f,i(o)),o}return e(o,t),o.prototype.onEnable=function(){this.ComingSoon.top=-600,this.ComingSoon.node.setScale(0,0,0),s(this.ComingSoon).to(.3,{top:0},{easing:"circOut"}).start(),s(this.ComingSoon.node).to(.3,{scale:p(1,1,1)},{easing:"circOut"}).start()},o}(l)).prototype,"ComingSoon",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=S))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/ShopToolsPurchase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./ResHttp.ts","./PopUpBase.ts","./Utility.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(t){"use strict";var n,i,e,o,s,a,r,u,c,l,h,p,m,b,f,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,r=t.Sprite,u=t.Label,c=t.EditBox,l=t.Button},function(t){h=t.ConfigApi},function(t){p=t.ResHttp},function(t){m=t.PopUpBase},function(t){b=t.Utility},function(t){f=t.ResourcesManager},function(t){g=t.UIPopupManager}],execute:function(){var d,S,y,I,B,C,P,O,v,A,L,w,x,E,U;s._RF.push({},"1fe03CyXSZCbKFDIJb/BXg8","ShopToolsPurchase",void 0);var M=a.ccclass,T=a.property;t("ShopToolsPurchase",(d=M("ShopToolsPurchase"),S=T(r),y=T(u),I=T(c),B=T(u),C=T(l),P=T(l),d((A=n((v=function(t){function n(){for(var n,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=t.call.apply(t,[this].concat(s))||this,e(n,"icon",A,o(n)),e(n,"nameLable",L,o(n)),e(n,"amount",w,o(n)),e(n,"cost",x,o(n)),e(n,"btnSub",E,o(n)),e(n,"btnAdd",U,o(n)),n.LECost=0,n.maxAmount=10,n.data=void 0,n.typeShop=void 0,n}i(n,t);var s=n.prototype;return s.Show=function(n,i,e,o){t.prototype.OnShow.call(this),this.typeShop=e,this.data=n,this.icon.spriteFrame=i,0==this.typeShop?this.icon.node.setScale(1.2,1.2,1):this.icon.node.setScale(.45,.45,1),this.nameLable.string=n.name.toUpperCase(),this.LECost=n.price,this.maxAmount=Math.floor(o/this.LECost),this.maxAmount<1&&(this.maxAmount=1),this.amount.string="1",this.OnEditBox()},s.OnBtnCloseClick=function(){t.prototype.OnHide.call(this)},s.OnBtnBuyClick=function(){var t=this;parseInt(this.amount.string),this.LECost;if(0==this.typeShop){var n={amount:this.amount.string,toolId:this.data.id};p.PostRequest(h.LINK_API+h.BUY_TOOLS,n,(function(n){var i=JSON.parse(n);0==i.status?g.Instance.ShowToast("Success","Purchase done!",1):g.Instance.ShowToast("Purchase Failed",f.Instance.GetErrorMessage(i.status),0),t.OnBtnCloseClick()}),(function(t){}))}else{var i=this.data.id;n={amount:this.amount.string,sunflowerId:i.toString()};p.PostRequest(h.LINK_API+h.BUY_SUNFLOWERS,n,(function(n){var e=JSON.parse(n);if(0==e.status){e.data.type;g.Instance.ShowToast("Success","Purchase done",1)}else{var o=f.Instance.GetErrorMessage(e.status);o=(o=o.replace("#ID#",1==i?"Sapling":"Mama")).replace("#NUM#",1==i?"25":"2"),g.Instance.ShowToast("Purchase Failed",o,0)}t.OnBtnCloseClick()}),(function(t){}))}},s.OnBtnSub=function(){this.amount.string=(parseInt(this.amount.string)-1).toString(),this.OnEditBox()},s.OnBtnAdd=function(){this.amount.string=(parseInt(this.amount.string)+1).toString(),this.OnEditBox()},s.OnEditBox=function(){var t=this.amount.string,n=0;""==t?(n=1,this.amount.string="1"):((n=parseInt(t))<=0&&(n=1),n>this.maxAmount&&(n=this.maxAmount)),this.btnSub.interactable=n>1,this.btnAdd.interactable=n<this.maxAmount,this.amount.string=n.toString(),this.cost.string=b.numberWithCommas(n*this.LECost)},n}(m)).prototype,"icon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=n(v.prototype,"nameLable",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=n(v.prototype,"amount",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=n(v.prototype,"cost",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=n(v.prototype,"btnSub",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=n(v.prototype,"btnAdd",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=v))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/SilenceEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./EffectBase.ts"],(function(e){"use strict";var t,n,c,f,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,c=e._decorator},function(e){f=e.PVEGameplayControl},function(e){i=e.EffectBase}],execute:function(){var r;n._RF.push({},"4f2e5dR0QNHlJgoyhh3+Phq","SilenceEffect",void 0);var o=c.ccclass;c.property,e("SilenceEffect",o("SilenceEffect")(r=function(e){function n(){for(var t,n=arguments.length,c=new Array(n),f=0;f<n;f++)c[f]=arguments[f];return(t=e.call.apply(e,[this].concat(c))||this).endEffectTime=0,t}t(n,e);var c=n.prototype;return c.Init=function(t,n,c){e.prototype.Init.call(this,t,n,c),this.endEffectTime=f.Instance.CurrentTime+n.EffectTime,this.isApplying=!0},c.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.node.destroy()},n.ApplyEffect=function(e,t){var n=e.getEffectWithType(t.EffectType);if(null!=n)n.endEffectTime=f.Instance.CurrentTime+n.data.EffectTime;else e.initEffect(t)},n}(i))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/SimplePool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,o,l,r,s,c,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,l=e.Node,r=e.game,s=e.NodePool,c=e.instantiate,i=e.Component}],execute:function(){var a,u;t._RF.push({},"463d3uUdcRGo4vZnCigeElx","SimplePool",void 0);var p=o.ccclass;o.property,e("SimplePool",p("SimplePool")(((u=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return(n=e.call.apply(e,[this].concat(o))||this).pool=new Map,n}return n(t,e),t.Instance=function(){return null==this._instance&&(this._instance=new l("SimplePool").addComponent(t),r.addPersistRootNode(this._instance.node)),this._instance},t.get=function(e,n,t){var o=this.Instance(),l=null,r=null;return 1==o.pool.has(n)?l=o.pool.get(n):(l=new s,o.pool.set(n,l)),l.size()>0?r=l.get():(r=c(n),console.log("create new",n.name),r.release=function(){l.put(r)}),r.parent=t,r.getComponent(e)},t.getNode=function(e,n){var t=this.Instance(),o=null,l=null;return 1==t.pool.has(e)?o=t.pool.get(e):(o=new s,t.pool.set(e,o)),o.size()>0?l=o.get():(l=c(e),console.log("create new",e.name),l.release=function(){o.put(l)}),l.parent=n,l},t.releaseNode=function(e){try{e.release()}catch(e){}},t.releaseAll=function(e){for(var n=e.children.length-1;n>=0;n--)try{e.children[n].release()}catch(e){}},t}(i))._instance=void 0,a=u))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/SkillBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a,r,i,o,n;return{setters:[function(t){e=t.inheritsLoose,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,i=t._decorator,o=t.instantiate,n=t.Component}],execute:function(){var s;r._RF.push({},"ccba6s2sPVLSpI98i7cJdRy","SkillBase",void 0);var c=i.ccclass;i.property,t("SkillBase",c("SkillBase")(s=function(t){function r(){for(var e,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).root=void 0,e.skillData=void 0,e.PrefabMap=new Map,e}e(r,t);var i=r.prototype;return i.Init=function(t,e){this.root=t,this.skillData=e},i.addAttackData=function(t,e,a){},i.getPrefab=function(t){if(!this.PrefabMap.has(t)){var e=new Map;this.PrefabMap.set(t,{array:[],timeOutMap:e})}var a,r=this.PrefabMap.get(t);return r.array.length<=0?a=o(t):(a=r.array[0],r.array.splice(0,1)),a},i.setTimeoutPrefab=function(t,e,a){var r=this.PrefabMap.get(e);r.timeOutMap.set(a,setTimeout((function(){a.active=!1,r.array.push(a),r.timeOutMap.set(a,-1)}),t))},i.destroyPrefab=function(){for(var t,e=a(this.PrefabMap.entries());!(t=e()).done;)for(var r,i=t.value,o=(i[0],i[1]),n=a(o.timeOutMap.entries());!(r=n()).done;){var s=r.value,c=s[0],u=s[1];-1!=u&&clearTimeout(u),c.destroy()}},r}(n))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/SkillBookInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./UserModel.ts","./ResourcesManager.ts","./SkillBookRequireItem.ts","./UIPopupManager.ts"],(function(t){"use strict";var e,i,o,r,n,l,a,s,c,u,p,h,L,S,k,v,B,_,C,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,a=t.Sprite,s=t.Label,c=t.Prefab,u=t.Node,p=t.ScrollView,h=t.SpriteFrame,L=t.color,S=t.instantiate,k=t.Component},function(t){v=t.GatheringServicesApi},function(t){B=t.UserModel},function(t){_=t.ResourcesManager},function(t){C=t.SkillBookRequireItem},function(t){b=t.UIPopupManager}],execute:function(){var I,f,g,m,D,O,E,d,K,A,w,y,T,N,V,F,M,z,P,R,q,x,U,X,G,j,H,J,Q,W,Y,Z,$,tt,et,it,ot,rt,nt,lt,at,st,ct,ut,pt;n._RF.push({},"f4c66etxelHC7gSPGO0oEwr","SkillBookInfo",void 0);var ht=l.ccclass,Lt=l.property;t("SkillBookInfo",(I=ht("SkillBookInfo"),f=Lt(a),g=Lt(a),m=Lt(s),D=Lt(s),O=Lt(s),E=Lt(s),d=Lt(c),K=Lt(u),A=Lt(u),w=Lt(u),y=Lt(p),T=Lt(s),N=Lt(s),V=Lt(u),F=Lt(s),M=Lt(a),z=Lt(s),P=Lt(h),R=Lt(u),q=Lt(C),x=Lt(p),I((G=e((X=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n))||this,o(e,"BaseIcon",G,r(e)),o(e,"Icon",j,r(e)),o(e,"Name",H,r(e)),o(e,"Lv",J,r(e)),o(e,"Lv1",Q,r(e)),o(e,"LvNext",W,r(e)),o(e,"DescriptionTextPrefab",Y,r(e)),e.DescriptionTexts=[],o(e,"DescriptionContent",Z,r(e)),o(e,"DescriptionTitle1",$,r(e)),o(e,"DescriptionTitle2",tt,r(e)),o(e,"DescriptionScrollView",et,r(e)),o(e,"BtnLearnInActive",it,r(e)),o(e,"BtnLearnActive",ot,r(e)),o(e,"Cost_Node",rt,r(e)),o(e,"Cost_LE",nt,r(e)),o(e,"Cost_SkillBookIcon",lt,r(e)),o(e,"Cost_SkillBookLabel",at,r(e)),o(e,"Cost_SBSpriteFrame",st,r(e)),o(e,"Cost_Plus",ct,r(e)),o(e,"requireItems",ut,r(e)),o(e,"requireScrollView",pt,r(e)),e.totalLv=0,e.item=void 0,e.MaterialData=void 0,e.MaterialDataCost=void 0,e.LE_Cost=0,e.uiScreenSkillBook=void 0,e.costColor=[L("#FFFFFFFF"),L("#C83131FF")],e}i(e,t);var n=e.prototype;return n.Show=function(t,e,i){this.uiScreenSkillBook=i,this.item=t,this.MaterialData=e,this.DescriptionScrollView.scrollToTop(),this.requireScrollView.scrollToTop(),this.BaseIcon.spriteFrame=t.Base.spriteFrame,this.Icon.spriteFrame=t.Icon.spriteFrame,this.Icon.grayscale=t.Icon.grayscale;var o=t.json;this.totalLv=o.description.length,this.Name.string=o.name.toUpperCase(),this.Lv.string="LV."+t.lv,this.Lv1.string="LEVEL "+t.lv;var r=t.lv+1;this.LvNext.string="LEVEL "+r,this.BtnLearnInActive.string="LEARN LV."+r,this.BtnLearnActive.string="LEARN LV."+r,this.disableAllContent(),this.initDescription(o,t.lv),this.initRequirements(o);var n=this.initCost(o,t.lv);this.initBtnLearn(t.lv,n),this.node.active=!0},n.initDescription=function(t,e){this.DescriptionTitle1.active=!0,this.DescriptionTitle2.active=!0;var i=0;if(e>=this.totalLv)this.DescriptionTitle2.active=!1;else{for(var o=t.description[e],r=o.length-1;r>=0;r--){var n=this.getDescriptionItem(i);i++,n.string=o[r]}this.DescriptionTitle2.setSiblingIndex(0)}if(e<=0)this.getDescriptionItem(i).string="Not yet allocated this skill!";else for(var l=t.description[e-1],a=l.length-1;a>=0;a--){var s=this.getDescriptionItem(i);i++,s.string=l[a]}this.DescriptionTitle1.setSiblingIndex(0)},n.initRequirements=function(t){if(0!=t.require.length)for(var e=0;e<t.require.length;e++)this.requireItems[e].Init(t.require[e],e,this.uiScreenSkillBook.config);else this.requireItems[3].node.active=!0},n.initCost=function(t,e){if(e>=this.totalLv)return this.Cost_Node.active=!1,!1;this.Cost_Node.active=!0;var i=!0,o=t.cost[e];this.LE_Cost=o.LE,this.Cost_LE.string=o.LE,o.LE>B.LE_num?(i=!1,this.Cost_LE.color=this.costColor[1]):this.Cost_LE.color=this.costColor[0],this.MaterialDataCost={EXPERT_SKILL_BOOK:0,NOVICE_SKILL_BOOK:0,ADVANCED_SKILL_BOOK:0};var r=!0;return this.Cost_SkillBookIcon.node.active=!0,this.Cost_SkillBookLabel.node.active=!0,this.Cost_Plus.active=!0,o.NOVICE_SKILL_BOOK?(this.Cost_SkillBookIcon.spriteFrame=this.Cost_SBSpriteFrame[0],this.Cost_SkillBookLabel.string=o.NOVICE_SKILL_BOOK,r=this.CheckCostSkillBook("NOVICE_SKILL_BOOK",o.NOVICE_SKILL_BOOK)):o.ADVANCED_SKILL_BOOK?(this.Cost_SkillBookIcon.spriteFrame=this.Cost_SBSpriteFrame[1],this.Cost_SkillBookLabel.string=o.ADVANCED_SKILL_BOOK,r=this.CheckCostSkillBook("ADVANCED_SKILL_BOOK",o.ADVANCED_SKILL_BOOK)):o.EXPERT_SKILL_BOOK?(this.Cost_SkillBookIcon.spriteFrame=this.Cost_SBSpriteFrame[2],this.Cost_SkillBookLabel.string=o.EXPERT_SKILL_BOOK,r=this.CheckCostSkillBook("EXPERT_SKILL_BOOK",o.EXPERT_SKILL_BOOK)):(this.Cost_SkillBookIcon.node.active=!1,this.Cost_SkillBookLabel.node.active=!1,this.Cost_Plus.active=!1),i&&r},n.CheckCostSkillBook=function(t,e){return null==this.MaterialData?(this.Cost_SkillBookLabel.color=this.costColor[0],!0):(this.MaterialDataCost[t]=e,this.MaterialData[t]>=e?(this.Cost_SkillBookLabel.color=this.costColor[0],!0):(this.Cost_SkillBookLabel.color=this.costColor[1],!1))},n.initBtnLearn=function(t,e){if(t>=this.totalLv)return this.BtnLearnInActive.string="MAX LEVEL",this.BtnLearnInActive.node.parent.active=!0,void(this.BtnLearnActive.node.parent.active=!1);e&&this.item.isMeetRequire?(this.BtnLearnInActive.node.parent.active=!1,this.BtnLearnActive.node.parent.active=!0):(this.BtnLearnInActive.node.parent.active=!0,this.BtnLearnActive.node.parent.active=!1)},n.getDescriptionItem=function(t){var e;t<this.DescriptionTexts.length?e=this.DescriptionTexts[t]:(e=S(this.DescriptionTextPrefab).getComponent(s),this.DescriptionTexts.push(e),e.node.setParent(this.DescriptionContent));return e.node.active=!0,e.node.setSiblingIndex(0),e},n.disableAllContent=function(){for(var t=0;t<this.DescriptionTexts.length;t++)this.DescriptionTexts[t].node.active=!1;for(var e=0;e<this.requireItems.length;e++)this.requireItems[e].node.active=!1},n.OnLearnClick=function(){var t=this;v.SkillTree_PostUpgrade(this.item.key,this.item.lv,(function(e){var i=JSON.parse(e);0==i.status?(t.item.LevelUp(i.data),t.uiScreenSkillBook.TweenLE(-t.LE_Cost,!0),t.uiScreenSkillBook.MaterialData.EXPERT_SKILL_BOOK-=t.MaterialDataCost.EXPERT_SKILL_BOOK,t.uiScreenSkillBook.MaterialData.NOVICE_SKILL_BOOK-=t.MaterialDataCost.NOVICE_SKILL_BOOK,t.uiScreenSkillBook.MaterialData.ADVANCED_SKILL_BOOK-=t.MaterialDataCost.ADVANCED_SKILL_BOOK,t.uiScreenSkillBook.UpdateSkillBookLB(),t.uiScreenSkillBook.OnRefreshSkillData(),t.Show(t.item,t.uiScreenSkillBook.MaterialData,t.uiScreenSkillBook)):b.Instance.ShowToast("Error",_.Instance.GetErrorMessage(i.status),0)}),null)},e}(k)).prototype,"BaseIcon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(X.prototype,"Icon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(X.prototype,"Name",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(X.prototype,"Lv",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=e(X.prototype,"Lv1",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(X.prototype,"LvNext",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(X.prototype,"DescriptionTextPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=e(X.prototype,"DescriptionContent",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=e(X.prototype,"DescriptionTitle1",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=e(X.prototype,"DescriptionTitle2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=e(X.prototype,"DescriptionScrollView",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=e(X.prototype,"BtnLearnInActive",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=e(X.prototype,"BtnLearnActive",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=e(X.prototype,"Cost_Node",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=e(X.prototype,"Cost_LE",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=e(X.prototype,"Cost_SkillBookIcon",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=e(X.prototype,"Cost_SkillBookLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=e(X.prototype,"Cost_SBSpriteFrame",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ct=e(X.prototype,"Cost_Plus",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ut=e(X.prototype,"requireItems",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pt=e(X.prototype,"requireScrollView",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=X))||U));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillBookRequireItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,n,o,l,s,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,s=t.Label,a=t.Component}],execute:function(){var u,c,p,h,f,m,v;o._RF.push({},"2a0fdKZa6lBGqo61n6UJtSr","SkillBookRequireItem",void 0);var g=l.ccclass,y=l.property;t("SkillBookRequireItem",(u=g("SkillBookRequireItem"),c=y(s),p=y(s),u((m=e((f=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"title",m,n(e)),r(e,"texts",v,n(e)),e}return i(e,t),e.prototype.Init=function(t,e,i){this.node.active=!0;var r=Object.keys(t),n=t.COUNT;n<=1&&r.length<=2?this.title.string=e+1+". Minimum requirements":this.title.string=e+1+". Minimum requirements ("+n+" out of "+(r.length-1)+")";for(var o=0;o<this.texts.length;o++)this.texts[o].node.active=!1;for(var l=0,s=0;s<r.length;s++){var a=r[s];"COUNT"!=a&&(this.texts[l].node.active=!0,this.texts[l].string="- "+i[a].name+" Lv."+t[a],l++)}},e}(a)).prototype,"title",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(f.prototype,"texts",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=f))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/SkillItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserModel.ts"],(function(e){"use strict";var i,t,r,n,l,s,o,a,c,u,h,v;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,s=e._decorator,o=e.Sprite,a=e.Label,c=e.Node,u=e.CCBoolean,h=e.Component},function(e){v=e.UserModel}],execute:function(){var p,b,g,f,m,k,y,I,S,L,d,B,w,z,C,D,M;l._RF.push({},"e0b653sNp1JIa6mBwNtcgi0","SkillItem",void 0);var R=s.ccclass,q=s.property;e("SkillItem",(p=R("SkillItem"),b=q(o),g=q(o),f=q(a),m=q(a),k=q(c),y=q(c),I=q(u),p((d=i((L=function(e){function i(){for(var i,t=arguments.length,l=new Array(t),s=0;s<t;s++)l[s]=arguments[s];return i=e.call.apply(e,[this].concat(l))||this,r(i,"Icon",d,n(i)),r(i,"Base",B,n(i)),r(i,"Lv1",w,n(i)),r(i,"Lv2",z,n(i)),r(i,"LvEn",C,n(i)),r(i,"LvDis",D,n(i)),r(i,"isActive",M,n(i)),i.uiScreenSkillBook=void 0,i.json=void 0,i.key=void 0,i.baseImg=void 0,i.baseImg_inact=void 0,i.lv=0,i.isMeetRequire=!1,i}t(i,e);var l=i.prototype;return l.Init=function(e,i,t){this.uiScreenSkillBook=e,this.json=i,this.key=t,this.baseImg_inact=e.ItemBase[0],this.baseImg=e.ItemBase[i.tier]},l.UpdateState=function(){this.isMeetRequire=!0;for(var e=this.json.require,i=0;i<e.length;i++)this.CheckRequire(e[i])||(this.isMeetRequire=!1);this.isMeetRequire?(this.LvEn.active=!0,this.LvDis.active=!1,this.Icon.grayscale=!1,this.Base.spriteFrame=this.baseImg,this.Lv1.string=this.lv.toString(),this.Lv2.string="/"+this.json.description.length):(this.LvEn.active=!1,this.LvDis.active=!0,this.Icon.grayscale=!0,this.Base.spriteFrame=this.baseImg_inact)},l.CheckRequire=function(e){for(var i=0,t=this.uiScreenSkillBook.SkillItemMap,r=Object.keys(e),n=0;n<r.length;n++){var l=r[n];"COUNT"!=l&&(t.get(l).lv>=e[l]&&i++)}return i>=e.COUNT},l.LevelUp=function(e){this.lv++;for(var i=v.UserSkillTreeData,t=0;t<i.length;t++)if(i[t].type==e.type)return void(i[t]=e);i.push(e)},l.OnClick=function(){this.uiScreenSkillBook.OnSkillItemClick(this)},i}(h)).prototype,"Icon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(L.prototype,"Base",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(L.prototype,"Lv1",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(L.prototype,"Lv2",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(L.prototype,"LvEn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(L.prototype,"LvDis",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(L.prototype,"isActive",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=L))||S));l._RF.pop()}}}));

System.register("chunks:///_virtual/SlotCraftItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./ResourcesManager.ts"],(function(t){"use strict";var e,i,a,r,s,n,l,o,c,p,u,h,m,f,y,d,I,D,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized,s=t.createClass},function(t){n=t.cclegacy,l=t._decorator,o=t.Node,c=t.Sprite,p=t.SpriteFrame,u=t.CCFloat,h=t.Label,m=t.Vec3,f=t.UIOpacity,y=t.tween,d=t.Component},function(t){I=t.MaterialRarity,D=t.Utility},function(t){R=t.ResourcesManager}],execute:function(){var w,b,g,S,v,N,O,A,C,M,E,z,x,_,F,G,L;n._RF.push({},"7b20cPJS55Kqof58g4mgbb9","SlotCraftItem",void 0);var k=l.ccclass,B=l.property;t("SlotCraftItem",(w=k("SlotCraftItem"),b=B(o),g=B(c),S=B(p),v=B(p),N=B({type:u,min:0,max:10}),O=B(c),A=B(h),w((E=e((M=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return e=t.call.apply(t,[this].concat(s))||this,a(e,"touchArea",E,r(e)),a(e,"sprItem",z,r(e)),a(e,"sprDefault",x,r(e)),a(e,"sprDefaultRandom",_,r(e)),a(e,"scaleDefault",F,r(e)),a(e,"sprRarity",G,r(e)),a(e,"labelName",L,r(e)),e.itemID="",e.index=-1,e.rarity=I.NONE,e.itemData=void 0,e.uiOpacity=void 0,e.scaleValueDefault=m.ZERO,e.tweenAppearItem=void 0,e.tweenShowItem=void 0,e.tweenShowBGItem=void 0,e}i(e,t);var n=e.prototype;return n.onLoad=function(){this.sprItem.sizeMode=c.SizeMode.RAW,this.scaleValueDefault=new m(this.scaleDefault,this.scaleDefault,1)},n.start=function(){this.touchArea.on(o.EventType.TOUCH_END,this.onSlotClicked,this),this.sprItem.spriteFrame=this.sprDefault;var t=this.sprRarity.getComponent(f);null==t&&(this.sprRarity.addComponent(f),t=this.sprRarity.getComponent(f)),this.uiOpacity=t;var e=new m(this.scaleDefault+.1,this.scaleDefault+.1,1);this.tweenShowBGItem=y(this.uiOpacity).delay(.1).to(.3,{opacity:255}),this.tweenShowItem=y(this.sprItem.node).delay(.2).to(.2,{scale:e}).to(.2,{scale:this.scaleValueDefault}),this.tweenAppearItem=y(this.sprItem.node).to(.1,{scale:e}).to(.2,{scale:this.scaleValueDefault}).delay(.3).to(.15,{scale:new m(this.scaleDefault+.05,this.scaleDefault+.05,1)}).to(.25,{scale:m.ZERO})},n.getRandomDisplayName=function(t){switch(t){case"RARE_RANDOM":return"Rare Item";case"EPIC_RANDOM":return"Epic Item";case"LEGENDARY_RANDOM":return"Legendary Item";case"MYTHIC_RANDOM":return"Mythic Item";default:return""}},n.loadData=function(t,e){var i=this;if(void 0===e&&(e=-1),this.itemData=t,this.index=e,this.itemID=t.id,this.rarity=D.getRarityWithName(t.getItemRarity()),"RANDOM"==t.getNameType())this.sprItem.node.setScale(.75,.75),this.sprDefaultRandom&&(this.sprItem.spriteFrame=this.sprDefaultRandom);else{this.sprItem.node.setScale(1,1);R.Instance.LoadMaterialSprite(t.name,(function(t){i.sprItem.spriteFrame=t}))}if(this.labelName){var a=R.Instance.GetMaterialData(t.name);this.labelName.string=a?a.name:this.getRandomDisplayName(t.name)}var r="BG_"+D.getNameRarity(this.rarity);R.Instance.LoadMaterialRaritySprite(r,(function(t){i.sprRarity.node.active=!0,i.sprRarity.spriteFrame=t}))},n.itemAppear=function(){this.uiOpacity.opacity=0,this.sprRarity.node.active=!0,this.sprItem.node.scale=this.scaleValueDefault,this.tweenShowBGItem||this.tweenShowBGItem.stop(),this.tweenShowBGItem.start(),this.tweenShowItem||this.tweenShowItem.stop(),this.tweenShowItem.start()},n.itemCrafting=function(){this.uiOpacity.opacity=0,this.sprItem.node.scale=m.ZERO,this.tweenAppearItem||this.tweenAppearItem.stop(),this.tweenAppearItem.start()},n.resetSlot=function(){this.labelName&&(this.labelName.string=""),this.sprRarity&&(this.sprRarity.node.active=!1),this.uiOpacity&&(this.uiOpacity.opacity=0),this.sprItem.spriteFrame=this.sprDefault,this.itemID="",this.rarity=I.NONE,this.index=-1,this.itemData=null},n.onSlotClicked=function(){var t={index:this.index,itemData:this.itemData};this.node.emit("slotItem:onClicked",t)},s(e,[{key:"ItemID",get:function(){return this.itemID},set:function(t){this.itemID=t}},{key:"Index",get:function(){return this.index},set:function(t){this.index=t}},{key:"Rarity",get:function(){return this.rarity},set:function(t){this.rarity=t}}]),e}(d)).prototype,"touchArea",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(M.prototype,"sprItem",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(M.prototype,"sprDefault",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(M.prototype,"sprDefaultRandom",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(M.prototype,"scaleDefault",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),G=e(M.prototype,"sprRarity",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(M.prototype,"labelName",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=M))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/SlowEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./EffectBase.ts"],(function(e){"use strict";var t,i,o,f,n;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,o=e._decorator},function(e){f=e.PVEGameplayControl},function(e){n=e.EffectBase}],execute:function(){var r;i._RF.push({},"f58fcwzIbpPVrx4TsOA/m6Z","SlowEffect",void 0);var s=o.ccclass;o.property,e("SlowEffect",s("SlowEffect")(r=function(e){function i(){for(var t,i=arguments.length,o=new Array(i),f=0;f<i;f++)o[f]=arguments[f];return(t=e.call.apply(e,[this].concat(o))||this).slowModifier=0,t.endEffectTime=0,t}t(i,e);var o=i.prototype;return o.Init=function(t,i,o){e.prototype.Init.call(this,t,i,o),null!=i.SlowPercent&&i.SlowPercent>0&&(this.slowModifier=o.root.data.statsData.MovementSpeed*i.SlowPercent/100),this.endEffectTime=f.Instance.CurrentTime+i.EffectTime},o.update=function(e){f.Instance.CurrentTime>=this.endEffectTime&&this.RemoveEffect()},i.ApplyEffect=function(e,t){var i=e.getEffectWithType(t.EffectType),o=e.initEffect(t);if(null!=i&&i.slowModifier>=o.slowModifier);else{var f=e.root.data.statsData;null!=i&&(i.isApplying=!1),o.isApplying=!0,f.MovementSpeedModifier=-o.slowModifier}},o.RemoveEffect=function(){this.thisTarget.RemoveEffect(this);var e=this.thisTarget.root.data.statsData;1==this.isApplying&&(e.MovementSpeedModifier+=this.slowModifier);var t=this.thisTarget.getEffectWithType(this.effectType);null!=t&&(t.isApplying=!0,e.MovementSpeedModifier=-t.slowModifier),this.node.destroy()},i}(n))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/Snipe.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./Utility.ts","./PVE_Helper.ts","./SnipeBullet.ts","./Enums.ts","./InGameEvent.ts","./NormalAttack.ts"],(function(t){"use strict";var e,n,o,i,a,r,s,c,l,u,h,f,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.instantiate},function(t){a=t.SoundController,r=t.EnumSoundPVE},function(t){s=t.Utility},function(t){c=t.PVEHelper},function(t){l=t.SnipeBullet},function(t){u=t.AttackType,h=t.DamageType},function(t){f=t.InGameEventID},function(t){p=t.NormalAttack}],execute:function(){var m;n._RF.push({},"a433a1Kzp5HJ4DbICs8HUi6","Snipe",void 0);var d=o.ccclass;o.property,t("Snipe",d("Snipe")(m=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.Init=function(e,n){t.prototype.Init.call(this,e,n),this.root.root.event.on(f.OnDead,this.onPlantDead,this)},o.addAttackData=function(t,e){t==u.NormalAttack&&(e.AddDamage(h.Normal,this.root.GetRandomBasicDamage()),e.AddEffects(this.skillData.EffectData),e.ArmorPiercingMultiply=this.skillData.ArmorPiercingMultiply)},o.attack=function(t){c.RandomActive(this.root.root.data.attackData.BlindPercent)?console.error("Blind"):(this.curTarget=t,this.curDamage=this.root.Attack(u.NormalAttack,this.curTarget,0),null!=this.curDamage&&(this.root.root.event.on(f.AttackAnimEvent,this.endCast,this),this.root.beginNormalAttack(),this.root.root.animationComponent.setFaceToTarget(t.node.worldPosition.x,-1)))},o.endCast=function(){null!=this.curTarget?(this.root.root.event.off(f.AttackAnimEvent,this.endCast,this),i(this.bulletPrefab).getComponent(l).InitSnipe(this.root,this.curTarget,this.curDamage,2500,100),a.Instance.PlaySoundPvE(r.snipe_attack),this.activeMuzzle()):console.error("this.curTarget null")},o.activeMuzzle=function(){if(null!=this.muzzlePrefab){var t=this.getPrefab(this.muzzlePrefab);t.parent=this.root.getAttackPos(),t.setPosition(0,0,0),s.PlayParticle(t),this.setTimeoutPrefab(500,this.muzzlePrefab,t)}},o.onPlantDead=function(){this.root.root.event.off(f.OnDead,this.onPlantDead,this),this.destroyPrefab()},n}(p))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/SnipeBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./DamageData.ts","./Enums.ts","./DirectionBullet.ts"],(function(t){"use strict";var a,e,i,n,s,o,r,l,c,g,u;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,n=t.instantiate},function(t){s=t.SoundController,o=t.EnumSoundPVE},function(t){r=t.PVEGameplayControl},function(t){l=t.PVEHelper},function(t){c=t.DamageData},function(t){g=t.DamageType},function(t){u=t.DirectionBullet}],execute:function(){var h;e._RF.push({},"52ec9jpkf1BBqo+6M8BYmYp","SnipeBullet",void 0);var p=i.ccclass;i.property,t("SnipeBullet",p("SnipeBullet")(h=function(t){function e(){for(var a,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(a=t.call.apply(t,[this].concat(i))||this).hitTarget=[],a}a(e,t);var i=e.prototype;return i.InitSnipe=function(a,e,i,n,s){void 0===n&&(n=800),void 0===s&&(s=70),t.prototype.init.call(this,a,e,i,n,s)},i.hitOne=function(t){this.hitTarget.indexOf(t)>=0||(this.hitTarget.push(t),t&&(this.damageData.isPiercing?(this.damageTarget(t),1==this.hitTarget.length&&(this.damageData.MultiplyDamage(this.damageData.PiercingDmgMultiply),this.damageData.ArmorPiercingMultiply=1)):1==this.hitTarget.length&&(this.damageTarget(t),this.hit())))},i.activeExplosion=function(t){if(this.explosionPrefab){var a=n(this.explosionPrefab);a.parent=r.Instance.getEffParent(),a.worldPosition=t.targetComponent.getTargetPos().worldPosition,a.active=!0,s.Instance.PlaySoundPvE(o.snipe_hit,.8)}},i.activeExplosionAssassination=function(t){if(this.explosionPrefabTarget){var a=n(this.explosionPrefabTarget);a.parent=r.Instance.getEffParent(),a.worldPosition=t.targetComponent.getTargetPos().worldPosition,a.active=!0,s.Instance.PlaySoundPvE(o.snipe_aassasination)}},i.damageTarget=function(t){if(1==this.hitTarget.length&&null!=this.damageData.isAssassination&&t.getHpPercent()<=this.damageData.Assassination_CullingStrikeHP&&1==l.RandomActive(this.damageData.Assassination_PercentActive)){var a=new c;a.attacker=this.damageData.attacker,a.AddDamage(g.Pure,t.data.statsData.HP),t.TakeDamage(a),this.activeExplosionAssassination(t)}else t.TakeDamage(this.damageData),this.activeExplosion(t)},i.hit=function(){this.target=null,this.node.destroy()},e}(u))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/SoftPollen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./NormalAttack.ts"],(function(t){"use strict";var o,n,e,r,l,c;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator},function(t){r=t.SoundController,l=t.EnumSoundPVE},function(t){c=t.NormalAttack}],execute:function(){var u;n._RF.push({},"2314fWARKRHyppJja/0/kWt","SoftPollen",void 0);var s=e.ccclass;e.property,t("SoftPollen",s("SoftPollen")(u=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.endCast=function(){t.prototype.endCast.call(this),r.Instance.PlaySoundPvE(l.SFX_SoftPollen_attack,.8)},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/SoftPollenBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./BezierBullet.ts"],(function(t){"use strict";var o,e,l,n,u,r;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,l=t._decorator},function(t){n=t.SoundController,u=t.EnumSoundPVE},function(t){r=t.BezierBullet}],execute:function(){var i;e._RF.push({},"99405KCu95H15jtLsSxkkDr","SoftPollenBullet",void 0);var c=l.ccclass;l.property,t("SoftPollenBullet",c("SoftPollenBullet")(i=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.hit=function(){n.Instance.PlaySoundPvE(u.SFX_SoftPollen_hit,.8),t.prototype.hit.call(this)},e}(r))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/SoundController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserModel.ts"],(function(i){"use strict";var _,t,o,e,a,n,r,l,s,c,S;return{setters:[function(i){_=i.applyDecoratedDescriptor,t=i.inheritsLoose,o=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){a=i.cclegacy,n=i._decorator,r=i.AudioSource,l=i.AudioClip,s=i.game,c=i.Component},function(i){S=i.UserModel}],execute:function(){var u,d,F,p,h,X,g,m,B,k,I,U;i({EnumSound:void 0,EnumSoundPVE:void 0}),a._RF.push({},"a4891snXxVKDYiUWyd5CJ4/","SoundController",void 0);var f,y,P=n.ccclass,A=n.property;!function(i){i[i.UI_fx_chase_crows=0]="UI_fx_chase_crows",i[i.UI_fx_Give_water_farm=1]="UI_fx_Give_water_farm",i[i.UI_SFX_Collect_LE=2]="UI_SFX_Collect_LE",i[i.GameUI_button_click=3]="GameUI_button_click",i[i.GameUI_closepopup=4]="GameUI_closepopup",i[i.GameUI_openpopup=5]="GameUI_openpopup",i[i.UI_SFX_Cut_Tree_2=6]="UI_SFX_Cut_Tree_2",i[i.UI_Close_Bag=7]="UI_Close_Bag",i[i.UI_Item_Appear=8]="UI_Item_Appear",i[i.UI_Item_Slide_to_Bag=9]="UI_Item_Slide_to_Bag",i[i.UI_Fishing_Bubble=10]="UI_Fishing_Bubble",i[i.UI_Fishing_CaDopNuoc=11]="UI_Fishing_CaDopNuoc",i[i.UI_Fishing_RotXuongNuoc=12]="UI_Fishing_RotXuongNuoc",i[i.UI_Fishing_Ambient=13]="UI_Fishing_Ambient",i[i.BG_Fishing=14]="BG_Fishing",i[i.BG_Chopping=15]="BG_Chopping",i[i.BG_Mining=16]="BG_Mining",i[i.UI_SFX_Deploy_Plant=17]="UI_SFX_Deploy_Plant",i[i.UI_SFX_Fertilizing=18]="UI_SFX_Fertilizing",i[i.UI_SFX_Fertilizing_Lvl_UP=19]="UI_SFX_Fertilizing_Lvl_UP",i[i.UI_SFX_Watering_All=20]="UI_SFX_Watering_All",i[i.UI_SFX_PickAxe_Hit=21]="UI_SFX_PickAxe_Hit",i[i.UI_SFX_Hammer_Hit=22]="UI_SFX_Hammer_Hit",i[i.UI_SFX_Drill_Hit=23]="UI_SFX_Drill_Hit",i[i.BGM_Farm2=24]="BGM_Farm2",i[i.UI_SFX_Crafting=25]="UI_SFX_Crafting",i[i.UI_SFX_Crafting_Lvl_Up=26]="UI_SFX_Crafting_Lvl_Up",i[i.UI_SFX_Crafting_Single_Material=27]="UI_SFX_Crafting_Single_Material",i[i.BG_PVE=28]="BG_PVE"}(f||(f=i("EnumSound",{}))),function(i){i[i._electrocute=0]="_electrocute",i[i.chainlightning=1]="chainlightning",i[i.flamethrower_flame_loop=2]="flamethrower_flame_loop",i[i.meltdown=3]="meltdown",i[i.SFX_Bombard_HeatedStrike_attack=4]="SFX_Bombard_HeatedStrike_attack",i[i.SFX_Bombard_HeatedStrike_hit=5]="SFX_Bombard_HeatedStrike_hit",i[i.SFX_IcicleWave=6]="SFX_IcicleWave",i[i.SFX_LaserBeam_attack=7]="SFX_LaserBeam_attack",i[i.SFX_LaserBeam_loop=8]="SFX_LaserBeam_loop",i[i.SFX_RapidFire_attack=9]="SFX_RapidFire_attack",i[i.SFX_RapidFire_attack_single=10]="SFX_RapidFire_attack_single",i[i.SFX_RapidFire_hit=11]="SFX_RapidFire_hit",i[i.SFX_RapidFire_hit_single=12]="SFX_RapidFire_hit_single",i[i.SFX_SoftPollen_attack=13]="SFX_SoftPollen_attack",i[i.SFX_SoftPollen_hit=14]="SFX_SoftPollen_hit",i[i.SFX_StaticShock=15]="SFX_StaticShock",i[i.SFX_StickyLiquid_attack=16]="SFX_StickyLiquid_attack",i[i.SFX_StickyLiquid_hit=17]="SFX_StickyLiquid_hit",i[i.SFX_ThunderStrike=18]="SFX_ThunderStrike",i[i.snipe_aassasination=19]="snipe_aassasination",i[i.snipe_attack=20]="snipe_attack",i[i.snipe_hit=21]="snipe_hit",i[i.SplashAttack_attack=22]="SplashAttack_attack",i[i.SplashAttack_hit=23]="SplashAttack_hit",i[i.thornassult_attack=24]="thornassult_attack",i[i.tremor=25]="tremor",i[i.SFX_FreezingField_demo_2_2=26]="SFX_FreezingField_demo_2_2",i[i.SFX_HealingWind_demo_2=27]="SFX_HealingWind_demo_2",i[i.SFX_ScorchingZone_demo_2_2=28]="SFX_ScorchingZone_demo_2_2",i[i.SFX_Spellcard_OminousMist_fix_2=29]="SFX_Spellcard_OminousMist_fix_2",i[i.SFX_Spellcard_Stone_Barrage_fix=30]="SFX_Spellcard_Stone_Barrage_fix",i[i.SFX_Spellcard_Thunderbolt=31]="SFX_Spellcard_Thunderbolt",i[i.SFX_Zephyr_sBlessing_demo_2=32]="SFX_Zephyr_sBlessing_demo_2",i[i.SFX_HeatingStrike_atk2=33]="SFX_HeatingStrike_atk2",i[i.SFX_Woolbody_Passive_fix1_2=34]="SFX_Woolbody_Passive_fix1_2",i[i.SFX_WoolBody_atk2=35]="SFX_WoolBody_atk2",i[i.Worm_Acid_Blood=36]="Worm_Acid_Blood",i[i.Worm_Attack_Basic_Hit=37]="Worm_Attack_Basic_Hit",i[i.Worm_Attack_Basic_ShotFire=38]="Worm_Attack_Basic_ShotFire",i[i.Worm_Attack_Basic_2_Hit=39]="Worm_Attack_Basic_2_Hit",i[i.Worm_Attack_Basic_2_ShotFire=40]="Worm_Attack_Basic_2_ShotFire",i[i.Worm_Dark_Powder_Hit=41]="Worm_Dark_Powder_Hit",i[i.Worm_Dark_Powder_ShotFire=42]="Worm_Dark_Powder_ShotFire",i[i.SFX_RazorFang=43]="SFX_RazorFang",i[i.SFX_RazorFang_Passive_fix1=44]="SFX_RazorFang_Passive_fix1",i[i.LiquidBodyPassive=45]="LiquidBodyPassive",i[i.LiquidBody_attack=46]="LiquidBody_attack",i[i.LiquidBody_hit=47]="LiquidBody_hit",i[i.EndgamePopup=48]="EndgamePopup",i[i.None=-1e3]="None"}(y||(y=i("EnumSoundPVE",{})));i("SoundController",(u=P("SoundController"),d=A(r),F=A(r),p=A(l),h=A(l),u(((U=function(i){function _(){for(var _,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return _=i.call.apply(i,[this].concat(a))||this,o(_,"BgMusic",m,e(_)),o(_,"SoundFX",B,e(_)),o(_,"AudioClips",k,e(_)),o(_,"AudioClipsPVE",I,e(_)),_}t(_,i);var a=_.prototype;return a.onLoad=function(){null==_.Instance?(_.Instance=this,s.addPersistRootNode(this.node)):this.destroy()},a.start=function(){this.schedule(function(){0==this.BgMusic.playing&&S.userLocalData.musicOn&&this.BgMusic.play()}.bind(this),1)},a.PlaySound=function(i,_){void 0===_&&(_=.5),S.userLocalData.soundOn&&(this.SoundFX.loop=!1,this.SoundFX.playOneShot(this.AudioClips[i],_))},a.PlaySoundLoop=function(i,_){void 0===_&&(_=.5),S.userLocalData.soundOn&&(this.SoundFX.volume=_,this.SoundFX.loop=!0,this.SoundFX.clip=this.AudioClips[i],this.SoundFX.play())},a.StopSoundLoop=function(){this.SoundFX.stop()},a.PlayBgMusic=function(i){i&&!this.BgMusic.playing?this.BgMusic.play():!i&&this.BgMusic.playing&&this.BgMusic.stop()},a.SetBgMusic=function(i){this.BgMusic.stop(),this.BgMusic.loop=!0,this.BgMusic.clip=this.AudioClips[i],S.userLocalData.musicOn&&this.BgMusic.play()},a.PlaySoundPvE=function(i,_){void 0===_&&(_=.5),S.userLocalData.soundOn&&(this.SoundFX.loop=!1,this.SoundFX.playOneShot(this.AudioClipsPVE[i],_))},_}(c)).Instance=void 0,m=_((g=U).prototype,"BgMusic",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=_(g.prototype,"SoundFX",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=_(g.prototype,"AudioClips",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=_(g.prototype,"AudioClipsPVE",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=g))||X));a._RF.pop()}}}));

System.register("chunks:///_virtual/Spell_FreezingField.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./Utility.ts","./PVE_Constant.ts","./PVE_GameplayControl.ts","./DamageData.ts","./SpellBase.ts"],(function(t){"use strict";var e,n,o,i,a,l,r,s,c,p,f,u,d,h,g,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,r=t.Node,s=t.Rect,c=t.Vec2},function(t){p=t.SoundController,f=t.EnumSoundPVE},function(t){u=t.Utility},function(t){d=t.PVE_Constant},function(t){h=t.PVEGameplayControl},function(t){g=t.DamageData},function(t){y=t.SpellBase}],execute:function(){var m,P,F,E,w,D,T,v,_;a._RF.push({},"82a5fDIDzJM/6ICAgMj7nQm","Spell_FreezingField",void 0);var S=l.ccclass,b=l.property;t("SpellFreezingField",(m=S("SpellFreezingField"),P=b(r),F=b(r),E=b(r),m((T=e((D=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))||this).castRange=100,e.effTime=8,o(e,"explosion",T,i(e)),o(e,"loopFront",v,i(e)),o(e,"loopBack",_,i(e)),e.applyedTarget=[],e}n(e,t);var a=e.prototype;return a.init=function(e){t.prototype.init.call(this,e),this.castRange=e.CastRange,this.loopFront.parent=h.Instance.getEffParentFront(),this.loopFront.worldPosition=this.node.worldPosition,this.loopBack.parent=h.Instance.getEffParentBack(),this.loopBack.worldPosition=this.node.worldPosition,this.effTime=this.data.EffectTime,this.playEff(),this.schedule(this.execute.bind(this),.5),this.execute(),p.Instance.PlaySoundPvE(f.SFX_FreezingField_demo_2_2)},a.playEff=function(){u.PlayParticle(this.loopFront),u.PlayParticle(this.loopBack)},a.execute=function(){var t=this;if(this.effTime-=.5,this.effTime<0)return this.loopFront.destroy(),this.loopBack.destroy(),void this.node.destroy();var e=this.node.worldPosition,n=this.castRange/2,o=d.LAND_HEIGHT/2,i=new s(e.x-n,e.y-o,this.castRange,d.LAND_HEIGHT);h.Instance.enemiesObject.forEach((function(e,n,o){var a=new c(e.node.worldPosition.x,e.node.worldPosition.y);i.contains(a)&&t.applyTarget(e)}))},a.applyTarget=function(t){if(!(this.applyedTarget.indexOf(t.Id)>=0)){this.applyedTarget.push(t.Id);var e=new g;e.AddEffects(this.skillData.EffectData),t.targetComponent.TakeDamage(e);var n=t,o=this.skillData.SlowEffect;setTimeout((function(){if(null!=n&&null!=n.targetComponent){var t=new g;t.AddEffects([o]),n.targetComponent.TakeDamage(t)}}),3e3)}},e}(y)).prototype,"explosion",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(D.prototype,"loopFront",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(D.prototype,"loopBack",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=D))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/Spell_HealingWind.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./EffParentSetter.ts","./PVE_GameplayControl.ts","./Enums.ts","./SpellBase.ts"],(function(e){"use strict";var t,n,i,a,o,r,s,l,f,c,p,u,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Vec3},function(e){l=e.SoundController,f=e.EnumSoundPVE},function(e){c=e.EffParentSetter},function(e){p=e.PVEGameplayControl},function(e){u=e.EffectData,d=e.EffectType},function(e){h=e.SpellBase}],execute:function(){var g,y,P,E,S;o._RF.push({},"e543fj6NSFFuJFImv5aEs3E","Spell_HealingWind",void 0);var m=r.ccclass,T=r.property;e("SpellHealingWind",(g=m("SpellHealingWind"),y=T(c),g((S=t((E=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"effParent",S,a(t)),t.castRange=100,t.effTime=6,t}n(t,e);var o=t.prototype;return o.init=function(t){e.prototype.init.call(this,t),this.castRange=t.CastRange,this.effTime=this.data.EffectTime,this.execute(),this.scheduleOnce(this.DestroySpell.bind(this),this.effTime),l.Instance.PlaySoundPvE(f.SFX_HealingWind_demo_2)},o.DestroySpell=function(){this.effParent&&this.effParent.effs&&this.effParent.effs.forEach((function(e){e.effNode.destroy()})),this.node.destroy()},o.execute=function(){var e=this;console.log("Spell execute");var t=this.node.worldPosition,n=this.castRange/2;p.Instance.myTeamObject.forEach((function(i,a,o){s.distance(t,i.targetComponent.getTargetPos().worldPosition)<=n&&e.applyTarget(i)}))},o.applyTarget=function(e){e.applyRegenHp(e.data.statsData.getMaxHp()*this.skillData.MaxHPPercent/100);var t=new u;t.EffectId=d.Regen,t.EffectType=d.Regen,t.EffectTime=this.effTime,t.RegenHpPercentPerSec=2,e.targetComponent.applyEffectOne(t)},t}(h)).prototype,"effParent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=E))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/Spell_Ominous_Mist.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./Utility.ts","./PVE_Constant.ts","./PVE_GameplayControl.ts","./DamageData.ts","./SpellBase.ts"],(function(e){"use strict";var t,n,i,a,o,s,r,l,c,f,u,p,d,h,g,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,r=e.Node,l=e.Rect,c=e.Vec2},function(e){f=e.SoundController,u=e.EnumSoundPVE},function(e){p=e.Utility},function(e){d=e.PVE_Constant},function(e){h=e.PVEGameplayControl},function(e){g=e.DamageData},function(e){m=e.SpellBase}],execute:function(){var y,P,D,T,_;o._RF.push({},"b2f33O7MDtPYYtYOAduIsN+","Spell_Ominous_Mist",void 0);var S=s.ccclass,v=s.property;e("SpellOminousMist",(y=S("SpellOminousMist"),P=v(r),y((_=t((T=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).castRange=100,t.effTime=8,i(t,"eff",_,a(t)),t.applyedTarget=[],t}n(t,e);var o=t.prototype;return o.init=function(t){e.prototype.init.call(this,t),console.log("initdata",t),this.eff.parent=h.Instance.getEffParentFront(),this.eff.setWorldPosition(this.node.worldPosition.clone()),p.PlayParticle(this.eff),this.castRange=t.CastRange,this.effTime=t.EffectTime,this.execute(),this.schedule(this.execute.bind(this),1),f.Instance.PlaySoundPvE(u.SFX_Spellcard_OminousMist_fix_2)},o.execute=function(){var e=this;if(console.log("Spell execute",this.effTime),this.effTime-=1,this.effTime<0)return this.eff.destroy(),void this.node.destroy();var t=this.node.worldPosition,n=this.castRange/2,i=d.LAND_HEIGHT/2,a=new l(t.x-n,t.y-i,this.castRange,d.LAND_HEIGHT);h.Instance.enemiesObject.forEach((function(t,n,i){var o=new c(t.node.worldPosition.x,t.node.worldPosition.y);a.contains(o)&&e.applyTarget(t)}))},o.applyTarget=function(e){var t=this.skillData.damageData,n=new g;if(t.forEach((function(t){if(t.HPPercentPerSec){var i=e.data.statsData.getMaxHp(),a=t.HPPercentPerSec,o=i*a/100;console.log("damage",i,a,o),n.AddDamage(t.damageType,o)}})),console.log("damage",n),e.targetComponent.TakeDamage(n),!(this.applyedTarget.indexOf(e.Id)>=0)){this.applyedTarget.push(e.Id);var i=new g;i.AddEffects(this.skillData.EffectData),e.targetComponent.TakeDamage(i)}},t}(m)).prototype,"eff",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=T))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/Spell_ScorchingZone.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./EffParentSetter.ts","./PVE_Constant.ts","./PVE_GameplayControl.ts","./DamageData.ts","./SpellBase.ts"],(function(e){"use strict";var t,n,a,o,i,r,c,s,f,l,u,p,g,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,c=e.Rect,s=e.Vec2},function(e){f=e.SoundController,l=e.EnumSoundPVE},function(e){u=e.EffParentSetter},function(e){p=e.PVE_Constant},function(e){g=e.PVEGameplayControl},function(e){h=e.DamageData},function(e){d=e.SpellBase}],execute:function(){var P,m,y,D,S;i._RF.push({},"cdc66o9CtZDYJ/N5gqWuk7g","Spell_ScorchingZone",void 0);var E=r.ccclass,v=r.property;e("SpellScorchingZone",(P=E("SpellScorchingZone"),m=v(u),P((S=t((D=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,a(t,"effParent",S,o(t)),t.castRange=100,t.effTime=8,t}n(t,e);var i=t.prototype;return i.init=function(t){e.prototype.init.call(this,t),this.castRange=t.CastRange,this.effTime=this.skillData.EffectTime,this.execute(),this.schedule(this.execute.bind(this),1),f.Instance.PlaySoundPvE(l.SFX_ScorchingZone_demo_2_2)},i.execute=function(){var e=this;if(console.log("Spell execute"),this.effTime-=1,this.effTime<0)return this.effParent&&this.effParent.effs&&this.effParent.effs.forEach((function(e){e.effNode.destroy()})),void this.node.destroy();var t=this.node.worldPosition,n=this.castRange/2,a=p.LAND_HEIGHT/2,o=new c(t.x-n,t.y-a,this.castRange,p.LAND_HEIGHT);g.Instance.enemiesObject.forEach((function(t,n,a){var i=new s(t.node.worldPosition.x,t.node.worldPosition.y);o.contains(i)&&e.applyTarget(t)}))},i.applyTarget=function(e){var t=this.skillData.damageData,n=new h;t.forEach((function(t){n.AddDamage(t.damageType,t.damage),t.HPPercent&&n.AddDamage(t.damageType,e.data.statsData.getMaxHp()*t.HPPercent/100)})),e.targetComponent.TakeDamage(n);var a=this.skillData.EffectData[0];if(e.getHpPercent()<=a.TriggerHpPercentLeft){var o=new h;o.AddEffects([a]),e.targetComponent.TakeDamage(o)}},t}(d)).prototype,"effParent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=D))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/Spell_StoneBarrage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./UserModel.ts","./Utility.ts","./PVE_Constant.ts","./PVE_GameplayControl.ts","./DamageData.ts","./SpellBase.ts"],(function(t){"use strict";var e,i,n,o,a,s,r,f,l,c,u,d,p,h,g,y,S,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Node,f=t.AudioSource,l=t.Rect,c=t.Vec2},function(t){u=t.SoundController,d=t.EnumSoundPVE},function(t){p=t.UserModel},function(t){h=t.Utility},function(t){g=t.PVE_Constant},function(t){y=t.PVEGameplayControl},function(t){S=t.DamageData},function(t){m=t.SpellBase}],execute:function(){var E,P,D,v,_,w,b,F,T;a._RF.push({},"e3638HcUP5FQbOD9riq0ofY","Spell_StoneBarrage",void 0);var C=s.ccclass,B=s.property;t("SpellStoneBarrage",(E=C("SpellStoneBarrage"),P=B(r),D=B(r),v=B(f),E((b=e((w=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"eff",b,o(e)),n(e,"eff2",F,o(e)),e.castRange=100,e.effTime=8,e.curEff=void 0,n(e,"SoundFX",T,o(e)),e}i(e,t);var a=e.prototype;return a.init=function(e){t.prototype.init.call(this,e),this.castRange=e.CastRange,this.eff.parent=y.Instance.getEffParentFront(),this.eff.worldPosition=this.node.worldPosition,this.eff2.parent=y.Instance.getEffParentFront(),this.eff2.worldPosition=this.node.worldPosition,this.curEff=this.eff,this.effTime=this.data.EffectTime,this.playEff(),this.schedule(this.execute.bind(this),.5),this.PlaySoundLoop()},a.playEff=function(){h.PlayParticle(this.curEff),this.curEff=this.curEff==this.eff?this.eff2:this.eff},a.execute=function(){var t=this;if(console.log("Spell execute"),this.effTime-=.5,this.effTime<0)return this.eff.destroy(),this.eff2.destroy(),this.SoundFX.stop(),void this.node.destroy();this.playEff();var e=this.node.worldPosition,i=this.castRange/2,n=g.LAND_HEIGHT/2,o=new l(e.x-i,e.y-n,this.castRange,g.LAND_HEIGHT);y.Instance.enemiesObject.forEach((function(e,i,n){var a=new c(e.node.worldPosition.x,e.node.worldPosition.y);o.contains(a)&&t.applyTarget(e)}))},a.applyTarget=function(t){var e=this.skillData.damageData[0],i=new S;i.AddDamage(e.damageType,e.damage+e.damagePerDef*t.data.statsData.Defense);var n=this.skillData.EffectData[0];i.AddEffects([n]),t.targetComponent.TakeDamage(i)},a.PlaySoundLoop=function(t){void 0===t&&(t=.5),p.userLocalData.soundOn&&(this.SoundFX.volume=t,this.SoundFX.loop=!0,this.SoundFX.clip=u.Instance.AudioClipsPVE[d.SFX_Spellcard_Stone_Barrage_fix],this.SoundFX.play())},e}(m)).prototype,"eff",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(w.prototype,"eff2",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(w.prototype,"SoundFX",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=w))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/Spell_Thunderbolt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./Utility.ts","./DamageData.ts","./SpellBase.ts"],(function(t){"use strict";var e,a,n,o,r,i,l,s,c,u,d,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,i=t._decorator,l=t.Node},function(t){s=t.SoundController,c=t.EnumSoundPVE},function(t){u=t.Utility},function(t){d=t.DamageData},function(t){p=t.SpellBase}],execute:function(){var f,h,g,y,P;r._RF.push({},"0ade3rI3xdNBoOoP3HEZWFZ","Spell_Thunderbolt",void 0);var D=i.ccclass,m=i.property;t("SpellThunderbolt",(f=D("SpellThunderbolt"),h=m(l),f((P=e((y=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,n(e,"eff",P,o(e)),e}return a(e,t),e.prototype.init=function(e,a){var n=this;t.prototype.init.call(this,e);var o=this.skillData.damageData,r=new d;o.forEach((function(t){r.AddDamage(t.damageType,t.damage),t.CurrentHPPercent&&r.AddDamage(t.damageType,a.data.statsData.HP*t.CurrentHPPercent/100)})),r.AddEffects(this.skillData.EffectData),a.targetComponent.TakeDamage(r),this.eff.setWorldPosition(a.targetComponent.targetPos.worldPosition.clone()),u.PlayParticle(this.eff),this.scheduleOnce((function(){n.node.destroy()}),2),s.Instance.PlaySoundPvE(c.SFX_Spellcard_Thunderbolt)},e}(p)).prototype,"eff",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=y))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/Spell_Zephyr_Blessing.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./Utility.ts","./PVE_Constant.ts","./PVE_GameplayControl.ts","./DamageData.ts","./SpellBase.ts"],(function(t){"use strict";var e,o,n,i,a,s,r,l,c,p,f,h,u,d,y,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Node,l=t.Rect,c=t.Vec3},function(t){p=t.SoundController,f=t.EnumSoundPVE},function(t){h=t.Utility},function(t){u=t.PVE_Constant},function(t){d=t.PVEGameplayControl},function(t){y=t.DamageData},function(t){g=t.SpellBase}],execute:function(){var P,m,E,T,_,B,v;a._RF.push({},"3cbb3xMCmxNM4LKOdI85NoT","Spell_Zephyr_Blessing",void 0);var D=s.ccclass,S=s.property;t("SpellZephyrBlessing",(P=D("SpellZephyrBlessing"),m=S(r),E=S(r),P((B=e((_=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).castRange=100,e.effTime=8,n(e,"loopFront",B,i(e)),n(e,"loopBack",v,i(e)),e.applyedTarget=[],e}o(e,t);var a=e.prototype;return a.init=function(e){t.prototype.init.call(this,e),this.castRange=e.CastRange,this.loopFront.parent=d.Instance.getEffParentFront(),this.loopFront.worldPosition=this.node.worldPosition,this.loopBack.parent=d.Instance.getEffParentBack(),this.loopBack.worldPosition=this.node.worldPosition,this.effTime=this.data.EffectTime,this.playEff(),this.schedule(this.execute.bind(this),.5),this.execute(),p.Instance.PlaySoundPvE(f.SFX_Zephyr_sBlessing_demo_2)},a.playEff=function(){h.PlayParticle(this.loopFront),h.PlayParticle(this.loopBack)},a.execute=function(){var t=this;if(this.effTime-=.5,this.effTime<0)return this.loopFront.destroy(),this.loopBack.destroy(),void this.node.destroy();var e=this.node.worldPosition,o=this.castRange/2,n=u.LAND_HEIGHT/2;new l(e.x-o,e.y-n,this.castRange,u.LAND_HEIGHT);d.Instance.myTeamObject.forEach((function(n,i,a){c.distance(e,n.targetComponent.getTargetPos().worldPosition)<=o&&t.applyTarget(n)}))},a.applyTarget=function(t){if(!(this.applyedTarget.indexOf(t.Id)>=0)){this.applyedTarget.push(t.Id);var e=new y;e.AddEffects(this.skillData.EffectData),t.targetComponent.TakeDamage(e)}},e}(g)).prototype,"loopFront",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(_.prototype,"loopBack",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=_))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/SpellBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,n=t._decorator,r=t.Component}],execute:function(){var o;a._RF.push({},"b6f722pwa5J05vaEDpILVzB","SpellBase",void 0);var s=n.ccclass;n.property,t("SpellBase",s("SpellBase")(o=function(t){function a(){for(var e,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).skillData=void 0,e.data=void 0,e}return e(a,t),a.prototype.init=function(t,e){this.data=t,this.skillData=t.data},a}(r))||o);a._RF.pop()}}}));

System.register("chunks:///_virtual/SplashAttack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./BezierBullet.ts","./Enums.ts","./InGameEvent.ts","./NormalAttack.ts"],(function(t){"use strict";var e,a,o,n,i,r,s,c,l,u,h,m,f;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,o=t._decorator,n=t.instantiate},function(t){i=t.SoundController,r=t.EnumSoundPVE},function(t){s=t.PVEGameplayControl},function(t){c=t.PVEHelper},function(t){l=t.BezierBullet},function(t){u=t.AttackType,h=t.DamageType},function(t){m=t.InGameEventID},function(t){f=t.NormalAttack}],execute:function(){var p;a._RF.push({},"9c062U3BU9O/r4u+zumMjwl","SplashAttack",void 0);var A=o.ccclass;o.property,t("SplashAttack",A("SplashAttack")(p=function(t){function a(){return t.apply(this,arguments)||this}e(a,t);var o=a.prototype;return o.addAttackData=function(t,e){if(t==u.NormalAttack){var a=this.root.GetRandomBasicDamage();e.AddDamage(h.Normal,a-a*this.skillData.AoEDecreasePercent/100),e.setAoE(this.skillData.AoERange,100/this.skillData.AoEDecreasePercent)}},o.attack=function(t){c.RandomActive(this.root.root.data.attackData.BlindPercent)?console.error("Blind"):(this.curTarget=t,this.curDamage=this.root.Attack(u.NormalAttack,this.curTarget),null!=this.curDamage&&(this.root.root.event.on(m.AttackAnimEvent,this.endCast,this),this.root.beginNormalAttack(),this.root.root.animationComponent.setFaceToTarget(t.node.worldPosition.x),this.muzzleActiveInstance&&this.activeMuzzle()))},o.endCast=function(){if(this.root.root.event.off(m.AttackAnimEvent,this.endCast,this),!this.muzzleActiveInstance&&this.activeMuzzle(),null!=this.bulletPrefab){n(this.bulletPrefab).getComponent(l).init(this.root,this.curTarget,this.curDamage),i.Instance.PlaySoundPvE(r.SplashAttack_attack,.25)}else{if(this.impactPrefab){var t=n(this.impactPrefab);t.parent=s.Instance.getEffParent(),t.setWorldPosition(this.curTarget.getTargetPos().getWorldPosition()),t.active=!0}this.curTarget.TakeDamage(this.curDamage)}},a}(f))||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/SplashAttackBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./BezierBullet.ts"],(function(t){"use strict";var e,l,n,o,u,r;return{setters:[function(t){e=t.inheritsLoose},function(t){l=t.cclegacy,n=t._decorator},function(t){o=t.SoundController,u=t.EnumSoundPVE},function(t){r=t.BezierBullet}],execute:function(){var c;l._RF.push({},"70706+/6S9B241ABlIUihhd","SplashAttackBullet",void 0);var s=n.ccclass;n.property,t("SplashAttackBullet",s("SplashAttackBullet")(c=function(t){function l(){return t.apply(this,arguments)||this}return e(l,t),l.prototype.hit=function(){o.Instance.PlaySoundPvE(u.SplashAttack_hit,.25),t.prototype.hit.call(this)},l}(r))||c);l._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteFollowCursor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameplayConfig.ts","./Enums.ts","./InGameEvent.ts","./PVE_Constant.ts","./PVE_Enum.ts","./PVE_GameplayControl.ts","./PVE_ResourceManager.ts","./PVE_GamePlay_UI_Controller.ts"],(function(t){"use strict";var e,n,i,a,r,o,g,s,l,p,c,u,h,d,f,y,v,C,_,D,E,S,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,g=t.Node,s=t.Sprite,l=t.UITransform,p=t.SpriteFrame,c=t.SystemEvent,u=t.Vec2,h=t.view,d=t.Vec3,f=t.Component},function(t){y=t.GameplayConfig},function(t){v=t.SpellCastType},function(t){C=t.InGameEventID},function(t){_=t.PVE_Constant},function(t){D=t.PVE_Enum},function(t){E=t.PVEGameplayControl},function(t){S=t.PVEResourceManager},function(t){m=t.PVEGamePlayUIController}],execute:function(){var T,I,P,M,b,R,w,O,U,G,z,V,F,k,L,A,N;r._RF.push({},"70794COUShCvpf21f0ZTlsR","SpriteFollowCursor",void 0);var x=o.ccclass,H=o.property;t("SpriteFollowCursor",(T=x("SpriteFollowCursor"),I=H(g),P=H(s),M=H(l),b=H(s),R=H(p),w=H(p),O=H(p),T((z=e((G=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"draggingNode",z,a(e)),i(e,"draggingSprite",V,a(e)),e._isDragging=!1,i(e,"attackRange",F,a(e)),i(e,"spellDragging",k,a(e)),i(e,"spellArea",L,a(e)),i(e,"spellTarget",A,a(e)),i(e,"spellRoad",N,a(e)),e._dragging=void 0,e.isSpell=!1,e}n(e,t);var r=e.prototype;return r.start=function(){this.node.on(c.EventType.MOUSE_UP,this.OnMouseUp,this),this.node.on(c.EventType.MOUSE_MOVE,this.OnMouseMove,this),E.GamePlayEvent.on(C.TouchMove,this.OnTouchMove,this),E.GamePlayEvent.on(C.TouchEnd,this.OnTouchUp,this)},r.StartDragging=function(t,e){if(null!=this.draggingSprite){if(this.isSpell=t.Type==D.ECardType.Spell,this.isSpell){this.attackRange.node.active=!1,this._dragging=this.spellDragging.node;var n=y.GetSpellConfig(t.ID),i=this.spellTarget,a=this.spellDragging.getComponent(l);console.log("spellConfig.CastType",n.CastType),n.CastType==v.Road?(m.Instance.parrentMapSlot.activeMapslotWithType(D.ESlotType.Road),i=this.spellRoad,this.spellDragging.spriteFrame=i,a.setContentSize(n.CastRange,_.LAND_HEIGHT)):n.CastType==v.AoE?(m.Instance.parrentMapSlot.activeMapslot(t),i=this.spellArea,this.spellDragging.spriteFrame=i,a.setContentSize(n.CastRange,_.ISO_HEIGHT_PERCENT*n.CastRange)):(this.spellDragging.spriteFrame=i,m.Instance.parrentMapSlot.activeMapslot(null),a.setContentSize(200,200))}else{var r=0,o=null;(o=t.Type==D.ECardType.Plant?y.GetPlantData(t.ID,!1):y.GetUndeadData(t.ID,!1))&&(r=o.attackData.AttackRange),this.attackRange.setContentSize(2*r,2*r),this.attackRange.node.active=!0,this._dragging=this.draggingNode,S.Instance.LoadCardImg(t.ID,this.draggingSprite,!0),m.Instance.parrentMapSlot.activeMapslot(t)}this._dragging.active=!0,this._isDragging=!0,this._dragging.setPosition(e.x,e.y,0)}},r.CancelDragging=function(){this._dragging&&(this._dragging.active=!1),this._isDragging=!1},r.OnMouseUp=function(t){if(1==this._isDragging&&0==t.getButton()){var e=new u;t.getUILocation(e),this.OnEndDragging(e)}},r.OnTouchUp=function(t,e){var n=new u;t.getUILocation(n),this.OnEndDragging(n)},r.OnEndDragging=function(t){this._dragging&&(this._dragging.active=!1),this._isDragging=!1,m.Instance.StopDraggingCard(t)},r.OnMouseMove=function(t){if(1==this._isDragging){var e=new u;t.getUILocation(e),this.OnUpdateDragging(e)}},r.OnTouchMove=function(t,e){var n=new u;t.getUILocation(n),this.OnUpdateDragging(n)},r.OnUpdateDragging=function(t){null!=this._dragging&&1==this._isDragging&&(this.isSpell,this._dragging.setPosition(this.getPositionTouch(t)))},r.getPositionTouch=function(t){var e=h.getFrameSize(),n=e.width/e.height;return new d(n<=1.61?t.x+210:n>=1.88?t.x-110:t.x,t.y)},e}(f)).prototype,"draggingNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(G.prototype,"draggingSprite",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(G.prototype,"attackRange",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(G.prototype,"spellDragging",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(G.prototype,"spellArea",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(G.prototype,"spellTarget",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(G.prototype,"spellRoad",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=G))||U));r._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteRatioHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var e,t,r,n,s,a,l,o,h,p,u,c;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized,s=i.createClass},function(i){a=i.cclegacy,l=i._decorator,o=i.Sprite,h=i.UITransform,p=i.CCBoolean,u=i.Size,c=i.Component}],execute:function(){var f,z,g,m,b,S,y,d,w,v,_,x,H,F,T;a._RF.push({},"09b693j4EtL/7rqY6fz+Sc/","SpriteRatioHelper",void 0);var C=l.ccclass,R=l.property;i("SpriteRatioHelper",(f=C("SpriteRatioHelper"),z=R(o),g=R(h),m=R(p),b=R(p),S=R(u),y=R(p),f((v=e((w=function(i){function e(){for(var e,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return e=i.call.apply(i,[this].concat(s))||this,r(e,"intenal_sprite",v,n(e)),r(e,"uiTransform",_,n(e)),r(e,"clampWidth",x,n(e)),r(e,"clampHeight",H,n(e)),r(e,"size",F,n(e)),r(e,"fixSizeOnEnable",T,n(e)),e}t(e,i);var a=e.prototype;return a.onEnable=function(){this.fixSizeOnEnable&&this.FixSize()},a.setSize=function(i,e){null==this.uiTransform&&(this.uiTransform=this.getComponent(h)),this.uiTransform&&this.uiTransform.setContentSize(i,e)},a.FixSize=function(){var i=this.sprite.spriteFrame;if(null!=i){var e=i.width,t=i.height;if(i.original&&i.original._texture&&(e=i.original._texture.width,t=i.original._texture.height),this.clampWidth&&this.clampHeight){var r=this.size.width*t/e;if(r>this.size.height){var n=this.size.height*e/t;this.setSize(n,this.size.height)}else this.setSize(this.size.width,r)}else if(this.clampWidth){var s=this.size.width*t/e;this.setSize(this.size.width,s)}else if(this.clampHeight){var a=this.size.height*e/t;this.setSize(a,this.size.height)}}},s(e,[{key:"sprite",get:function(){return null==this.intenal_sprite&&(this.intenal_sprite=this.getComponent(o),null==this.intenal_sprite&&console.error("Sprite null in SpriteRatioHelper")),this.intenal_sprite}},{key:"spriteFrame",get:function(){return this.sprite.spriteFrame},set:function(i){this.sprite.spriteFrame=i,this.FixSize()}}]),e}(c)).prototype,"intenal_sprite",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(w.prototype,"uiTransform",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(w.prototype,"clampWidth",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H=e(w.prototype,"clampHeight",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=e(w.prototype,"size",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(100,100)}}),T=e(w.prototype,"fixSizeOnEnable",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=w))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/StateData.ts",["cc"],(function(e){"use strict";var A;return{setters:[function(e){A=e.cclegacy}],execute:function(){e({GetData:function(e,A){for(var o=0;o<l.length;o++)if(l[o].code==e&&l[o].stage==A)return l[o];return null},GetExpConfig:function(e,A){for(var l={levelExp:0,nextLevelExp:0},a=0;a<o.length;a++)o[a].level==A&&(l.levelExp=o[a][e],l.nextLevelExp=o.length>a+1?o[a+1][e]:9999999);return l},GetNextExp:function(e,A){for(var l=0;l<o.length;l++)if(o[l].level==A+1)return o[l][e];return 9999999}}),A._RF.push({},"d73321qjhpDYZJyvlk24Y9d","StateData",void 0);var l=e("data",[{code:"Carroost",stage:2,HP:"420 (+12)",ATK:"42 (+5)",DEF:"32 (+3)",MAG:"42 (+4)",AS:.7,expPool:"A"},{code:"Carrablast",stage:3,HP:"680 (+22)",ATK:"85 (+12)",DEF:"56 (+6)",MAG:"89 (+9)",AS:.8,expPool:"A"},{code:"Nilshader",stage:2,HP:"310 (+15)",ATK:"44 (+3)",DEF:"31 (+5)",MAG:"13 (+4)",AS:1.1,expPool:"B"},{code:"Ninshaddow",stage:3,HP:"525 (+20)",ATK:"89 (+8)",DEF:"67 (+10)",MAG:"41 (+5)",AS:1.25,expPool:"B"},{code:"Cactoon",stage:2,HP:"290 (+14)",ATK:"43 (+4)",DEF:"41 (+2)",MAG:"22 (+3)",AS:2.5,expPool:"C"},{code:"Cactyrant",stage:3,HP:"610 (+18)",ATK:"72 (+8)",DEF:"77 (+6)",MAG:"46 (+4)",AS:2.5,expPool:"C"},{code:"Flufleaf",stage:2,HP:"320 (+11)",ATK:"46 (+7)",DEF:"33 (+3)",MAG:"45 (+3)",AS:.9,expPool:"A"},{code:"Flufmoouse",stage:3,HP:"525 (+22)",ATK:"89 (+14)",DEF:"57 (+7)",MAG:"70 (+6)",AS:1,expPool:"A"},{code:"Ziggan",stage:2,HP:"356 (+12)",ATK:"25 (+6)",DEF:"28 (+4)",MAG:"34 (+6)",AS:5,expPool:"A"},{code:"Ziggblazer",stage:3,HP:"588 (+19)",ATK:"77 (+10)",DEF:"53 (+6)",MAG:"77 (+9)",AS:5,expPool:"A"},{code:"Taskraa",stage:2,HP:"390 (+13)",ATK:"26 (+5)",DEF:"31 (+3)",MAG:"11 (+2)",AS:1.2,expPool:"B"},{code:"Tarra-Taack",stage:3,HP:"603 (+21)",ATK:"51 (+9)",DEF:"59 (+4)",MAG:"18 (+3)",AS:1.25,expPool:"B"},{code:"Freezie",stage:2,HP:"288 (+10)",ATK:"33 (+7)",DEF:"49 (+3)",MAG:"32 (+5)",AS:1.6,expPool:"C"},{code:"Freezerin",stage:3,HP:"425 (+19)",ATK:"72 (+11)",DEF:"63 (+4)",MAG:"42 (+6)",AS:1.6,expPool:"C"},{code:"Beebuzz",stage:2,HP:"419 (+12)",ATK:"40 (+6)",DEF:"42 (+4)",MAG:"10 (+2)",AS:0,expPool:"B"},{code:"Buzzbramble",stage:3,HP:"577 (+20)",ATK:"88 (+12)",DEF:"54 (+8)",MAG:"16 (+3)",AS:0,expPool:"B"},{code:"Spreen",stage:2,HP:"304 (+10)",ATK:"42 (+5)",DEF:"32 (+3)",MAG:"25 (+3)",AS:1.2,expPool:"A"},{code:"Sporeen",stage:3,HP:"556 (+19)",ATK:"75 (+11)",DEF:"59 (+5)",MAG:"36 (+5)",AS:1.3,expPool:"A"},{code:"Liveena",stage:2,HP:"329 (+11)",ATK:"0 (+0)",DEF:"55 (+3)",MAG:"40 (+5)",AS:0,expPool:"A"},{code:"Leevarne",stage:3,HP:"582 (+22)",ATK:"0 (+0)",DEF:"73 (+6)",MAG:"52 (+8)",AS:0,expPool:"A"},{code:"Zapkrane",stage:2,HP:"250 (+12)",ATK:"39 (+8)",DEF:"17 (+3)",MAG:"26 (+3)",AS:1.25,expPool:"B"},{code:"Zappashok",stage:3,HP:"378 (+17)",ATK:"67 (+15)",DEF:"36 (+4)",MAG:"32 (+4)",AS:1.3,expPool:"B"},{code:"Terrast",stage:2,HP:"398 (+12)",ATK:"45 (+6)",DEF:"22 (+4)",MAG:"29 (+4)",AS:1,expPool:"A"},{code:"Terrablaam",stage:3,HP:"533 (+23)",ATK:"81 (+10)",DEF:"41 (+6)",MAG:"47 (+5)",AS:1.1,expPool:"A"},{code:"Blazinga",stage:2,HP:"290 (+13)",ATK:"25 (+5)",DEF:"31 (+5)",MAG:"35 (+4)",AS:5,expPool:"C"},{code:"Blastblinger",stage:3,HP:"644 (+21)",ATK:"54 (+11)",DEF:"51 (+8)",MAG:"56 (+6)",AS:5,expPool:"C"},{code:"Baang",stage:2,HP:"255 (+9)",ATK:"78 (+7)",DEF:"9 (+2)",MAG:"4 (+2)",AS:.33,expPool:"A"},{code:"Boombang",stage:3,HP:"387 (+13)",ATK:"132 (+13)",DEF:"18 (+3)",MAG:"8 (+3)",AS:.33,expPool:"A"},{code:"Hoolahup",stage:2,HP:"335 (+11)",ATK:"0 (+0)",DEF:"13 (+5)",MAG:"16 (+3)",AS:0,expPool:"C"},{code:"Molebump",stage:3,HP:"447 (+21)",ATK:"0 (+0)",DEF:"21 (+7)",MAG:"27 (+4)",AS:0,expPool:"C"},{code:"Eerievy",stage:2,HP:"440 (+8)",ATK:"34 (+5)",DEF:"23 (+3)",MAG:"25 (+5)",AS:1.4,expPool:"B"},{code:"Evevine",stage:3,HP:"675 (+13)",ATK:"62 (+9)",DEF:"56 (+6)",MAG:"33 (+9)",AS:1.45,expPool:"B"},{code:"slugma",stage:2,HP:"212 (+12)",ATK:"21 (+3)",DEF:"61 (+5)",MAG:"46 (+4)",AS:.7,expPool:"A"},{code:"slugma",stage:3,HP:"366 (+20)",ATK:"42 (+7)",DEF:"82 (+11)",MAG:"76 (+8)",AS:.75,expPool:"A"},{code:"oxxfome",stage:2,HP:"148 (+10)",ATK:"35 (+5)",DEF:"41 (+4)",MAG:"11 (+2)",AS:.9,expPool:"B"},{code:"oxxfome",stage:3,HP:"423 (+18)",ATK:"51 (+8)",DEF:"66 (+8)",MAG:"19 (+3)",AS:.9,expPool:"B"},{code:"valefang",stage:2,HP:"122 (+12)",ATK:"46 (+6)",DEF:"22 (+3)",MAG:"10 (+3)",AS:1.1,expPool:"B"},{code:"valefang",stage:3,HP:"336 (+18)",ATK:"67 (+8)",DEF:"35 (+5)",MAG:"17 (+5)",AS:1.1,expPool:"B"},{code:"slithum",stage:2,HP:"89 (+8)",ATK:"22 (+4)",DEF:"25 (+4)",MAG:"42 (+4)",AS:.7,expPool:"A"},{code:"slithum",stage:3,HP:"235 (+16)",ATK:"39 (+7)",DEF:"46 (+9)",MAG:"83 (+8)",AS:.8,expPool:"A"},{code:"nasherr",stage:2,HP:"114 (+11)",ATK:"28 (+5)",DEF:"26 (+5)",MAG:"35 (+4)",AS:.8,expPool:"A"},{code:"nasherr",stage:3,HP:"292 (+15)",ATK:"37 (+7)",DEF:"35 (+7)",MAG:"51 (+6)",AS:.9,expPool:"A"},{code:"torramn",stage:2,HP:"290 (+21)",ATK:"12 (+3)",DEF:"88 (+7)",MAG:"33 (+2)",AS:.5,expPool:"B"},{code:"torramn",stage:3,HP:"535 (+30)",ATK:"19 (+5)",DEF:"103 (+11)",MAG:"53 (+4)",AS:.65,expPool:"B"},{code:"tbluyr",stage:2,HP:"135 (+12)",ATK:"15 (+3)",DEF:"38 (+3)",MAG:"46 (+5)",AS:.7,expPool:"C"},{code:"tbluyr",stage:3,HP:"280 (+17)",ATK:"22 (+5)",DEF:"45 (+6)",MAG:"77 (+11)",AS:.7,expPool:"C"},{code:"emprezza",stage:2,HP:"233 (+13)",ATK:"34 (+6)",DEF:"79 (+6)",MAG:"22 (+3)",AS:.6,expPool:"C"},{code:"emprezza",stage:3,HP:"540 (+25)",ATK:"52 (+7)",DEF:"93 (+9)",MAG:"34 (+4)",AS:.6,expPool:"C"},{code:"Axice",stage:2,HP:"189 (+10)",ATK:"16 (+5)",DEF:"55 (+6)",MAG:"80 (+2)",AS:.9,expPool:"A"},{code:"Brizzle",stage:2,HP:"177 (+11)",ATK:"15 (+4)",DEF:"43 (+3)",MAG:"56 (+3)",AS:1.2,expPool:"B"},{code:"Braklaar",stage:3,HP:"289 (+19)",ATK:"23 (+6)",DEF:"57 (+5)",MAG:"72 (+6)",AS:1.25,expPool:"B"},{code:"Drollium",stage:2,HP:"293 (+5)",ATK:"31 (+5)",DEF:"67 (+6)",MAG:"43 (+5)",AS:1,expPool:"C"},{code:"Savagong",stage:2,HP:"210 (+13)",ATK:"44 (+6)",DEF:"88 (+6)",MAG:"10 (+2)",AS:.8,expPool:"A"}]);var o=e("EXP_Pool",[{level:1,A:0,B:0,C:0},{level:2,A:596,B:500,C:910},{level:3,A:1149,B:1100,C:1502},{level:4,A:1886,B:1750,C:2307},{level:5,A:2398,B:2200,C:2930},{level:6,A:3011,B:2950,C:3699},{level:7,A:3820,B:3760,C:4420},{level:8,A:4546,B:4500,C:5166},{level:9,A:5220,B:4950,C:6801},{level:10,A:6149,B:6e3,C:7300},{level:11,A:7520,B:7500,C:8381},{level:12,A:9003,B:8450,C:11203},{level:13,A:10702,B:10100,C:12880},{level:14,A:11255,B:11e3,C:14325},{level:15,A:13800,B:12900,C:15990},{level:16,A:15299,B:14e3,C:17341},{level:17,A:17200,B:17e3,C:19232},{level:18,A:19301,B:18250,C:21001},{level:19,A:22341,B:21300,C:24400},{level:20,A:24599,B:23500,C:27310},{level:21,A:29316,B:3e4,C:30211},{level:22,A:35277,B:34250,C:36e3},{level:23,A:39999,B:38500,C:41303},{level:24,A:46900,B:45e3,C:49066},{level:25,A:52101,B:52e3,C:55214},{level:26,A:58923,B:6e4,C:61663},{level:27,A:68994,B:71e3,C:70018},{level:28,A:75730,B:75e3,C:77790},{level:29,A:80018,B:80250,C:83251},{level:30,A:86833,B:85e3,C:89150},{level:31,A:92942,B:9e4,C:96221},{level:32,A:99492,B:96500,C:101366},{level:33,A:101299,B:100300,C:108300},{level:34,A:109446,B:108e3,C:117243},{level:35,A:115220,B:112e3,C:121090},{level:36,A:123040,B:12e4,C:132900},{level:37,A:128916,B:129e3,C:144257},{level:38,A:134900,B:132e3,C:151900},{level:39,A:138291,B:137500,C:163200},{level:40,A:143003,B:145e3,C:179e3},{level:41,A:149206,B:152e3,C:191033},{level:42,A:153277,B:166e3,C:203411},{level:43,A:160900,B:173200,C:214900},{level:44,A:165398,B:178500,C:227066},{level:45,A:171297,B:180250,C:232900},{level:46,A:178200,B:185e3,C:239546},{level:47,A:189216,B:19e4,C:248e3},{level:48,A:195244,B:196200,C:252911},{level:49,A:200175,B:203200,C:260311},{level:50,A:208366,B:210100,C:279333},{level:51,A:214009,B:215e3,C:286933},{level:52,A:220137,B:222e3,C:292360},{level:53,A:239311,B:235e3,C:299148},{level:54,A:247366,B:245200,C:313200},{level:55,A:275e3,B:275e3,C:325e3},{level:56,A:355166,B:324e3,C:339200},{level:57,A:398513,B:380500,C:345609},{level:58,A:450199,B:45e4,C:402900},{level:59,A:559322,B:535250,C:494300},{level:60,A:593900,B:6e5,C:553900},{level:61,A:680134,B:675e3,C:612500},{level:62,A:776451,B:75e4,C:700301},{level:63,A:900310,B:9e5,C:882900},{level:64,A:994451,B:982e3,C:900500},{level:65,A:1035007,B:102e4,C:1000325},{level:66,A:1244899,B:12e5,C:1125990},{level:67,A:1392e3,B:14e5,C:1224600},{level:68,A:1525300,B:155e4,C:1334690},{level:69,A:1783299,B:1752e3,C:1452900},{level:70,A:1915400,B:1950050,C:159e4},{level:71,A:2325e3,B:222e4,C:1876e3},{level:72,A:2677301,B:265e4,C:2203100},{level:73,A:2988001,B:325e4,C:2390010},{level:74,A:45e5,B:495e4,C:325e4},{level:75,A:7e6,B:725e4,C:55e5}]);A._RF.pop()}}}));

System.register("chunks:///_virtual/StatsData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_Constant.ts","./CloneableObject.ts","./GameplayConfig.ts","./Enums.ts"],(function(e){"use strict";var t,i,r,n,a,s,c;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy},function(e){r=e.PVE_Constant},function(e){n=e.default},function(e){a=e.GameplayConfig},function(e){s=e.DamageType,c=e.ConfigType}],execute:function(){i._RF.push({},"e93b8f0TGZNeIrdqRtltnmT","StatsData",void 0);e("default",function(e){function i(){var t;return(t=e.call(this)||this).Level=0,t.HP=0,t.MaxHp=0,t.Defense=0,t.MovementSpeed=0,t.LifeTime=300,t.DefaultAttackAnimName=void 0,t.CheckTargetRange=900,t.MovementSpeedModifier=0,t.AttackSpeedPercentModifier=0,t.DecreaseDamagePercent=0,t.HpMordifier=0,t.Species="",t.DefensePercentModifier=0,t.RES_Force=void 0,t.RES_Blight_Modifier=void 0,t.RES_Modifier=void 0,t.RES_PercentAll_Modifier=0,t.EvasionAttackPercent=0,t.ImmuneSilence=!1,t.Level_HP=0,t.Level_Def=0,t.RES_Force=new Map,t.RES_Blight_Modifier=new Map,t.RES_Modifier=new Map,t}t(i,e);var n=i.prototype;return n.Init=function(){this.RES_Force=new Map,this.RES_Blight_Modifier=new Map,this.RES_Modifier=new Map},n.Get_Res=function(e){var t=this.GetResPercent(e);return this.RES_Force.has(e)&&this.RES_Force.get(e)&&t>0&&(t=0),this.RES_Blight_Modifier.has(e)&&(t+=this.RES_Blight_Modifier.get(e)),this.RES_Modifier.has(e)&&(t+=this.RES_Modifier.get(e)),t<r.RES_MIN_CAP?t=r.RES_MIN_CAP:t>r.RES_MAX_CAP&&(t=r.RES_MAX_CAP),t},n.getMaxHp=function(){return this.MaxHp+this.HpMordifier},n.AddRes=function(e){var t=e.ResType,i=e.ResPercent,r=s.None;switch(t){case c.Fire:r=s.Magic_Fire;break;case c.Water:r=s.Magic_Water;break;case c.Plant:r=s.Magic_Plant;break;case c.Earth:r=s.Magic_Earth;break;case c.Wind:r=s.Magic_Wind;break;case c.Thunder:r=s.Magic_Thunder;break;case c.Dark:r=s.Magic_Dark;break;case c.Ice:r=s.Magic_Ice;break;default:return void console.error("AddRes Effect type["+t+"] not handle")}var n=0;this.RES_Modifier.has(r)&&(n=this.RES_Modifier.get(r)),n+=i,this.RES_Modifier.set(r,n)},n.setRES_Blight_Modifier=function(e,t){e>r.BLIGHT_MAX_STACK&&(e=r.BLIGHT_MAX_STACK),this.RES_Blight_Modifier.set(t,e*r.BLIGHT_RES_ADD)},n.GetResPercent=function(e){var t,i=this;switch(e){case s.Chaos:return 0;default:var r=a.ElementRes.find((function(e){return e.Element==i.Species}));return null==r?0:null!=(t=r[s[e].replace("Magic","RES")])?t:0}},i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/StickyLiquid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./NormalAttack.ts"],(function(t){"use strict";var i,n,o,c,r,u;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){c=t.SoundController,r=t.EnumSoundPVE},function(t){u=t.NormalAttack}],execute:function(){var e;n._RF.push({},"7952bJkrYVGa5/0oBIj2iJB","StickyLiquid",void 0);var s=o.ccclass;o.property,t("StickyLiquid",s("StickyLiquid")(e=function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),n.prototype.endCast=function(){t.prototype.endCast.call(this),c.Instance.PlaySoundPvE(r.SFX_StickyLiquid_attack,.15)},n}(u))||e);n._RF.pop()}}}));

System.register("chunks:///_virtual/StickyLiquidBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./BezierBullet.ts"],(function(t){"use strict";var i,e,u,n,o,c;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,u=t._decorator},function(t){n=t.SoundController,o=t.EnumSoundPVE},function(t){c=t.BezierBullet}],execute:function(){var r;e._RF.push({},"0d0ceF1Pf5PQqtBM9gB7QiE","StickyLiquidBullet",void 0);var l=u.ccclass;u.property,t("StickyLiquidBullet",l("StickyLiquidBullet")(r=function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e.prototype.hit=function(){n.Instance.PlaySoundPvE(o.SFX_StickyLiquid_hit,.15),t.prototype.hit.call(this)},e}(c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/StoneCarapace.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DamageData.ts","./InGameEvent.ts","./SkillBase.ts"],(function(e){"use strict";var t,a,n,i,r,o,c,l,s,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,c=e.CCBoolean,l=e.Node},function(e){s=e.DamageData},function(e){u=e.InGameEventID},function(e){p=e.SkillBase}],execute:function(){var f,m,D,g,v,z,h;r._RF.push({},"a4005lUmgpM15HUp89vbz7R","StoneCarapace",void 0);var y=o.ccclass,d=o.property;e("StoneCarapace",(f=y("StoneCarapace"),m=d(c),D=d(l),f((z=t((v=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"muzzleInAttackPos",z,i(t)),n(t,"muzzlePrefab",h,i(t)),t}a(t,e);var r=t.prototype;return r.Init=function(t,a){e.prototype.Init.call(this,t,a),this.root.root.event.on(u.OnHit,this.active,this),this.root.root.data.statsData.DefensePercentModifier+=a.MaxDefPercent},r.active=function(e,t,a){if(null!=e){var n=new s;n.AddDamage(this.skillData.damageType,a.sumDamage()*this.skillData.damageType/100),e.targetComponent.TakeDamage(n)}},r.activeMuzzle=function(){},t}(p)).prototype,"muzzleInAttackPos",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=t(v.prototype,"muzzlePrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=v))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/StoneFormSkill.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,n,o,i,c,r,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){i=t.PVEGameplayControl},function(t){c=t.EffectData,r=t.EffectType},function(t){a=t.InGameEventID},function(t){s=t.SkillBase}],execute:function(){var l;n._RF.push({},"062aatBYRVPdJpTfHsoDf9h","StoneFormSkill",void 0);var f=o.ccclass;o.property,t("StoneFormSkill",f("StoneFormSkill")(l=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).NextTimeActive=0,e.kickup=void 0,e}e(n,t);var o=n.prototype;return o.Init=function(e,n){t.prototype.Init.call(this,e,n),e.root.on(a.OnHit,this.OnHit,this)},o.OnHit=function(){this.NextTimeActive>i.Instance.CurrentTime||this.root.root.getHpPercent()<33.33&&this.activeSkill()},o.activeSkill=function(){this.NextTimeActive=i.Instance.CurrentTime+this.skillData.Cooldown,this.root.attackAble=!1,this.root.root.animationComponent.setAnim("Defend",!1);var t=new c;t.EffectId=r.Regen,t.EffectType=r.Regen,t.EffectTime=6,t.RegenHpPercentPerSec=2,this.root.root.targetComponent.applyEffectOne(t);var e=new c;e.EffectId=r.DamageDecreasePercent,e.EffectType=r.DamageDecreasePercent,e.EffectTime=6,e.DecreaseDamagePercent=90,this.root.root.targetComponent.applyEffectOne(e),this.scheduleOnce(this.completeSkill.bind(this),6)},o.completeSkill=function(){this.root.checkCountinueAttack(),this.root.root.checkCountinueMoving()},n}(s))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/StunEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./PVE_GameplayControl.ts","./EffectBase.ts"],(function(t){"use strict";var e,i,n,f,r,o,c,a,s,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,f=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,c=t.Node},function(t){a=t.Utility},function(t){s=t.PVEGameplayControl},function(t){l=t.EffectBase}],execute:function(){var u,p,h,E,y;r._RF.push({},"b6a5a9OemlLpIB/1d13H9SB","StunEffect",void 0);var d=o.ccclass,m=o.property;t("StunEffect",(u=d("StunEffect"),p=m(c),u((y=e((E=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"eff",y,f(e)),e}i(e,t);var r=e.prototype;return r.Init=function(e,i,n){t.prototype.Init.call(this,e,i,n);n.root,i.EffectTime;this.endEffectTime=s.Instance.CurrentTime+i.EffectTime,this.eff.worldPosition=n.root.ui.health.node.worldPosition,a.PlayParticle(this.eff),n.Stunned()},e.ApplyEffect=function(t,e){var i=t.getEffectWithType(e.EffectType);if(null!=i)i.endEffectTime=s.Instance.CurrentTime+i.data.EffectTime;else t.initEffect(e)},r.RemoveEffect=function(){this.thisTarget.RemoveEffect(this),this.node.destroy(),this.thisTarget.EndStunned()},e}(l)).prototype,"eff",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=E))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/SynthesisCraftItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./ResourcesManager.ts"],(function(t){"use strict";var e,i,n,s,r,a,o,l,c,u,p,h,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,o=t._decorator,l=t.Button,c=t.Label,u=t.Sprite,p=t.Component},function(t){h=t.SynthesisItem},function(t){y=t.ResourcesManager}],execute:function(){var m,f,v,b,I,S,d,g,N;a._RF.push({},"effa0stooZFn6JAAEFwLqL8","SynthesisCraftItem",void 0);var C=o.ccclass,D=o.property;t("SynthesisCraftItem",(m=C("SynthesisCraftItem"),f=D(l),v=D(c),b=D(u),m((d=e((S=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"btnSelect",d,s(e)),n(e,"lbNameItem",g,s(e)),n(e,"sprItem",N,s(e)),e.serverName="",e.type=h.NONE,e.value=0,e.synthesisData=void 0,e.sprName="",e}i(e,t);var a=e.prototype;return a.onInit=function(t){this.synthesisData=t,this.type=t.id,this.value=t.value,this.lbNameItem.string=t.name,this.sprName=t.spriteName,this.serverName=t.serverName,this.loadSpriteMaterial()},a.start=function(){this.btnSelect.node.on(l.EventType.CLICK,this.onSlotClicked,this)},a.loadSpriteMaterial=function(){var t=this;y.Instance.LoadMaterialSynthesisSprite(this.sprName,(function(e){t.sprItem.spriteFrame=e}))},a.onSlotClicked=function(){var t={synthesisData:this.synthesisData};this.node.emit("synthesisItem:onClicked",t)},r(e,[{key:"Type",get:function(){return this.type},set:function(t){this.type=t}},{key:"Value",get:function(){return this.type},set:function(t){this.value=t}}]),e}(p)).prototype,"btnSelect",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=e(S.prototype,"lbNameItem",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(S.prototype,"sprItem",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=S))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/TargetComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./PVE_ResourceManager.ts","./Enums.ts","./AmpedEffect.ts","./DashEffect.ts","./BurnEffect.ts","./EffectBase.ts","./HasteEffect.ts","./SlowEffect.ts","./KickUpEffect.ts","./InGameEvent.ts","./DecreaseResEffect.ts","./PoisonEffect.ts","./BleedEffect.ts","./FeebleEffect.ts","./RegenEffect.ts","./DamageDecreasePercentEffect.ts","./SilenceEffect.ts","./PVE_Helper.ts","./BlindEffect.ts","./BrokenEffect.ts","./RepelEffect.ts","./StunEffect.ts","./LabelTween.ts","./FleetEffect.ts"],(function(t){"use strict";var e,f,i,n,c,a,s,o,r,l,p,h,E,u,y,g,d,A,m,k,v,b,T,B,_,D,C,P,M,R,w,I,S,H,F,O,L,U,W,V,x,z,G;return{setters:[function(t){e=t.applyDecoratedDescriptor,f=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,c=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){s=t.cclegacy,o=t._decorator,r=t.Node,l=t.Prefab,p=t.instantiate,h=t.tween,E=t.v3,u=t.Vec3,y=t.Collider2D,g=t.RigidBody2D,d=t.Component},function(t){A=t.PVEGameplayControl},function(t){m=t.PVEResourceManager},function(t){k=t.EffectType,v=t.DamageType},function(t){b=t.AmpedEffect},function(t){T=t.DashEffect},function(t){B=t.BurnEffect},function(t){_=t.EffectBase},function(t){D=t.HasteEffect},function(t){C=t.SlowEffect},function(t){P=t.KickUpEffect},function(t){M=t.InGameEventID},function(t){R=t.DecreaseResEffect},function(t){w=t.PoisonEffect},function(t){I=t.BleedEffect},function(t){S=t.FeebleEffect},function(t){H=t.RegenEffect},function(t){F=t.DamageDecreasePercentEffect},function(t){O=t.SilenceEffect},function(t){L=t.PVEHelper},function(t){U=t.BlindEffect},function(t){W=t.BrokenEffect},function(t){V=t.RepelEffect},function(t){x=t.StunEffect},function(t){z=t.LabelTween},function(t){G=t.FleetEffect}],execute:function(){var K,N,X,j,Y,Z,q;s._RF.push({},"8002bXkkZ5N+oX3UPLl6eYt","TargetComponent",void 0);var J=o.ccclass,Q=o.property;t("TargetComponent",(K=J("TargetComponent"),N=Q(r),X=Q(l),K((Z=e((Y=function(t){function e(){for(var e,f=arguments.length,c=new Array(f),a=0;a<f;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))||this).root=void 0,e.EffectApply=void 0,e.EffectBlightApply=null,i(e,"targetPos",Z,n(e)),i(e,"labelTween",q,n(e)),e.isImmortal=!1,e._canTarget=!0,e}f(e,t);var s=e.prototype;return s.Init=function(t){this.root=t,this.EffectApply=[],this.EffectBlightApply=new Map},s.update=function(t){this.UpdateEffectBlight()},s.getEffectRoot=function(){return this.node},s.getTargetPos=function(){return this.targetPos||this.node},s.onHit=function(t){this.root&&this.root.event&&this.root.event.dispatchEvent(M.OnHit,t.attacker,this,t)},s.tweenLabelFx=function(t){var e=p(this.labelTween),f=e.getComponent(z);e.active=!0;e.setParent(this.node),e.setScale(1,1,1),e.setPosition(0,140,0),f.uIOpacity.opacity=255,f.label.string=t,h(e).to(.5,{position:E(0,210,0)},{easing:"cubicOut"}).start(),h(f.uIOpacity).delay(.3).to(.2,{opacity:0}).call((function(){e.destroy()})).start()},s.TakeDamage=function(t){null!=this.root&&null!=this.root.data&&L.RandomActive(this.root.data.statsData.EvasionAttackPercent)?this.tweenLabelFx("Miss"):(this.onHit(t),t.notifyHit&&t.notifyHit(this),this.Immortal||(t.isAoE?this.applyAOEDamage(t):(this.applyDamage(t),this.applyEffect(t))))},s.applyAOEDamage=function(t){var e=this;if(null!=this.root){var f=this.root.getAllMyTeam(),i=this.node.worldPosition;f.forEach((function(f,n,c){u.distance(i,f.node.worldPosition)<=t.AoERange&&(f.targetComponent.applyDamage(t,f==e.root),f.targetComponent.applyEffect(t))}))}},s.applyDamage=function(t,e){void 0===e&&(e=!1),null!=this.root&&this.root.applyDamage(t,e)},s.applyEffect=function(t){for(var e=0;e<t.Effects.length;e++){var f=t.Effects[e];this.applyEffectOne(f,t)}},s.applyEffectOne=function(t,e){switch(void 0===e&&(e=null),t.EffectType){case k.Slow:C.ApplyEffect(this,t);break;case k.Burn:B.ApplyEffect(this,t);break;case k.Poison:w.ApplyEffect(this,t);break;case k.Res_Decrease:R.ApplyEffect(this,t);break;case k.KickUp:P.ApplyEffect(this,t);break;case k.Haste:D.ApplyEffect(this,t);break;case k.Amped:b.ApplyEffect(this,t);break;case k.Regen:H.ApplyEffect(this,t);break;case k.Fleet:G.ApplyEffect(this,t);break;case k.DamageDecreasePercent:F.ApplyEffect(this,t);break;case k.Dash:T.ApplyEffect(this,t);break;case k.Feeble:S.ApplyEffect(this,t);break;case k.Bleeding:I.ApplyEffect(this,t);break;case k.Silence:if(this.root.data.statsData.ImmuneSilence)return;O.ApplyEffect(this,t);break;case k.Blind:U.ApplyEffect(this,t);break;case k.Broken:W.ApplyEffect(this,t);break;case k.Repel:V.ApplyEffect(this,t);break;case k.Stun:x.ApplyEffect(this,t);break;case k.Fire_Blight:case k.Water_Blight:case k.Plant_Blight:case k.Earth_Blight:case k.Wind_Blight:case k.Thunder_Blight:case k.Dark_Blight:case k.Ice_Blight:this.AddEffectsBlight(t,e);break;default:console.error("applyEffectOne Effect type["+k[t.EffectType]+"] not handle")}},s.EnableTarget=function(){this.canTarget=!0},s.DisableTarget=function(){this.canTarget=!1},s.RemoveAllEffect=function(){for(var t=this.EffectApply.length-1;t>=0;t--){this.EffectApply[t].RemoveEffect()}},s.Stunned=function(){this.root.stopMoving(),this.root.attackComponent.attackAble=!1,this.root.movingComponent&&(this.root.movingComponent.moveable=!1),this.root.animationComponent.stopAnyAnim();for(var t=this.EffectApply.length-1;t>=0;t--){var e=this.EffectApply[t];switch(e.effectType){case k.Dash:e.CancelEffect(),this.EffectApply.splice(t,1)}}},s.EndStunned=function(){0==this.anyControlMoving()&&this.root.animationComponent.unPauseAnim(),this.root.isDead||(this.root.checkCountinueMoving(),this.root.checkCountinueAttack())},s.AdverseEffectCount=function(){return null==this.EffectApply?0:this.EffectApply.filter((function(t){return t.effectType<=50})).length},s.anyControlAttackEff=function(){for(var t=this.EffectApply.length-1;t>=0;t--){switch(this.EffectApply[t].effectType){case k.Dash:case k.KickUp:case k.Stun:return!0}}return!1},s.anyControlMoving=function(){for(var t=this.EffectApply.length-1;t>=0;t--){switch(this.EffectApply[t].effectType){case k.Dash:case k.KickUp:case k.Stun:case k.Repel:return!0}}return!1},s.initEffect=function(t){try{var e,f=p(m.Instance.GetEffectPrefab(null!=(e=t.EffectId)?e:t.EffectType)).getComponent(_);return f.node.parent=this.getEffectRoot(),f.node.setPosition(0,0,0),this.EffectApply.push(f),f.Init(t.EffectType,t,this),f}catch(t){return null}},s.RemoveEffect=function(t){this.EffectApply.splice(this.EffectApply.indexOf(t),1)},s.HealEffects=function(t){for(var e=0;e<t.length;e++)this.HealEffect(t[e])},s.HealEffect=function(t){var e=this.EffectApply.findIndex((function(e){return e.effectType==t}));e>-1?this.EffectApply[e].RemoveEffect():this.EffectBlightApply.has(t)&&(this.root.data.statsData.setRES_Blight_Modifier(0,this.EffectBlightApply.get(t).damageType),this.EffectBlightApply.delete(t))},s.getEffectWithType=function(t){if(null==this.EffectApply)return null;if(t==k.Slow){for(var e=null,f=0,i=0;i<this.EffectApply.length;i++)if(this.EffectApply[i].effectType==t){var n=this.EffectApply[i];n.slowModifier>f&&(e=n,f=n.slowModifier)}return e}if(t==k.Haste){for(var c=null,a=0,s=0;s<this.EffectApply.length;s++)if(this.EffectApply[s].effectType==t){var o=this.EffectApply[s];o.attackSpeedModifier>a&&(c=o,a=o.attackSpeedModifier)}return c}if(t==k.Amped){for(var r=null,l=0,p=0;p<this.EffectApply.length;p++)if(this.EffectApply[p].effectType==t){var h=this.EffectApply[p];h.attackModifier>l&&(r=h,l=h.attackModifier)}return r}for(var E=0;E<this.EffectApply.length;E++)if(this.EffectApply[E].effectType==t)return this.EffectApply[E];return null},s.getFirstEffectWithType=function(t){for(var e=0;e<this.EffectApply.length;e++)if(this.EffectApply[e].effectType===t)return this.EffectApply[e];return null},s.AddEffectsBlight=function(t,e){if(null!=this.EffectBlightApply){var f,i=t.EffectType;if(this.EffectBlightApply.has(i)){(f=this.EffectBlightApply.get(i)).time=A.Instance.CurrentTime+t.EffectTime;for(var n=0;n<f.sources.length;n++)if(f.sources[n]==e.attacker)return void this.EffectBlightApply.set(i,f);f.stack+=1,f.sources.push(e.attacker)}else{var c=v.None;switch(i){case k.Fire_Blight:c=v.Magic_Fire;break;case k.Water_Blight:c=v.Magic_Water;break;case k.Plant_Blight:c=v.Magic_Plant;break;case k.Earth_Blight:c=v.Magic_Earth;break;case k.Wind_Blight:c=v.Magic_Wind;break;case k.Thunder_Blight:c=v.Magic_Thunder;break;case k.Dark_Blight:c=v.Magic_Dark;break;case k.Ice_Blight:c=v.Magic_Ice;break;default:console.error("AddEffectsBlight Effect type["+k[i]+"] not handle")}f={time:A.Instance.CurrentTime+t.EffectTime,stack:1,sources:[e.attacker],damageType:c}}this.EffectBlightApply.set(i,f),this.root.data.statsData.setRES_Blight_Modifier(f.stack,f.damageType)}},s.UpdateEffectBlight=function(){if(null!=this.EffectBlightApply&&!(this.EffectBlightApply.size<=0))for(var t,e=c(this.EffectBlightApply.entries());!(t=e()).done;){var f=t.value,i=f[0],n=f[1];A.Instance.CurrentTime>=n.time&&(this.EffectBlightApply.delete(i),this.root.data.statsData.setRES_Blight_Modifier(0,n.damageType))}},a(e,[{key:"Immortal",get:function(){return this.isImmortal},set:function(t){this.isImmortal=t}},{key:"canTarget",get:function(){return this._canTarget},set:function(t){this._canTarget=t,this.getComponent(y).enabled=this._canTarget,this.getComponent(g).enabled=this._canTarget,this.canTarget&&this.getComponent(y).apply()}}]),e}(d)).prototype,"targetPos",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(Y.prototype,"labelTween",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=Y))||j));s._RF.pop()}}}));

System.register("chunks:///_virtual/TerrastAttackComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AttackComponent.ts","./DamageData.ts"],(function(t){"use strict";var e,n,o,a,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){a=t.AttackComponent},function(t){r=t.DamageData}],execute:function(){var c;n._RF.push({},"12c2evJ0x9DerHRJaQi4Fmo","TerrastAttackComponent",void 0);var s=o.ccclass;o.property,t("TerrastAttackComponent",s("TerrastAttackComponent")(c=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.Attack=function(t,e,n){void 0===n&&(n=0);var o=new r;return o.attacker=this.root,this.skills[n].addAttackData(t,o),o},n}(a))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/Test_NodeOrder.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,o,i,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.createClass},function(e){o=e.cclegacy,i=e._decorator,s=e.Component}],execute:function(){var c,d,p,u;o._RF.push({},"c9edetm19ZPf6gAoKHYNRFJ","Test_NodeOrder",void 0);var l=i.ccclass,a=i.property,g=i.executeInEditMode;e("TestNodeOrder",(c=l("TestNodeOrder"),d=a({displayName:"siblingIndex"}),c(p=g((t((u=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),n(t,[{key:"siblingIndex",get:function(){return this.node.getSiblingIndex()},set:function(e){this.node.setSiblingIndex(e)}}]),t}(s)).prototype,"siblingIndex",[d],Object.getOwnPropertyDescriptor(u.prototype,"siblingIndex"),u.prototype),p=u))||p)||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/TestEffectTool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var e,t,l,o,c,r,a,n,s;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,l=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){c=i.cclegacy,r=i._decorator,a=i.sp,n=i.Node,s=i.Component}],execute:function(){var u,p,m,h,f,T,v,k,d,P,D,b,H,g,x;c._RF.push({},"75731BXRlVFCZbwuI9mSOWm","TestEffectTool",void 0);var y=r.ccclass,A=r.property;i("TestEffectTool",(u=y("TestEffectTool"),p=A(a.Skeleton),m=A(n),h=A(a.Skeleton),f=A(n),T=A(a.Skeleton),v=A(n),u((P=e((d=function(i){function e(){for(var e,t=arguments.length,c=new Array(t),r=0;r<t;r++)c[r]=arguments[r];return e=i.call.apply(i,[this].concat(c))||this,l(e,"ToolPickAxe",P,o(e)),l(e,"particleAxe",D,o(e)),l(e,"ToolPickHammer",b,o(e)),l(e,"particleHammer",H,o(e)),l(e,"ToolPickDrill",g,o(e)),l(e,"particleDrill",x,o(e)),e}t(e,i);var c=e.prototype;return c.start=function(){this.ToolPickAxe.node.active=!1,this.particleAxe.active=!1,this.ToolPickAxe.animation="Hold",this.ToolPickHammer.node.active=!1,this.particleHammer.active=!1,this.ToolPickHammer.animation="Hold",this.ToolPickDrill.node.active=!1,this.particleDrill.active=!1,this.ToolPickDrill.animation="Hold"},c.onDigDrill=function(){var i=this;this.ToolPickDrill.node.active=!0,this.ToolPickDrill.animation="Dig",this.scheduleOnce((function(){i.particleDrill.active=!0}),.4),this.scheduleOnce((function(){i.particleDrill.active=!1,i.ToolPickDrill.node.active=!1}),1)},c.onDigHammer=function(){var i=this;this.ToolPickHammer.node.active=!0,this.ToolPickHammer.animation="Dig",this.scheduleOnce((function(){i.particleHammer.active=!0}),.2),this.scheduleOnce((function(){i.particleHammer.active=!1,i.ToolPickHammer.node.active=!1}),.6)},c.onDigAxe=function(){var i=this;this.ToolPickAxe.node.active=!0,this.ToolPickAxe.animation="Dig",this.scheduleOnce((function(){i.particleAxe.active=!0}),.1),this.scheduleOnce((function(){i.particleAxe.active=!1,i.ToolPickAxe.node.active=!1}),.3)},e}(s)).prototype,"ToolPickAxe",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(d.prototype,"particleAxe",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=e(d.prototype,"ToolPickHammer",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(d.prototype,"particleHammer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=e(d.prototype,"ToolPickDrill",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(d.prototype,"particleDrill",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=d))||k));c._RF.pop()}}}));

System.register("chunks:///_virtual/ThornAssault.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./PVE_Helper.ts","./ThornAssaultBullet.ts","./Enums.ts","./InGameEvent.ts","./NormalAttack.ts"],(function(t){"use strict";var n,o,e,a,r,s,i,c,u,l,h,m;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,a=t.instantiate},function(t){r=t.SoundController,s=t.EnumSoundPVE},function(t){i=t.PVEHelper},function(t){c=t.ThornAssaultBullet},function(t){u=t.AttackType,l=t.DamageType},function(t){h=t.InGameEventID},function(t){m=t.NormalAttack}],execute:function(){var d;o._RF.push({},"4ee01C+q9VFO7SRCDLLt756","ThornAssault",void 0);var A=e.ccclass;e.property,t("ThornAssault",A("ThornAssault")(d=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.addAttackData=function(t,n){t==u.NormalAttack&&(n.AddDamage(l.Normal,this.root.GetRandomBasicDamage()),n.AddEffects(this.skillData.EffectData))},e.attack=function(t){i.RandomActive(this.root.root.data.attackData.BlindPercent)?console.error("Blind"):(this.curTarget=t,this.curDamage=this.root.Attack(u.NormalAttack,this.curTarget,0),null!=this.curDamage&&(this.root.root.event.on(h.AttackAnimEvent,this.endCast,this),this.root.beginNormalAttack(),this.root.root.animationComponent.setFaceToTarget(t.node.worldPosition.x,-1),this.muzzleActiveInstance&&this.activeMuzzle()))},e.endCast=function(){null!=this.curTarget?(this.root.root.event.off(h.AttackAnimEvent,this.endCast,this),!this.muzzleActiveInstance&&this.activeMuzzle(),a(this.bulletPrefab).getComponent(c).init(this.root,this.curTarget,this.curDamage),r.Instance.PlaySoundPvE(s.tremor,.2)):console.error("this.curTarget null")},o}(m))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/ThornAssaultBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SimplePool.ts","./Utility.ts","./PVE_GameplayControl.ts","./DirectionBullet.ts"],(function(t){"use strict";var e,i,l,s,n,o,a,r,c,f,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,l=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,a=t.Prefab,r=t.Vec3},function(t){c=t.SimplePool},function(t){f=t.Utility},function(t){u=t.PVEGameplayControl},function(t){h=t.DirectionBullet}],execute:function(){var p,P,d,y,v;n._RF.push({},"27ecf3Qe7hNi4Kto6KN9lWX","ThornAssaultBullet",void 0);var D=o.ccclass,g=o.property;t("ThornAssaultBullet",(p=D("ThornAssaultBullet"),P=g(a),p((v=e((y=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,l(e,"bulletEffectPrefab",v,s(e)),e.totalDistanceMove=0,e.effectDistance=60,e}i(e,t);var n=e.prototype;return n.update=function(t){if(this.moving){this.syncTargetPos();var e=this.bulletSpeed*t,i=this.node.worldPosition,l=r.distance(i,this.lastTargetPos);if(l>5){var s=Math.min(e,l)/l,n=new r;r.lerp(n,i,this.lastTargetPos,s),this.totalDistanceMove+=r.distance(i,n),this.setWorldPosition(n),this.totalDistanceMove>this.effectDistance&&(this.totalDistanceMove-=this.effectDistance,this.playBulletEffect(n.add(this.moveDir.clone().multiply3f(this.effectDistance,this.effectDistance,0)))),this.rotateUpdate&&this.rotate(this.lastTargetPos)}else this.hit();this.checkHit()}},n.init=function(e,i,l){t.prototype.init.call(this,e,i,l,600,120)},n.playBulletEffect=function(t){var e=u.Instance.getEffParentBack(),i=c.getNode(this.bulletEffectPrefab,e);i.setSiblingIndex(e.children.length-1),i.setWorldPosition(t),f.PlayParticle(i),setTimeout((function(){i.release()}),1e3)},n.rotate=function(t){},e}(h)).prototype,"bulletEffectPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=y))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/ThunderStrike.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./Utility.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./Enums.ts","./InGameEvent.ts","./SkillBase.ts","./PassiveStaticShock.ts"],(function(t){"use strict";var e,a,i,o,r,n,s,c,l,u,h,f,d,P,p,m,k,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,n=t._decorator,s=t.Node,c=t.instantiate},function(t){l=t.SoundController,u=t.EnumSoundPVE},function(t){h=t.Utility},function(t){f=t.PVEGameplayControl},function(t){d=t.PVEHelper},function(t){P=t.AttackType,p=t.DamageType},function(t){m=t.InGameEventID},function(t){k=t.SkillBase},function(t){g=t.PassiveStaticShock}],execute:function(){var y,v,b,S,T,D,A,E,I;r._RF.push({},"8a5c5Cyh8tLn7Su64lvyRIu","ThunderStrike",void 0);var C=n.ccclass,_=n.property;t("ThunderStrike",(y=C("ThunderStrike"),v=_(s),b=_(s),S=_(s),y((A=e((D=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).delayTimeAttack=0,i(e,"bulletPrefab",A,o(e)),i(e,"impactPrefab",E,o(e)),i(e,"passiveStaticShock",I,o(e)),e.curTarget=void 0,e.curDamage=void 0,e}a(e,t);var r=e.prototype;return r.Init=function(e,a){t.prototype.Init.call(this,e,a),this.root.root.event.on(m.OnDestroy,this.onPlantDestroy,this)},r.update=function(t){this.root.attackAble&&(this.delayTimeAttack>0?this.delayTimeAttack-=t:this.root.targets.length<=0||(this.delayTimeAttack=1/this.root.getAttackSpeed(),this.attack(this.root.targets[0])))},r.addAttackData=function(t,e){var a=this;t==P.NormalAttack&&(e.AddDamage(p.Normal,this.root.GetRandomBasicDamage()),this.root.root.data.level>=this.skillData.Effect_Lv&&e.on(m.OnDead,(function(t,e){if(0!=d.RandomActive(a.skillData.Effect_chance)){var i=c(a.passiveStaticShock);i.parent=f.Instance.getEffParentBack(),i.setWorldPosition(a.curTarget.node.worldPosition),i.getComponent(g).Init(a.root,e,a.skillData),l.Instance.PlaySoundPvE(u.SFX_StaticShock)}}),this))},r.attack=function(t){d.RandomActive(this.root.root.data.attackData.BlindPercent)?console.error("Blind"):(this.curTarget=t,this.curDamage=this.root.Attack(P.NormalAttack,this.curTarget),null!=this.curDamage&&(this.root.root.event.on(m.AttackAnimEvent,this.endCast,this),this.root.beginNormalAttack(),this.root.root.animationComponent.setFaceToTarget(t.node.worldPosition.x)))},r.endCast=function(){if(null!=this.curTarget){this.root.root.event.off(m.AttackAnimEvent,this.endCast,this);var t=this.getPrefab(this.impactPrefab);t.parent=f.Instance.getEffParentBack(),t.setWorldPosition(this.curTarget.node.worldPosition),h.PlayParticle(t),this.setTimeoutPrefab(1600,this.impactPrefab,t);var e=this.getPrefab(this.bulletPrefab);e.parent=f.Instance.getEffParentFront(),e.setWorldPosition(this.curTarget.node.worldPosition),h.PlayParticle(e),this.setTimeoutPrefab(1600,this.bulletPrefab,e),this.curTarget.TakeDamage(this.curDamage),l.Instance.PlaySoundPvE(u.SFX_ThunderStrike,.25)}else console.error("this.curTarget null")},r.onPlantDestroy=function(){this.root.root.event.off(m.OnDestroy,this.onPlantDestroy,this),this.destroyPrefab()},e}(k)).prototype,"bulletPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(D.prototype,"impactPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(D.prototype,"passiveStaticShock",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=D))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,i,n;return{setters:[function(e){r=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,n=e.Component}],execute:function(){var o;t._RF.push({},"a6f47BYijVCfYEooOtF4Vsg","Timer",void 0);var c=i.ccclass;i.property,e("Timer",c("Timer")(o=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t}(n))||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/ToolItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MiningNewManager.ts"],(function(r){"use strict";var e,t,i,o,n,s,l,a,c,p,u,k,h;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,i=r.initializerDefineProperty,o=r.assertThisInitialized},function(r){n=r.cclegacy,s=r._decorator,l=r.Sprite,a=r.Node,c=r.Label,p=r.SpriteFrame,u=r.Color,k=r.Component},function(r){h=r.ToolType}],execute:function(){var b,g,m,d,f,C,v,w,y,L,B,M,U,T,z,I,S,F,H;n._RF.push({},"241d8RT9tBNM6Krs60HvaSH","ToolItem",void 0);var R=s.ccclass,_=s.property;r("ToolItem",(b=R("ToolItem"),g=_(l),m=_(l),d=_(a),f=_(c),C=_(c),v=_(p),w=_(p),y=_(p),b((M=e((B=function(r){function e(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n))||this,i(e,"sprBackground",M,o(e)),i(e,"sprCheckMark",U,o(e)),i(e,"nodeBgStaminaCost",T,o(e)),i(e,"lbCost",z,o(e)),i(e,"lbLvUnlock",I,o(e)),i(e,"sprLock",S,o(e)),i(e,"sprUnlock",F,o(e)),i(e,"sprUnlockGlow",H,o(e)),e}t(e,r);var n=e.prototype;return n.start=function(){},n.activeTool=function(r,e,t){switch(r){case h.PICK_AXE:this.lbCost.string=""+t,this.nodeBgStaminaCost.active=!0;break;case h.HAMMER:this.lbCost.string=e?"":""+t,this.lbLvUnlock.string=e?"Level 2":"",this.nodeBgStaminaCost.active=!e,this.sprBackground&&(this.sprBackground.spriteFrame=e?this.sprLock:this.sprUnlock,this.sprBackground.color=e?u.WHITE:new u(255,255,255,150)),this.sprCheckMark&&(this.sprCheckMark.spriteFrame=e?this.sprLock:this.sprUnlockGlow);break;case h.DRILL:this.lbCost.string=e?"":""+t,this.lbLvUnlock.string=e?"Level 6":"",this.nodeBgStaminaCost.active=!e,this.sprBackground&&(this.sprBackground.spriteFrame=e?this.sprLock:this.sprUnlock,this.sprBackground.color=e?u.WHITE:new u(255,255,255,150)),this.sprCheckMark&&(this.sprCheckMark.spriteFrame=e?this.sprLock:this.sprUnlockGlow)}},e}(k)).prototype,"sprBackground",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(B.prototype,"sprCheckMark",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(B.prototype,"nodeBgStaminaCost",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(B.prototype,"lbCost",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(B.prototype,"lbLvUnlock",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(B.prototype,"sprLock",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(B.prototype,"sprUnlock",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(B.prototype,"sprUnlockGlow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=B))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/TravelBagItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./ResourcesManager.ts","./SoundController.ts"],(function(t){"use strict";var e,i,n,a,r,o,l,s,c,u,h,m,p,y,I,T,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,l=t._decorator,s=t.Button,c=t.Sprite,u=t.Label,h=t.Node,m=t.Component},function(t){p=t.MaterialType,y=t.MaterialRarity,I=t.Utility},function(t){T=t.ResourcesManager},function(t){f=t.SoundController,d=t.EnumSound}],execute:function(){var g,b,S,v,C,D,R,_,M,k,E;o._RF.push({},"913281X8udPCLl9o0GvwzXd","TravelBagItem",void 0);var N=l.ccclass,z=l.property;t("TravelBagItem",(g=N("TravelBagItem"),b=z(s),S=z(c),v=z(c),C=z(u),g((_=e((R=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"btnSelect",_,a(e)),n(e,"sprRarity",M,a(e)),n(e,"sprItem",k,a(e)),n(e,"lbTotalItem",E,a(e)),e.type=p.NONE,e.rarity=y.NONE,e.totalItem=0,e.itemID="",e.countTimeClick=0,e.itemData=void 0,e}i(e,t);var o=e.prototype;return o.start=function(){this.btnSelect.node.on(h.EventType.TOUCH_START,this.onTouchStart,this),this.btnSelect.node.on(h.EventType.TOUCH_END,this.onTouchEnd,this),this.btnSelect.node.on(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.countTimeClick=0},o.initMaterial=function(t){this.itemData=t,this.ItemID=t.id,this.type=I.getTypeWithName(t.getItemType()),this.rarity=I.getRarityWithName(t.getItemRarity()),this.TotalItem=t.amount,this.lbTotalItem.string=""+this.totalItem,this.loadSpriteMaterial()},o.initMaterial1=function(t,e,i){this.type=t,this.rarity=e,this.TotalItem=i,this.loadSpriteMaterial(),this.ItemID=t+"_"+e+"_"+i,this.lbTotalItem.string=""+this.totalItem},o.loadSpriteMaterial=function(){var t=this,e=this.itemData.name,i="BG_"+I.getNameRarity(this.rarity);T.Instance.LoadMaterialSprite(e,(function(e){t.sprItem.spriteFrame=e}));T.Instance.LoadMaterialRaritySprite(i,(function(e){t.sprRarity.spriteFrame=e}))},o.onTouchStart=function(){var t=this;this.schedule((function(){t.countTimeClick++,t.onSelectedItem()}),.3)},o.onTouchEnd=function(){this.countTimeClick<=0&&this.onSelectedItem(),this.countTimeClick=0,this.unscheduleAllCallbacks()},o.onSelectedItem=function(){if(!(this.TotalItem<=0)){f.Instance.PlaySound(d.UI_SFX_Crafting_Single_Material);var t={itemID:this.ItemID,itemData:this.itemData};this.node.emit("bagItem:onClicked",t)}},r(e,[{key:"Type",get:function(){return this.type},set:function(t){this.type=t}},{key:"Rarity",get:function(){return this.rarity},set:function(t){this.rarity=t}},{key:"TotalItem",get:function(){return this.totalItem},set:function(t){this.totalItem=t,this.lbTotalItem.string=""+this.totalItem}},{key:"ItemID",get:function(){return this.itemID},set:function(t){this.itemID=t}}]),e}(m)).prototype,"btnSelect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(R.prototype,"sprRarity",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(R.prototype,"sprItem",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(R.prototype,"lbTotalItem",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=R))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/TreasureAssetsItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,r,s,o,u,c,a,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,s=t.createClass},function(t){o=t.cclegacy,u=t._decorator,c=t.Label,a=t.Sprite,l=t.Component}],execute:function(){var h,p,m,f,y,_,C;o._RF.push({},"4fd2eRUsd9MlYUYyDmVvu4x","TreasureAssetsItem",void 0);var k=u.ccclass,O=u.property;t("TreasureAssetsItem",(h=k("TreasureAssetsItem"),p=O(c),m=O(a),h((_=e((y=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,i(e,"amount",_,r(e)),i(e,"Icon",C,r(e)),e.type=void 0,e._amount=0,e._onOpenClick=void 0,e.currentKey=0,e.onTreasureClick=null,e}n(e,t);var o=e.prototype;return o.Init=function(t,e,n,i,r){this.currentKey=i,this.type=n,this._onOpenClick=e,this.itemAmount=t,this.onTreasureClick=r},o.SetCurrentKey=function(t){this.currentKey=t,this.itemAmount=this._amount},o.OnOpenClick=function(t){this.OpenBox(1,t)},o.OnOpen5Click=function(t){this.OpenBox(5,t)},o.OnClick=function(){null!=this.onTreasureClick&&this.onTreasureClick(this)},o.OpenBox=function(t,e){this._onOpenClick(this.Icon.spriteFrame,this.type,t,function(t){this._amount-=t,this.itemAmount=this._amount,e(this)}.bind(this))},s(e,[{key:"itemAmount",get:function(){return this._amount},set:function(t){this._amount=t,this.amount.string=this._amount.toString(),this.Icon.grayscale=t<1}}]),e}(l)).prototype,"amount",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(y.prototype,"Icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=y))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/TreasureAssetsOpen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./PopUpBase.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(e){"use strict";var t,s,n,r,i,o,a,c,u,p,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,a=e.Sprite},function(e){c=e.GatheringServicesApi},function(e){u=e.PopUpBase},function(e){p=e.ResourcesManager},function(e){l=e.UIPopupManager}],execute:function(){var h,f,y,S,v;i._RF.push({},"aca0bLsaJlE3p+f7m6odrve","TreasureAssetsOpen",void 0);var g=o.ccclass,O=o.property;e("TreasureAssetsOpen",(h=g("TreasureAssetsOpen"),f=O(a),h((v=t((S=function(e){function t(){for(var t,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"icon",v,r(t)),t.amount=5,t.typeShop=void 0,t.cbSuccess=void 0,t}s(t,e);var i=t.prototype;return i.Show=function(t,s,n,r){e.prototype.OnShow.call(this),this.cbSuccess=r,this.typeShop=s,this.icon.spriteFrame=t,this.amount=n},i.OnBtnCloseClick=function(){e.prototype.OnHide.call(this)},i.OnBtnBuyClick=function(){var e=this;c.OPEN_TREASURE(this.typeShop,this.amount,(function(t){var s=JSON.parse(t);0==s.status?e.cbSuccess(e.amount,s):l.Instance.ShowToast("Error",p.Instance.GetErrorMessage(s.status),0),e.OnBtnCloseClick()}),null)},t}(u)).prototype,"icon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=S))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/TreasureAssetsOpenFX.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TreasureOpenItem.ts"],(function(e){"use strict";var t,i,n,r,a,o,s,l,c,p,u,m,h,d,f,I,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.UIOpacity,l=e.Node,c=e.sp,p=e.Prefab,u=e.UITransform,m=e.ScrollView,h=e.tween,d=e.v3,f=e.instantiate,I=e.Component},function(e){b=e.TreasureOpenItem}],execute:function(){var S,T,v,g,O,y,C,w,B,U,z,A,P,N,R,_,x,F,D,E,L,j,k;a._RF.push({},"4a964FdQRlJvYl2PAcZs5Rl","TreasureAssetsOpenFX",void 0);var V=o.ccclass,X=o.property;e("TreasureAssetsOpenFX",(S=V("TreasureAssetsOpenFX"),T=X(s),v=X(l),g=X(s),O=X(c.Skeleton),y=X(p),C=X(l),w=X(u),B=X(m),U=X(l),z=X(u),S((N=t((P=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"fadeUIOpacity",N,r(t)),n(t,"ScaleNodeItem",R,r(t)),n(t,"fadeUIOpacityItem",_,r(t)),n(t,"openTreasureSpine",x,r(t)),n(t,"TreasureOpenItemPrefab",F,r(t)),n(t,"BoxBig",D,r(t)),n(t,"ContentBig",E,r(t)),n(t,"ContentBigScrollView",L,r(t)),n(t,"BoxSmall",j,r(t)),n(t,"ContentSmall",k,r(t)),t.TreasureOpenItems=[],t.json=void 0,t.isCanClose=!1,t.CompleteListener=function(e){t.openTreasureSpine.node.active=!1,t.ScaleNodeItem.active=!0,t.ScaleNodeItem.setScale(.5,.5,.5),h(t.ScaleNodeItem).to(.3,{scale:d(1,1,1)},{easing:"circOut"}).call(function(){this.isCanClose=!0,this.InitItem(this.json)}.bind(r(t))).start()},t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.openTreasureSpine.setCompleteListener(this.CompleteListener)},a.Show=function(e,t){var i=this;this.json=e,this.ScaleNodeItem.active=!1,this.isCanClose=!1,this.node.active=!0,this.openTreasureSpine.node.active=!1,this.fadeUIOpacity.opacity=0,this.DisableAllTreasureOpenItems(),this.BoxSmall.active=e.data.rewards.length<=4,this.BoxBig.active=!this.BoxSmall.active,h(this.fadeUIOpacity).to(.2,{opacity:255}).call((function(){i.openTreasureSpine.node.active=!0;var e="reward_1";"BURRIED_TREASURE"==t?e="reward_2":"SUNKEN_TREASURE"==t&&(e="reward_3"),i.openTreasureSpine.setSkin(e),i.openTreasureSpine.setAnimation(0,"open",!0)})).start()},a.OnCloseClick=function(){var e=this;this.isCanClose&&(this.isCanClose=!1,h(this.fadeUIOpacity).to(.2,{opacity:0}).start(),h(this.ScaleNodeItem).to(.3,{scale:d(.5,.5,.5)},{easing:"circOut"}).call((function(){e.node.active=!1})).start())},a.InitItem=function(e){var t=e.data.rewards.length;if(t<=4)for(var i=0;i<t;i++){var n=this.GetTreasureOpenItem(i);n.node.setParent(this.ContentSmall.node),n.node.setPosition(0,0,0),n.Init(e.data.rewards[i])}else{this.ContentBigScrollView.scrollToTop();for(var r=0;r<t;r++){var a=this.GetTreasureOpenItem(r);a.node.setParent(this.ContentBig.node),a.node.setPosition(0,0,0),a.Init(e.data.rewards[r])}var o=164*Math.ceil(t/4)+52;o<450&&(o=450),this.ContentBig.height=o}},a.DisableAllTreasureOpenItems=function(){for(var e=0;e<this.TreasureOpenItems.length;e++)this.TreasureOpenItems[e].node.active=!1},a.GetTreasureOpenItem=function(e){var t;e<this.TreasureOpenItems.length?t=this.TreasureOpenItems[e]:(t=f(this.TreasureOpenItemPrefab).getComponent(b),this.TreasureOpenItems.push(t));return t.node.active=!0,t},t}(I)).prototype,"fadeUIOpacity",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(P.prototype,"ScaleNodeItem",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(P.prototype,"fadeUIOpacityItem",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(P.prototype,"openTreasureSpine",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(P.prototype,"TreasureOpenItemPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(P.prototype,"BoxBig",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(P.prototype,"ContentBig",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(P.prototype,"ContentBigScrollView",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(P.prototype,"BoxSmall",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(P.prototype,"ContentSmall",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=P))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/TreasureOpenItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./ResourcesManager.ts"],(function(e){"use strict";var t,n,i,r,o,a,c,s,l,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Sprite,s=e.Label,l=e.Component},function(e){u=e.Utility},function(e){p=e.ResourcesManager}],execute:function(){var d,f,h,m,y,v,I;o._RF.push({},"7b6dcJK6AJPx5eAxM0ziEzY","TreasureOpenItem",void 0);var g=a.ccclass,S=a.property;e("TreasureOpenItem",(d=g("TreasureOpenItem"),f=S(c),h=S(s),d((v=t((y=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"icon",v,r(t)),i(t,"amount",I,r(t)),t}return n(t,e),t.prototype.Init=function(e){var t=this;this.node.setScale(1,1,1),this.icon.node.active=!1;var n=e.type,i=e.data;if((i.includes("SAPLING")||i.includes("MAMA"))&&(i=u.SunflowerSvNameToResourceName(i)),null!=i&&"NOTHING"!=i){var r=function(e){t.icon.node.active=!0,t.icon.spriteFrame=e};"SAPLING"==n||"MAMA"==n?(this.icon.node.setScale(.4,.4,1),p.Instance.LoadPlant(i,r)):(this.icon.node.setScale(.75,.75,1),p.Instance.LoadMaterialSprite(i,r))}else console.log("not yet handle rewardType: "+n),this.node.active=!1;this.amount.string=e.amount},t}(l)).prototype,"icon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(y.prototype,"amount",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=y))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/TreeClick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TreePrefab.ts"],(function(t){"use strict";var e,n,r,o,i,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.Node,i=t.Component},function(t){c=t.TreePrefab}],execute:function(){var s;n._RF.push({},"96bf5yWjaBClbAd00gPn6sp","TreeClick",void 0);var a=r.ccclass;r.property,t("TreeClick",a("TreeClick")(s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).treePrefab=void 0,e.isTouchStart=!1,e}e(n,t);var r=n.prototype;return r.onLoad=function(){var t=this;this.treePrefab=this.node.parent.parent.getComponent(c),this.node.on(o.EventType.TOUCH_START,(function(e){t.isTouchStart=!0}),this),this.node.on(o.EventType.TOUCH_END,(function(e){t.isTouchStart&&t.OnClick(),t.isTouchStart=!1}),this),this.node.on(o.EventType.TOUCH_CANCEL,(function(e){t.isTouchStart=!1}),this)},r.OnClick=function(){this.treePrefab.OnClick()},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/TreePrefab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PrefabController.ts","./Utility.ts","./SoundController.ts","./ChoppingHpLabel.ts"],(function(e){"use strict";var t,o,n,i,r,s,a,l,h,c,u,p,d,_,T,E,f,m,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.UITransform,l=e.Sprite,h=e.Node,c=e.color,u=e.v3,p=e.tween,d=e.Component},function(e){_=e.PrefabController,T=e.PrefabEnum},function(e){E=e.Utility},function(e){f=e.SoundController,m=e.EnumSound},function(e){C=e.ChoppingHpLabel}],execute:function(){var g,v,P,R,L,S,w,A,b,F,y,M,I;r._RF.push({},"7f720p1EZ5HzKc8BVbqEvqE","TreePrefab",void 0);var k=s.ccclass,G=s.property;e("TreePrefab",(g=k("TreePrefab"),v=G(a),P=G(l),R=G(l),L=G(h),S=G(h),g((b=t((A=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"UITransform",b,i(t)),n(t,"Tree",F,i(t)),n(t,"root",y,i(t)),n(t,"clickZone",M,i(t)),t.json=void 0,t.svIndex=-1,t._ChoppingManager=void 0,t.heath=void 0,t.rootHeath=void 0,n(t,"visual",I,i(t)),t.treeColor={Blue:["LARGE_TREE_winter_0","LARGE_TREE_winter_1","SMALL_TREE_winter_1"],Green:["LARGE_TREE_spring_0","LARGE_TREE_spring_1","SMALL_TREE_spring_2","SMALL_TREE_spring_3","SMALL_TREE_summer_0","SMALL_TREE_summer_2","SMALL_TREE_summer_3","SMALL_TREE_winter_2"],Pink:["SMALL_TREE_spring_0","SMALL_TREE_spring_1","SMALL_TREE_winter_0"],Red:["LARGE_TREE_autumn_0","LARGE_TREE_autumn_1","SMALL_TREE_autumn_0","SMALL_TREE_autumn_1","SMALL_TREE_autumn_2","SMALL_TREE_summer_1"]},t.selectecColorBlue=c("#84B1AB"),t.selectecColorGreen=c("#8FC295"),t.selectecColorPink=c("#BC8FC2"),t.selectecColorRed=c("#C2998F"),t.selectecColorRoot=c("#B9A18A"),t.normalColor=c("#FFFFFF"),t.tween1=void 0,t.tween2=void 0,t.tween3=void 0,t}o(t,e);var r=t.prototype;return r.Init=function(e,t,o,n,i){this.svIndex=n,this._ChoppingManager=i,this.json=o,null!=e&&(this.Tree.spriteFrame=e),null!=t&&(this.root.spriteFrame=t),null!=o?(this.root.node.active="SMALL_STUMP"==o.type,this.clickZone.active=!0,"LARGE_TREE"==o.type?(this.heath=7,this.Tree.node.setScale(1,1,1),this.Tree.node.setPosition(6,-85,0),this.clickZone.setPosition(6,-85,0),this.clickZone.setScale(1.7,1.7,1),this.root.node.setScale(1,1,1),this.root.node.setPosition(-2,-15,0)):(this.heath=5,this.Tree.node.setScale(.5,.5,1),this.Tree.node.setPosition(0,-8,0),this.clickZone.setPosition(0,-8,0),this.clickZone.setScale(1,1,1),this.root.node.setScale(.65,.65,1),this.root.node.setPosition(-2,30,0)),this.rootHeath=7):(this.root.node.active=!1,this.clickZone.active=!1),this.Tree.node.setRotationFromEuler(0,0,0),this.Tree.node.active=!this.root.node.active},r.OnDead=function(){this.heath=0,this.root.node.active=!0,this.Tree.node.active=!1},r.OnTreeStumpDead=function(){this.rootHeath=0,this.root.node.active=!1,this.Tree.node.active=!1,this.clickZone.active=!1},r.OnClick=function(){this._ChoppingManager.OnTreeClick(this)},r.OnChop=function(){if(this.svIndex>-1){f.Instance.PlaySound(m.UI_SFX_Cut_Tree_2),null!=this.tween1&&this.tween1.stop(),null!=this.tween2&&this.tween2.stop();var e=null,t=this._ChoppingManager.AxeChop;if(t.node.setParent(this.visual),t.node.active=!0,this.heath>0)(e=_.Instance.GetPrefab(this.FxTreeEnum())).active=!0,e.setParent(this.visual),"LARGE_TREE"==this.json.type?(e.setScale(2,2,2),e.setPosition(0,19,0),this.Tree.node.setPosition(u(6,-85,0)),this.tween1=p(this.Tree.node).to(.12,{position:u(-10,-85,0)}).to(.12,{position:u(6,-85,0)}).union().repeat(2),this.tween1.start(),this.Tree.node.setRotationFromEuler(u(0,0,0)),this.tween2=p(this.Tree.node).to(.12,{eulerAngles:u(-15,10,2)}).to(.12,{eulerAngles:u(0,0,0)}).union().repeat(2),this.tween2.start(),t.node.setPosition(39,60,0),t.node.setScale(.42,.42,1)):(e.setScale(1,1,1),e.setPosition(0,42,0),this.Tree.node.setPosition(u(0,-8,0)),this.tween1=p(this.Tree.node).to(.12,{position:u(-6,-8,0)}).to(.12,{position:u(0,-8,0)}).union().repeat(2),this.tween1.start(),this.Tree.node.setRotationFromEuler(u(0,0,0)),this.tween2=p(this.Tree.node).to(.12,{eulerAngles:u(-15,10,2)}).to(.12,{eulerAngles:u(0,0,0)}).union().repeat(2),this.tween2.start(),t.node.setPosition(20,80,0),t.node.setScale(.3,.3,1)),t.node.setParent(this._ChoppingManager.Temp,!0),t.setAnimation(0,"animation",!1);else{if(!(this.rootHeath>0))return t.node.setParent(this._ChoppingManager.Temp,!0),void(t.node.active=!1);(e=_.Instance.GetPrefab(T.Chopping_Root)).active=!0,e.setParent(this.visual),e.setScale(1,1,1),"LARGE_TREE"==this.json.type?(e.setPosition(0,19,0),this.root.node.setPosition(u(-2,-15,0)),this.tween1=p(this.root.node).to(.12,{position:u(-18,-15,0)}).to(.1,{position:u(-2,-15,0)}).union().repeat(2),this.tween1.start()):(e.setPosition(0,42,0),this.root.node.setPosition(u(0,30,0)),this.tween1=p(this.root.node).to(.12,{position:u(-12,30,0)}).to(.1,{position:u(0,30,0)}).union().repeat(2),this.tween1.start()),t.node.setPosition(23,66,0),t.node.setScale(.3,.3,1),t.node.setParent(this._ChoppingManager.Temp,!0),t.setAnimation(0,"animation",!1)}E.PlayParticle(e)}},r.spawnHpFx=function(e){var t=_.Instance.GetPrefab(T.Chopping_HpLabel),o=t.getComponent(C);t.active=!0;var n=0;0==this.heath||(n=7==this.heath?190:50),t.setParent(this.node),t.setScale(1,1,1),t.setPosition(0,40+n,0),o.uIOpacity.opacity=255,o.label.string=e,p(t).to(.5,{position:u(0,110+n,0)},{easing:"cubicOut"}).start(),p(o.uIOpacity).delay(.3).to(.2,{opacity:0}).start()},r.Select=function(){var e;null!=this.tween3&&this.tween3.stop();var t=this.Tree,o={r:(e=0==this.heath?"SMALL_TREE_0"==(t=this.root).spriteFrame.name?this.selectecColorRoot:this.selectecColorBlue:this.selectedColor()).r,g:e.g,b:e.b};this.tween3=p(t).to(.4,{color:o}).to(.4,{color:{r:255,g:255,b:255}}).union().repeatForever(),this.tween3.start()},r.DeSelect=function(){null!=this.tween3&&this.tween3.stop(),this.Tree.color=this.normalColor,this.root.color=this.normalColor},r.FxTreeEnum=function(){var e=this,t=this.treeColor.Blue.findIndex((function(t){return t==e.Tree.spriteFrame.name}));return t>-1?T.Chopping_Blue:(t=this.treeColor.Green.findIndex((function(t){return t==e.Tree.spriteFrame.name})))>-1?T.Chopping_Green:(t=this.treeColor.Pink.findIndex((function(t){return t==e.Tree.spriteFrame.name})))>-1?T.Chopping_Pink:(t=this.treeColor.Red.findIndex((function(t){return t==e.Tree.spriteFrame.name})))>-1?T.Chopping_Red:(console.log("can't find color FX for tree"),T.Chopping_Blue)},r.selectedColor=function(){var e=this,t=this.treeColor.Blue.findIndex((function(t){return t==e.Tree.spriteFrame.name}));return t>-1?this.selectecColorBlue:(t=this.treeColor.Green.findIndex((function(t){return t==e.Tree.spriteFrame.name})))>-1?this.selectecColorGreen:(t=this.treeColor.Pink.findIndex((function(t){return t==e.Tree.spriteFrame.name})))>-1?this.selectecColorPink:(t=this.treeColor.Red.findIndex((function(t){return t==e.Tree.spriteFrame.name})))>-1?this.selectecColorRed:(console.log("can't find selected Color for tree"),this.selectecColorBlue)},t}(d)).prototype,"UITransform",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(A.prototype,"Tree",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(A.prototype,"root",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(A.prototype,"clickZone",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(A.prototype,"visual",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=A))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/Tremor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundController.ts","./Utility.ts","./PVE_GameplayControl.ts","./Enums.ts","./InGameEvent.ts","./NormalAttack.ts"],(function(t){"use strict";var a,e,o,i,r,n,s,c,l,u,h,m,p,d,f;return{setters:[function(t){a=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,n=t._decorator,s=t.Node},function(t){c=t.SoundController,l=t.EnumSoundPVE},function(t){u=t.Utility},function(t){h=t.PVEGameplayControl},function(t){m=t.AttackType,p=t.SkillDamageData},function(t){d=t.InGameEventID},function(t){f=t.NormalAttack}],execute:function(){var g,y,k,D,P,T,A;r._RF.push({},"8dcd31zbKVMgrvBZYidWqJ0","Tremor",void 0);var v=n.ccclass,E=n.property;t("Tremor",(g=v("Tremor"),y=E(s),k=E(s),g((T=a((P=function(t){function a(){for(var a,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return a=t.call.apply(t,[this].concat(r))||this,o(a,"impactBack",T,i(a)),o(a,"impactFront",A,i(a)),a}e(a,t);var r=a.prototype;return r.Init=function(a,e){t.prototype.Init.call(this,a,e),this.root.root.event.on(d.OnDestroy,this.onPlantDestroy,this)},r.update=function(t){this.root.attackAble&&(this.delayTimeAttack>0?this.delayTimeAttack-=t:this.root.targets.length<=0||(this.delayTimeAttack=this.skillData.Cooldown,this.attack(this.root.targets[0])))},r.addAttackData=function(t,a){if(t==m.NormalAttack){var e=this.skillData.damageData,o=this.root.root.data.attackData;e.forEach((function(t){var e=p.getDamage(t,o.getNormalDamage(),o.getMagicDamage());a.AddDamage(t.damageType,e)})),a.setAoE(this.skillData.AoERange),a.AddEffects(this.skillData.EffectData)}},r.attack=function(t){this.curTarget=t,this.curDamage=this.root.Attack(m.NormalAttack,this.curTarget,1),null!=this.curDamage&&this.endCast()},r.endCast=function(){null!=this.curTarget?(this.impactBack.setParent(h.Instance.getEffParentBack()),this.impactBack.setWorldPosition(this.curTarget.node.worldPosition),u.PlayParticle(this.impactBack),this.impactFront.setParent(h.Instance.getEffParentFront()),this.impactFront.setWorldPosition(this.curTarget.node.worldPosition),u.PlayParticle(this.impactFront),this.curTarget.TakeDamage(this.curDamage),c.Instance.PlaySoundPvE(l.thornassult_attack,.2)):console.error("this.curTarget null")},r.onPlantDestroy=function(){this.root.root.event.off(d.OnDestroy,this.onPlantDestroy,this),this.impactBack.destroy(),this.impactFront.destroy()},a}(f)).prototype,"impactBack",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=a(P.prototype,"impactFront",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=P))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/TutorialSkillLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,r,l,o,n,s,c,a,u,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){o=t.cclegacy,n=t._decorator,s=t.Label,c=t.RichText,a=t.Sprite,u=t.color,p=t.Component}],execute:function(){var h,g,v,d,b,f,L,y,S;o._RF.push({},"8b07e7r9wpPPah76Rw2i0gv","TutorialSkillLevel",void 0);var w=n.ccclass,D=n.property;t("TutorialSkillLevel",(h=w("TutorialSkillLevel"),g=D(s),v=D(c),d=D(a),h((L=i((f=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return i=t.call.apply(t,[this].concat(o))||this,r(i,"title",L,l(i)),r(i,"des",y,l(i)),r(i,"dot",S,l(i)),i}return e(i,t),i.prototype.Init=function(t,i,e,r,l,o,n){t<i?(this.title.string=r+" Lv."+t.toString()+" (CLEARED)",this.des.string="<color=#D2AA81>"+n,this.title.color=u(210,170,129),this.dot.color=u(210,170,129)):t==i?(this.title.string="MAX"==o?r+" Lv."+t.toString():r+" Lv."+t.toString()+" (EXP to next level: "+e+"/"+o+")",this.des.string="<color=#9C6D3E>"+l,this.title.color=u(210,100,43),this.dot.color=u(210,100,43)):(this.title.string=r+" Lv."+t.toString(),this.des.string="<color=#938E8E>"+n,this.title.color=u(147,142,142),this.dot.color=u(147,142,142))},i}(p)).prototype,"title",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=i(f.prototype,"des",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=i(f.prototype,"dot",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=f))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/UFXBlur.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,o,n,a,l,u,s,p,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty,i=t.inheritsLoose,o=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,l=t._decorator,u=t.Vec2,s=t.Material,p=t.Sprite,c=t.Component}],execute:function(){var b,y,h,f,B,m,O,U,z,g,v,w,F;a._RF.push({},"8c161ltfvxB05ZQBCaPakrB","UFXBlur",void 0);var j=l.ccclass,C=l.property,_=t("UFXBlurUBO",(b=j("UFXBlurUBO"),y=C(u),b((B=e((f=function(){r(this,"textureSize",B,this)}).prototype,"textureSize",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(50,50)}}),h=f))||h));t("UFXBlur",(m=j("UFXBlur"),O=C({type:_,serializable:!0}),U=C(s),z=C(p),m((e((v=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._ubo=new _,r(e,"materialObject",w,o(e)),r(e,"sprComponent",F,o(e)),e}i(e,t);var a=e.prototype;return a.start=function(){this.sprComponent&&(this.sprComponent.customMaterial=this.materialObject),this.applyUBO()},a.applyUBO=function(){this.ubo?this.materialObject&&this.materialObject.setProperty("textureSize",this.ubo.textureSize):console.warn("UBO not install")},n(e,[{key:"ubo",get:function(){return this._ubo},set:function(t){this._ubo=t,this.applyUBO()}}]),e}(c)).prototype,"ubo",[O],Object.getOwnPropertyDescriptor(v.prototype,"ubo"),v.prototype),w=e(v.prototype,"materialObject",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(v.prototype,"sprComponent",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=v))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/UFXDissolve.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,o,n,a,s,l,p,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,r=t.inheritsLoose,o=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,s=t._decorator,l=t.CCFloat,p=t.Material,u=t.Sprite,c=t.Component}],execute:function(){var b,y,h,f,m,O,v,U,g,B,C,D,F;a._RF.push({},"8a7f0C1UNlIJbjrWFBA8BAO","UFXDissolve",void 0);var j=s.ccclass,_=s.property,w=t("UFXDissolveUBO",(b=j("UFXDissolveUBO"),y=_(l),b((m=e((f=function(){i(this,"timer",m,this)}).prototype,"timer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),h=f))||h));t("default",(O=j("UFXDissolve"),v=_({type:w,serializable:!0}),U=_(p),g=_(u),O((e((C=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._ubo=new w,i(e,"materialObject",D,o(e)),i(e,"sprComponent",F,o(e)),e}r(e,t);var a=e.prototype;return a.start=function(){this.sprComponent&&(this.sprComponent.customMaterial=this.materialObject),this.applyUBO()},a.applyUBO=function(){this.ubo?this.materialObject&&this.materialObject.setProperty("u_time",this.ubo.timer):console.warn("UBO not install")},n(e,[{key:"ubo",get:function(){return this._ubo},set:function(t){this._ubo=t,this.applyUBO()}}]),e}(c)).prototype,"ubo",[v],Object.getOwnPropertyDescriptor(C.prototype,"ubo"),C.prototype),D=e(C.prototype,"materialObject",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(C.prototype,"sprComponent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=C))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/UFXFlashLight.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,n,o,l,a,s,u,h,p,c,b,g,f,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,r=t.inheritsLoose,n=t.assertThisInitialized,o=t.createClass},function(t){l=t.cclegacy,a=t._decorator,s=t.Color,u=t.Vec2,h=t.CCInteger,p=t.CCFloat,c=t.CCBoolean,b=t.Material,g=t.Sprite,f=t.tween,m=t.Component}],execute:function(){var y,d,w,C,F,O,P,_,v,z,U,j,L,B,A,x,T,D,M,S,X,N,W,V,k;l._RF.push({},"f94f9V+JmtHcpqoQJlAaKLS","UFXFlashLight",void 0);var H=a.ccclass,I=a.property,J=t("NumberToTween",(function(t){this.n=void 0,this.n=t})),R=t("UFXFlashLightUBO",(y=H("UFXFlashLightUBO"),d=I(s),w=I(u),C=I({type:h,slide:!0,min:0,max:90}),F=I(p),y((_=e((P=function(){i(this,"lightColor",_,this),i(this,"lightCenterPoint",v,this),i(this,"lightAngle",z,this),i(this,"lightWidth",U,this)}).prototype,"lightColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(140,255,255,255)}}),v=e(P.prototype,"lightCenterPoint",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(.5,.5)}}),z=e(P.prototype,"lightAngle",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),U=e(P.prototype,"lightWidth",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),O=P))||O));t("default",(j=H("UFXFlashLight"),L=I(c),B=I({type:p,slide:!0,min:0,max:10}),A=I({type:p,slide:!0,min:0,max:5}),x=I({type:R,serializable:!0}),T=I(b),D=I(g),j((X=e((S=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,i(e,"enableTimer",X,n(e)),i(e,"delay",N,n(e)),i(e,"duration",W,n(e)),e._ubo=new R,i(e,"materialObject",V,n(e)),i(e,"sprComponent",k,n(e)),e._tween=null,e}r(e,t);var l=e.prototype;return l.applyUBO=function(){this.ubo?this.materialObject&&(this.materialObject.setProperty("lightColor",this.ubo.lightColor),this.materialObject.setProperty("lightCenterPoint",this.ubo.lightCenterPoint),this.materialObject.setProperty("lightAngle",this.ubo.lightAngle),this.materialObject.setProperty("lightWidth",this.ubo.lightWidth)):console.warn("UBO not install")},l.applyTimer=function(){var t=this,e=new J(0),i=f(e).delay(this.delay).to(this.duration,{n:10},{progress:function(e,i,r,n){var o=Math.floor(e+(i-e)*n),l=Number((o/10).toFixed(2));return t.materialObject.setProperty("lightCenterPoint",new u(l,l)),console.log("VALUE : ",l,o,r),o}}).call((function(){e.n=0,t.ubo.lightCenterPoint=new u(0,0)}));this._tween=f(e).repeatForever(i),this._tween.start()},l.start=function(){this.sprComponent&&(this.sprComponent.customMaterial=this.materialObject),this.applyUBO()},l.onDestroy=function(){this._tween&&(this._tween.stop(),this._tween=null)},l.formatNumber=function(t,e){return void 0===e&&(e=2),t=Number(Math.round(parseFloat(t+"e"+e))+"e-"+e),e>0?t.toFixed(e).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},o(e,[{key:"ubo",get:function(){return this._ubo},set:function(t){this._ubo=t,this.applyUBO()}}]),e}(m)).prototype,"enableTimer",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=e(S.prototype,"delay",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),W=e(S.prototype,"duration",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(S.prototype,"ubo",[x],Object.getOwnPropertyDescriptor(S.prototype,"ubo"),S.prototype),V=e(S.prototype,"materialObject",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(S.prototype,"sprComponent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=S))||M));l._RF.pop()}}}));

System.register("chunks:///_virtual/UFXGlowInner.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,o,n,l,a,s,u,p,c,b,h,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty,i=t.inheritsLoose,o=t.assertThisInitialized,n=t.createClass},function(t){l=t.cclegacy,a=t._decorator,s=t.Color,u=t.Vec2,p=t.CCInteger,c=t.CCFloat,b=t.Material,h=t.Sprite,g=t.Component}],execute:function(){var y,w,f,m,C,O,z,d,j,U,B,F,P,v,x,I,_,G,R;l._RF.push({},"7e2a1qaCcVBDatBloCbGkts","UFXGlowInner",void 0);var S=a.ccclass,D=a.property,X=t("UFXGlowInnerUBO",(y=S("UFXGlowInnerUBO"),w=D(s),f=D(u),m=D({type:p,slide:!0,min:0,max:100}),C=D(c),y((d=e((z=function(){r(this,"glowColor",d,this),r(this,"textureSize",j,this),r(this,"glowRange",U,this),r(this,"glowThreshold",B,this)}).prototype,"glowColor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(140,255,255,255)}}),j=e(z.prototype,"textureSize",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(50,50)}}),U=e(z.prototype,"glowRange",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),B=e(z.prototype,"glowThreshold",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),O=z))||O));t("default",(F=S("UFXGlowInner"),P=D({type:X,serializable:!0}),v=D(b),x=D(h),F((e((_=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))||this)._ubo=new X,r(e,"materialObject",G,o(e)),r(e,"sprComponent",R,o(e)),e}i(e,t);var l=e.prototype;return l.start=function(){this.sprComponent&&(this.sprComponent.customMaterial=this.materialObject),this.applyUBO()},l.applyUBO=function(){this.ubo?this.materialObject&&(this.materialObject.setProperty("glowColor",this.ubo.glowColor),this.materialObject.setProperty("spriteWidth",this.ubo.textureSize.x),this.materialObject.setProperty("spriteHeight",this.ubo.textureSize.y),this.materialObject.setProperty("glowRange",this.ubo.glowColor),this.materialObject.setProperty("glowThreshold",this.ubo.glowRange)):console.warn("UBO not install")},n(e,[{key:"ubo",get:function(){return this._ubo},set:function(t){this._ubo=t,this.applyUBO()}}]),e}(g)).prototype,"ubo",[P],Object.getOwnPropertyDescriptor(_.prototype,"ubo"),_.prototype),G=e(_.prototype,"materialObject",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(_.prototype,"sprComponent",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=_))||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/UFXMosaic.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,o,a,n,l,s,u,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,r=t.inheritsLoose,o=t.assertThisInitialized,a=t.createClass},function(t){n=t.cclegacy,l=t._decorator,s=t.CCInteger,u=t.Material,c=t.Sprite,p=t.Component}],execute:function(){var b,y,h,m,f,O,g,C,z,F,U,d,j,M,w;n._RF.push({},"2f231CyY4hFlqOzFzIt/XGP","UFXMosaic",void 0);var x=l.ccclass,B=l.property,_=t("UFXMosaicUBO",(b=x("UFXMosaicUBO"),y=B({type:s,slide:!0,min:10,max:100}),h=B({type:s,slide:!0,min:10,max:100}),b((O=e((f=function(){i(this,"xValue",O,this),i(this,"yValue",g,this)}).prototype,"xValue",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),g=e(f.prototype,"yValue",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),m=f))||m));t("default",(C=x("UFXMosaic"),z=B(u),F=B(c),U=B({type:_,serializable:!0}),C((M=e((j=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,i(e,"materialObject",M,o(e)),i(e,"sprComponent",w,o(e)),e._ubo=new _,e}return r(e,t),e.prototype.applyUBO=function(){this.materialObject&&(this.materialObject.setProperty("xBlockCount",this.ubo.xValue),this.materialObject.setProperty("yBlockCount",this.ubo.yValue),this.sprComponent&&(this.sprComponent.customMaterial=this.materialObject))},a(e,[{key:"ubo",get:function(){return this._ubo},set:function(t){this._ubo=t,this.applyUBO()}}]),e}(p)).prototype,"materialObject",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(j.prototype,"sprComponent",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e(j.prototype,"ubo",[U],Object.getOwnPropertyDescriptor(j.prototype,"ubo"),j.prototype),d=j))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/UFXOutLine.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,r,n,l,a,u,s,p,c,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,o=t.inheritsLoose,r=t.assertThisInitialized,n=t.createClass},function(t){l=t.cclegacy,a=t._decorator,u=t.Color,s=t.CCFloat,p=t.Material,c=t.Sprite,b=t.Component}],execute:function(){var h,y,f,O,m,C,U,d,g,F,v,w,j,z,B;l._RF.push({},"4e6e3sCQFJPc6KOvsr8vFVA","UFXOutLine",void 0);var _=a.ccclass,P=a.property,L=t("UFXOutlineUBO",(h=_("UFXOutlineUBO"),y=P(u),f=P(s),h((C=e((m=function(){i(this,"outlineColor",C,this),i(this,"outlineWidth",U,this)}).prototype,"outlineColor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(140,255,255,255)}}),U=e(m.prototype,"outlineWidth",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),O=m))||O));t("default",(d=_("UFXOutLine"),g=P({type:L,serializable:!0}),F=P(p),v=P(c),d((e((j=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))||this)._ubo=new L,i(e,"materialObject",z,r(e)),i(e,"sprComponent",B,r(e)),e}o(e,t);var l=e.prototype;return l.start=function(){this.sprComponent&&(this.sprComponent.customMaterial=this.materialObject),this.applyUBO()},l.applyUBO=function(){this.ubo?this.materialObject&&(this.materialObject.setProperty("outlineColor",this.ubo.outlineColor),this.materialObject.setProperty("outlineWidth",this.ubo.outlineWidth)):console.warn("UBO not install")},n(e,[{key:"ubo",get:function(){return this._ubo},set:function(t){this._ubo=t,this.applyUBO()}}]),e}(b)).prototype,"ubo",[g],Object.getOwnPropertyDescriptor(j.prototype,"ubo"),j.prototype),z=e(j.prototype,"materialObject",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(j.prototype,"sprComponent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=j))||w));l._RF.pop()}}}));

System.register("chunks:///_virtual/UFXPointLight.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts"],(function(t){"use strict";var e,i,r,n,o,a,l,u,s,c,p,b,h,y,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,r=t.inheritsLoose,n=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,l=t._decorator,u=t.Color,s=t.Vec2,c=t.CCFloat,p=t.Material,b=t.Sprite,h=t.tween,y=t.Component},function(t){f=t.NumberToTween}],execute:function(){var m,d,w,g,O,P,C,_,v,z,U,j,F,B,L,M,x,X,D,T,N;a._RF.push({},"6367c+fMzRHwZXGVivMw/z4","UFXPointLight",void 0);var R=l.ccclass,k=l.property,H=t("UFXPointLightUBO",(m=R("UFXPointLightUBO"),d=k(u),w=k(s),g=k({type:c,min:.1,max:1}),m((C=e((P=function(){i(this,"centerColor",C,this),i(this,"centerPoint",_,this),i(this,"radius",v,this)}).prototype,"centerColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(255,255,255,255)}}),_=e(P.prototype,"centerPoint",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(.5,.5)}}),v=e(P.prototype,"radius",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),O=P))||O));t("default",(z=R("UFXPointLight"),U=k({type:c,slide:!0,min:0,max:10}),j=k({type:c,slide:!0,min:0,max:5}),F=k({type:H,serializable:!0}),B=k(p),L=k(b),z((X=e((x=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"delay",X,n(e)),i(e,"duration",D,n(e)),e._ubo=new H,i(e,"materialObject",T,n(e)),i(e,"sprComponent",N,n(e)),e._tween=null,e}r(e,t);var a=e.prototype;return a.start=function(){this.sprComponent&&(this.sprComponent.customMaterial=this.materialObject),this.applyUBO()},a.applyUBO=function(){this.ubo?this.materialObject&&(this.materialObject.setProperty("centerColor",this.ubo.centerColor),this.materialObject.setProperty("centerPoint",this.ubo.centerPoint),this.materialObject.setProperty("radius",this.ubo.radius)):console.warn("UBO not install")},a.applyTimer=function(){var t=this,e=new f(1),i=h(e).delay(this.delay).to(this.duration,{n:10},{progress:function(e,i,r,n){var o=Math.floor(e+(i-e)*n),a=Number((o/10).toFixed(2));return t.materialObject.setProperty("radius",a),o}}).call((function(){e.n=10,t.ubo.radius=1})).to(this.duration,{n:1},{progress:function(e,i,r,n){var o=Math.floor(e+(i-e)*n),a=Number((o/10).toFixed(2));return t.materialObject.setProperty("radius",a),o}}).call((function(){e.n=1,t.ubo.radius=.1}));this._tween=h(e).repeatForever(i),this._tween.start()},a.onDestroy=function(){this._tween&&(this._tween.stop(),this._tween=null)},o(e,[{key:"ubo",get:function(){return this._ubo},set:function(t){this._ubo=t,this.applyUBO()}}]),e}(y)).prototype,"delay",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),D=e(x.prototype,"duration",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),e(x.prototype,"ubo",[F],Object.getOwnPropertyDescriptor(x.prototype,"ubo"),x.prototype),T=e(x.prototype,"materialObject",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(x.prototype,"sprComponent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=x))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/UFXWaveLight.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,o,n,a,s,l,p,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,r=t.inheritsLoose,o=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,s=t._decorator,l=t.CCInteger,p=t.Material,c=t.Sprite,u=t.Component}],execute:function(){var h,b,y,m,f,g,v,O,U,w,B,C,F;a._RF.push({},"12453wtKeRBIIvEucTn8Tga","UFXWaveLight",void 0);var L=s.ccclass,_=s.property,j=t("UFXWaveLightUBO",(h=L("UFXWaveLightUBO"),b=_({type:l,slide:!0,min:0,max:20}),h((f=e((m=function(){i(this,"timer",f,this)}).prototype,"timer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=m))||y));t("UFXWaveLight",(g=L("UFXWaveLight"),v=_({type:j,serializable:!0}),O=_(p),U=_(c),g((e((B=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._ubo=new j,i(e,"materialObject",C,o(e)),i(e,"sprComponent",F,o(e)),e}r(e,t);var a=e.prototype;return a.start=function(){this.sprComponent&&(this.sprComponent.customMaterial=this.materialObject),this.applyUBO()},a.applyUBO=function(){this.ubo?this.materialObject&&this.materialObject.setProperty("u_time",this.ubo.timer):console.warn("UBO not install")},n(e,[{key:"ubo",get:function(){return this._ubo},set:function(t){this._ubo=t,this.applyUBO()}}]),e}(u)).prototype,"ubo",[v],Object.getOwnPropertyDescriptor(B.prototype,"ubo"),B.prototype),C=e(B.prototype,"materialObject",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(B.prototype,"sprComponent",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=B))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/UI_CardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GamePlay_UI_Controller.ts","./PVE_Enum.ts","./PVE_Helper.ts","./PVE_ResourceManager.ts","./GameplayConfig.ts","./PVE_GameplayControl.ts","./SpriteRatioHelper.ts","./InGameEvent.ts"],(function(e){"use strict";var t,i,n,o,r,a,s,l,c,u,h,p,d,m,f,g,v,_,y,w,b,C,E,I,T,D,P,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass,a=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){l=e.cclegacy,c=e._decorator,u=e.Color,h=e.Sprite,p=e.Node,d=e.Label,m=e.SpriteFrame,f=e.CCFloat,g=e.Vec3,v=e.SystemEvent,_=e.UITransform,y=e.Vec2,w=e.Component},function(e){b=e.PVEGamePlayUIController},function(e){C=e.PVE_Enum},function(e){E=e.PVEHelper},function(e){I=e.PVEResourceManager},function(e){T=e.GameplayConfig},function(e){D=e.PVEGameplayControl},function(e){P=e.SpriteRatioHelper},function(e){M=e.InGameEventID}],execute:function(){var O,S,U,z,L,F,R,G,V,k,B,H,N,x,A,W,j,Z,q,J,K,Q,X,Y,$,ee,te,ie,ne,oe,re,ae,se,le,ce,ue,he;l._RF.push({},"672b9ekLhBMlZ14s/STNEEi","UI_CardItem",void 0);var pe=c.ccclass,de=c.property;new u("#5EA07D"),new u("#5EA07D"),new u("#5A91E3"),new u("#F39DF6"),e("UICardItem",(O=pe("UICardItem"),S=de(h),U=de(P),z=de(h),L=de(p),F=de(p),R=de(d),G=de(d),V=de(h),k=de(h),B=de(h),H=de(h),N=de([m]),x=de([m]),A=de([m]),W=de(d),j=de(h),Z=de(f),O((K=t((J=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"imgIcon",K,o(t)),n(t,"imgIconHelper",Q,o(t)),n(t,"imgSpellIcon",X,o(t)),n(t,"cardNode",Y,o(t)),n(t,"spellNode",$,o(t)),n(t,"priceMana",ee,o(t)),n(t,"priceLE",te,o(t)),n(t,"rarityBg",ie,o(t)),n(t,"rarityMask",ne,o(t)),n(t,"elementIcon",oe,o(t)),n(t,"spriteCooldown",re,o(t)),n(t,"elementFrame",ae,o(t)),n(t,"rarityFrame",se,o(t)),n(t,"rarityMaskFrame",le,o(t)),n(t,"levelLabel",ce,o(t)),n(t,"levelBgSprite",ue,o(t)),t._cardData=null,t._isInCooldown=!1,t._enoughMana=!0,t._coolDownTime=0,n(t,"moveSpeed",he,o(t)),t._isMoving=!1,t._moveToPosition=new g,t._deltaDistance=0,t._distance=0,t._lerpRatio=0,t._newPosition=new g,t}i(t,e);var l=t.prototype;return l.start=function(){this.registerEvent(),D.GamePlayEvent.on(M.ManaChanged,this.OnManaChanged,this)},l.registerEvent=function(){this.node.on(v.EventType.MOUSE_DOWN,this.OnMouseDown,this),this.node.on(v.EventType.TOUCH_START,this.OnTouchDown,this),this.node.on(v.EventType.MOUSE_UP,this.OnMouseUp,this),this.node.on(v.EventType.TOUCH_END,this.OnTouchUp,this)},l.unregisterEvent=function(){this.node.off(v.EventType.MOUSE_DOWN,this.OnMouseDown,this),this.node.off(v.EventType.TOUCH_START,this.OnTouchDown,this),this.node.off(v.EventType.MOUSE_UP,this.OnMouseUp,this),this.node.off(v.EventType.TOUCH_END,this.OnTouchUp,this)},l.OnManaChanged=function(e){null!=this._cardData&&(this._enoughMana=this._cardData.ManaPrice<=e,this._enoughMana?0==this._isInCooldown&&(this.spriteCooldown.fillRange=0,this.spriteCooldown.node.active=!1):(this.spriteCooldown.fillRange=1,this.spriteCooldown.node.active=!0))},l.Init=function(e){var t=this;this._cardData=e;var i=e.Type==C.ECardType.Spell;if(this.rarityMask.node.active=i,this.elementIcon.node.parent.active=!i,this.cardNode.active=!i,this.spellNode.active=i,this.rarityMask.node.active=!i,i)I.Instance.LoadCardImg(e.ID,this.imgSpellIcon,!0,(function(){t.imgSpellIcon.getComponent(_).setContentSize(300,300)})),this.rarityBg.spriteFrame=this.rarityFrame[0],null!=this.levelLabel&&(this.levelLabel.node.active=!1);else{this.rarityBg.spriteFrame=this.rarityFrame[e.Rarity+1],this.rarityMask.spriteFrame=this.rarityMaskFrame[e.Rarity+1],I.Instance.LoadCardImg(e.ID,this.imgIconHelper);var n=e.Type==C.ECardType.Plant?T.GetPlantData(e.ID,!1):T.GetUndeadData(e.ID,!1);this.elementIcon.spriteFrame=this.elementFrame[n.configType],this.levelLabel.node.active=!0,this.levelLabel.string="LV."+e.level}this.initPriceLabel(e.ManaPrice,this.priceMana),this.initPriceLabel(e.LEPrice,this.priceLE),this.OnManaChanged(D.Instance.GetMana)},l.initPriceLabel=function(e,t){null==e||e<=0?t.node.parent.active=!1:(t.node.parent.active=!0,t.string=e.toString())},l.OnMouseDown=function(e){if(0==e.getButton()){var t=new y;e.getUILocation(t),this.OnBeginPress(t)}},l.OnTouchDown=function(e,t){var i=new y;e.getUILocation(i),this.OnBeginPress(i)},l.OnBeginPress=function(e){var t=this;b.pauseUI||(this.unregisterEvent(),this.scheduleOnce((function(){t.registerEvent()}),.1),b.Instance.StartDraggingCard(this._cardData,e))},l.OnMouseUp=function(e){this.OnEndPress()},l.OnTouchUp=function(e,t){this.OnEndPress()},l.OnEndPress=function(){b.Instance.CancelDraggingCard()},l.update=function(e){if(!0===this._isInCooldown&&(this._coolDownTime=this._coolDownTime+e,1==this._enoughMana)){var t=1-this._coolDownTime/this._cardData.CooldownTime;t<=0?this.StopCooldown():this.spriteCooldown.fillRange=t}if(!0===this._isMoving){this._deltaDistance=this.moveSpeed*e;var i=new g(this._moveToPosition.x,this._moveToPosition.y,this._moveToPosition.z);this._distance=g.distance(this.node.position,i),this._distance>0&&this._deltaDistance<this._distance?(this._lerpRatio=this._deltaDistance/this._distance,g.lerp(this._newPosition,this.node.position,i,this._lerpRatio),this.node.position=this._newPosition):(this._isMoving=!1,this.node.setPosition(this._moveToPosition.x,this._moveToPosition.y,0))}},l.StartCooldown=function(){this._isInCooldown=!0,this._coolDownTime=0,this.spriteCooldown.fillRange=1,this.spriteCooldown.node.active=!0},l.StopCooldown=function(){var e=a(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._isInCooldown=!1,this._coolDownTime=this._cardData.CooldownTime,this.spriteCooldown.fillRange=0,e.next=5,E.WaitForSec(.02);case 5:this.spriteCooldown.node.active=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.StartMoving=function(e){this._moveToPosition=new g(e.x,e.y,e.z),this._isMoving=!0},r(t,[{key:"Data",get:function(){return this._cardData}}]),t}(w)).prototype,"imgIcon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(J.prototype,"imgIconHelper",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(J.prototype,"imgSpellIcon",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(J.prototype,"cardNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(J.prototype,"spellNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(J.prototype,"priceMana",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(J.prototype,"priceLE",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(J.prototype,"rarityBg",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(J.prototype,"rarityMask",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(J.prototype,"elementIcon",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(J.prototype,"spriteCooldown",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(J.prototype,"elementFrame",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),se=t(J.prototype,"rarityFrame",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),le=t(J.prototype,"rarityMaskFrame",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ce=t(J.prototype,"levelLabel",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(J.prototype,"levelBgSprite",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(J.prototype,"moveSpeed",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),q=J))||q));l._RF.pop()}}}));

System.register("chunks:///_virtual/UI_CardScrollview.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_Constant.ts","./UI_CardItem.ts","./PVE_Helper.ts","./GameplayModel.ts","./PVE_GamePlay_UI_Controller.ts","./PVE_GameplayControl.ts","./PVEService.ts","./Utility.ts"],(function(t){"use strict";var e,n,r,a,i,o,s,c,l,u,d,h,f,C,p,w,v,_,I,m,D,b,g,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized,i=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,l=t.Node,u=t.Label,d=t.Sprite,h=t.Button,f=t.Vec3,C=t.instantiate,p=t.randomRangeInt,w=t.Component},function(t){v=t.PVE_Constant},function(t){_=t.UICardItem},function(t){I=t.PVEHelper},function(t){m=t.GameplayModel},function(t){D=t.PVEGamePlayUIController},function(t){b=t.PVEGameplayControl},function(t){g=t.PVEService},function(t){y=t.Utility}],execute:function(){var L,x,A,P,R,S,E,U,G,M,V,k,N;s._RF.push({},"38461C697xKAZQaJMS2hVzb","UI_CardScrollview",void 0);var O=c.ccclass,F=c.property,B=[50,100,200,325];t("UICardScrollview",(L=O("UICardScrollview"),x=F(l),A=F(l),P=F(u),R=F(d),S=F(h),L((G=e((U=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,r(e,"content",G,a(e)),r(e,"cardPrefab",M,a(e)),r(e,"redrawAmount",V,a(e)),r(e,"redrawFill",k,a(e)),r(e,"btnRedraw",N,a(e)),e._cardInstanceList=new Array,e._positionList=new Array,e._startPosition=new f(0,-750,0),e._userCardData=new Array,e.intervalCountDown=null,e.remainTime=0,e.redrawCount=0,e.excludeList=[],e}n(e,t);var s=e.prototype;return s.start=function(){for(var t=0;t<v.CARD_MAX_AMOUNT_VISIBLE;t++){var e=null;e=C(this.cardPrefab).getComponent(_),this._cardInstanceList.push(e),e.node.setParent(this.content);var n=-220*t-25;this._positionList.push(n),e.node.setPosition(new f(0,n,0)),e.node.active=!1}this.refreshRedrawAmount()},s.showCountDown=function(t){var e=this;this.redrawFill.fillRange=1,this.intervalCountDown=y.setIntervalImmediately((function(){var n=t/20;null!=e.redrawFill?(e.redrawFill.fillRange=Math.round(100*n)/100,t<=0&&e.resetCountDown(),e.remainTime=t,t--):clearInterval(e.intervalCountDown)}),1e3)},s.resetCountDown=function(){this.remainTime=0,this.redrawFill.fillRange=0,this.btnRedraw.interactable=!0,clearInterval(this.intervalCountDown)},s.getRandomCard=function(){for(var t=p(0,this._userCardData.length),e=0;this.excludeList.indexOf(this._userCardData[t].Index)>=0&&e<1e3;)e++,t=p(0,this._userCardData.length);return e>=1e3?(console.warn("no more card",this.excludeList,this._userCardData),null):this._userCardData[t]},s.InitDeckCard=function(){var t=i(o().mark((function t(){var e,n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=m.GetCardData(),n=0;n<e.length;n++)e[n].Index=n,this._userCardData.push(e[n]);return console.log("this._userCardData",this._userCardData),t.next=5,I.WaitForSec(.2);case 5:r=0;case 6:if(!(r<v.CARD_MAX_AMOUNT_VISIBLE)){t.next=13;break}return this.RandomNewCard(),t.next=10,I.WaitForSec(.02);case 10:r++,t.next=6;break;case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.RandomNewCard=function(){var t=this.getRandomCard();null!=t?(this.SetUpPlayerCard(t),this.excludeList.indexOf(t.Index)<0&&this.excludeList.push(t.Index)):console.warn("no more card")},s.GetCardByCardIndex=function(t){for(var e=0;e<this._userCardData.length;e++)if(this._userCardData[e].Index==t)return this._userCardData[e]},s.GetDeactivateCard=function(){for(var t=0;t<v.CARD_MAX_AMOUNT_VISIBLE;t++)if(!1===this._cardInstanceList[t].node.active)return this._cardInstanceList[t];return null},s.GetActivateCardCount=function(){for(var t=0,e=0;e<v.CARD_MAX_AMOUNT_VISIBLE;e++)!0===this._cardInstanceList[e].node.active&&(t+=1);return t},s.GetAbovePosition=function(t){for(var e=1;e<this._positionList.length;e++)if(this._positionList[e]===t.y)return new f(0,this._positionList[e-1],0);return f.NEG_ONE},s.RedrawClick=function(){var t=i(o().mark((function t(){var e,n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b.Instance.IsPause){t.next=2;break}return t.abrupt("return");case 2:if(!D.pauseUI){t.next=4;break}return t.abrupt("return");case 4:return console.log("RedrawClick"),t.next=7,g.Redraw4();case 7:for(e=t.sent,console.log("Redraw4",e),this.showCountDown(20),this.redrawCount++,this.refreshRedrawAmount(),n=0;n<this._cardInstanceList.length;n++)r=this._cardInstanceList[n],this.OnCardBack(r.Data.Index),r.node.active=!1;this.randomListCard(),D.Instance.RefreshLE();case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.refreshRedrawAmount=function(){var t=this.redrawCount>=B.length?B[B.length-1]:B[this.redrawCount];this.redrawAmount.string=t+""},s.randomListCard=function(){var t=i(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<v.CARD_MAX_AMOUNT_VISIBLE)){t.next=8;break}return this.RandomNewCard(),t.next=5,I.WaitForSec(.02);case 5:e++,t.next=1;break;case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.OnCardBack=function(t){var e=this.excludeList.indexOf(t);e>=0&&this.excludeList.splice(e,1)},s.SetUpPlayerCard=function(t){var e=this.GetDeactivateCard();if(null!==e){e.node.setParent(this.content),e.node.setPosition(this._startPosition);var n=e.getComponent(_);n.Init(t),n.StartMoving(new f(0,-220*this.GetActivateCardCount()-25,0)),e.node.active=!0}else console.log("No empty slot to set up new card!!!")},s.StartCooldown=function(t){for(var e=0;e<this._cardInstanceList.length;e++){var n=this._cardInstanceList[e];!0===n.node.active&&n.Data.ID==t&&n.StartCooldown()}},s.OnCardUsed=function(t){for(var e=this._userCardData[t],n=0,r=null,a=0;a<this._cardInstanceList.length;a++)if((r=this._cardInstanceList[a]).Data.Index===t){n=r.node.position.y,r.node.position=this._startPosition,r.node.active=!1;break}this.RandomNewCard(),this.StartCooldown(e.ID);for(var i=0;i<this._cardInstanceList.length;i++)if(!0===(r=this._cardInstanceList[i]).node.active&&r.node.position.y<n){var o=this.GetAbovePosition(r.node.position);if(o===f.NEG_ONE)continue;r.StartMoving(o)}},e}(w)).prototype,"content",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(U.prototype,"cardPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(U.prototype,"redrawAmount",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(U.prototype,"redrawFill",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(U.prototype,"btnRedraw",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=U))||E));s._RF.pop()}}}));

System.register("chunks:///_virtual/UI3dHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts"],(function(e){"use strict";var t,i,r,n,a,o,s,l,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.UITransform,l=e.Node,c=e.Component},function(e){p=e.Utility}],execute:function(){var u,h,d,f,y,m,v,z,b;a._RF.push({},"38d3ezz0aZIO4UBZTdDGikv","UI3dHelper",void 0);var U=o.ccclass,g=o.property;e("UI3dHelper",(u=U("UI3dHelper"),h=g(s),d=g(s),f=g(l),u((v=t((m=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"canvas",v,n(t)),r(t,"thisTranform",z,n(t)),r(t,"Camera",b,n(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){p.addResizeCallBack(this.node,this.UpdateSize.bind(this)),this.UpdateSize()},a.update=function(){var e=this.Camera.position;this.node.setPosition(e.x,e.y,0)},a.UpdateSize=function(){this.thisTranform.width=this.canvas.width,this.thisTranform.height=this.canvas.height},a.onDestroy=function(){p.removeResizeCallBack(this.node)},t}(c)).prototype,"canvas",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(m.prototype,"thisTranform",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(m.prototype,"Camera",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=m))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIAddUndead.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AddUndeadItem.ts","./PopUpBase.ts","./UIPopupManager.ts","./ResourcesManager.ts","./ExpeditionServiceApi.ts","./UnDeadData.ts","./PageNumber.ts"],(function(e){"use strict";var t,n,a,i,s,o,r,d,l,c,u,h,p,f,g,U,v,b,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,r=e.Button,d=e.Node,l=e.instantiate,c=e.Vec3,u=e.tween,h=e.v3},function(e){p=e.AddUndeadItem},function(e){f=e.PopUpBase},function(e){g=e.UIPopupManager},function(e){U=e.ResourcesManager},function(e){v=e.ExpeditionServiceApi},function(e){b=e.default},function(e){m=e.PageNumber}],execute:function(){var I,C,w,y,A,S,D,N,V,P,O,k,E,B,M;s._RF.push({},"6f791vt1jFGDo/wdZ1DnVfh","UIAddUndead",void 0);var z=o.ccclass,L=o.property;e("UIAddUndead",(I=z("UIAddUndead"),C=L(r),w=L(r),y=L(d),A=L(d),S=L(m),D=L(d),I((P=t((V=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,a(t,"btnBgClose",P,i(t)),a(t,"btnClose",O,i(t)),a(t,"noAssetView",k,i(t)),a(t,"contentView",E,i(t)),a(t,"pageNumber",B,i(t)),a(t,"prefabItem",M,i(t)),t.listUndead=[],t.listUndeadData=[],t.manager=void 0,t}n(t,e);var s=t.prototype;return s.onInit=function(e){this.manager=e,this.btnBgClose.node.on(r.EventType.CLICK,this.onCloseClicked,this),this.btnClose.node.on(r.EventType.CLICK,this.onCloseClicked,this),this.pageNumber.node.on("pageNumber:clicked",this.updatePage,this),this.initUndeadItem()},s.requestLoadUndead=function(){var e=this;v.RequestLoadUndeadWithStatus("6",(function(t){var n=JSON.parse(t);if(0==n.status){var a=n.data;e.noAssetView.active=null==a||a.length<=0;for(var i=0;i<a.length;i++){var s=a[i];if(null!=s){var o=new b(s);if(e.listUndeadData.push(o),!(i>=e.listUndead.length)){var r=e.listUndead[i];null!=r&&r.loadData(o)}}}var d=a.length%4==0?Math.floor(a.length/4):Math.floor(a.length/4)+1;e.pageNumber.setTotalPage(d)}else e.noAssetView.active=!0,g.Instance.ShowToast("Error",U.Instance.GetErrorMessage(n.status),0)}))},s.initUndeadItem=function(){for(var e=0;e<4;e++){var t=l(this.prefabItem);t.position=c.ZERO,t.parent=this.contentView,t.active=!1;var n=t.getComponent(p);null!=n&&(n.resetData(),t.on("AddUndeadItem:select",this.AddUndeadClick,this),this.listUndead.push(n))}},s.getUndeadItem=function(){var e=this.listUndead.find((function(e){return 1==e.node.active}));if(null==e||null==e){var t=l(this.prefabItem);t.on("AddUndeadItem:select",this.AddUndeadClick,this);var n=t.getComponent(p);n.resetData(),n&&(n.node.position=c.ZERO,n.node.setParent(this.contentView),this.listUndead.push(n),e=n)}return e},s.AddUndeadClick=function(e){var t,n=this.manager.uIBarn.data.id,a=null!=(t=e.id)?t:e._id;v.RequestAssignUndeadToCage(a,n,this.onSelectUndeadSuccess.bind(this))},s.onSelectUndeadSuccess=function(e){var t=JSON.parse(e);0==t.status?(this.onCloseClicked(),this.manager.uiUndeadView.refreshView()):g.Instance.ShowToast("Error",U.Instance.GetErrorMessage(t.status),0)},s.OnShow=function(e){var t=this;this.node.active?(this.fadeUIOpacity.opacity=255,this.ScaleNode.setScale(1,1,1),this.requestLoadUndead()):(this.node.active=!0,null!=this.ScaleNode&&null!=this.fadeUIOpacity&&(this.ScaleNode.setScale(.8,.8,.8),this.fadeUIOpacity.opacity=0,u(this.fadeUIOpacity).to(.2,{opacity:255}).start(),u(this.ScaleNode).to(.3,{scale:h(1,1,1)},{easing:"backOut"}).call((function(){t.requestLoadUndead()})).start()))},s.updatePage=function(e){for(var t=this.listUndead.length,n=e,a=0;a<t;a++){var i=this.listUndead[a];if(i){var s=a+4*n,o=this.listUndeadData[s];i.node.active=null!=o&&s<this.listUndeadData.length,o&&i.loadData(o)}}},s.resetData=function(){this.listUndeadData.length=0,this.listUndead.map((function(e){return e.node.active=!1})),this.noAssetView.active=!0},s.onCloseClicked=function(){e.prototype.OnHide.call(this),this.resetData(),this.manager.uIBarn.node.active=!0,this.manager.refreshCage()},t}(f)).prototype,"btnBgClose",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(V.prototype,"btnClose",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(V.prototype,"noAssetView",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(V.prototype,"contentView",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(V.prototype,"pageNumber",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(V.prototype,"prefabItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=V))||N));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIBarn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConvertJsonObject2.ts","./ResourcesManager.ts","./ExpeditionHelper.ts","./UIUndeadItem.ts"],(function(t){"use strict";var e,i,n,a,r,s,o,l,u,d,h,p,c,b,g,S,f,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,o=t.Button,l=t.Sprite,u=t.Node,d=t.Label,h=t.SpriteFrame,p=t.LabelOutline,c=t.Color,b=t.Component},function(t){g=t.convertToString},function(t){S=t.ResourcesManager},function(t){f=t.ExpeditionHelper},function(t){B=t.UndeadStatus}],execute:function(){var m,w,I,v,y,E,D,L,F,U,A,M,C,N,T,z,R,O,P;t("StateBG",void 0),r._RF.push({},"48d0dRbPdBIf7eM/C0si5vd","UIBarn",void 0);var _,x=s.ccclass,G=s.property;!function(t){t[t.NORMAL=0]="NORMAL",t[t.CLAIM=1]="CLAIM"}(_||(_=t("StateBG",{})));t("UIBarn",(m=x("UIBarn"),w=G(o),I=G(l),v=G(u),y=G(l),E=G(l),D=G(d),L=G([h]),F=G([h]),m((M=e((A=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"btnBarn",M,a(e)),n(e,"sprIconUndead",C,a(e)),n(e,"nodeBgShadow",N,a(e)),n(e,"sprBgShadow",T,a(e)),n(e,"sprBgStatus",z,a(e)),n(e,"lbStatus",R,a(e)),n(e,"bgsFrameShadow",O,a(e)),n(e,"bgsShadow",P,a(e)),e.barnID="",e.barnData=void 0,e.isEmpty=!0,e.sprBarn=void 0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.btnBarn.node.on(o.EventType.CLICK,this.onShowUndead,this),this.sprBarn=this.getComponent(l)},r.resetView=function(){this.barnData=null,this.isEmpty=!0,this.sprIconUndead.spriteFrame=null,this.nodeBgShadow.active=this.isEmpty,this.lbStatus.string="EMPTY"},r.updateBackgroundState=function(t){if(!(t>=this.bgsShadow.length||t>=this.bgsFrameShadow.length)){if(this.nodeBgShadow.active){this.sprBgShadow.spriteFrame=this.bgsShadow[t];var e=this.lbStatus.getComponent(p);e&&(e.color=t==_.NORMAL?new c("#9D4168"):new c("#419D4A"))}this.sprBgStatus.spriteFrame=this.bgsFrameShadow[t]}},r.loadBarn=function(t){var e=this;this.barnData=t,this.barnID=g(t.id);var i=t.undead,n=_.NORMAL;if(this.isEmpty=null==i||i.status==B.UNASSIGNED,this.sprIconUndead.spriteFrame=null,this.nodeBgShadow.active=this.isEmpty,this.lbStatus.string="EMPTY",0==this.isEmpty&&i){var a=f.GetTotalLifeTimeLeft(i)<=0;this.nodeBgShadow.active=!1,this.lbStatus.string="",i.status==B.IN_EXPEDITION&&(this.nodeBgShadow.active=!0,this.checkFinishExpedition()?(n=_.CLAIM,this.lbStatus.string="FINISH!"):this.lbStatus.string="AWAY"),a&&(this.nodeBgShadow.active=!0,this.lbStatus.string="DEAD"),S.Instance.GetUndead(i.code.toLowerCase(),i.stage,function(t){this.sprIconUndead.spriteFrame=t}.bind(this))}var r=t.tier;this.updateBackgroundState(n),S.Instance.LoadBarnSprite(r,(function(t){e.sprBarn.spriteFrame=t})),this.sprBarn&&(this.sprBarn.grayscale=this.isEmpty)},r.checkFinishExpedition=function(){if(null==this.barnData||null==this.barnData.undead)return!1;var t=this.barnData.undead;if(t.status!==B.IN_EXPEDITION)return!1;var e=t.current_expedition;if(null==e)return!1;var i=f.GetTotalSecTimeLeft(e);return(i+=60)<=0||void 0},r.onShowUndead=function(){this.node.emit("uiBarn:select",this.barnData)},e}(b)).prototype,"btnBarn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(A.prototype,"sprIconUndead",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(A.prototype,"nodeBgShadow",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(A.prototype,"sprBgShadow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(A.prototype,"sprBgStatus",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(A.prototype,"lbStatus",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(A.prototype,"bgsFrameShadow",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=e(A.prototype,"bgsShadow",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=A))||U));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIBugReport.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./GatheringServicesApi.ts","./DropDown.ts","./PopUpBase.ts","./Utility.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(t){"use strict";var e,i,r,n,s,o,a,u,c,l,p,h,g,m,f,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,a=t.EditBox,u=t.Label,c=t.sys},function(t){l=t.ConfigApi},function(t){p=t.GatheringServicesApi},function(t){h=t.DropDown},function(t){g=t.PopUpBase},function(t){m=t.Utility},function(t){f=t.ResourcesManager},function(t){w=t.UIPopupManager}],execute:function(){var d,I,T,y,S,v,x,R,b,D,E;s._RF.push({},"cd70bLMm+JEab+p1iKvIgcu","UIBugReport",void 0);var U=o.ccclass,C=o.property;t("UIBugReport",(d=U("UIBugReport"),I=C(a),T=C(a),y=C(h),S=C(u),d((R=e((x=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,r(e,"email",R,n(e)),r(e,"des",b,n(e)),r(e,"IssueDropDown",D,n(e)),r(e,"waitText",E,n(e)),e.IssueType={"Fishing Game":"FISHING","Mining Game":"MINING","Chopping Game":"CHOPPING",Farming:"FARMING",Market:"MARKET","Convert LE > PVU or PVU > LE":"CONVERT_PVU",Other:"OTHER","Select an issue":"SELECT"},e.Key="report_bug_next",e.nextRequest=void 0,e.timeUpdateTimeOut=0,e}i(e,t);var s=e.prototype;return s.Show=function(){t.prototype.OnShow.call(this),this.nextRequest=Number(c.localStorage.getItem(this.Key)),this.StartCoundDown()},s.Hide=function(){clearTimeout(this.timeUpdateTimeOut),t.prototype.OnHide.call(this)},s.OnBtnSumit=function(){var t=this;if(this.validInput()){var e={topic:this.IssueType[this.IssueDropDown.CurrentItem.string],message:this.des.string,gameVersion:l.VERSION,platform:c.os};c.isBrowser?(e.osSystem=c.browserType,e.osVersion=c.browserVersion):c.isMobile&&(e.osSystem=c.os,e.osVersion=c.osVersion);var i=this.email.string.trim();""!=i&&(e.email=i),p.ReportBug(e,(function(e){var i=JSON.parse(e);0==i.status?(t.nextRequest=i.data.nextRequest,c.localStorage.setItem(t.Key,t.nextRequest.toString()),clearTimeout(t.timeUpdateTimeOut),t.StartCoundDown(),t.des.string="",w.Instance.ShowUIThanks()):w.Instance.ShowToast("Error",f.Instance.GetErrorMessage(i.status),0)}),(function(t){}))}},s.validInput=function(){return this.waitText.node.active=!0,this.getNextReportBug()>0?(w.Instance.ShowToast("Error","Please wait for a moment to retry.",0),!1):0==this.IsValidEmail(this.email.string)?(this.waitText.string="Incorrect Email",!1):"SELECT"==this.IssueType[this.IssueDropDown.CurrentItem.string]?(this.waitText.string="Select issue type",!1):this.des.string.length<50?(this.waitText.string="Description must be at least 50 characters",!1):(this.waitText.node.active=!1,!0)},s.getNextReportBug=function(){return this.nextRequest-m.GetTimeNow()},s.IsValidEmail=function(t){var e=t.trim();if(""==e)return!0;if(e.endsWith("."))return!1;try{return!!e.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}catch(t){return!1}},s.StartCoundDown=function(){var t=this,e=Math.floor((this.nextRequest-m.GetTimeNow())/1e3);e<=0?this.waitText.node.active=!1:(this.waitText.node.active=!0,this.timeUpdateTimeOut=setTimeout((function(){t.StartCoundDown()}),1e3),this.waitText.node.active=!0,this.waitText.string="Next report in: "+m.ConvertSecondsToTimeSecond(e))},e}(g)).prototype,"email",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=e(x.prototype,"des",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(x.prototype,"IssueDropDown",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(x.prototype,"waitText",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=x))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/UICraftSuccess.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts","./Utility.ts","./SoundController.ts"],(function(t){"use strict";var e,i,n,o,a,r,s,c,l,p,u,h,y,w,m,f,b,d,I,v,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.UIOpacity,c=t.Node,l=t.Sprite,p=t.Label,u=t.Button,h=t.SpriteFrame,y=t.tween,w=t.Vec3,m=t.Component,f=t.instantiate,b=t.ParticleSystem},function(t){d=t.ResourcesManager},function(t){I=t.Utility},function(t){v=t.SoundController,S=t.EnumSound}],execute:function(){var g,C,R,D,O,z,F,P,U,N,k,B,_,E,H,L,x,j,M,T,A,V,W,X,Z,q,K;a._RF.push({},"a4774aTrFVOj6CBkjWq7QsX","UICraftSuccess",void 0);var Q=r.ccclass,G=r.property;t("UICraftSuccess",(g=Q("UICraftSuccess"),C=G(s),R=G(c),D=G(l),O=G(c),z=G(p),F=G(p),P=G(u),U=G([c]),N=G(c),k=G(c),B=G(c),_=G(h),g((L=e((H=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"opacity",L,o(e)),n(e,"craftContent",x,o(e)),n(e,"sprItemResult",j,o(e)),n(e,"sprItemPrefab",M,o(e)),n(e,"lbItemName",T,o(e)),n(e,"lbDescription",A,o(e)),n(e,"btnCollect",V,o(e)),n(e,"particleRarityItems",W,o(e)),n(e,"particleFront",X,o(e)),n(e,"particleSuccess",Z,o(e)),n(e,"particleBack",q,o(e)),n(e,"sprResultDefault",K,o(e)),e}i(e,t);var a=e.prototype;return a.start=function(){this.btnCollect.node.on(u.EventType.CLICK,this.onHided,this)},a.onInit=function(){var t=this;this.node.active=!1,this.opacity.opacity=1,this.btnCollect.node.active=!1,this.lbItemName.string="",this.tweenHide=y(this.opacity).to(.3,{opacity:1}).delay(.1).call((function(){t.node.active=!1})),this.opacityItem=this.lbItemName.getComponent(s),this.opacityDescription=this.lbDescription.getComponent(s),this.opacityItem.opacity=0,this.opacityDescription.opacity=0,this.tweenOpacityItem=y(this.opacityItem).delay(5.1).to(.5,{opacity:255}),this.tweenOpacityDescription=y(this.opacityDescription).delay(5.6).to(.5,{opacity:255}),this.tweenShowResult=y(this.sprItemResult.node).delay(2.2).to(.2,{scale:new w(1.1,1.1,1.1)}).delay(.2).to(.15,{scale:w.ONE})},a.onShow=function(t){var e=this;this.node.active=!0,this.opacity.opacity=1,this.onResetUI(),this.tweenShow&&this.tweenShow.stop(),this.tweenShow=y(this.opacity).to(.3,{opacity:255}).delay(.2).call((function(){e.onShown(t)})),this.tweenShow.start()},a.onShown=function(t){var e=this,i=t.itemsCraft,n=t.itemResult,o=n.split("_"),a=o.length>0?o[0]:"",r=I.getRarityWithName(a),c=i.length,p=this.getPositionSlots(c);v.Instance.StopSoundLoop(),v.Instance.PlaySound(S.UI_SFX_Crafting);for(var u=function(){var t=i[h];if(""==t)return{v:void 0};var n=f(e.sprItemPrefab);n.active=!0,n.scale=w.ZERO,n.setParent(e.craftContent),n.position=p[h];var o=n.getComponent(l),a=n.getComponent(s),r=n.getComponentInChildren(b);o&&e.loadSpriteItem(t,o),a.opacity=0,r.node.active=!1,n.scale=new w(.7,.7,.7);var c=y(a).to(.1,{opacity:130}).delay(.2*h).to(.1,{opacity:255}).delay(2.3).to(.3,{opacity:0});y(n).delay(.2*h).to(.1,{scale:new w(1.1,1.1,1.1)}).call((function(){r.node.active=!0})).to(.1,{scale:w.ONE}).delay(1.8).to(.12,{position:new w(n.position.x,n.position.y+10)}).to(.12,{position:new w(n.position.x,n.position.y-10)}).to(.12,{position:new w(n.position.x,n.position.y+10)}).to(.12,{position:new w(n.position.x,n.position.y-10)}).to(.5,{position:w.ZERO}).start(),c.start()},h=0;h<c;h++){var m=u();if("object"==typeof m)return m.v}this.tweenShowResult=y(this.sprItemResult.node).delay(2.2).to(.2,{scale:new w(1.1,1.1,1.1)}).delay(.2).to(.15,{scale:w.ONE}).call((function(){e.particleBack.active=!0,e.particleFront.active=!0})).delay(1.4).call((function(){e.particleSuccess.active=!0,e.activeParticleRarity(r),e.loadSpriteItem(n,e.sprItemResult);var t=n.replace("_"," ");e.lbItemName.string=t.toUpperCase(),e.lbDescription.string=e.lbDescription.string.toLocaleUpperCase(),e.btnCollect.node.active=!0})),this.tweenShowResult.start(),this.tweenOpacityItem.start(),this.tweenOpacityDescription.start()},a.onHided=function(){this.tweenHide&&this.tweenHide.stop(),this.node.emit("uiCraftSuccess:onClicked"),this.particleBack.active=!1,this.particleFront.active=!1,this.particleRarityItems.map((function(t){return t.active=!1})),this.tweenHide.start()},a.onResetUI=function(){this.opacityItem.opacity=0,this.opacityDescription.opacity=0,this.btnCollect.node.active=!1,this.lbItemName.string="",this.particleRarityItems.map((function(t){return t.active=!1})),this.craftContent.removeAllChildren(),this.tweenOpacityItem&&this.tweenOpacityItem.stop(),this.tweenOpacityDescription&&this.tweenOpacityDescription.stop(),this.tweenShowResult&&this.tweenShowResult.stop(),this.particleBack.active=!1,this.particleFront.active=!1,this.particleSuccess.active=!1,this.sprItemResult.spriteFrame=this.sprResultDefault},a.activeParticleRarity=function(t){for(var e=this.particleRarityItems.length,i=0;i<e;i++){var n=this.particleRarityItems[i];n&&(n.active=i==t)}},a.getPositionSlots=function(t){return 5==t?[new w(0,300),new w(-320,110),new w(320,110),new w(-250,-110),new w(250,-110)]:6==t?[new w(0,310),new w(-270,150),new w(270,150),new w(-280,-130),new w(280,-130),new w(0,-320)]:[new w(-250,200),new w(250,200),new w(250,-200),new w(-250,-200)]},a.loadSpriteItem=function(t,e){d.Instance.LoadMaterialSprite(t,(function(t){e.spriteFrame=t}))},e}(m)).prototype,"opacity",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(H.prototype,"craftContent",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(H.prototype,"sprItemResult",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(H.prototype,"sprItemPrefab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(H.prototype,"lbItemName",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(H.prototype,"lbDescription",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(H.prototype,"btnCollect",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(H.prototype,"particleRarityItems",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=e(H.prototype,"particleFront",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=e(H.prototype,"particleSuccess",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(H.prototype,"particleBack",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(H.prototype,"sprResultDefault",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=H))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIDeckBuilder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./UIDeckCardItem.ts","./PVEService.ts","./PlantCardData.ts","./UndeadCardData.ts","./UserCardData.ts","./ConvertJsonObject.ts","./UIPopupManager.ts","./GameplayModel.ts","./PVE_Enum.ts","./PVEPopupManager.ts","./PageNumber.ts"],(function(e){"use strict";var t,n,a,r,i,s,o,l,c,u,d,h,p,D,f,g,k,w,y,m,C,b,v,P,T,I,S,R,x,E,U,M,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){o=e.cclegacy,l=e._decorator,c=e.UIOpacity,u=e.Node,d=e.Button,h=e.ToggleContainer,p=e.Sprite,D=e.Label,f=e.Toggle,g=e.tween,k=e.log,w=e.Vec3,y=e.instantiate,m=e.Component},function(e){C=e.Utility},function(e){b=e.UIDeckCardItem},function(e){v=e.PVEService},function(e){P=e.default},function(e){T=e.default},function(e){I=e.SpellData,S=e.SystemCardData},function(e){R=e.convertToString},function(e){x=e.UIPopupManager},function(e){E=e.GameplayModel},function(e){U=e.PVE_Enum},function(e){M=e.PVEPopupManager},function(e){L=e.PageNumber}],execute:function(){var A,N,V,O,z,q,J,G,_,B,W,K,F,j,Y,H,Z,Q,X,$,ee,te,ne,ae,re,ie,se,oe,le,ce,ue,de,he;e("ToggleType",void 0),o._RF.push({},"785f9qS2kRMAI8RAbukf9c+","UIDeckBuilder",void 0);var pe,De=l.ccclass,fe=l.property;!function(e){e.PLANT="TogglePlant",e.UNDEAD="ToggleUndead",e.SPELL="ToggleSpell"}(pe||(pe=e("ToggleType",{})));var ge=[100,250,500,1e3];e("UIDeckBuilder",(A=De("UIDeckBuilder"),N=fe(c),V=fe(u),O=fe(d),z=fe(d),q=fe(h),J=fe(u),G=fe(u),_=fe(d),B=fe(p),W=fe(u),K=fe(u),F=fe(D),j=fe(D),Y=fe(D),H=fe(L),A((X=t((Q=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,a(t,"nodeOpacity",X,r(t)),a(t,"topView",$,r(t)),a(t,"btnClose",ee,r(t)),a(t,"btnPlay",te,r(t)),a(t,"togContainer",ne,r(t)),a(t,"deckView",ae,r(t)),a(t,"prefabCardItem",re,r(t)),a(t,"btnRedraw",ie,r(t)),a(t,"sprCountDownRedraw",se,r(t)),a(t,"mainDeckView",oe,r(t)),a(t,"sysDeckView",le,r(t)),a(t,"lbDeckPower",ce,r(t)),a(t,"lbTotalCard",ue,r(t)),a(t,"lbRedrawCost",de,r(t)),a(t,"page",he,r(t)),t.lobbyController=null,t.intervalCountDown=null,t.currentType=pe.PLANT,t.plantDeck=[],t.undeadDeck=[],t.spellDeck=[],t.systemDeck=[],t.listSystemDeck=[],t.listCardItems=[],t.listMainDeck=[],t.powerDeck=0,t.systemPowerDeck=0,t.maxPowerDeck=0,t.remainTime=0,t.redrawCardTime=0,t.currentPage=0,t.plantTotalPage=1,t.undeadTotalPage=1,t.spellTotalPage=1,t}n(t,e);var o=t.prototype;return o.onInit=function(e){this.lobbyController=e,this.btnClose.node.on(d.EventType.CLICK,this.onCloseClicked,this),this.btnPlay.node.on(d.EventType.CLICK,this.onPlayClicked,this),this.btnRedraw.node.on(d.EventType.CLICK,this.onRedrawClicked,this);for(var t=this.togContainer.toggleItems,n=0;n<t.length;n++){var a=t[n];null!=a&&(a.node.on(f.EventType.TOGGLE,this.onToggleChange,this),a.isChecked=a.node.name==pe.PLANT)}this.currentType=pe.PLANT,this.maxPowerDeck=1e3,this.powerDeck=0,this.systemPowerDeck=0,this.loadCardSystem(),this.page.node.on("pageNumber:clicked",this.updatePage,this)},o.updatePage=function(){var e=i(s().mark((function e(t){var n,a,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentPage=t,this.currentType!=pe.PLANT){e.next=8;break}return e.next=4,v.RequestLoadUserCardAsync("plant",this.currentPage+1);case 4:n=e.sent,this.loadDataPlant(n),e.next=19;break;case 8:if(this.currentType!=pe.UNDEAD){e.next=15;break}return e.next=11,v.RequestLoadUserCardAsync("undead",this.currentPage+1);case 11:a=e.sent,this.loadDataUndead(a),e.next=19;break;case 15:return e.next=17,v.RequestLoadUserCardAsync("spell",this.currentPage+1);case 17:r=e.sent,this.loadDataSpell(r);case 19:this.loadDeckView();case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),o.show=function(){this.node.active=!0,null!=this.nodeOpacity&&g(this.nodeOpacity).to(.2,{opacity:255}).call((function(){})).start()},o.hide=function(e){var t=this;void 0===e&&(e=function(){}),null!=this.nodeOpacity?g(this.nodeOpacity).to(.2,{opacity:0}).call((function(){t.node.active=!1,e()})).start():(this.node.active=!1,e())},o.loadDeckView=function(){this.plantTotalPage;var e=this.plantDeck;this.currentType==pe.UNDEAD&&(e=this.undeadDeck,this.undeadTotalPage),this.currentType==pe.SPELL&&(e=this.spellDeck,this.spellTotalPage);for(var t=0;t<this.listCardItems.length;t++){var n=this.listCardItems[t];n.isMainDeck||n.resetItem()}for(var a=0;a<e.length;a++){var r=e[a];if(null!=r){var i=this.getItemCard(this.deckView);null!=i&&(this.currentType==pe.PLANT&&i.setTypeCard(U.ECardType.Plant),this.currentType==pe.UNDEAD&&i.setTypeCard(U.ECardType.Undead),this.currentType==pe.SPELL&&i.setTypeCard(U.ECardType.Spell),i.isMainDeck=!1,i.loadData(r))}}},o.showCountDown=function(e){var t=this;this.sprCountDownRedraw.fillRange=1,this.intervalCountDown=C.setIntervalImmediately((function(){var n=e/60;t.sprCountDownRedraw.fillRange=Math.round(100*n)/100,e<=0&&t.resetCountDown(),t.remainTime=e,e--}),1e3)},o.resetCountDown=function(){this.remainTime=0,this.sprCountDownRedraw.fillRange=0,this.btnRedraw.interactable=!0,clearInterval(this.intervalCountDown)},o.loadDataPlant=function(e){var t=this;this.plantDeck=[];var n=JSON.parse(e),a=n.results;this.plantTotalPage=n.totalPages;for(var r=function(){var e=a[i];if(null==e)return"continue";var n=new P(e);t.listMainDeck.findIndex((function(e){return e.id==n.id}))<0&&t.plantDeck.push(n)},i=0;i<a.length;i++)r();k("DATA PLANT : ",a,this.plantDeck.length)},o.loadDataUndead=function(e){var t=this;this.undeadDeck=[];var n=JSON.parse(e),a=n.results;this.undeadTotalPage=n.totalPages;for(var r=function(){var e=a[i];if(null==e)return"continue";var n=new T(e);t.listMainDeck.findIndex((function(e){return e.id==n.id}))<0&&t.undeadDeck.push(n)},i=0;i<a.length;i++)r();k("DATA UNDEAD : ",a,this.undeadDeck.length)},o.loadDataSpell=function(e){var t=this;this.spellDeck=[];var n=JSON.parse(e),a=n.results;this.spellTotalPage=n.totalPages,k("DATA SPELL : ",a);for(var r=function(){var e=a[i];if(null==e)return"continue";var n=new I(e);t.listMainDeck.findIndex((function(e){return e.id==n.id}))<0&&t.spellDeck.push(n)},i=0;i<a.length;i++)r()},o.requestRandomCard=function(){var e=i(s().mark((function e(){var t,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.RequestRandomCard();case 2:if(t=e.sent,n=JSON.parse(R(t)),null!=(a=new S(n))){e.next=8;break}return console.error("data null",t),e.abrupt("return");case 8:if(null!=n){e.next=11;break}return console.error("data null2",t),e.abrupt("return");case 11:this.btnRedraw.interactable=!1,this.redrawCardTime=Math.max(0,a.system-1),this.showCountDown(60),this.lobbyController.RefreshLE(),this.loadDataDeck(a);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.requestSaveDeck=function(){var e=i(s().mark((function e(){var t,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.listMainDeck.map((function(e){return e.id})),e.next=3,v.RequestSaveDeck(t);case 3:return n=e.sent,a=JSON.parse(R(n)),new S(a),e.next=8,this.updateUserCard();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.updateUserCard=function(){var e=i(s().mark((function e(){var t,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.RequestUserDeck();case 2:t=e.sent,n=JSON.parse(R(t)),a=new S(n),E.updateUserCard(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.loadCardSystem=function(){var e=i(s().mark((function e(){var t,n,a,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.RequestUserDeck();case 2:return t=e.sent,n=JSON.parse(R(t)),a=new S(n),this.loadDataDeck(a),E.updateUserCard(a),e.next=9,v.RequestLoadUserCardAsync("plant");case 9:r=e.sent,this.loadDataPlant(r),this.page.setTotalPage(this.plantTotalPage),v.RequestLoadUserCard("undead",this.loadDataUndead.bind(this)),v.RequestLoadUserCard("spell",this.loadDataSpell.bind(this)),this.loadDeckView();case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.loadDataDeck=function(e){if(null!=e){this.systemPowerDeck=0,this.powerDeck=0,this.redrawCardTime=Math.max(0,e.system-1),this.listMainDeck.length=0;var t=e.cardsDeck;if(null!=t&&t.length>0)for(var n=0;n<t.length;n++){var a=t[n];if(null!=a){this.listMainDeck.push(a);var r=this.getItemCard(this.mainDeckView);this.powerDeck+=a.combatPower,r.isMainDeck=!0,r.node.setPosition(new w(0,-120)),r.setTypeCard(a.eCardType),r.loadData(a,!1)}}var i=e.cardsSystem;this.listSystemDeck.map((function(e){return e.node.active=!1}));for(var s=0;s<i.length;s++){var o=i[s];this.systemDeck.push(o);var l=this.getSystemCard();null!=l&&(this.systemPowerDeck+=o.combatPower,l.setTypeCard(o.eCardType),l.isMainDeck=!1,l.loadData(o,!0))}this.updateInfoMainDeck()}},o.getItemCard=function(e){var t=this.listCardItems.find((function(e){return 0==e.node.active}));if(null==t||null==t){var n=y(this.prefabCardItem);n.off("cardItem:onSelected",this.onSelectedItem,this),n.on("cardItem:onSelected",this.onSelectedItem,this);var a=n.getComponent(b);n.parent=e,a&&(a.resetItem(),this.listCardItems.push(a),t=a)}return t.node.parent!=e&&t.node.setParent(e),t},o.getSystemCard=function(){var e=this.listCardItems.find((function(e){return 0==e.node.active}));if(null==e||null==e){var t=y(this.prefabCardItem),n=t.getComponent(b);t.position=new w(0,-120),this.sysDeckView.addChild(t),n&&(n.resetItem(),n.nodeSelect.active=!1,this.listSystemDeck.push(n),e=n)}return e},o.updateInfoMainDeck=function(){var e=this.listMainDeck.length,t=this.powerDeck+this.systemPowerDeck,n=this.redrawCardTime>=ge.length?ge[ge.length-1]:ge[this.redrawCardTime];console.log("this.redrawCardTime",this.redrawCardTime,n),this.lbTotalCard.string=this.listMainDeck.length+"/13",this.lbDeckPower.string="DECK POWER : "+t+"/"+this.maxPowerDeck,this.lbRedrawCost.string=""+n;var a=e>0&&e<=13&&t>0&&t<=this.maxPowerDeck,r=this.btnPlay.getComponent(p);r&&(r.grayscale=!a),this.btnPlay.interactable=a},o.resetView=function(){this.listMainDeck.length=0,this.plantDeck.length=0,this.undeadDeck.length=0,this.spellDeck.length=0,this.listSystemDeck.length=0,this.listCardItems.length=0,this.lbTotalCard.string=this.listMainDeck.length+"/13",this.lbDeckPower.string="DECK POWER : "+this.powerDeck+"/"+this.maxPowerDeck,this.lbRedrawCost.string="0",this.btnPlay.interactable=!1},o.onSelectedItem=function(e){var t=e.id,n=this.listCardItems.find((function(e){return e.getID()==t&&1==e.node.active}));if(n){var a=n.isMainDeck,r=e.combatPower;if(0==a){if(this.powerDeck+r+this.sysDeckView>this.maxPowerDeck)return void x.Instance.ShowToast("Warning","Power is full !!!",0);if(this.listMainDeck.length>=13)return void x.Instance.ShowToast("Warning","Card is full !!!",0)}if(n.node.active=!1,n.node.removeFromParent(),a){this.powerDeck-=r,this.powerDeck<0&&(this.powerDeck=0),n.node.active=!0,n.node.position=w.ZERO,n.isMainDeck=!1,(n.typeCard==U.ECardType.Spell&&this.currentType==pe.SPELL||n.typeCard==U.ECardType.Undead&&this.currentType==pe.UNDEAD||n.typeCard==U.ECardType.Plant&&this.currentType==pe.PLANT)&&this.deckView.addChild(n.node);var i=this.listMainDeck.findIndex((function(e){return e.id==t}));i>=0&&this.listMainDeck.splice(i,1)}else this.powerDeck+=r,n.isMainDeck=!0,n.node.active=!0,n.node.position=new w(0,-120),this.mainDeckView.addChild(n.node),this.listMainDeck.push(e);this.updateInfoMainDeck()}},o.onToggleChange=function(e){var t=e.node.name;if(this.currentType!=t){this.currentType=t,this.loadDeckView();var n=this.plantTotalPage;this.currentType==pe.UNDEAD&&(n=this.undeadTotalPage),this.currentType==pe.SPELL&&(n=this.spellTotalPage),this.page.setTotalPage(n),this.page.toPage(0)}},o.onRedrawClicked=function(){this.requestRandomCard()},o.onPlayClicked=function(){var e=i(s().mark((function e(){var t,n,a,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.requestSaveDeck(),e.next=3,v.RequestStartGame(this.lobbyController.currentSelectedWave);case 3:if(t=e.sent,0!=E.updateIngameData(t)){e.next=10;break}return a=JSON.parse(t),(r=null!=(n=a.message)?n:"Cannot start the game").indexOf("enough card")>=0?r="Your Deck is not completed. You need exactly 13 cards to complete a Deck. Please review your Deck thoroughly.":r.indexOf("enough fatigue")>=0&&(r="Some of your cards don't have sufficient Fatigue. Please review your Deck."),x.Instance.ShowToast("Warning",r,0),e.abrupt("return");case 10:this.resetCountDown(),console.log(t),M.Instance.LoadScene("PVE_GamePlay");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.onCloseClicked=function(){},t}(m)).prototype,"nodeOpacity",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(Q.prototype,"topView",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(Q.prototype,"btnClose",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(Q.prototype,"btnPlay",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(Q.prototype,"togContainer",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(Q.prototype,"deckView",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(Q.prototype,"prefabCardItem",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(Q.prototype,"btnRedraw",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(Q.prototype,"sprCountDownRedraw",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(Q.prototype,"mainDeckView",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(Q.prototype,"sysDeckView",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(Q.prototype,"lbDeckPower",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(Q.prototype,"lbTotalCard",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=t(Q.prototype,"lbRedrawCost",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(Q.prototype,"page",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=Q))||Z));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIDeckCardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConvertJsonObject.ts","./PVE_Enum.ts","./PVE_Helper.ts"],(function(e){"use strict";var t,a,i,r,n,o,s,l,c,d,p,u,h,b,C,m,g,v,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,s=e.Node,l=e.Sprite,c=e.Label,d=e.SpriteFrame,p=e.UITransform,u=e.Vec3,h=e.Color,b=e.resources,C=e.Component},function(e){m=e.convertToString,g=e.convertToUnstableNumber},function(e){v=e.PVE_Enum},function(e){y=e.PVEHelper}],execute:function(){var f,I,w,E,L,S,P,z,F,N,B,D,k,M,G,R,_,V,T,U,A,H,O,x,j,J,q,K,Q,W,X,Y,Z,$,ee,te,ae,ie,re,ne,oe,se,le;e("EBGRarity",void 0),n._RF.push({},"0495cP9URhA84v0EE0n+JiP","UIDeckCardItem",void 0);var ce,de=o.ccclass,pe=o.property;!function(e){e[e.None=0]="None",e[e.Common=1]="Common",e[e.Rare=2]="Rare",e[e.Epic=3]="Epic"}(ce||(ce=e("EBGRarity",{})));e("UIDeckCardItem",(f=de("UIDeckCardItem"),I=pe(s),w=pe(l),E=pe(l),L=pe(l),S=pe(c),P=pe(s),z=pe(l),F=pe(l),N=pe(l),B=pe(l),D=pe(c),k=pe(c),M=pe(c),G=pe([d]),R=pe(s),_=pe(l),V=pe(s),T=pe(s),U=pe(c),A=pe(c),f((x=t((O=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,i(t,"nodeSelect",x,r(t)),i(t,"sprBGRarity",j,r(t)),i(t,"sprIconMana",J,r(t)),i(t,"sprIconCP",q,r(t)),i(t,"lbManaCost",K,r(t)),i(t,"nodeFlag",Q,r(t)),i(t,"sprElement",W,r(t)),i(t,"sprBGCombatPower",X,r(t)),i(t,"sprCardIcon",Y,r(t)),i(t,"sprIconLE",Z,r(t)),i(t,"lbLECost",$,r(t)),i(t,"lbCombatPower",ee,r(t)),i(t,"lbLevel",te,r(t)),i(t,"resourcesBGRarity",ae,r(t)),i(t,"nodeSpellView",ie,r(t)),i(t,"sprSpellIcon",re,r(t)),i(t,"nodeLock",ne,r(t)),i(t,"unavailableNode",oe,r(t)),i(t,"unavailableNoti",se,r(t)),i(t,"unavailableFatigue",le,r(t)),t.dataCard=null,t.typeCard=0,t.isMainDeck=!1,t.isSystemCard=!1,t.selectable=!0,t}a(t,e);var n=t.prototype;return n.onLoad=function(){this.nodeSelect.on(s.EventType.TOUCH_END,this.onSelectedItem,this)},n.loadData=function(e,t){void 0===t&&(t=!1),this.resetItem(),this.dataCard=e,this.node.active=!0,this.isSystemCard=t,this.typeCard==v.ECardType.Spell?this.loadDataSpell():this.loadDataCard()},n.setSystemCard=function(e){},n.resetItem=function(){this.dataCard=null,this.sprBGRarity.spriteFrame=this.resourcesBGRarity[ce.None],this.lbLECost.string="",this.lbManaCost.string="",this.lbCombatPower.string="",this.nodeFlag.active=!1,this.sprBGCombatPower.node.active=!1,this.sprIconLE.node.active=!1,this.sprIconMana.node.active=!0,this.sprElement.spriteFrame=null,this.sprCardIcon.spriteFrame=null,this.sprSpellIcon.spriteFrame=null,this.nodeSpellView.active=!1,this.node.active=!1,this.nodeLock.active=!1,this.sprIconCP.node.active=!0,this.unavailableNode.active=!1,this.selectable=!0,this.unavailableFatigue.node.parent.active=!1},n.getID=function(){return null==this.dataCard?"":this.dataCard.id},n.setTypeCard=function(e){this.typeCard=e},n.getSizeCard=function(){var e=this.node.getComponent(p);return null==e&&(this.node.addComponent(p),e=this.node.getComponent(p)),e.contentSize},n.loadDataCard=function(){this.nodeFlag.active=!0,this.sprIconLE.node.active=!0,this.sprBGCombatPower.node.active=!0;var e=ce.None,t=m(this.dataCard.element).toLowerCase(),a="";if(this.typeCard==v.ECardType.Spell)this.sprCardIcon.node.position=new u(0,this.sprCardIcon.node.position.y),a=m(this.dataCard.code).replace(" ","_"),this.lbLevel.string="",this.loadDataSpell();else if(this.typeCard==v.ECardType.Plant){e=g(this.dataCard.rarity)<1?ce.Common:this.dataCard.rarity+1,this.sprCardIcon.node.position=new u(0,this.sprCardIcon.node.position.y);var i=m(this.dataCard.name),r=i.split("-");if(r.length>0)for(var n=0;n<r.length;n++){var o=r[n];o=o.charAt(0).toUpperCase()+o.slice(1),a+=0==n?o:"-"+o}else a=i;a=y.ParseGameplayObjectCode(a),console.log("plantInfo",this.dataCard),this.lbLevel.string="Lv."+m(this.dataCard.getLevel),this.LoadElementImg(t,this.sprElement)}else e=g(this.dataCard.rarity)<1?ce.Common:this.dataCard.rarity,this.sprCardIcon.node.position=new u(-5,this.sprCardIcon.node.position.y),a=this.dataCard.getCode,console.log("undeadInfo",this.dataCard),this.lbLevel.string="Lv."+m(this.dataCard.getLevel),this.LoadElementImg(t,this.sprElement),this.sprCardIcon.node.scale=new u("Ntyrr"==a||"Drizzslug"==a||"Drakwyrm"==a||"Buzzbat"==a?-this.sprCardIcon.node.scale.x:this.sprCardIcon.node.scale.x,this.sprCardIcon.node.scale.y);this.sprIconCP.color=this.getColorBgCP(e),this.sprBGRarity.spriteFrame=this.resourcesBGRarity[e],this.lbLECost.string=m(this.dataCard.leCost),this.lbManaCost.string=m(this.dataCard.manaCost),this.nodeLock.active=this.isSystemCard,this.lbCombatPower.string=this.isSystemCard?"":m(this.dataCard.combatPower),this.LoadCardImg(a,this.sprCardIcon),this.checkSelectable(a,!1),this.checkFatigue()},n.checkSelectable=function(e,t){var a=["Beebuzz","Liveena","Hoolahup","Eerievy","Force_Blast","Frenzy_Mind","Crest_Of_Valor"].indexOf(e)<0;this.unavailableNode.active=!a,a||(this.unavailableNoti.string="Unavailable",this.sprBGCombatPower.node.active=!1,this.lbCombatPower.string="",this.sprIconLE.node.active=!1,this.sprIconMana.node.active=!1,this.lbLECost.string="",this.lbManaCost.string=""),this.selectable=a},n.checkFatigue=function(){if(0!=this.selectable){var e=this.dataCard.fatiguePercent;null!=e&&(isNaN(e)&&console.error("fatiguePercent isNaN",this.dataCard),this.selectable=e>=50,this.selectable||(this.unavailableNode.active=!0,this.unavailableNoti.string="Insufficient\nFatigue",this.unavailableFatigue.node.parent.active=!0,this.unavailableFatigue.string=e+"%",this.sprIconLE.node.active=!1,this.sprIconMana.node.active=!1,this.lbLECost.string="",this.lbManaCost.string=""))}},n.loadDataSpell=function(){this.nodeSpellView.active=!0,this.nodeLock.active=this.isSystemCard,this.lbCombatPower.string=this.isSystemCard?"":m(this.dataCard.combatPower),this.lbLevel.string="";var e=m(this.dataCard.manaCost);e&&""!=e?this.lbManaCost.string=m(this.dataCard.manaCost):(this.lbManaCost.string="",this.sprIconMana.node.active=!1),this.sprIconCP.node.active=!0;var t=this.dataCard.getCode;this.LoadCardImg(t,this.sprSpellIcon),this.checkSelectable(t,!0)},n.onSelectedItem=function(){0==this.selectable&&0==this.isMainDeck||this.node.emit("cardItem:onSelected",this.dataCard)},n.getColorBgCP=function(e){switch(e){case ce.Common:return new h("#5EA07D");case ce.Rare:return new h("#5A91E3");case ce.Epic:return new h("#F39DF6");case ce.None:return new h("#70615F")}return new h("#70615F")},n.LoadCardImg=function(e,t){b.load("_PVE/Card/"+e+"/spriteFrame",d,(function(e,a){e&&console.warn(e),t.spriteFrame=a}))},n.LoadElementImg=function(e,t){b.load("_PVE/Element/"+e+"/spriteFrame",d,(function(e,a){e&&console.warn(e),t.spriteFrame=a}))},t}(C)).prototype,"nodeSelect",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(O.prototype,"sprBGRarity",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(O.prototype,"sprIconMana",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(O.prototype,"sprIconCP",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(O.prototype,"lbManaCost",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(O.prototype,"nodeFlag",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(O.prototype,"sprElement",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(O.prototype,"sprBGCombatPower",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(O.prototype,"sprCardIcon",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(O.prototype,"sprIconLE",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(O.prototype,"lbLECost",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(O.prototype,"lbCombatPower",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(O.prototype,"lbLevel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(O.prototype,"resourcesBGRarity",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ie=t(O.prototype,"nodeSpellView",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(O.prototype,"sprSpellIcon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(O.prototype,"nodeLock",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(O.prototype,"unavailableNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(O.prototype,"unavailableNoti",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(O.prototype,"unavailableFatigue",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=O))||H));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIEggItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts"],(function(e){"use strict";var r,t,i,a,n,o,l,s,c,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,l=e.Sprite,s=e.SpriteFrame,c=e.Component},function(e){u=e.ResourcesManager}],execute:function(){var p,g,y,b,f,m,h,v,d;n._RF.push({},"04822Juxu1DjJr4RlfsBcBa","UIEggItem",void 0);var I=o.ccclass,F=o.property;e("UIEggItem",(p=I("UIEggItem"),g=F(l),y=F(l),b=F([s]),p((h=r((m=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=e.call.apply(e,[this].concat(n))||this).manager=void 0,r.data=void 0,i(r,"view",h,a(r)),i(r,"rarityLabel",v,a(r)),i(r,"rarityLabelFrames",d,a(r)),r}t(r,e);var n=r.prototype;return n.refreshview=function(e,r){this.manager=e,this.data=r,this.rarityLabel.spriteFrame=this.rarityLabelFrames[r.rarity-1],u.Instance.GetNFTEgg(r.rarity,function(e){this.view.spriteFrame=e,console.log("callback",e.name)}.bind(this))},n.select=function(){},r}(c)).prototype,"view",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=r(m.prototype,"rarityLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=r(m.prototype,"rarityLabelFrames",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=m))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIEndGamePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIItemMaterial.ts","./SoundController.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./PVEPopupBase.ts"],(function(t){"use strict";var e,i,a,n,r,o,l,u,s,c,p,m,f,d,h,b,g,y,E,I,P,v,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,l=t.UIOpacity,u=t.Label,s=t.ScrollView,c=t.Node,p=t.Prefab,m=t.director,f=t.Director,d=t.Layout,h=t.instantiate,b=t.Vec3},function(t){g=t.UIItemMaterial},function(t){y=t.SoundController,E=t.EnumSoundPVE,I=t.EnumSound},function(t){P=t.PVEGameplayControl},function(t){v=t.PVEHelper},function(t){w=t.PVEPopupBase}],execute:function(){var V,x,L,M,S,D,_,z,T,C,G,R,W,B,U,F,H;r._RF.push({},"2103avRW+VDQqmcxrsaYfd8","UIEndGamePopup",void 0);var N=o.ccclass,O=o.property;t("UIEndGamePopup",(V=N("UIEndGamePopup"),x=O(l),L=O(u),M=O(u),S=O(u),D=O(s),_=O(c),z=O(p),V((G=e((C=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"opacity",G,n(e)),a(e,"txtTime",R,n(e)),a(e,"txtWave",W,n(e)),a(e,"txtDamage",B,n(e)),a(e,"scrollView",U,n(e)),a(e,"contentMaterial",F,n(e)),a(e,"materialPrefab",H,n(e)),e.uiItemMaterial=[],e.fromLobby=!1,e.layout=null,e}i(e,t);var r=e.prototype;return r.show=function(e,i){if(void 0===i&&(i=null),y.Instance.PlaySoundPvE(E.EndgamePopup),t.prototype.show.call(this),console.log("endgame data",i),this.fromLobby=e,this.fromLobby)this.txtTime.string="--",this.txtWave.string="--",this.txtDamage.string="--";else{var a=P.Instance;this.txtTime.string=v.ConvertSecondsToTime(a.CurrentTime),this.txtWave.string=a.CurrentWaveIndex+"",this.txtDamage.string=parseInt(a.TotalDamage.toString()).toLocaleString()}this.initReward(i),m.on(f.EVENT_BEFORE_DRAW,this.updateLayout,this)},r.updateLayout=function(){this.scrollView.update(.0069)},r.claimClick=function(){m.off(f.EVENT_BEFORE_DRAW,this.updateLayout,this),this.fromLobby?this.hide():m.loadScene("PVE_Lobby",(function(){P.Instance.IsPause=!1,y.Instance.SetBgMusic(I.BGM_Farm2)}))},r.initReward=function(t){if(null!=t){for(var e=JSON.parse(t).rewards,i=0,a=0;a<e.length;a++){var n=e[a];if(null!=n&&(null!=n.amount&&n.amount>0)){"Fake Le"==n.name&&(n.name="LE");var r=this.GetuiItemMaterial(i);i++,r.Init(n,(function(t){}))}}var o=this.contentMaterial.getComponent(d);o.alignHorizontal=!1,o.alignHorizontal=!0,o.alignVertical=!1,o.alignVertical=!0,o.updateLayout(),this.layout=o}},r.GetuiItemMaterial=function(t){var e;t<this.uiItemMaterial.length?e=this.uiItemMaterial[t]:(e=h(this.materialPrefab).getComponent(g),this.uiItemMaterial.push(e));e.node.active=!0,e.node.setParent(this.contentMaterial),e.node.scale=new b(.7,.7,.7),e.node.setSiblingIndex(this.contentMaterial.children.length-1);var i=e.node.position.clone();return i.y=0,e.node.position.set(i),e},e}(w)).prototype,"opacity",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(C.prototype,"txtTime",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(C.prototype,"txtWave",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(C.prototype,"txtDamage",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(C.prototype,"scrollView",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(C.prototype,"contentMaterial",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(C.prototype,"materialPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=C))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIExpeditionFood.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIItemMaterial.ts","./SoundController.ts"],(function(t){"use strict";var e,i,o,n,a,r,l,c,s,u,p,d,h,y,f,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Button,c=t.UIOpacity,s=t.Node,u=t.instantiate,p=t.tween,d=t.Vec3,h=t.Component},function(t){y=t.UIItemMaterial},function(t){f=t.SoundController,b=t.EnumSound}],execute:function(){var I,m,v,w,C,g,F,M,S,U,V;a._RF.push({},"e133d8QoGhFtLbMTkgZuPaC","UIExpeditionFood",void 0);var P=r.ccclass,E=r.property;t("UIExpeditionFood",(I=P("UIExpeditionFood"),m=E(l),v=E(c),w=E(s),C=E(s),I((M=e((F=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"btnClose",M,n(e)),o(e,"opacityView",S,n(e)),o(e,"contentFood",U,n(e)),o(e,"materialPrefab",V,n(e)),e.uiItemMaterial=[],e}i(e,t);var a=e.prototype;return a.onInit=function(){this.btnClose.node.on(l.EventType.CLICK,this.onCloseClicked,this),this.opacityView.opacity=1,this.node.active=!1},a.GetUIItemMaterial=function(t){var e;t<this.uiItemMaterial.length?e=this.uiItemMaterial[t]:(e=u(this.materialPrefab).getComponent(y),this.uiItemMaterial.push(e));return e.node.active=!0,e.node.setParent(this.contentFood),e.node.setSiblingIndex(100),e},a.OnShow=function(t){void 0===t&&(t=function(){}),this.node.active?(this.opacityView.opacity=255,this.node.setScale(1,1,1),t()):(this.node.active=!0,null!=this.node&&null!=this.opacityView&&(this.node.setScale(.8,.8,.8),this.opacityView.opacity=0,p(this.opacityView).to(.2,{opacity:255}).start(),p(this.node).to(.3,{scale:d.ONE},{easing:"backOut"}).call((function(){t()})).start()))},a.OnHide=function(t){var e=this;void 0===t&&(t=function(){}),this.node.active&&(f.Instance&&f.Instance.PlaySound(b.GameUI_closepopup),null!=this.node?(p(this.opacityView).to(.25,{opacity:0}).start(),p(this.node).to(.2,{scale:new d(.8,.8,.8)},{easing:"circOut"}).delay(.1).call((function(){e.node.active=!1,t()})).start()):(this.node.active=!1,t()))},a.onCloseClicked=function(){this.node.emit("uiFood:onClose")},e}(h)).prototype,"btnClose",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(F.prototype,"opacityView",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(F.prototype,"contentFood",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(F.prototype,"materialPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=F))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIExpeditionFoodItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts"],(function(e){"use strict";var t,i,n,o,r,a,s,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Sprite,c=e.Label,l=e.Component},function(e){u=e.ResourcesManager}],execute:function(){var p,d,m,h,f,I,y;r._RF.push({},"d2109A+405OXahyVlyN+cYa","UIExpeditionFoodItem",void 0);var v=a.ccclass,g=a.property;e("UIExpeditionFoodItem",(p=v("UIExpeditionFoodItem"),d=g(s),m=g(c),p((I=t((f=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._UIScreenExpedition=null,t.materialName=void 0,n(t,"view",I,o(t)),n(t,"amount",y,o(t)),t}i(t,e);var r=t.prototype;return r.Init=function(e,t,i){this.materialName=i,this._UIScreenExpedition=e,this.amount.string=t.toString(),u.Instance.LoadMaterialSprite(i,function(e){this.view.spriteFrame=e}.bind(this))},r.onFeed=function(){this._UIScreenExpedition.feedToUndead(this.materialName,this.node)},t}(l)).prototype,"view",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(f.prototype,"amount",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=f))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIExpeditionPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./ExpeditionServiceApi.ts","./PopUpBase.ts","./SpriteRatioHelper.ts","./Utility.ts","./UIPopupManager.ts","./ExpeditionConfig.ts","./ExpeditionHelper.ts","./ExpeditionItem.ts","./UndeadAssetItem.ts"],(function(e){"use strict";var t,i,n,a,o,r,s,l,u,p,d,c,h,g,f,b,m,x,C,v,E,S,R;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Sprite,l=e.sp,u=e.Label,p=e.Node,d=e.Slider,c=e.UITransform,h=e.Color},function(e){g=e.ConfigApi},function(e){f=e.ExpeditionServiceApi},function(e){b=e.PopUpBase},function(e){m=e.SpriteRatioHelper},function(e){x=e.Utility},function(e){C=e.UIPopupManager},function(e){v=e.ExpeditionConfig},function(e){E=e.ExpeditionHelper},function(e){S=e.ExpeditionCageState},function(e){R=e.UndeadAssetItem}],execute:function(){var k,y,P,w,M,U,I,T,z,L,O,H,_,B,A,D,V,N,F,q,K,G,W,j,Y,Z,J,Q,X,$,ee,te,ie,ne,ae,oe,re,se,le,ue,pe;o._RF.push({},"05ef9TuxiZOS5HxYbcl1gm2","UIExpeditionPopup",void 0);var de=r.ccclass,ce=r.property;e("UIExpeditionPopup",(k=de("UIExpeditionPopup"),y=ce(m),P=ce(s),w=ce(l.Skeleton),M=ce(u),U=ce(u),I=ce(p),T=ce(p),z=ce(p),L=ce(d),O=ce(s),H=ce(u),_=ce(c),B=ce(u),A=ce(u),D=ce(u),V=ce(u),N=ce(s),F=ce(u),q=ce(R),k((W=t((G=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).data=void 0,t.cage_data=void 0,t.curEstMask=0,t.le2PVURate=void 0,t.maxExpeditionHour=void 0,t.estMarkCount=1,t.partLength=0,n(t,"undeadView",W,a(t)),n(t,"seasonBg",j,a(t)),n(t,"undeadSpine",Y,a(t)),n(t,"leRate",Z,a(t)),n(t,"leRate2",J,a(t)),n(t,"expeditionScreen",Q,a(t)),n(t,"departNode",X,a(t)),n(t,"expeditionNode",$,a(t)),n(t,"timeSpentSlider",ee,a(t)),n(t,"sprProgess",te,a(t)),n(t,"leSpent",ie,a(t)),n(t,"parentChooseTime",ne,a(t)),n(t,"exBonus",ae,a(t)),n(t,"leConvert2PVU",oe,a(t)),n(t,"timeLeft",re,a(t)),n(t,"maxTime",se,a(t)),n(t,"timeProgress",le,a(t)),n(t,"debugExId",ue,a(t)),n(t,"undeadAsset",pe,a(t)),t.availableCheckMart=0,t.uiExpedition=void 0,t}i(t,e);var o=t.prototype;return o.onInit=function(e){this.uiExpedition=e},o.Show=function(t){this.data=t.undead,this.cage_data=t,e.prototype.OnShow.call(this);var i=this.data.status;this.initUndead(this.data),i===S.OnExpedition?this.showExpeditionInfo(this.data):(this.requestLoadRate(this.data),this.showDepart(this.data))},o.requestLoadRate=function(e){f.RequestGetMaxExTime(e.id,function(e){var t=E.CheckStatus(e);null!=t&&this.updateRate(t)}.bind(this))},o.updateRate=function(e){this.le2PVURate=e.data.rateLeToPvu,this.leRate.string="("+this.le2PVURate+" LE = 1PVU)",this.leRate2.string="("+this.le2PVURate+" LE = 1PVU)",this.availableCheckMart=e.data.available},o.updateLeSpent=function(){this.leSpent.string=(this.le2PVURate*this.curEstMask).toString()},o.initUndead=function(e){this.undeadAsset.Init(e)},o.showDepart=function(e){this.departNode.active=!0,this.expeditionNode.active=!1,this.curEstMask=0,this.timeSpentSlider.progress=0,this.sprProgess.fillRange=0,this.leSpent.string="0",this.maxExpeditionHour=e.maxExpeditionHour,this.estMarkCount=this.maxExpeditionHour/v.EST_CHECK_MARK+1,this.partLength=this.parentChooseTime.width/(this.estMarkCount-1);for(var t=this.parentChooseTime.node.children,i=0;i<t.length;i++){var n=t[i];if(i>=this.estMarkCount)n.active=!1;else{n.active=!0,n.setPosition(i*this.partLength,0,0);var a=n.getComponent(s);null!=a&&(a.color=new h("#B2874F"))}}},o.updateProgressMaskCount=function(e){for(var t=this.parentChooseTime.node.children,i=0;i<t.length;i++){var n=t[i];if(null!=n){var a=n.getComponent(s);null!=a&&(a.color=new h(i<=e?"#71C638":"#B2874F"))}}},o.showExpeditionInfo=function(e){this.departNode.active=!1,this.expeditionNode.active=!0;var t=e.current_expedition;1==g.IS_PRO?this.debugExId.node.active=!1:(this.debugExId.node.active=!0,this.debugExId.string="ExId: "+t._id),this.exBonus.string=Math.floor(1e4*(e.exchangeRate-1))/100+"%",this.leConvert2PVU.string=t.leAmount;var i=E.GetTotalSecTimeLeft(t);this.timeLeft.string="Time left: "+x.ConvertSecondsToTime(i),this.maxTime.string=t.estCheckMark*v.EST_CHECK_MARK+" hrs";var n=t.startTime,a=t.estEndTime,o=Date.parse(n),r=Date.parse(a),s=x.GetTimeNow();this.timeProgress.fillRange=1-(r-s)/(r-o),this.onProgresschanged()},o.onProgresschanged=function(){var e=this.timeSpentSlider.progress/(1/(this.estMarkCount-1));(e=(e%1>.5?1:0)+parseInt(e.toString()))>this.estMarkCount&&(e=this.estMarkCount),e>this.availableCheckMart&&(e=this.availableCheckMart),this.OnChooseHoursClick(null,e)},o.OnChooseHoursClick=function(e,t){t>this.availableCheckMart||(this.curEstMask=t,this.timeSpentSlider.progress=t/(this.estMarkCount-1),this.sprProgess.fillRange=t/(this.estMarkCount-1),this.updateProgressMaskCount(t),this.updateLeSpent())},o.OnBtnDepartClick=function(){0!=this.curEstMask?(console.log("OnBtnDepartClick",this.curEstMask),f.RequestDepartUndead(this.data.id,this.curEstMask,this.OnDepartRespone.bind(this))):C.Instance.ShowToast("Error","Select Expedition time",0)},o.OnDepartRespone=function(t){console.log("OnDepartRespone",t);var i=E.CheckStatus(t);null!=i&&(e.prototype.OnHide.call(this),this.uiExpedition.refreshCage(this.cage_data.id),this.uiExpedition.uiFarmOverlay.updateLE(i.data.leWallet,!1))},o.OnBtnRecallClick=function(){var e=this.data.current_expedition;f.RequestRecallUndead(e._id,this.onRecallRespone.bind(this))},o.onRecallRespone=function(t){var i=E.CheckStatus(t);null!=i&&(e.prototype.OnHide.call(this),this.uiExpedition.delayRefresh(2,this.cage_data.id),this.uiExpedition.uiFarmOverlay.updateLE(i.data.leWallet,!1))},o.OnBtnCloseClick=function(){e.prototype.OnHide.call(this)},t}(b)).prototype,"undeadView",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(G.prototype,"seasonBg",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(G.prototype,"undeadSpine",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(G.prototype,"leRate",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(G.prototype,"leRate2",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(G.prototype,"expeditionScreen",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(G.prototype,"departNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(G.prototype,"expeditionNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(G.prototype,"timeSpentSlider",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(G.prototype,"sprProgess",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(G.prototype,"leSpent",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(G.prototype,"parentChooseTime",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(G.prototype,"exBonus",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(G.prototype,"leConvert2PVU",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(G.prototype,"timeLeft",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(G.prototype,"maxTime",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(G.prototype,"timeProgress",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(G.prototype,"debugExId",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(G.prototype,"undeadAsset",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=G))||K));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIExRewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts"],(function(e){"use strict";var t,n,a,i,r,o,l,c,s,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Sprite,c=e.Label,s=e.Node,u=e.Component},function(e){p=e.ResourcesManager}],execute:function(){var m,g,d,y,v,b,f,h,I;r._RF.push({},"2b36cr+gM9Mo6gxQ4EGtrzc","UIExRewardItem",void 0);var x=o.ccclass,M=o.property;e("UIExRewardItem",(m=x("UIExRewardItem"),g=M(l),d=M(c),y=M(s),m((f=t((b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"imgMaterial",f,i(t)),a(t,"txtAmount",h,i(t)),a(t,"claimOnWeb",I,i(t)),t}return n(t,e),t.prototype.init=function(e){var t=this;if(console.log("init reward",e),null!=e&&"nothing"!=e.name){this.node.active=!0,null==e.quantity||0==e.quantity?this.txtAmount.node.active=!1:(this.txtAmount.node.active=!0,this.txtAmount.string=e.quantity+"");var n=e.name,a=function(e){t.imgMaterial.spriteFrame=e};"MAMA"===n||"SAPLING"===n?1==e.value.plantType?p.Instance.LoadPlant("sapling_"+e.value.seasonType,a):p.Instance.LoadPlant("mama_"+e.value.seasonType,a):p.Instance.LoadMaterialSprite(n,a);var i=n.endsWith("UNDEAD_EGG");return this.claimOnWeb.active=i,i}console.log("return")},t}(u)).prototype,"imgMaterial",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=t(b.prototype,"txtAmount",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(b.prototype,"claimOnWeb",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=b))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIFarmOverlay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PageNumber.ts","./FarmingServicesApi.ts","./UserModel.ts","./Utility.ts","./ResourcesManager.ts","./UIPopupManager.ts","./UITutorial.ts"],(function(e){"use strict";var t,n,a,i,r,o,s,l,u,c,p,d,g,h,b,U,f,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.Label,l=e.Button,u=e.tween,c=e.Vec3,p=e.Component},function(e){d=e.PageNumber},function(e){g=e.FarmingServicesApi},function(e){h=e.UserModel},function(e){b=e.Utility},function(e){U=e.ResourcesManager},function(e){f=e.UIPopupManager},function(e){B=e.UITutorial}],execute:function(){var w,m,v,y,S,I,L,C,T,k,E,P,F,z,A,N,O,R,_;r._RF.push({},"a5afdZ1j09BiKl/vh7s7yS5","UIFarmOverlay",void 0);var H=o.ccclass,M=o.property;e("UIFarmOverlay",(w=H("UIFarmOverlay"),m=M(s),v=M(l),y=M(l),S=M(l),I=M(l),L=M(l),C=M(d),T=M(B),w((P=t((E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"LE_Label",P,i(t)),a(t,"btnBack",F,i(t)),a(t,"btnSetting",z,i(t)),a(t,"btnTutorial",A,i(t)),a(t,"btnAsset",N,i(t)),a(t,"btnUpgradeBarn",O,i(t)),a(t,"uiPageNumber",R,i(t)),a(t,"UITutorialBarn",_,i(t)),t.tweenShowUpgradeBarn=void 0,t.tweenHideUpgradeBarn=void 0,t.manager=void 0,t}n(t,e);var r=t.prototype;return r.onInit=function(e){var t=this;this.btnBack.node.on(l.EventType.CLICK,this.onBackClicked,this),this.btnSetting.node.on(l.EventType.CLICK,this.onSettingClicked,this),this.btnTutorial.node.on(l.EventType.CLICK,this.onTutorialBarnClicked,this),this.btnAsset.node.on(l.EventType.CLICK,this.onAssetsClicked,this),this.btnUpgradeBarn.node.on(l.EventType.CLICK,this.onUpgradeBarnClicked,this),this.uiPageNumber.node.on("pageNumber:clicked",this.updatePage,this),this.tweenShowUpgradeBarn=u(this.btnUpgradeBarn.node).call((function(){t.btnUpgradeBarn.node.active=!0,t.uiPageNumber.node.active=!1})).to(.3,{position:c.ZERO}),this.tweenHideUpgradeBarn=u(this.btnUpgradeBarn.node).to(.3,{position:new c(-250,0)}).delay(.1).call((function(){t.btnUpgradeBarn.node.active=!1,t.uiPageNumber.activePage()})),this.manager=e,this.RequestLoadFarmsStats()},r.RequestLoadFarmsStats=function(){var e=this;if(-1==h.LE_num){g.RequestFarmsStats((function(t){var n=JSON.parse(t);if(0==n.status){var a=n.data.leWallet;e.updateLE(a,!1)}else 0==n.status&&f.Instance.ReturnToLoginScreen(),f.Instance.ShowToast("Error",U.Instance.GetErrorMessage(n.status),0)}),null)}else this.updateLE(h.LE_num,!1)},r.showUpgradeBarn=function(){this.tweenHideUpgradeBarn&&this.tweenHideUpgradeBarn.stop(),this.tweenShowUpgradeBarn&&this.tweenShowUpgradeBarn.stop(),this.tweenShowUpgradeBarn.start()},r.hideUpgradeBarn=function(){this.tweenHideUpgradeBarn&&this.tweenHideUpgradeBarn.stop(),this.tweenShowUpgradeBarn&&this.tweenShowUpgradeBarn.stop(),this.tweenHideUpgradeBarn.start()},r.updateLE=function(e,t){b.TweenLE(e,t,this.LE_Label)},r.onTutorialBarnClicked=function(){this.UITutorialBarn.Show(0)},r.onSettingClicked=function(){f.Instance.ShowSetting()},r.onAssetsClicked=function(){f.Instance.ShowUIScreenAssets(null)},r.onUpgradeBarnClicked=function(){this.node.emit("onUpgradeBarn:uiFarmOverlay")},r.updatePage=function(e){this.node.emit("changePage:uiFarmOverlay",e)},r.onBackClicked=function(){this.node.emit("onBack:uiFarmOverlay")},t}(p)).prototype,"LE_Label",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(E.prototype,"btnBack",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(E.prototype,"btnSetting",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(E.prototype,"btnTutorial",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(E.prototype,"btnAsset",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(E.prototype,"btnUpgradeBarn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(E.prototype,"uiPageNumber",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(E.prototype,"UITutorialBarn",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=E))||k));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIFinishExpeditionPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ExpeditionServiceApi.ts","./PopUpBase.ts","./Utility.ts","./ExpeditionHelper.ts","./UIExRewardItem.ts"],(function(t){"use strict";var e,i,n,a,r,o,l,s,c,p,u,h,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,l=t.Node,s=t.Label},function(t){c=t.ExpeditionServiceApi},function(t){p=t.PopUpBase},function(t){u=t.Utility},function(t){h=t.ExpeditionHelper},function(t){d=t.UIExRewardItem}],execute:function(){var m,b,v,C,f,g,w,y,I,U,E,x,S,W,z,D,O,P,R;r._RF.push({},"268eaHwWnhG8ZSbqlhBO9Cn","UIFinishExpeditionPopup",void 0);var F=o.ccclass,k=o.property;t("UIFinishExpeditionPopup",(m=F("UIFinishExpeditionPopup"),b=k(l),v=k(l),C=k(l),f=k(l),g=k(l),w=k(s),y=k(s),I=k(l),m((x=e((E=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).rewardUI=[],e.leWallet=-1,n(e,"btnClaim",x,a(e)),n(e,"btnError",S,a(e)),n(e,"rewardContent",W,a(e)),n(e,"noContent",z,a(e)),n(e,"errorContent",D,a(e)),n(e,"pvuClaim",O,a(e)),n(e,"timeSpent",P,a(e)),n(e,"notifyClaimOnWeb",R,a(e)),e.tokenID=0,e.uiManager=void 0,e}i(e,t);var r=e.prototype;return r.onInit=function(t){this.uiManager=t},r.Show=function(e){this.leWallet=-1,this.rewardContent.active=!1,this.noContent.active=!0,this.errorContent.active=!1,this.btnError.active=!1,this.btnClaim.active=!1,null!=this.rewardUI&&0!=this.rewardUI.length||(this.rewardUI=this.rewardContent.getComponentsInChildren(d)),c.RequestClaimExpedition(e.current_expedition._id,this.onClaimRespone.bind(this)),this.tokenID=e.tokenId,this.btnClaim.active=!0,t.prototype.OnShow.call(this)},r.onClaimRespone=function(t){var e=h.CheckStatus(t);if(null==e)return this.noContent.active=!1,this.errorContent.active=!0,this.btnError.active=!0,void(this.btnClaim.active=!1);this.pvuClaim.string=e.data.pvuAmount+"";var i=Date.parse(e.data.startTime),n=Date.parse(e.data.estEndTime),a=Math.floor((n-i)/1e3);if(console.log("totalSecond",a,i,n,n-i),this.timeSpent.string=u.ConvertSecondsToTime(a),this.btnClaim.active=!0,0==(null!=e.data.claimedItems&&e.data.claimedItems.length>0))this.noContent.active=!0,this.notifyClaimOnWeb.active=!1;else{var r=!1;this.noContent.active=!1,this.rewardContent.active=!0;for(var o=e.data.claimedItems,l=0,s=0;s<this.rewardUI.length;s++)if(s>=o.length)this.rewardUI[s].node.active=!1,console.log("nope");else{if(null==o[s]||"nothing"==o[s].name){console.log("got not thing"),this.rewardUI[s].node.active=!1;continue}l++,this.rewardUI[s].init(o[s])&&(r=!0)}this.noContent.active=0==l,this.rewardContent.active=l>0,this.notifyClaimOnWeb.active=r}null!=e.data.leWallet&&(this.leWallet=e.data.leWallet)},r.hide=function(){this.uiManager.delayRefresh(2),this.leWallet>=0&&this.uiManager.uiFarmOverlay.updateLE(this.leWallet,!1),this.tokenID=-1,t.prototype.OnHide.call(this)},e}(p)).prototype,"btnClaim",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(E.prototype,"btnError",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(E.prototype,"rewardContent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(E.prototype,"noContent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(E.prototype,"errorContent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(E.prototype,"pvuClaim",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(E.prototype,"timeSpent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(E.prototype,"notifyClaimOnWeb",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=E))||U));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIFitWidthHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts"],(function(e){"use strict";var t,i,n,a,o,r,s,c,l,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.UITransform,c=e.CCFloat,l=e.view,d=e.Component},function(e){h=e.Utility}],execute:function(){var u,p,f,v,y,b,g;o._RF.push({},"dee8cysVPNH9bwuhCz8NzbB","UIFitWidthHelper",void 0);var z=r.ccclass,C=r.property;e("UIFitWidthHelper",(u=z("UIFitWidthHelper"),p=C(s),f=C(c),u((b=t((y=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"canvasToFit",b,a(t)),t.baseScale=1,t.designWidth=2001,n(t,"HardCodeWidth",g,a(t)),t}i(t,e);var o=t.prototype;return o.start=function(){this.designWidth=l.getDesignResolutionSize().width,-1==this.HardCodeWidth&&(this.HardCodeWidth=this.getComponent(s).width),h.addResizeCallBack(this.node,function(){this.UpdateSize()}.bind(this)),this.baseScale=this.node.scale.x,this.UpdateSize()},o.UpdateSize=function(){var e=this;h.AsyncDelay(200).then((function(){if(null!=e.canvasToFit)if(e.HardCodeWidth>e.canvasToFit.width){var t=e.baseScale*(e.canvasToFit.width/e.designWidth);e.node.setScale(t,t,1)}else e.node.setScale(e.baseScale,e.baseScale,1)}))},o.onDestroy=function(){h.removeResizeCallBack(this.node)},t}(d)).prototype,"canvasToFit",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(y.prototype,"HardCodeWidth",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=y))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIFloatingLeftPopupBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,o,r,a,c,l,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.UITransform,l=e.Widget,s=e.tween,u=e.Component}],execute:function(){var p,d,f,h,w,g,v;r._RF.push({},"0cc5cCw0PRAEYJ9zalcz3zc","UIFloatingLeftPopupBase",void 0);var y=a.ccclass,z=a.property;e("UIFloatingLeftPopupBase",(p=y("UIFloatingLeftPopupBase"),d=z(c),f=z(l),p((g=t((w=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"tweenNode",g,o(t)),n(t,"tweenWidget",v,o(t)),t}i(t,e);var r=t.prototype;return r.OnShow=function(){this.node.active=!0;var e=this.tweenNode.contentSize.width;this.tweenWidget.left=-e,s(this.tweenWidget).to(.15,{left:0}).start()},r.OnHide=function(e){var t=this;void 0===e&&(e=null);var i=this.tweenNode.contentSize.width;s(this.tweenWidget).to(.15,{left:-i}).call((function(){t.node.active=!1,e&&e()})).start()},r.MoveOut=function(){var e=this.tweenNode.contentSize.width;s(this.tweenWidget).to(.15,{left:-(e+120)}).start()},t}(u)).prototype,"tweenNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(w.prototype,"tweenWidget",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=w))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIGarderingBag.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./PopUpBase.ts","./Utility.ts","./UIItemMaterial.ts"],(function(t){"use strict";var e,i,r,n,a,l,o,s,u,c,g,m,h,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,o=t.Label,s=t.Node,u=t.UITransform,c=t.Sprite,g=t.instantiate},function(t){m=t.GatheringServicesApi},function(t){h=t.PopUpBase},function(t){p=t.Utility},function(t){f=t.UIItemMaterial}],execute:function(){var I,d,b,v,y,B,G,S,T,w,C,z,P,k,U,D,O,R,N,M,_,x,A,E,F;a._RF.push({},"79067XXEYZChbdzx3m0JOwI","UIGarderingBag",void 0);var L=l.ccclass,J=l.property;t("UIGarderingBag",(I=L("UIGarderingBag"),d=J(o),b=J(s),v=J(s),y=J(u),B=J(s),G=J(s),S=J(c),T=J(o),w=J(o),C=J(o),z=J(o),I((U=e((k=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,r(e,"Slot",U,n(e)),r(e,"itemPrefab",D,n(e)),r(e,"itemParent",O,n(e)),r(e,"content",R,n(e)),r(e,"Tick",N,n(e)),r(e,"InfoContent",M,n(e)),r(e,"InfoIcon",_,n(e)),r(e,"itemName",x,n(e)),r(e,"Type",A,n(e)),r(e,"Rarity",E,n(e)),r(e,"Des",F,n(e)),e.GarderingBagItems=[],e.CurrentGarderingBagItems=void 0,e.currentSelectItem=void 0,e}i(e,t);var a=e.prototype;return a.Show=function(){t.prototype.OnShow.call(this),this.showEmpty(),this.GetTravelBagInfo()},a.GetTravelBagInfo=function(){var t=this;m.GetTravelBagInfo((function(e){var i=m.CheckStatus(JSON.parse(e));null!=i&&t.InitTravelBagInfo(i)}),null,!0)},a.InitTravelBagInfo=function(t){this.showEmpty();var e=t.data.maxSlotAmount,i=t.data.items.length;this.DisableGarderingBagItem(),this.CurrentGarderingBagItems=[];for(var r=0,n=0;n<i;n++){var a=this.GetGarderingBagItem(r);a.Init(t.data.items[n],this.onItemClick.bind(this)),this.CurrentGarderingBagItems.push(a),r++}for(this.Slot.string=r.toString()+"/"+e.toString()+" SLOTS";r<e;){var l=this.GetGarderingBagItem(r);l.Init(null,null),this.CurrentGarderingBagItems.push(l),r++}var o=Math.ceil(e/4),s=176+144*o+25*(o-1);this.content.height=s<700?700:s},a.DisableGarderingBagItem=function(){for(var t=0;t<this.GarderingBagItems.length;t++)this.GarderingBagItems[t].node.active=!1},a.GetGarderingBagItem=function(t){var e;t<this.GarderingBagItems.length?e=this.GarderingBagItems[t]:(e=g(this.itemPrefab).getComponent(f),this.GarderingBagItems.push(e));return e.node.active=!0,e.node.setParent(this.itemParent),e},a.OnCloseClick=function(){t.prototype.OnHide.call(this)},a.OnRemoveClick=function(){var t=this;if(null!=this.currentSelectItem){var e=this.currentSelectItem.svdata;null!=e&&m.RemoveItemTravelBag(e.name,e.amount,e._id,e.type,(function(e){var i=m.CheckStatus(JSON.parse(e));null!=i&&t.InitTravelBagInfo(i)}),null)}},a.onItemClick=function(t){if(this.currentSelectItem!=t){this.currentSelectItem=t,this.Tick.active=!0,this.Tick.setWorldPosition(t.node.worldPosition),this.InfoContent.active=!0;var e=t.data;this.itemName.string=e.name,this.Type.string=e.type,this.Rarity.string=p.RarityToText(e.rarity),this.Des.string=e.description,this.InfoIcon.spriteFrame=t.imgMaterial.spriteFrame}},a.showEmpty=function(){this.Tick.active=!1,this.currentSelectItem=null,this.InfoContent.active=!1},e}(h)).prototype,"Slot",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(k.prototype,"itemPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(k.prototype,"itemParent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(k.prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(k.prototype,"Tick",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(k.prototype,"InfoContent",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(k.prototype,"InfoIcon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(k.prototype,"itemName",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(k.prototype,"Type",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(k.prototype,"Rarity",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(k.prototype,"Des",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=k))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIGarderingLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./UserModel.ts","./PopUpBase.ts","./ResourcesManager.ts","./UIGarderingLevelFX.ts"],(function(e){"use strict";var i,t,n,l,r,a,o,p,v,I,u,s,c,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,o=e.Label,p=e.UITransform,v=e.Node},function(e){I=e.GatheringServicesApi},function(e){u=e.UserModel},function(e){s=e.PopUpBase},function(e){c=e.ResourcesManager},function(e){h=e.UIGarderingLevelFX}],execute:function(){var g,G,N,L,b,f,F,S,d,B,A,M,H,C,E,x,y,w,_,P,m,U,z,X,D,O,R,T,V,k,J,j,W,q,K;r._RF.push({},"d97b4xw/MBFvLuddTW67SOA","UIGarderingLevel",void 0);var Q=a.ccclass,Y=a.property;e("UIGarderingLevel",(g=Q("UIGarderingLevel"),G=Y(o),N=Y(o),L=Y(p),b=Y(v),f=Y(v),F=Y(o),S=Y(o),d=Y(p),B=Y(v),A=Y(v),M=Y(o),H=Y(o),C=Y(p),E=Y(v),x=Y(v),y=Y(h),g((P=i((_=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return i=e.call.apply(e,[this].concat(r))||this,n(i,"ChoppingLv",P,l(i)),n(i,"ChoppingExp",m,l(i)),n(i,"ChoppingFill",U,l(i)),n(i,"ChoppingBtnLvActive",z,l(i)),n(i,"ChoppingBtnLvInActive",X,l(i)),n(i,"FISHINGLv",D,l(i)),n(i,"FISHINGExp",O,l(i)),n(i,"FISHINGFill",R,l(i)),n(i,"FISHINGBtnLvActive",T,l(i)),n(i,"FISHINGBtnLvInActive",V,l(i)),n(i,"MININGLv",k,l(i)),n(i,"MININGExp",J,l(i)),n(i,"MININGFill",j,l(i)),n(i,"MININGBtnLvActive",W,l(i)),n(i,"MININGBtnLvInActive",q,l(i)),n(i,"uIGarderingLevelFX",K,l(i)),i.onLvUp=function(){},i}t(i,e);var r=i.prototype;return r.Show=function(i){void 0===i&&(i=function(){}),e.prototype.OnShow.call(this),this.Init(),this.onLvUp=i,this.uIGarderingLevelFX.node.active=!1},r.Init=function(){var e=-1,i=0,t=0,n=c.Instance.GatheringLevelConfig.json.data;t=u.userGatherData.CHOPPING_level.level,i=u.userGatherData.CHOPPING_level.exp,t+1<n.chopping.length?(e=n.chopping[t+1].exp,this.ChoppingExp.string="EXP: "+i+"/"+e,this.ChoppingBtnLvActive.active=i>=e):(this.ChoppingExp.string="EXP: "+i+"/MAX",this.ChoppingBtnLvActive.active=!1),this.ChoppingLv.string="LV. "+t,this.ChoppingBtnLvInActive.active=!this.ChoppingBtnLvActive.active,this.SetFillBar(this.ChoppingFill,i,e),e=-1,t=u.userGatherData.MINING_level.level,i=u.userGatherData.MINING_level.exp,t+1<n.mining.length?(e=n.mining[t+1].exp,this.MININGExp.string="EXP: "+i+"/"+e,this.MININGBtnLvActive.active=i>=e):(this.MININGExp.string="EXP: "+i+"/MAX",this.MININGBtnLvActive.active=!1),this.MININGLv.string="LV. "+t,this.MININGBtnLvInActive.active=!this.MININGBtnLvActive.active,this.SetFillBar(this.MININGFill,i,e),e=-1,t=u.userGatherData.FISHING_level.level,i=u.userGatherData.FISHING_level.exp,t+1<n.fishing.length?(e=n.fishing[t+1].exp,this.FISHINGExp.string="EXP: "+i+"/"+e,this.FISHINGBtnLvActive.active=i>=e):(this.FISHINGExp.string="EXP: "+i+"/MAX",this.FISHINGBtnLvActive.active=!1),this.FISHINGLv.string="LV. "+t,this.FISHINGBtnLvInActive.active=!this.FISHINGBtnLvActive.active,this.SetFillBar(this.FISHINGFill,i,e)},r.SetFillBar=function(e,i,t){-1==t&&(t=i);var n=i/t*410;n<10&&0!=n&&(n=10),n>410&&(n=410),e.width=n},r.OnBtnClose=function(){e.prototype.OnHide.call(this)},r.OnBtnLvChopping=function(){var e=this;I.LEVEL_UP_GATHER("Chopping",(function(i){var t=I.CheckStatus(JSON.parse(i));null!=t&&e.uIGarderingLevelFX.Show(0,function(){u.userGatherData.CHOPPING_level.level=t.data.level,u.userGatherData.CHOPPING_level.exp=t.data.exp,this.onLvUp(),this.Init()}.bind(e))}),(function(){}))},r.OnBtnLvFishing=function(){var e=this;I.LEVEL_UP_GATHER("Fishing",(function(i){var t=I.CheckStatus(JSON.parse(i));null!=t&&e.uIGarderingLevelFX.Show(2,function(){u.userGatherData.FISHING_level.level=t.data.level,u.userGatherData.FISHING_level.exp=t.data.exp,this.onLvUp(),this.Init()}.bind(e))}),(function(){}))},r.OnBtnLvMining=function(){var e=this;I.LEVEL_UP_GATHER("Mining",(function(i){var t=I.CheckStatus(JSON.parse(i));null!=t&&e.uIGarderingLevelFX.Show(1,function(){u.userGatherData.MINING_level.level=t.data.level,u.userGatherData.MINING_level.exp=t.data.exp,this.onLvUp(),this.Init()}.bind(e))}),(function(){}))},i}(s)).prototype,"ChoppingLv",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=i(_.prototype,"ChoppingExp",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(_.prototype,"ChoppingFill",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(_.prototype,"ChoppingBtnLvActive",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=i(_.prototype,"ChoppingBtnLvInActive",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(_.prototype,"FISHINGLv",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(_.prototype,"FISHINGExp",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(_.prototype,"FISHINGFill",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(_.prototype,"FISHINGBtnLvActive",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=i(_.prototype,"FISHINGBtnLvInActive",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(_.prototype,"MININGLv",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=i(_.prototype,"MININGExp",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=i(_.prototype,"MININGFill",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=i(_.prototype,"MININGBtnLvActive",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=i(_.prototype,"MININGBtnLvInActive",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=i(_.prototype,"uIGarderingLevelFX",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=_))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIGarderingLevelFX.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts","./Utility.ts","./GatheringLevelTop.ts"],(function(e){"use strict";var t,i,r,n,a,l,o,s,c,p,u,h,m,y,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Label,s=e.Sprite,c=e.SpriteFrame,p=e.Node,u=e.Animation,h=e.ParticleSystem},function(e){m=e.PopUpBase},function(e){y=e.Utility},function(e){b=e.GatheringLevelTop}],execute:function(){var g,f,v,S,L,d,I,F,w,G,N,U,z,O,k,B,T;a._RF.push({},"86926LmcrBGAYjoFkKt/C7Y","UIGarderingLevelFX",void 0);var A=l.ccclass,D=l.property;e("UIGarderingLevelFX",(g=A("UIGarderingLevelFX"),f=D(o),v=D(s),S=D(c),L=D(b),d=D(p),I=D(u),F=D(h),g((N=t((G=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,r(t,"LabelName",N,n(t)),t.LabelNameString=["FORAGING","MINING","FISHING"],r(t,"IconSprite",U,n(t)),r(t,"IconSpriteFrame",z,n(t)),r(t,"gatheringLevelTop",O,n(t)),r(t,"BtnOk",k,n(t)),r(t,"animation",B,n(t)),r(t,"particleSystems",T,n(t)),t}i(t,e);var a=t.prototype;return a.Show=function(t,i){var r=this;void 0===i&&(i=function(){}),this.LabelName.string=this.LabelNameString[t],this.IconSprite.spriteFrame=this.IconSpriteFrame[t],this.BtnOk.active=!1,this.gatheringLevelTop.UpdateView(t);for(var n=0;n<this.particleSystems.length;n++)this.particleSystems[n].stop(),this.particleSystems[n].node.active=!1;e.prototype.OnShow.call(this,(function(){r.animation.play(),y.AsyncDelay(1800).then(function(){i(),this.gatheringLevelTop.UpdateView(t),y.AsyncDelay(300).then(function(){this.BtnOk.active=!0}.bind(this))}.bind(r))}))},a.OnOkClick=function(){this.animation.stop();for(var t=0;t<this.particleSystems.length;t++)this.particleSystems[t].stop(),this.particleSystems[t].node.active=!1;e.prototype.OnHide.call(this)},t}(m)).prototype,"LabelName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(G.prototype,"IconSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(G.prototype,"IconSpriteFrame",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(G.prototype,"gatheringLevelTop",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(G.prototype,"BtnOk",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(G.prototype,"animation",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(G.prototype,"particleSystems",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=G))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIItemInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ExpeditionServiceApi.ts","./SpriteRatioHelper.ts","./Utility.ts","./ExpeditionHelper.ts","./UIPopupExtractPowder.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(e){"use strict";var t,i,n,r,a,o,l,s,c,u,p,g,d,h,I,f,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Sprite,s=e.Label,c=e.Node,u=e.Component},function(e){p=e.ExpeditionServiceApi},function(e){g=e.SpriteRatioHelper},function(e){d=e.Utility},function(e){h=e.ExpeditionHelper},function(e){I=e.UIPopupExtractPowder},function(e){f=e.ResourcesManager},function(e){m=e.UIPopupManager}],execute:function(){var b,y,v,E,w,S,U,O,T,z,N,R,A,D,L,B,M,x,P,C,k,G,F,_,H,Z,j,q,J,K,Y,Q,V,W,X,$,ee,te,ie,ne,re,ae,oe,le,se,ce,ue,pe,ge,de,he,Ie,fe,me,be,ye,ve;a._RF.push({},"3215692ZpROp4LE2eoCrTIB","UIItemInfo",void 0);var Ee=o.ccclass,we=o.property;e("UIItemInfo",(b=Ee("UIItemInfo"),y=we(l),v=we(g),E=we(s),w=we(c),S=we(s),U=we(s),O=we(s),T=we(s),z=we(c),N=we(I),R=we(c),A=we(s),D=we(s),L=we(s),B=we(s),M=we(c),x=we(s),P=we(s),C=we(s),k=we(s),G=we(s),F=we(s),_=we(c),H=we(c),Z=we(c),j=we(c),q=we(c),b((Y=t((K=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"InfoIcon",Y,r(t)),n(t,"InfoIconUndead",Q,r(t)),n(t,"itemName",V,r(t)),n(t,"MaterialNode",W,r(t)),n(t,"Type",X,r(t)),n(t,"Rarity",$,r(t)),n(t,"Dropfrom",ee,r(t)),n(t,"Des",te,r(t)),n(t,"BtnExtract",ie,r(t)),n(t,"uiPopupExtractPowder",ne,r(t)),n(t,"EggNode",re,r(t)),n(t,"EggID",ae,r(t)),n(t,"EggRarity",oe,r(t)),n(t,"EggStatus",le,r(t)),n(t,"EggTime",se,r(t)),t.EggRarityString=["Common","Rare","Epic","Legendary","Mythic"],t.EggNameString=["ORDINARY EGG","GOOD EGG","AMAZING EGG"],n(t,"UndeadNode",ce,r(t)),n(t,"UndeadID",ue,r(t)),n(t,"UndeadLife",pe,r(t)),n(t,"UndeadRarity",ge,r(t)),n(t,"UndeadStatus",de,r(t)),n(t,"UndeadLevel",he,r(t)),n(t,"UndeadLevelTitle",Ie,r(t)),n(t,"TreasureNode",fe,r(t)),n(t,"BtnOpen",me,r(t)),n(t,"BtnOpen5",be,r(t)),n(t,"BtnOpenInAct",ye,r(t)),n(t,"BtnOpen5InAct",ve,r(t)),t.currentItem=void 0,t.uiScreenAssets=void 0,t}i(t,e);var a=t.prototype;return a.Show=function(e,t,i){if(this.uiScreenAssets=i,this.node.active=!0,this.MaterialNode.active=!1,this.EggNode.active=!1,this.UndeadNode.active=!1,this.TreasureNode.active=!1,this.currentItem=null,this.InfoIconUndead.node.active=!1,this.InfoIcon.node.active=!1,5==e){this.InfoIcon.node.active=!0,this.InfoIcon.grayscale=!1,this.MaterialNode.active=!0;var n=t.data;if(null==n)return void m.Instance.ShowToast("Error","Material info not found",0,!0);this.itemName.string=n.name.toUpperCase(),this.Type.string=n.type,this.Rarity.string=d.RarityToText(n.rarity),this.Dropfrom.string=n.dropFrom,""==this.Dropfrom.string?this.Dropfrom.node.parent.active=!1:this.Dropfrom.node.parent.active=!0,this.Des.string=n.description,this.InfoIcon.node.setScale(1,1,1),this.InfoIcon.spriteFrame=t.imgMaterial.spriteFrame,this.BtnExtract.active=n.type.includes("Mysterious Powder"),this.currentItem=t}else if(6==e){this.InfoIcon.node.active=!0,this.InfoIcon.grayscale=!1,this.EggNode.active=!0;var r=t.data;this.itemName.string=this.EggNameString[r.rarity-1],this.EggID.string=r.tokenId,this.EggRarity.string=this.EggRarityString[r.rarity-1];var a=r.status;if("hatching"==a){var o=r.hatchingTime-d.GetTimeNow();this.EggTime.string=d.SecondsToTime_ver1(Math.floor(o/1e3))}else this.EggTime.string="---";"hatched"==a?this.InfoIcon.node.setScale(.72,.72,1):this.InfoIcon.node.setScale(1,1,1),a=a.charAt(0).toUpperCase()+a.slice(1),this.EggStatus.string=a,this.InfoIcon.spriteFrame=t.Icon.spriteFrame,this.currentItem=t}else if(7==e){this.UndeadNode.active=!0;var l=t.data;this.InfoIconUndead.node.active=!0,f.Instance.GetUndead(l.code.toLowerCase(),l.stage,function(e){this.InfoIconUndead.spriteFrame=e}.bind(this));var s=h.GetTotalLifeTimeLeft(l);switch(this.UndeadLife.string=d.ConvertSecondsToTimeShort(s),this.itemName.string=l.name.toUpperCase(),this.UndeadID.string="#"+l.tokenId,this.UndeadRarity.string=this.EggRarityString[l.rarity-1],l.status){case 4:this.UndeadStatus.string="On sale";break;case 6:this.UndeadStatus.string="In Inventory";break;default:this.UndeadStatus.string="In the barn"}l.stage<=1?this.UndeadLevelTitle.string="Affection Level":this.UndeadLevelTitle.string="Level",this.UndeadLevel.string=t.level.string}else if(8==e){this.TreasureNode.active=!0,this.InfoIcon.node.active=!0,this.InfoIcon.grayscale=t.Icon.grayscale,this.InfoIcon.spriteFrame=t.Icon.spriteFrame,this.InfoIcon.node.setScale(1,1,1);var c=t.itemAmount,u=t.currentKey;this.BtnOpen.active=c>=1&&u>=1,this.BtnOpen5.active=c>=5&&u>=5,this.BtnOpenInAct.active=!this.BtnOpen.active,this.BtnOpen5InAct.active=!this.BtnOpen5.active,this.itemName.string=t.type.replace(/_/g," "),this.currentItem=t}},a.OnOpenEgg=function(){var e=this;if(null!=this.currentItem){var t=this.currentItem.data;if("hatched"==t.status){p.RequestOpenEgg(t._id,function(i){var n=JSON.parse(i);0==n.status?(m.Instance.ShowUIPopupOpenEgg(n,t,null),e.uiScreenAssets.OnEggOpen(e.currentItem.index),e.uiScreenAssets.DeSelectItem()):m.Instance.ShowToast("Error",f.Instance.GetErrorMessage(n.status),0)}.bind(this))}else"hatching"==t.status?m.Instance.ShowToast("Info","Egg is hatching!",2):m.Instance.ShowToast("Info","Egg isn't hatched yet, go to Marketplace to hatch it!",2)}},a.OnOpenClick=function(){var e=this;null!=this.currentItem&&this.currentItem.OnOpenClick((function(t){e.Show(8,t,e.uiScreenAssets)}))},a.OnOpen5Click=function(){var e=this;null!=this.currentItem&&this.currentItem.OnOpen5Click((function(t){e.Show(8,t,e.uiScreenAssets)}))},a.OnMaterialExtractClick=function(){null!=this.currentItem&&this.uiPopupExtractPowder.Show(this.currentItem,this)},a.OnMaterialSellClick=function(){null!=this.currentItem&&m.Instance.ShowToast("Info","Coming soon!",2)},a.Hide=function(){this.node.active=!1},t}(u)).prototype,"InfoIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(K.prototype,"InfoIconUndead",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(K.prototype,"itemName",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(K.prototype,"MaterialNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(K.prototype,"Type",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(K.prototype,"Rarity",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(K.prototype,"Dropfrom",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(K.prototype,"Des",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(K.prototype,"BtnExtract",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(K.prototype,"uiPopupExtractPowder",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(K.prototype,"EggNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(K.prototype,"EggID",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(K.prototype,"EggRarity",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(K.prototype,"EggStatus",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(K.prototype,"EggTime",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(K.prototype,"UndeadNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(K.prototype,"UndeadID",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(K.prototype,"UndeadLife",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=t(K.prototype,"UndeadRarity",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=t(K.prototype,"UndeadStatus",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(K.prototype,"UndeadLevel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=t(K.prototype,"UndeadLevelTitle",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(K.prototype,"TreasureNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(K.prototype,"BtnOpen",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=t(K.prototype,"BtnOpen5",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=t(K.prototype,"BtnOpenInAct",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=t(K.prototype,"BtnOpen5InAct",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=K))||J));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIItemMaterial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts","./UIPopupManager.ts"],(function(t){"use strict";var e,i,r,a,n,o,s,l,u,c,p,m,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,s=t.Sprite,l=t.Label,u=t.SpriteFrame,c=t.Node,p=t.Component},function(t){m=t.ResourcesManager},function(t){h=t.UIPopupManager}],execute:function(){var f,y,d,g,b,v,I,_,M,F,w,C,S;n._RF.push({},"64b3djhJE5GwrsfNP6BViso","UIItemMaterial",void 0);var k=o.ccclass,K=o.property;t("UIItemMaterial",(f=k("UIItemMaterial"),y=K(s),d=K(s),g=K(l),b=K(u),v=K(c),f((M=e((_=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,r(e,"bg_rarity",M,a(e)),r(e,"imgMaterial",F,a(e)),r(e,"txtAmount",w,a(e)),r(e,"rarity_spriteFarme",C,a(e)),r(e,"Content",S,a(e)),e.data=void 0,e.svdata=void 0,e.itemKey=void 0,e.onClick=void 0,e}i(e,t);var n=e.prototype;return n.Init=function(t,e){var i=this;if(this.onClick=e,null!=t){if(null!=this.Content&&(this.Content.active=!0),this.svdata=t,this.itemKey=t.name,this.txtAmount.string=t.amount,1!=this.checkAndLoadSunflower()){m.Instance.LoadMaterialSprite(this.itemKey,(function(t){i.imgMaterial.spriteFrame=t})),"LE"!=this.itemKey?(this.data=m.Instance.GetMaterialData(this.itemKey),null==this.data?(console.warn("error when find material: ",this.itemKey),this.node.active=!1):this.bg_rarity.spriteFrame=this.rarity_spriteFarme[this.data.rarity]):this.bg_rarity.spriteFrame=this.rarity_spriteFarme[0]}}else null!=this.Content&&(this.Content.active=!1)},n.checkAndLoadSunflower=function(){var t=this;if(this.svdata,0==this.itemKey.indexOf("Sunflower")>=0)return!1;var e=(this.itemKey.indexOf("Sapling")>=0?"sapling_":"mama_")+this.svdata.season;return m.Instance.LoadPlant(e,(function(e){t.imgMaterial.spriteFrame=e})),this.bg_rarity.spriteFrame=this.rarity_spriteFarme[0],!0},n.InfoClick=function(){this.onClick(this)},n.SellClick=function(){h.Instance.ShowToast("Infomation","Feature is coming soon!",2)},e}(p)).prototype,"bg_rarity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(_.prototype,"imgMaterial",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(_.prototype,"txtAmount",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(_.prototype,"rarity_spriteFarme",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=e(_.prototype,"Content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=_))||I));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIItemPlantNew.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserModel.ts","./SpriteRatioHelper.ts","./ResourcesManager.ts"],(function(t){"use strict";var i,e,n,o,a,s,r,l,u,h,p,c,d,P,g,v,f,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){s=t.cclegacy,r=t._decorator,l=t.Sprite,u=t.Label,h=t.LabelOutline,p=t.SpriteFrame,c=t.color,d=t.Vec3,P=t.v3,g=t.Component},function(t){v=t.UserModel},function(t){f=t.SpriteRatioHelper},function(t){b=t.ResourcesManager}],execute:function(){var m,C,y,I,L,_,D,S,T,w,F,M,A,J,U,z,O,R,E,H,x,N,B;s._RF.push({},"b5037A+xulB3KE1IIu9ZhPK","UIItemPlantNew",void 0);var V=r.ccclass,k=r.property;t("UIItemPlantNew",(m=V("UIItemPlantNew"),C=k(f),y=k(l),I=k(u),L=k(u),_=k(l),D=k(u),S=k(h),T=k(u),w=k([p]),F=k(l),m((J=i((A=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,n(i,"Plant",J,o(i)),n(i,"type_land",U,o(i)),n(i,"info_harvestLabelLE",z,o(i)),n(i,"Fatigue_Label",O,o(i)),n(i,"Fatigue_Fill",R,o(i)),n(i,"Level_Lable",E,o(i)),n(i,"Level_LableOutline",H,o(i)),n(i,"sunflowerAmount",x,o(i)),n(i,"rarities",N,o(i)),i.raritiesColor=[c("#3AA175"),c("#3AA175"),c("#5580D4"),c("#EF4B4B"),c("#8E00D1")],n(i,"borderRarity",B,o(i)),i.Jdata=void 0,i.uiPopupChoosePlant=void 0,i.DoneLoading=!1,i.isTouchStart=!1,i.isMoving=!1,i.isMoveTo3D=!1,i.currentPos=void 0,i.isoPlantItem=null,i.index=void 0,i.touchStartCb=void 0,i}e(i,t);var s=i.prototype;return s.Init=function(t,i,e){var n=this;this.node.active=!0,this.uiPopupChoosePlant=i,this.DoneLoading=!1,this.isTouchStart=!1,this.index=e,this.Plant.node.active=!1,this.Jdata=t;var o=0;if(null!=this.Jdata){var a=this.Jdata.plant,s="",r="",l=function(t){n.Plant.spriteFrame=t,n.Plant.node.active=!0,n.DoneLoading=!0};if(null==a){if(this.Jdata.usages<=0)return void(this.node.active=!1);if(""!=v.SeasonPlantFilter_Inventory&&v.SeasonPlantFilter_Inventory!=this.Jdata.seasonType)return void(this.node.active=!1);this.sunflowerAmount.node.active=!0,this.sunflowerAmount.string=this.Jdata.usages.toString(),null!=this.Jdata.seasonType&&(this.type_land.node.active=!1,s=(1==this.Jdata.plantType?"sapling_":"mama_")+this.Jdata.seasonType),r=this.Jdata.rate.le+"/"+this.Jdata.rate.hours+" H",b.Instance.LoadPlant(s,l)}else{this.sunflowerAmount.node.active=!1;var u=a.stats;if(b.Instance.Loadtype(u.type,(function(t){n.type_land.node.active=!0,n.type_land.spriteFrame=t})),1==a.type){var h=a.name;b.Instance.LoadPlant(h,l),o=a.rarity+1,this.Level_LableOutline.color=this.raritiesColor[o],this.Jdata.level?this.Level_Lable.string=this.Jdata.level.toString():this.Level_Lable.string="0";var p=this.Jdata.currentFatigue/this.Jdata.maxFatigue;this.Fatigue_Fill.fillRange=p,this.Fatigue_Label.string=Math.floor(100*p).toString()}else{var c=a.iconUrl,d=c.split("/");c=d[d.length-1].split(".")[0],b.Instance.LoadMotherTree(c,l),o=c.includes("90")?3:c.includes("91")?1:2}r=Math.round(a.farmConfig.le/a.farmConfig.hours).toString()+" LE/H"}this.info_harvestLabelLE.string=r,this.borderRarity.spriteFrame=this.rarities[o]}},s.update=function(t){if(this.isMoving&&this.DoneLoading){if(null==this.uiPopupChoosePlant)return;var i=new d(0,0,0);d.lerp(i,this.uiPopupChoosePlant.DragIcon.node.position,this.currentPos,15*t),this.uiPopupChoosePlant.DragIcon.node.setPosition(i)}},s.setTouchStartCb=function(t){this.touchStartCb=t},s.TOUCH_START=function(t,i){if(this.touchStartCb&&this.touchStartCb(this),this.DoneLoading&&!this.isTouchStart&&null!=this.uiPopupChoosePlant){this.uiPopupChoosePlant.Content.enabled=!1,this.isTouchStart=!0,this.isMoving=!0,this.isMoveTo3D=!1,this.isoPlantItem=null,this.uiPopupChoosePlant.DragIcon.node.setScale(this.Plant.node.scale),this.uiPopupChoosePlant.DragIcon.spriteFrame=this.Plant.spriteFrame,this.uiPopupChoosePlant.DragIconUITransform.setContentSize(this.Plant.uiTransform.contentSize),this.uiPopupChoosePlant.DragIcon.node.setWorldPosition(this.Plant.node.worldPosition),this.uiPopupChoosePlant.DragIcon.node.active=!0,this.Plant.node.active=!1;var e=t.getUILocation();e.y-=.5*this.Plant.spriteFrame.originalSize.height*.4,this.currentPos=P(e.x,e.y,0)}},s.TOUCH_MOVE=function(t,i){if(this.DoneLoading&&this.isTouchStart&&null!=this.uiPopupChoosePlant){if(this.isMoveTo3D&&null!=this.isoPlantItem&&this.isoPlantItem.TOUCH_MOVE(t,i),this.isMoving){var e=t.getUIDelta();this.currentPos.x+=e.x,this.currentPos.y+=e.y}!this.isMoveTo3D&&t.getUILocation().x>615&&(this.uiPopupChoosePlant.DragIcon.node.setPosition(this.currentPos),this.isoPlantItem=this.uiPopupChoosePlant.isoFarmManager.AddIsoPlant(this.Jdata,this.uiPopupChoosePlant.DragIcon.node,t,i,this.uiPopupChoosePlant,this),this.isMoving=!1,this.isMoveTo3D=!0,this.uiPopupChoosePlant.DragIcon.node.active=!1,this.uiPopupChoosePlant.MoveOut())}},s.TOUCH_END=function(t,i){this.DoneLoading&&this.isTouchStart&&null!=this.uiPopupChoosePlant&&(this.uiPopupChoosePlant.Content.enabled=!0,this.isMoving=!1,this.isTouchStart=!1,this.uiPopupChoosePlant.DragIcon.node.active=!1,this.node.setScale(1,1,1),null!=this.isoPlantItem?this.isoPlantItem.TOUCH_END(t,i):this.CancelAdd())},s.CancelAdd=function(){this.Plant.node.active=!0},s.ConfirmAdd=function(){if(null==this.Jdata.plant){var t=parseInt(this.sunflowerAmount.string)-1;this.sunflowerAmount.string=t.toString(),this.Plant.node.active=!0,0==t&&(this.node.active=!1)}else this.uiPopupChoosePlant&&this.uiPopupChoosePlant.RequestLoadApply()},a(i,[{key:"data",get:function(){return this.Jdata}}]),i}(g)).prototype,"Plant",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(A.prototype,"type_land",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(A.prototype,"info_harvestLabelLE",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(A.prototype,"Fatigue_Label",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(A.prototype,"Fatigue_Fill",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(A.prototype,"Level_Lable",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(A.prototype,"Level_LableOutline",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=i(A.prototype,"sunflowerAmount",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(A.prototype,"rarities",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=i(A.prototype,"borderRarity",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=A))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/UILEMarket.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PageNumber.ts","./MarketItem.ts","./FarmingServicesApi.ts","./ResourcesManager.ts","./SoundController.ts","./UIPopupManager.ts","./UIPopupBuy.ts","./Utility.ts","./LEMarketData.ts","./UserModel.ts","./GatheringServicesApi.ts"],(function(t){"use strict";var e,n,i,o,a,r,s,l,u,c,p,h,g,m,f,d,b,y,I,S,v,C,w,M,k,L,E,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.CCInteger,l=t.Node,u=t.UIOpacity,c=t.Label,p=t.ToggleContainer,h=t.Button,g=t.tween,m=t.Vec3,f=t.instantiate,d=t.Component},function(t){b=t.PageNumber},function(t){y=t.MarketItem},function(t){I=t.FarmingServicesApi},function(t){S=t.ResourcesManager},function(t){v=t.SoundController,C=t.EnumSound},function(t){w=t.UIPopupManager},function(t){M=t.UIPopupBuy},function(t){k=t.Utility},function(t){L=t.LEMarketData},function(t){E=t.UserModel},function(t){T=t.GatheringServicesApi}],execute:function(){var U,D,P,B,N,A,O,z,_,R,G,q,F,x,V,J,j,H,K,W,X,Y,Z,Q,$,tt,et;t("MarketType",void 0),a._RF.push({},"f2cd5S5vl9M7oXYMU98+/IL","UILEMarket",void 0);var nt,it=r.ccclass,ot=r.property;!function(t){t.MATERIAL="ToggleMaterial",t.MISC="ToggleMisc",t.DEAL="ToggleDeal"}(nt||(nt=t("MarketType",{})));var at=10;t("UILEMarket",(U=it("UILEMarket"),D=ot(s),P=ot(l),B=ot(u),N=ot(c),A=ot(p),O=ot([c]),z=ot(h),_=ot(l),R=ot(u),G=ot(l),q=ot(M),F=ot(b),U((J=e((V=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"order",J,o(e)),i(e,"fxLighRay",j,o(e)),i(e,"uiOpacity",H,o(e)),i(e,"lbLE",K,o(e)),i(e,"togContainer",W,o(e)),i(e,"toggleTitle",X,o(e)),i(e,"btnBack",Y,o(e)),i(e,"itemPrefab",Z,o(e)),i(e,"popUpComingSoon",Q,o(e)),i(e,"contentView",$,o(e)),i(e,"uiPopUpBuy",tt,o(e)),i(e,"pageNumber",et,o(e)),e.materialsData=[],e.micsData=[],e.dealsData=[],e.marketItems=[],e.currentType=nt.MATERIAL,e.onBack=void 0,e}n(e,t);var a=e.prototype;return a.onLoad=function(){this.tweenShow=g(this.uiOpacity).to(.3,{opacity:255}),this.tweenOpacityComingSoon=g(this.popUpComingSoon).to(.3,{opacity:255}),this.tweenNodeComingSoon=g(this.popUpComingSoon.node).to(.3,{scale:new m(1.1,1.1,1)}).to(.3,{scale:m.ONE})},a.start=function(){this.pageNumber.node.on("pageNumber:clicked",this.onChangePage,this),this.btnBack.node.on(h.EventType.CLICK,this.onBackClicked,this),this.uiPopUpBuy.node.on("shopItem:onClicked",this.onBuyClicked,this);for(var t=this.togContainer.toggleItems,e=0;e<t.length;e++){t[e].node.on("toggle",this.onToggleSelected,this)}this.popUpComingSoon.node.active=!1,this.popUpComingSoon.opacity=0,this.activeTab(nt.MATERIAL)},a.ShowComingSoon=function(){this.popUpComingSoon.node.active=!0,this.popUpComingSoon.opacity=0,this.popUpComingSoon.node.scale=new m(.8,.8,1),this.tweenNodeComingSoon&&this.tweenNodeComingSoon.stop(),this.tweenOpacityComingSoon&&this.tweenOpacityComingSoon.stop(),this.tweenNodeComingSoon.start(),this.tweenOpacityComingSoon.start()},a.Show=function(t){this.onBack=t,v.Instance.PlaySound(C.GameUI_openpopup),this.uiOpacity.opacity=1,this.popUpComingSoon.node.active=!1,this.popUpComingSoon.opacity=0,this.node.active=!0,this.tweenShow&&this.tweenShow.start(),this.activeTab(nt.MATERIAL),this.requestLoadFarmsStats(),this.requestLoadMarket()},a.activeTab=function(t){var e=this.togContainer.toggleItems;if(e.length==this.toggleTitle.length){this.currentType=t;for(var n=0;n<e.length;n++){var i=e[n],o=this.toggleTitle[n],a=i.node.name,r=i.node.getComponentInChildren(u);r&&(r.node.active=a!=t),i.isChecked=a==t,o.node.position=new m(o.node.position.x,a==t?330:350),o.fontSize=a==t?50:40}this.loadItem(t)}},a.requestLoadFarmsStats=function(){var t=this;if(-1==E.LE_num){I.RequestFarmsStats((function(e){var n=JSON.parse(e);if(0==n.status){var i=n.data.leWallet;E.LE_num=i,k.TweenLE(i,!1,t.lbLE)}else w.Instance.ShowToast("Error",S.Instance.GetErrorMessage(n.status),0)}),null)}else k.TweenLE(E.LE_num,!1,this.lbLE)},a.getItemMarket=function(){var t=this.marketItems.find((function(t){return 1==t.available}));if(null==t||null==t){var e=f(this.itemPrefab);e.on("marketItem:onClicked",this.onSelectedItem,this);var n=e.getComponent(y);n.resetData(),n&&(n.node.position=m.ZERO,n.node.setParent(this.contentView),this.marketItems.push(n),t=n)}return t},a.loadItem=function(t){var e=this.materialsData;if(t==nt.MISC&&(e=this.micsData),t==nt.DEAL&&(e=this.dealsData),this.marketItems.map((function(t){return t.resetData()})),!(null==e||e.length<=0)){this.pageNumber.currentPage=0;for(var n=0;n<e.length;n++){var i=e[n];if(!(null==i||n>=at)){var o=this.getItemMarket();if(o){o.loadData(i),o.activeItem(!i.isSoldOut());var a=n%2==0?175:-175;o.node.position=new m(0,a)}}}var r=e.length%at==0?Math.floor(e.length/at):Math.floor(e.length/at)+1;this.pageNumber.setTotalPage(r)}},a.requestLoadMarket=function(){var t=this;T.Market_GetItems((function(e){var n=JSON.parse(e);if(0==n.status){if(null!=n.data){var i=new L(n.data),o=i.materialMarket;if(null==o||o.length<=0)return;t.micsData=o.filter((function(t){return 0==t.isMaterial})),t.materialsData=o.filter((function(t){return 1==t.isMaterial})),t.dealsData=i.dealMarket,t.loadItem(t.currentType)}}else w.Instance.ShowToast("Error",S.Instance.GetErrorMessage(n.status),0)}),(function(t){}))},a.requestBuyItem=function(t){var e=this,n=t.dataItem,i=n?n.code:"",o=t.amount>0?t.amount:0,a={code:i,amount:o};T.Market_BuyItem(a,function(t){var i=JSON.parse(t).status;if(0==i){if(!n)return;var a=n.getPrice()*o,r=E.LE_num-a;e.uiPopUpBuy.decreaseTotalItem(),E.LE_num=r>0?r:0,k.TweenLE(r,!1,e.lbLE),e.requestLoadMarket(),e.uiPopUpBuy.isMaxBuy()&&e.scheduleOnce((function(){e.uiPopUpBuy.onCloseClicked()}),.5),w.Instance.ShowToast("Notification","Buy Success",1,!0)}else w.Instance.ShowToast("Error",S.Instance.GetErrorMessage(i),0)}.bind(this),function(t){console.warn("Error",t)}.bind(this))},a.onToggleSelected=function(t){if(t.isChecked){var e=t.node.name;this.currentType!=e&&(this.popUpComingSoon.node.active=!1,this.activeTab(e),e==nt.DEAL&&this.dealsData.length<=0||e==nt.MISC&&this.micsData.length<=0||e==nt.MATERIAL&&this.materialsData.length<=0?this.ShowComingSoon():v.Instance.PlaySound(C.GameUI_button_click))}},a.onBackClicked=function(){this.node.active=!1,v.Instance.PlaySound(C.GameUI_closepopup),null!=this.onBack&&this.onBack()},a.onSelectedItem=function(t){this.uiPopUpBuy.Show(t)},a.onChangePage=function(t){var e=this.materialsData;if(this.currentType==nt.MISC&&(e=this.micsData),this.currentType==nt.DEAL&&(e=this.dealsData),this.marketItems.map((function(t){return t.resetData()})),this.pageNumber.activePage(),!(null==e||e.length<=0))for(var n=0;n<e.length;n++){var i=e[n+t*at];if(null!=i&&!(this.pageNumber.currentPage*at>n||n>=(this.pageNumber.currentPage+1)*at)){var o=this.getItemMarket();if(o){o.loadData(i),o.activeItem(!i.isSoldOut());var a=n%2==0?175:-175;o.node.position=new m(0,a)}}}},a.onBuyClicked=function(t){this.requestBuyItem(t)},e}(d)).prototype,"order",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=e(V.prototype,"fxLighRay",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(V.prototype,"uiOpacity",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(V.prototype,"lbLE",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(V.prototype,"togContainer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(V.prototype,"toggleTitle",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=e(V.prototype,"btnBack",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=e(V.prototype,"itemPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=e(V.prototype,"popUpComingSoon",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=e(V.prototype,"contentView",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=e(V.prototype,"uiPopUpBuy",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=e(V.prototype,"pageNumber",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=V))||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/UImanager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FarmingServicesApi.ts","./UserModel.ts","./PrefabController.ts","./Utility.ts","./ResourcesManager.ts","./UIPopupManager.ts","./UIScreenFram.ts"],(function(e){"use strict";var t,n,a,i,r,s,o,c,l,u,S,h,m,p,f,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.Node,c=e.Component},function(e){l=e.FarmingServicesApi},function(e){u=e.UserModel},function(e){S=e.PrefabController,h=e.PrefabEnum},function(e){m=e.Utility},function(e){p=e.ResourcesManager},function(e){f=e.UIPopupManager},function(e){d=e.UIScreenFram}],execute:function(){var I,U,P,T,v,w;r._RF.push({},"2759cPvKbxAda71zLio5/+8","UImanager",void 0);var A=s.ccclass,F=s.property;e("UImanager",(I=A("UImanager"),U=F(o),I(((w=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,a(t,"SeasonParticle",v,i(t)),t._UIScreenFram=void 0,t.updateTimelAtTimmer=void 0,t.isUpdateTimelAt=void 0,t}n(t,e);var r=t.prototype;return r.onLoad=function(){t.Instance=this,this._UIScreenFram=this.getComponentInChildren(d)},r.start=function(){this.RequestWeather(!0)},r.OnBackClick=function(){S.Instance.ReturnAllPrefab(h.ChaseCrow),S.Instance.ReturnAllPrefab(h.Water_single),S.Instance.ReturnAllPrefab(h.Harvest),S.Instance.ReturnAllPrefab(h.PlacePlant),S.Instance.ReturnAllPrefab(h.MaterialDrop),this.StopUpdateTime(),f.Instance.ShowUIScreenMain(2)},r.RequestWeather=function(e){var t=this;l.RequestWeather((function(n){t.LoadSeason(n,e)}),null)},r.LoadSeason=function(e,t){var n=JSON.parse(e);if(0==n.status){u.SeasonData=JSON.parse(JSON.stringify(n.data)),u.seasonEndTimeNum=Date.parse(u.SeasonData.seasonEndTime),u.seasonStartTimeNum=Date.parse(u.SeasonData.seasonStartTime);for(var a=0;a<this.SeasonParticle.length;a++)this.SeasonParticle[a].active=!1;switch(u.SeasonData.season){case"spring":m.PlayParticle(this.SeasonParticle[0]);break;case"summer":m.PlayParticle(this.SeasonParticle[1]);break;case"autumn":m.PlayParticle(this.SeasonParticle[2]);break;default:m.PlayParticle(this.SeasonParticle[3])}f.Instance.UIScreenWeather((function(e){e.node.active&&e.Show()})),this.CorouUpdateTime(),t?(this._UIScreenFram.node.active=!0,this._UIScreenFram.Show(!0)):this._UIScreenFram.node.active&&this._UIScreenFram.Show(!0),u.isShowPopupSeasonFirstTime||(f.Instance.ShowUIPopupNewSeason(),u.isShowPopupSeasonFirstTime=!0)}else f.Instance.ShowToast("Error",p.Instance.GetErrorMessage(n.status),0)},r.StopUpdateTime=function(){clearTimeout(this.updateTimelAtTimmer),this.isUpdateTimelAt=!1},r.CorouUpdateTime=function(){var e=this;this.isUpdateTimelAt=!0,this.updateTimelAtTimmer=setTimeout((function t(){e.UpdateTimeSeason(),e.isUpdateTimelAt&&(e.updateTimelAtTimmer=setTimeout(t,3e4))}),3e4)},r.UpdateTimeSeason=function(){u.seasonEndTimeNum-m.GetTimeNow()<=0&&(this.StopUpdateTime(),this.RequestWeather(!1))},r.CloseAllScene=function(){this._UIScreenFram&&this._UIScreenFram.Show(!1)},r.ShowWeather=function(){f.Instance.UIScreenWeather((function(e){e.node.active?e.Hide():e.Show()}))},r.ShowScreenFarm=function(){this.CloseAllScene(),this._UIScreenFram&&(this._UIScreenFram.node.active=!0,this._UIScreenFram.Show(!0))},r.ShowUIScreenCraft=function(e){this.CloseAllScene(),f.Instance.ShowUIScreenCraft(e,this.ShowScreenFarm.bind(this))},r.ShowUIScreenAssets=function(){this.CloseAllScene(),f.Instance.ShowUIScreenAssets(this.ShowScreenFarm.bind(this))},t}(c)).Instance=void 0,v=t((T=w).prototype,"SeasonParticle",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=T))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIMysticCraft.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UICraftSuccess.ts","./SlotCraftItem.ts","./InventoryData.ts","./ResourcesManager.ts","./UIPopupManager.ts","./Utility.ts","./GatheringServicesApi.ts","./CraftingData.ts"],(function(t){"use strict";var e,a,i,r,n,s,o,l,f,c,u,m,I,C,h,y,g,v,p,S,d,M;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,o=t.ToggleContainer,l=t.Button,f=t.Label,c=t.Node,u=t.Sprite,m=t.Vec3,I=t.Component},function(t){C=t.UICraftSuccess},function(t){h=t.SlotCraftItem},function(t){y=t.ItemData},function(t){g=t.ResourcesManager},function(t){v=t.UIPopupManager},function(t){p=t.Utility,S=t.MaterialRarity},function(t){d=t.GatheringServicesApi},function(t){M=t.MysticCraftData}],execute:function(){var T,R,D,E,b,N,B,w,U,A,O,x,L,z,G,F,_,P,j,k,K;n._RF.push({},"c6da816pItMU5zzuU+FqUFx","UIMysticCraft",void 0);var q=s.ccclass,Y=s.property;t("UIMysticCraft",(T=q("UIMysticCraft"),R=Y(o),D=Y(l),E=Y(f),b=Y(f),N=Y(c),B=Y(u),w=Y([c]),U=Y(h),A=Y(C),T((L=e((x=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(e,"toggleItems",L,r(e)),i(e,"btnCraftMystic",z,r(e)),i(e,"lbCraftMysticCost",G,r(e)),i(e,"lbCraftTitle",F,r(e)),i(e,"craftView",_,r(e)),i(e,"sprMaterial",P,r(e)),i(e,"slotCraft",j,r(e)),i(e,"resultCraft",k,r(e)),i(e,"uiCraftSuccess",K,r(e)),e.slotItems=[],e.uiTravelBag=void 0,e.uiScreenCraft=void 0,e.mysticMaterialsSameType=[],e.mysticMaterialsRandomType=[],e.initial=!1,e.ExclusiveItemCraft=["TREASURE","KEY","UNDEAD_EGG","SKILL_BOOK","POWDER","CHEST_KEY","TOKEN"],e.ExclusiveRarityCraft=["FERTILIZER","MYSTERIOUS"],e}a(e,t);var n=e.prototype;return n.onInit=function(t){if(t){if(this.uiScreenCraft=t,this.mysticMaterialsRandomType=t.craftingConfig.mysticMaterialsRandomType,this.mysticMaterialsSameType=t.craftingConfig.mysticMaterialsSameType,this.uiTravelBag=this.uiScreenCraft.uiTravelBag,!this.initial)for(var e=0;e<this.slotCraft.length;e++){var a=this.slotCraft[e];if(a){a.on("slotItem:onClicked",this.onSelectedSlotCraft,this);var i=a.getComponent(h);i&&(i.resetSlot(),this.slotItems.push(i))}}this.uiCraftSuccess.onInit(),this.uiCraftSuccess.node.on("uiCraftSuccess:onClicked",this.onCollectItem,this),this.initial||this.btnCraftMystic.node.on(l.EventType.CLICK,this.onBtnCraftMysticClicked,this),this.activeBtnCraft(!1),this.initial=!0}},n.resetDataCraft=function(){this.activeBtnCraft(!1),this.resultCraft.resetSlot();for(var t=this.slotItems.length,e=0;e<t;e++){var a=this.slotItems[e];if(a){var i=a.ItemID;if(""!=i)this.uiTravelBag.getItemBag(i).TotalItem++,a.resetSlot()}}},n.resetSlotItems=function(){for(var t=this.slotItems.length,e=0;e<t;e++){var a=this.slotItems[e];""!=a.ItemID&&a.resetSlot()}},n.activeBtnCraft=function(t,e){void 0===e&&(e=0);var a=this.btnCraftMystic.getComponentInChildren(u);a&&(a.node.active=t),p.activeButton(this.btnCraftMystic,t);var i=new m(t?-80:0,5,0);this.lbCraftTitle.node.position=i,this.lbCraftTitle.fontSize=t?40:50,this.lbCraftMysticCost.string=t?e.toString():""},n.fillSlotCraft=function(t){var e=this.slotItems.findIndex((function(t){return""==t.ItemID})),a=this.slotItems[e];a&&(a.loadData(t,e),a.itemAppear(),this.slotItems.filter((function(t){return""!=t.ItemID&&"FRAGMENT"==t.itemData.getItemType()})).length>3?this.loadResultCraftFragment():this.loadResultCraftMaterial())},n.loadResultCraftMaterial=function(){var t=this.slotItems.filter((function(t){return""!=t.ItemID&&t.Rarity>=S.COMMON}));t.sort((function(e,a){return t.filter((function(t){return t.itemData.name===a.itemData.name})).length-t.filter((function(t){return t.itemData.name===e.itemData.name})).length}));var e=t.length;if(e<5)return""!=this.resultCraft.ItemID&&this.resultCraft.resetSlot(),void this.activeBtnCraft(!1);for(var a=0,i=0,r=0,n=0,s=0,o=t[0].itemData.name,l=S.NONE,f=0;f<e;f++){var c=t[f];"COMMON"==c.itemData.getItemRarity()?a++:"RARE"==c.itemData.getItemRarity()?r++:"EPIC"==c.itemData.getItemRarity()?i++:"LEGENDARY"==c.itemData.getItemRarity()&&n++,c.itemData.name==o&&s++}if(a>=5?l=S.RARE:r>=5?l=S.EPIC:i>=5?l=S.LEGEND:n>=5&&(l=S.MYTHIC),l>S.MYTHIC)v.Instance.ShowToast("Warning","Can't Craft Material Highest Rarity",0,!1);else{var u="",m=p.getNameRarity(l)+"_RANDOM";if(l!=S.NONE){var I=(s>=5?this.mysticMaterialsSameType:this.mysticMaterialsRandomType).find((function(t){return t.rarity==p.getNameRarity(l-1)&&"MATERIAL"==t.getTypeItem()}));if(I&&this.activeBtnCraft(!0,I.costLE),s>=5){var C=g.Instance.GetMaterialData(t[0].itemData.name);if(null!=C){var h=g.Instance.GetMaterialWithTypeAndRarity(C.type,C.rarity+1);u=null!=h?h.ConfigName:m}else u=m}else u=m;var d=new y({_id:"qlwdjl1j2lkj1lj1oij",name:u,amount:1,maxStack:-1});this.resultCraft.loadData(d)}else this.resultCraft.resetSlot(),this.activeBtnCraft(!1)}},n.loadResultCraftFragment=function(){var t=this.slotItems.filter((function(t){return""!=t.ItemID&&"FRAGMENT"==t.itemData.getItemType()})),e=t.length;if(e<4)""!=this.resultCraft.ItemID&&this.resultCraft.resetSlot();else{for(var a=0,i=0,r=0,n=0,s=0;s<e;s++){var o=t[s];"SPRING"==o.itemData.getItemRarity()&&a++,"SUMMER"==o.itemData.getItemRarity()&&i++,"AUTUMN"==o.itemData.getItemRarity()&&n++,"WINTER"==o.itemData.getItemRarity()&&r++}var l=!1,f="SCRAP";a>=4&&(f="SPRING",l=!0),i>=4&&(f="SUMMER",l=!0),n>=4&&(f="AUTUMN",l=!0),r>=4&&(f="WINTER",l=!0);var c=(l?this.mysticMaterialsSameType:this.mysticMaterialsRandomType).find((function(t){return"TOKEN"==t.getTypeItem()}));c&&this.activeBtnCraft(!0,c.costLE);var u=new y({_id:"sadjqj133",name:f+"_TOKEN",amount:1,maxStack:-1});this.resultCraft.loadData(u)}},n.CanCraftItem=function(t,e){return!(this.ExclusiveRarityCraft.indexOf(e)>=0)&&this.ExclusiveItemCraft.indexOf(t)<0},n.onSelectedItem=function(t){var e=t.itemID,a=t.itemData,i=this.uiTravelBag.getItemBag(e),r=a.getItemType(),n=a.getItemRarity();this.CanCraftItem(r,n)?this.slotItems.findIndex((function(t){return""==t.ItemID}))<0?v.Instance.ShowToast("Error","Slot craft is full!",0,!0):i&&i.TotalItem>0&&(i.TotalItem=i.TotalItem-1,this.sprMaterial.node.position=this.uiTravelBag.convertPositionItemToNode(i.node.position),this.fillSlotCraft(a)):v.Instance.ShowToast("Notification","Can't craft this item",0,!0)},n.onSelectedSlotCraft=function(t){if(null!=t.itemData){var e=t.itemData,a=e.id,i=(e.name,t.index);if(""!=a){var r=this.uiTravelBag.getItemBag(a);if(r){var n=this.slotItems.find((function(t){return t.ItemID==a&&t.Index==i}));if(n)r.TotalItem++,n.resetSlot(),this.slotItems.filter((function(t){return""!=t.ItemID&&"FRAGMENT"==t.itemData.getItemType()})).length>3?this.loadResultCraftFragment():this.loadResultCraftMaterial()}}}},n.onBtnCraftMysticClicked=function(t){this.requestCraft(),this.resultCraft.resetSlot()},n.onCollectItem=function(){this.uiScreenCraft.activeUITop(!0)},n.requestCraft=function(){for(var t=this,e=[],a=[],i=this.slotItems.length,r=function(){var i=t.slotItems[n];if(""==i.ItemID)return"continue";var r=i.itemData.name,s=e.findIndex((function(t){return t.name==r}));if(a.push(r),s<0){var o={name:r,amount:1};e.push(o)}else{var l=e[s];l.amount=l.amount+1}},n=0;n<i;n++)r();d.Crafting_Mystic(e,function(e){var i=JSON.parse(e);if(0==i.status){var r=new M(i.data),n=r.craftedItems[0],s=r.leBalance;try{t.uiScreenCraft.TweenLE(s,!1)}catch(t){console.error(t)}var o={itemsCraft:a,itemResult:n.name};t.uiScreenCraft.activeUITop(!1),t.uiCraftSuccess.onShow(o),t.scheduleOnce((function(){t.resultCraft.resetSlot(),t.resetSlotItems(),t.activeBtnCraft(!1),t.uiScreenCraft.requestLoadFarmsStats(),t.uiTravelBag.requestLoadMaterials()}),.2)}else v.Instance.ShowToast("Error",g.Instance.GetErrorMessage(i.status),0,!1)}.bind(this),function(t){console.warn("Error",t)}.bind(this),!0)},e}(I)).prototype,"toggleItems",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(x.prototype,"btnCraftMystic",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(x.prototype,"lbCraftMysticCost",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(x.prototype,"lbCraftTitle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(x.prototype,"craftView",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(x.prototype,"sprMaterial",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(x.prototype,"slotCraft",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=e(x.prototype,"resultCraft",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(x.prototype,"uiCraftSuccess",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=x))||O));n._RF.pop()}}}));

System.register("chunks:///_virtual/UINotifyConfirm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts"],(function(t){"use strict";var e,i,n,o,r,l,a,s,c,p,u,h,f,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.Label,s=t.RichText,c=t.Node,p=t.Sprite,u=t.SpriteFrame,h=t.UITransform,f=t.Widget},function(t){C=t.PopUpBase}],execute:function(){var m,y,b,g,d,O,v,I,S,B,k,w,z,x,U;r._RF.push({},"7ee95GSLuNOxKRr1IJj/U+A","UINotifyConfirm",void 0);var F=l.ccclass,N=l.property;t("UINotifyConfirm",(m=F("UINotifyConfirm"),y=N(a),b=N(s),g=N(c),d=N(c),O=N(p),v=N(u),m((B=e((S=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"title",B,o(e)),n(e,"text",k,o(e)),n(e,"BtnClose",w,o(e)),n(e,"BG",z,o(e)),n(e,"Icon",x,o(e)),n(e,"IconSpriteFrame",U,o(e)),e.isCanClose=!1,e.isCloseWhenOk=!1,e.onOk=void 0,e}i(e,t);var r=e.prototype;return r.Show=function(e,i,n,o,r,l,a){t.prototype.OnShow.call(this),this.onOk=n,this.title.string=e,this.text.string="<color=#78462C>"+i+"</color>",this.BtnClose.active=o,this.BG.active=r,this.isCanClose=o,this.Icon.spriteFrame=this.IconSpriteFrame[l],this.isCloseWhenOk=a;var s=this.text.getComponent(h).contentSize.width,c=this.ScaleNode.getComponent(h),p=c.contentSize.clone();p.width=Math.max(s+150,780),c.setContentSize(p);var u=this.BtnClose.getComponent(f);u&&u.updateAlignment()},r.OnBtnCloseClick=function(){this.isCanClose&&t.prototype.OnHide.call(this)},r.OnBtnOkClick=function(){var e=this;this.isCanClose||this.isCloseWhenOk?t.prototype.OnHide.call(this,(function(){e.onOk()})):this.onOk()},e}(C)).prototype,"title",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(S.prototype,"text",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(S.prototype,"BtnClose",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(S.prototype,"BG",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(S.prototype,"Icon",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(S.prototype,"IconSpriteFrame",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=S))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/UINotifyExpedition.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts","./UINotifyExpeditionItem.ts"],(function(t){"use strict";var i,e,o,n,r,a,l,c,u,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,c=t.instantiate},function(t){u=t.PopUpBase},function(t){f=t.UINotifyExpeditionItem}],execute:function(){var s,p,h,d,y,I,m;r._RF.push({},"ceb15auYdNMOp+o1+XdKd1a","UINotifyExpedition",void 0);var N=a.ccclass,v=a.property;t("UINotifyExpedition",(s=N("UINotifyExpedition"),p=v(l),h=v(l),s((I=i((y=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,o(i,"contentNotify",I,n(i)),o(i,"itemNotify",m,n(i)),i.poolItem=[],i.uiManager=void 0,i}e(i,t);var r=i.prototype;return r.onInit=function(t){this.uiManager=t},r.OnShow=function(){this.node.active=!0,null!=this.ScaleNode&&null!=this.fadeUIOpacity&&(this.ScaleNode.setScale(1,1,1),this.fadeUIOpacity.opacity=255)},r.showNotify=function(t){if(!this.checkDataContain(t)){var i=this.poolItem.filter((function(t){return 0==t.available})).length;this.getItemNotify().onShow(i,t)}},r.hideAllNotifyWithoutEffect=function(){for(var t=this.poolItem.length,i=0;i<t;i++){this.poolItem[i].resetItem()}},r.hideNotify=function(t){var i=this.poolItem.find((function(i){return i.getTokenId()==t}));null!=i&&null!=i?i.onHide():console.error("hide notify error")},r.checkDataContain=function(t){return null!=this.poolItem.find((function(i){return i.getTokenId()==t.tokenId}))},r.getItemNotify=function(){var t=this.poolItem.find((function(t){return 1==t.available}));if(null==t||null==t){var i=c(this.itemNotify);i.on("expeditionItem:onClicked",this.onShowPopUpClaim,this);var e=i.getComponent(f);i.active=!0,this.contentNotify.addChild(i),e&&(e.initItem(),this.poolItem.push(e),t=e)}return t},r.onShowPopUpClaim=function(t){this.uiManager.uiFinishExpeditionPopup.Show(t)},i}(u)).prototype,"contentNotify",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=i(y.prototype,"itemNotify",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=y))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/UINotifyExpeditionItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,o,s,a,h,l,d,p,c,r;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,h=t.UIOpacity,l=t.Button,d=t.UITransform,p=t.Vec3,c=t.tween,r=t.Component}],execute:function(){var u,w,I,y,v,m,f;s._RF.push({},"7b347qRtN9HHLxaCkY5SSRV","UINotifyExpeditionItem",void 0);var g=a.ccclass,U=a.property;t("UINotifyExpeditionItem",(u=g("UINotifyExpeditionItem"),w=U(h),I=U(l),u((m=e((v=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(e,"opacityNode",m,o(e)),n(e,"btnShowPopUpClaim",f,o(e)),e.tweenMoveIn=void 0,e.tweenOpacity=void 0,e.tweenHide=void 0,e.available=!1,e.dataUndead=void 0,e.indexPosition=-1,e.heightItem=120,e}i(e,t);var s=e.prototype;return s.start=function(){this.btnShowPopUpClaim.node.on("click",this.onShowPopUpClaim,this)},s.initItem=function(){var t=this,e=this.node.getComponent(d);null==e&&(this.node.addComponent(d),e=this.node.getComponent(d)),this.heightItem=e.height,this.opacityNode.opacity=0,this.node.position=new p(0,-this.heightItem,0),this.available=!1,this.tweenOpacity=c(this.opacityNode).to(.3,{opacity:255}),this.tweenHide=c(this.opacityNode).to(.5,{opacity:0}).call((function(){t.node.position=new p(0,-t.heightItem,0),t.available=!0}))},s.resetItem=function(){null!=this.tweenMoveIn&&this.tweenMoveIn.stop(),null!=this.tweenOpacity&&this.tweenOpacity.stop(),null!=this.tweenHide&&this.tweenHide.stop(),this.opacityNode.opacity=0,this.node.position=new p(0,-this.heightItem,0),this.available=!0,this.dataUndead=null},s.getIndex=function(){return this.indexPosition},s.getTokenId=function(){return null==this.dataUndead?-1:this.dataUndead.tokenId},s.onShow=function(t,e){void 0===t&&(t=0),void 0===e&&(e=null),null!=this.tweenMoveIn&&this.tweenMoveIn.stop(),null!=this.tweenOpacity&&this.tweenOpacity.stop(),null!=this.tweenHide&&this.tweenHide.stop(),this.indexPosition=t,this.dataUndead=e,this.available=!1,this.tweenMoveIn=c(this.node).to(.5,{position:new p(0,t*this.heightItem+this.heightItem/2+20)}),this.tweenOpacity.start(),this.tweenMoveIn.start()},s.onHide=function(){null!=this.tweenMoveIn&&this.tweenMoveIn.stop(),null!=this.tweenOpacity&&this.tweenMoveIn.stop(),null!=this.tweenHide&&this.tweenHide.stop(),this.tweenHide.start(),this.indexPosition=-1,this.dataUndead=null},s.onShowPopUpClaim=function(){this.node.emit("expeditionItem:onClicked",this.dataUndead)},e}(r)).prototype,"opacityNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=e(v.prototype,"btnShowPopUpClaim",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=v))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupBuy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts","./Utility.ts","./ResourcesManager.ts"],(function(t){"use strict";var e,i,n,a,r,o,l,s,u,m,p,c,b,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,l=t.Button,s=t.Sprite,u=t.Label,m=t.SpriteFrame},function(t){p=t.PopUpBase},function(t){c=t.Utility,b=t.URL_THEME},function(t){h=t.ResourcesManager}],execute:function(){var I,d,y,f,g,C,B,S,v,L,w,x,z,D,k,T,E,M,P,F,U,A,R,_,K,N,H;r._RF.push({},"5d1e2orMpRBkZZsHsnsODyq","UIPopupBuy",void 0);var O=o.ccclass,G=o.property;t("UIPopupBuy",(I=O("UIPopupBuy"),d=G(l),y=G(l),f=G(l),g=G(l),C=G(l),B=G(s),S=G(s),v=G(u),L=G(u),w=G(u),x=G(u),z=G(m),I((T=e((k=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"btnBgClose",T,a(e)),n(e,"btnClose",E,a(e)),n(e,"btnAdd",M,a(e)),n(e,"btnSub",P,a(e)),n(e,"btnBuy",F,a(e)),n(e,"sprItem",U,a(e)),n(e,"sprRarity",A,a(e)),n(e,"lbItemDescription",R,a(e)),n(e,"lbLECost",_,a(e)),n(e,"lbTotalItem",K,a(e)),n(e,"lbItemName",N,a(e)),n(e,"sprFrameDefault",H,a(e)),e.totalItem=0,e.price=0,e.maxItem=0,e.dataItem=null,e}i(e,t);var r=e.prototype;return r.start=function(){this.btnBgClose.node.on(l.EventType.CLICK,this.onCloseClicked,this),this.btnClose.node.on(l.EventType.CLICK,this.onCloseClicked,this),this.btnBuy.node.on(l.EventType.CLICK,this.onBuyClicked,this),this.btnAdd.node.on(l.EventType.CLICK,this.onAddClicked,this),this.btnSub.node.on(l.EventType.CLICK,this.onSubClicked,this)},r.Show=function(e){if(t.prototype.OnShow.call(this),e){this.dataItem=e;var i=e.userMarket,n=h.Instance.GetMaterialData(e.name);this.lbItemName.string=n?n.name:e.getItemName().toLocaleUpperCase(),this.lbLECost.string=Math.round(e.getPrice()).toString(),this.maxItem=i?e.maxAmount-i.totalPurchased:e.maxAmount,this.totalItem=1,this.lbTotalItem.string=this.totalItem.toString(),this.lbItemDescription.string=n?n.description:"",this.updateStateBtn(),this.loadSpriteMaterial(e)}},r.decreaseTotalItem=function(){this.maxItem=this.maxItem>0?this.maxItem-1:this.maxItem},r.resetData=function(){this.lbLECost.string="",this.lbItemName.string="",this.lbTotalItem.string="",this.lbItemDescription.string="",this.sprItem.spriteFrame=this.sprFrameDefault},r.loadSpriteMaterial=function(t){var e=this,i=t.name,n=t.rarity,a=b+"BG_"+n+"/spriteFrame";h.Instance.LoadMaterialSprite(i,(function(t){e.sprItem.spriteFrame=t})),c.getStaticSpriteFrame(a,(function(t,i){null!=i&&null!=e.sprItem&&(e.sprRarity.spriteFrame=i)}))},r.updateStateBtn=function(){this.totalItem>this.maxItem&&(this.totalItem=this.maxItem),this.totalItem<0&&(this.totalItem=0),c.activeButton(this.btnAdd,this.totalItem<this.maxItem),c.activeButton(this.btnSub,this.totalItem>0),c.activeButton(this.btnBuy,this.totalItem>0),this.lbLECost.string=this.totalItem<1?""+this.dataItem.getPrice().toString():""+this.totalItem*this.dataItem.getPrice(),this.lbTotalItem.string=this.totalItem.toString()},r.isMaxBuy=function(){return this.totalItem>=this.maxItem},r.onAddClicked=function(){this.totalItem++,this.updateStateBtn()},r.onSubClicked=function(){this.totalItem--,this.updateStateBtn()},r.onBuyClicked=function(){var t={dataItem:this.dataItem,amount:this.totalItem};this.node.emit("shopItem:onClicked",t)},r.onCloseClicked=function(){t.prototype.OnHide.call(this),this.resetData()},e}(p)).prototype,"btnBgClose",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(k.prototype,"btnClose",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(k.prototype,"btnAdd",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(k.prototype,"btnSub",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(k.prototype,"btnBuy",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(k.prototype,"sprItem",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(k.prototype,"sprRarity",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(k.prototype,"lbItemDescription",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(k.prototype,"lbLECost",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(k.prototype,"lbTotalItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(k.prototype,"lbItemName",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(k.prototype,"sprFrameDefault",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=k))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupBuyStamina.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./UserModel.ts","./PopUpBase.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(t){"use strict";var e,n,s,a,i,o,r,c,u,l,p,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,s=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,r=t.Label},function(t){c=t.GatheringServicesApi},function(t){u=t.UserModel},function(t){l=t.PopUpBase},function(t){p=t.ResourcesManager},function(t){S=t.UIPopupManager}],execute:function(){var f,h,y,m,d,g,v;i._RF.push({},"2c6e0J5vUZFjpYf1h416swR","UIPopupBuyStamina",void 0);var I=o.ccclass,P=o.property;t("UIPopupBuyStamina",(f=I("UIPopupBuyStamina"),h=P(r),y=P(r),f((g=e((d=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,s(e,"TextCost",g,a(e)),s(e,"TestNext",v,a(e)),e.OnBuySuccess=void 0,e}n(e,t);var i=e.prototype;return i.Show=function(e){t.prototype.OnShow.call(this),this.OnBuySuccess=e;var n=u.userStanimaInfo,s=n.count;s>3&&(s=3),this.TextCost.string="To restore 50% max Stamina, you will need "+n.staminaPrices[s.toString()]+" LE.",++s>3&&(s=3),this.TestNext.string="You have restored Stamina "+n.count+" times today. Next time cost will be "+n.staminaPrices[s.toString()]+" LE."},i.OnClose=function(){t.prototype.OnHide.call(this)},i.OnOk=function(){var t=this;c.BUY_STAMINA(function(e){var n=JSON.parse(e);0==n.status?(S.Instance.ShowToast("Success","Stamina recovery success!",1),u.userStanimaInfo.count=n.data.count+1,t.OnBuySuccess(n.data.currentStamina,n.data.leWallet)):S.Instance.ShowToast("Error",p.Instance.GetErrorMessage(n.status),0),t.OnClose()}.bind(this),function(e){t.OnClose()}.bind(this))},e}(l)).prototype,"TextCost",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(d.prototype,"TestNext",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=d))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupChangeLog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./PopUpBase.ts","./ResourcesManager.ts"],(function(e){"use strict";var t,n,o,r,i,a,s,c,l,p,u,g,h,f,b,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Label,c=e.Node,l=e.Prefab,p=e.instantiate,u=e.Sprite,g=e.color,h=e.RichText},function(e){f=e.ConfigApi},function(e){b=e.PopUpBase},function(e){C=e.ResourcesManager}],execute:function(){var v,y,P,d,I,L,U,m,w;i._RF.push({},"0875eNFEDZF6Kn/5U/WMNDz","UIPopupChangeLog",void 0);var z=a.ccclass,D=a.property;e("UIPopupChangeLog",(v=z("UIPopupChangeLog"),y=D(s),P=D(c),d=D(l),v((U=t((L=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"version",U,r(t)),o(t,"Content",m,r(t)),o(t,"prefab",w,r(t)),t.cb=void 0,t}n(t,e);var i=t.prototype;return i.start=function(){this.version.string="Ver "+f.VERSION;for(var e=C.Instance.ChangeLog.text.split("\n"),t=0;t<e.length;t++){var n=p(this.prefab);n.getComponent(u).color=t%2==0?g(244,223,167,255):g(233,209,153,255),n.getComponentInChildren(h).string="<color=#9C6D3E>"+e[t]+"</color>",n.setParent(this.Content)}},i.Show=function(t){this.cb=t,e.prototype.OnShow.call(this)},i.OnBtnClose=function(){e.prototype.OnHide.call(this),this.cb&&this.cb()},t}(b)).prototype,"version",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(L.prototype,"Content",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(L.prototype,"prefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=L))||I));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupChooseLand.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIFloatingLeftPopupBase.ts","./UISetupLandItem.ts"],(function(e){"use strict";var t,n,i,o,a,s,r,l,h,u,d,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,r=e.Node,l=e.ScrollView,h=e.Prefab,u=e.instantiate},function(e){d=e.UIFloatingLeftPopupBase},function(e){c=e.UISetupLandItem}],execute:function(){var p,f,m,I,C,L,P,g,b,v,F;a._RF.push({},"855e9lFMaZCP5v9sjaljPnp","UIPopupChooseLand",void 0);var y=s.ccclass,z=s.property;e("UIPopupChooseLand",(p=y("UIPopupChooseLand"),f=z(r),m=z(r),I=z(l),C=z(h),p((g=t((P=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))||this).ChoseLandItems=[],i(t,"ContentParent",g,o(t)),i(t,"NoAsset",b,o(t)),i(t,"Content",v,o(t)),i(t,"ChoseLandItemPrefab",F,o(t)),t.isoFarmManager=void 0,t.onHide=void 0,t.sizeFilter="S",t.seasonFilter="circle",t.jData=void 0,t}n(t,e);var a=t.prototype;return a.Show=function(t,n,i){e.prototype.OnShow.call(this),this.isoFarmManager=t,this.onHide=n,this.jData=i,this.LoadFarmsPage()},a.OnChangeTap=function(e){this.sizeFilter=e.node.name,this.LoadFarmsPage()},a.OnChangeSeason=function(e){this.seasonFilter=e.node.name,this.LoadFarmsPage()},a.DisableAllItem=function(){for(var e=0;e<this.ChoseLandItems.length;e++)this.ChoseLandItems[e].node.active=!1},a.LoadFarmsPage=function(){this.Content.stopAutoScroll(),this.Content.scrollToTop();var e=this.jData;this.DisableAllItem();for(var t=0,n=0;n<e.length;n++){if((0==e[n].status||5==e[n].status)&&this.sizeFilter.includes(e[n].landRef.size)&&this.seasonFilter.includes(e[n].seasonType))this.GetIsoAddLandItemPrefab(n).Init(e[n],this),t++}this.NoAsset.active=t<=0},a.GetIsoAddLandItemPrefab=function(e){var t;e<this.ChoseLandItems.length?t=this.ChoseLandItems[e]:(t=u(this.ChoseLandItemPrefab).getComponent(c),this.ChoseLandItems.push(t));return t.node.active=!0,t.node.setParent(this.ContentParent),t.node.setScale(1,1,1),t},a.OnCloseClick=function(){null!=this.onHide&&(this.onHide(),this.onHide=null,e.prototype.OnHide.call(this),this.isoFarmManager.HideisoAddLand())},t}(d)).prototype,"ContentParent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(P.prototype,"NoAsset",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(P.prototype,"Content",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(P.prototype,"ChoseLandItemPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=P))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupChoosePlant.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./FarmingServicesApi.ts","./ResHttp.ts","./UserModel.ts","./FarmPage.ts","./ResourcesManager.ts","./UIPopupManager.ts","./UIFloatingLeftPopupBase.ts","./UIItemPlantNew.ts"],(function(t){"use strict";var e,a,n,r,i,o,s,l,u,c,P,h,f,p,g,I,m,d,y,v,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,s=t.Node,l=t.ScrollView,u=t.Prefab,c=t.Sprite,P=t.UITransform,h=t.instantiate},function(t){f=t.ConfigApi},function(t){p=t.FarmingServicesApi},function(t){g=t.ResHttp},function(t){I=t.UserModel},function(t){m=t.FarmPage},function(t){d=t.ResourcesManager},function(t){y=t.UIPopupManager},function(t){v=t.UIFloatingLeftPopupBase},function(t){A=t.UIItemPlantNew}],execute:function(){var b,C,M,S,L,R,w,U,F,N,_,q,T,G,z,D,O,E,V;i._RF.push({},"68c33KtZr1JUaWKJ5bAy8jC","UIPopupChoosePlant",void 0);var B=o.ccclass,H=o.property;t("UIPopupChoosePlant",(b=B("UIPopupChoosePlant"),C=H(s),M=H(m),S=H(s),L=H(l),R=H(u),w=H(u),U=H(c),F=H(P),b((q=e((_=function(t){function e(){for(var e,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,n(e,"ContentParent",q,r(e)),e.PlantItemArray=[],e.PlantItemArrayv2=[],n(e,"farmPage",T,r(e)),n(e,"NoAsset",G,r(e)),n(e,"Content",z,r(e)),n(e,"PlantItemPrefab",D,r(e)),n(e,"PlantItemPrefabV2",O,r(e)),n(e,"DragIcon",E,r(e)),n(e,"DragIconUITransform",V,r(e)),e.isoFarmManager=void 0,e.typeCurrent=1,e}a(e,t);var i=e.prototype;return i.Show=function(e,a){a||t.prototype.OnShow.call(this),this.Content.enabled=!0,this.isoFarmManager=e,this.DragIcon.node.active=!1,this.farmPage.toPage(0),this.RequestLoadApply()},i.Hide=function(e){t.prototype.OnHide.call(this,e)},i.ChangeTap=function(t){var e=parseInt(t.name);e!=this.typeCurrent&&(this.typeCurrent=e,this.Content.node.active=!1,this.NoAsset.active=!0,this.farmPage.toPage(0),this.RequestLoadApply())},i.changeSeason=function(t){this.Content.node.active=!1,this.NoAsset.active=!0,this.farmPage.toPage(0),I.SeasonPlantFilter_Inventory="all"==t.node.name?"":t.node.name,this.RequestLoadApply()},i.RequestLoadApply=function(){for(var t=0;t<this.PlantItemArray.length;t++)this.PlantItemArray[t].node.active=!1;for(var e=0;e<this.PlantItemArrayv2.length;e++)this.PlantItemArrayv2[e].node.active=!1;3==this.typeCurrent?this.RequestLoadSunflower():this.RequestLoadMyPlants()},i.LoadMyPlants=function(t){var e=this;if(this.Content.stopAutoScroll(),this.Content.scrollToLeft(),0==t.status)if(null==t.data)this.NoAsset.active=!0,this.Content.node.active=!1,this.farmPage.node.active=!1;else if(3!=this.typeCurrent&&null!=t.total&&t.total>0&&this.farmPage.currentPage>0&&0==t.data.length)this.farmPage.ChangePage(-1),this.RequestLoadMyPlants();else{this.NoAsset.active=t.data.length<=0,this.Content.node.active=!this.NoAsset.active;if(null!=t.total&&t.total>0?(this.farmPage.node.active=!0,this.farmPage.Init((function(){e.RequestLoadApply()}),t.total,f.LIMIT_PAGE)):this.farmPage.node.active=!1,1==this.typeCurrent)for(var a=0;a<t.data.length;a++){this.GetIsoAddPlantItemPrefab(a).Init(t.data[a],this,a)}else for(var n=0;n<t.data.length;n++){this.GetIsoAddPlantItemPrefabV2(n).Init(t.data[n],this,n)}}else y.Instance.ShowToast("Error",d.Instance.GetErrorMessage(t.status),0)},i.GetIsoAddPlantItemPrefab=function(t){var e;t<this.PlantItemArray.length?e=this.PlantItemArray[t]:(e=h(this.PlantItemPrefab).getComponent(A),this.PlantItemArray.push(e));return e.node.active=!0,e.node.setScale(1,1,1),e.node.setParent(this.ContentParent),e},i.GetIsoAddPlantItemPrefabV2=function(t){var e;t<this.PlantItemArrayv2.length?e=this.PlantItemArrayv2[t]:(e=h(this.PlantItemPrefabV2).getComponent(A),this.PlantItemArrayv2.push(e));return e.node.active=!0,e.node.setScale(1,1,1),e.node.setParent(this.ContentParent),e},i.RequestLoadMyPlants=function(){var t=this,e={offset:(this.farmPage.currentPage*f.LIMIT_PAGE).toString(),limit:f.LIMIT_PAGE.toString(),type:this.typeCurrent.toString(),status:"0"};this.farmPage.DisableControll(),p.RequestMyPlants(e,(function(e){var a=JSON.parse(e);t.LoadMyPlants(a)}),null)},i.RequestLoadSunflower=function(){var t=this,e={offset:(this.farmPage.currentPage*f.LIMIT_PAGE).toString(),limit:f.LIMIT_PAGE.toString(),status:"0",seasons:I.SeasonPlantFilter_Inventory};this.farmPage.DisableControll(),g.GetRequest(f.LINK_API+f.MY_SUNFLOWERS,e,(function(e){var a=JSON.parse(e);t.LoadMyPlants(a)}),null)},i.OnBtnBackClick=function(){this.isoFarmManager.OnEditPlantClick()},i.MoveOut=function(){t.prototype.MoveOut.call(this)},i.MoveIn=function(){t.prototype.OnShow.call(this)},e}(v)).prototype,"ContentParent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(_.prototype,"farmPage",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(_.prototype,"NoAsset",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(_.prototype,"Content",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(_.prototype,"PlantItemPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(_.prototype,"PlantItemPrefabV2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(_.prototype,"DragIcon",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(_.prototype,"DragIconUITransform",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=_))||N));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupConfirmTool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts"],(function(e){"use strict";var t,i,o,r,n,a,l,s,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,l=e.SpriteFrame,s=e.Sprite,c=e.Label},function(e){p=e.PopUpBase}],execute:function(){var u,h,b,L,f,w,m,y,d,g,C,v,F;n._RF.push({},"d0b5ds/su9I77WhnumlpGk/","UIPopupConfirmTool",void 0);var I=a.ccclass,P=a.property;e("UIPopupConfirmTool",(u=I("UIPopupConfirmTool"),h=P(l),b=P(l),L=P(s),f=P(c),w=P(c),u((d=t((y=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"waterFrame",d,r(t)),o(t,"crowFrame",g,r(t)),o(t,"Icon",C,r(t)),o(t,"Label1",v,r(t)),o(t,"Label2",F,r(t)),t.LeCost=void 0,t.onOk=void 0,t}i(t,e);var n=t.prototype;return n.Show=function(t,i,o){e.prototype.OnShow.call(this),this.onOk=o,this.LeCost=t,3==i?(this.Icon.spriteFrame=this.waterFrame,t>0?(this.Label1.string="Do you want to water ALL of your Plants on this land?",this.Label2.node.active=!0,this.Label2.string="This action will cost you "+t.toString()+" LE"):(this.Label1.string="There is no Plant that need water on this land!",this.Label2.node.active=!1)):(this.Icon.spriteFrame=this.crowFrame,t>0?(this.Label1.string="Do you want to chase ALL Crow off this land?",this.Label2.node.active=!0,this.Label2.string="This action will cost you "+t.toString()+" LE"):(this.Label1.string="There is no Crow on this land!",this.Label2.node.active=!1))},n.onOkClick=function(){this.LeCost>0&&this.onOk(),this.onCloseClick()},n.onCloseClick=function(){e.prototype.OnHide.call(this)},t}(p)).prototype,"waterFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(y.prototype,"crowFrame",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(y.prototype,"Icon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(y.prototype,"Label1",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(y.prototype,"Label2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=y))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupEndGatherWarning.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts"],(function(t){"use strict";var e,i,n,r,o,a,l,s,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Label,s=t.RichText},function(t){c=t.PopUpBase}],execute:function(){var p,u,h,f,y,d,g;o._RF.push({},"127a5sydvtCKbD2Wrw1n1bA","UIPopupEndGatherWarning",void 0);var b=a.ccclass,D=a.property;t("UIPopupEndGatherWarning",(p=b("UIPopupEndGatherWarning"),u=D(l),h=D(s),p((d=e((y=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"txtTitle",d,r(e)),n(e,"txtDes",g,r(e)),e.onOk=void 0,e}i(e,t);var o=e.prototype;return o.Show=function(e,i){this.onOk=i,e?(this.txtTitle.string="END GATHERING",this.txtDes.string="<color=#78462C>Do you want to End this Gathering Trip?<br/>You can NOT resume it later</color>"):(this.txtTitle.string="LEAVE GATHERING",this.txtDes.string="<color=#78462C>Do you want to leave this Gathering Trip?<br/>You can resume it later<br/>(with a temporary debuff)</color>"),t.prototype.OnShow.call(this)},o.OnBtnCloseClick=function(){t.prototype.OnHide.call(this)},o.OnBtnOkClick=function(){t.prototype.OnHide.call(this,function(){this.onOk()}.bind(this))},e}(c)).prototype,"txtTitle",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=e(y.prototype,"txtDes",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=y))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupExtractPowder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./UserModel.ts","./PopUpBase.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(t){"use strict";var i,n,e,r,a,o,s,u,c,p,l,h,m,g;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.Sprite,u=t.EditBox,c=t.Label},function(t){p=t.GatheringServicesApi},function(t){l=t.UserModel},function(t){h=t.PopUpBase},function(t){m=t.ResourcesManager},function(t){g=t.UIPopupManager}],execute:function(){var d,I,f,S,E,U,v,w,P,y,M;a._RF.push({},"92aaeKHIQpKd6ATE81UUvk9","UIPopupExtractPowder",void 0);var O=o.ccclass,R=o.property;t("UIPopupExtractPowder",(d=O("UIPopupExtractPowder"),I=R(s),f=R(u),S=R(c),E=R(c),d((w=i((v=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,e(i,"icon",w,r(i)),e(i,"amount",P,r(i)),e(i,"powder",y,r(i)),e(i,"ItemName",M,r(i)),i.max=void 0,i.item=void 0,i.uiItemInfo=void 0,i}n(i,t);var a=i.prototype;return a.Show=function(i,n){t.prototype.OnShow.call(this),this.max=i.svdata.amount,this.item=i,this.uiItemInfo=n,this.icon.spriteFrame=i.imgMaterial.spriteFrame,this.amount.string="1",this.UpdateQuantity()},a.UpdateQuantity=function(){var t=1;""==this.amount.string?0==this.max&&(t=0):(t=parseInt(this.amount.string))>this.max||0==this.max?t=this.max:t<1&&(t=1),this.amount.string=t.toString();var i=this.item.svdata.name;"MYSTERIOUS_POWDER_SMALL"==i||"MYSTERIOUS_POWDER"==i?this.powder.string=(5*t).toString():"MYSTERIOUS_POWDER_MEDIUM"==i?this.powder.string=(10*t).toString():"MYSTERIOUS_POWDER_LARGE"==i&&(this.powder.string=(50*t).toString())},a.OnBtnConvert=function(){var t=this,i=parseInt(this.amount.string);if(i<=0)g.Instance.ShowToast("Error","Quantity must be at least one!",0);else{p.SACRIFICE_MYSTERIOUS_POWDER(this.item.svdata.name,i,(function(i){var n=JSON.parse(i);0==n.status?(g.Instance.ShowToast("Congratulation","Extract Powder Success!",1),l.UniEssence=n.data.amount,t.OnBtnClose(),t.uiItemInfo.uiScreenAssets.OnExtractPower()):g.Instance.ShowToast("Error",m.Instance.GetErrorMessage(n.status),0)}),null)}},a.OnBtnClose=function(){t.prototype.OnHide.call(this)},a.onEditBoxChange=function(){this.UpdateQuantity()},a.onAddClick=function(){if(""!=this.amount.string){var t=parseInt(this.amount.string);this.amount.string=(t+1).toString(),this.UpdateQuantity()}},a.onMinusClick=function(){if(""!=this.amount.string){var t=parseInt(this.amount.string);this.amount.string=(t-1).toString(),this.UpdateQuantity()}},i}(h)).prototype,"icon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=i(v.prototype,"amount",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=i(v.prototype,"powder",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(v.prototype,"ItemName",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=v))||U));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FarmingServicesApi.ts","./UserModel.ts","./Utility.ts","./LoginManager.ts","./SoundController.ts"],(function(o){"use strict";var e,t,n,i,a,p,r,u,s,c,h,d,l,S,g,U,P,f,I,L,v,m,M,w;return{setters:[function(o){e=o.applyDecoratedDescriptor,t=o.inheritsLoose,n=o.initializerDefineProperty,i=o.assertThisInitialized},function(o){a=o.cclegacy,p=o._decorator,r=o.Node,u=o.Sprite,s=o.game,c=o.Game,h=o.color,d=o.Tween,l=o.director,S=o.resources,g=o.Prefab,U=o.instantiate,P=o.Component,f=o.sys},function(o){I=o.FarmingServicesApi},function(o){L=o.UserModel},function(o){v=o.Utility},function(o){m=o.LoginManager},function(o){M=o.SoundController,w=o.EnumSound}],execute:function(){var T,y,N,k,C,A,b,E,_,R,B,D;o("LoadingType",void 0),a._RF.push({},"3036ek40DJGiaiK4+dmYVo5","UIPopupManager",void 0);var O,F=p.ccclass,z=p.property;!function(o){o[o.normal=0]="normal",o[o.noAnim=1]="noAnim",o[o.loadScene=2]="loadScene"}(O||(O=o("LoadingType",{})));o("UIPopupManager",(T=F("UIPopupManager"),y=z(r),N=z(u),k=z(r),C=z(r),T(((D=function(o){function e(){for(var e,t=arguments.length,a=new Array(t),p=0;p<t;p++)a[p]=arguments[p];return e=o.call.apply(o,[this].concat(a))||this,n(e,"loadingNode",E,i(e)),n(e,"loadingNodeSprite",_,i(e)),n(e,"popupParent",R,i(e)),n(e,"popupParentTop",B,i(e)),e.popUpMap=new Map,e.popUpArray=[],e.timePause=0,e.timePauseDelta=0,e._LoginManager=void 0,e.loadingTimeOut=void 0,e}t(e,o);var a=e.prototype;return a.onLoad=function(){null==e.Instance?(e.Instance=this,s.addPersistRootNode(this.node)):this.destroy(),L.LoadUserLocalData()},a.start=function(){var o=this;s.on(c.EVENT_HIDE,(function(){o.timePause=Date.now()}),this,!1),s.on(c.EVENT_SHOW,(function(){if(""!=L.Token){var e=Date.now()-o.timePause;o.timePauseDelta+=e,L.serverTime+=e,o.timePauseDelta>3e5&&(o.timePauseDelta=0,o.RequestFarmStatus())}}),this,!1),v.PreLoadPopup("UIBugReport"),v.PreLoadPopup("UINotifyConfirm"),v.PreLoadPopup("UIPopupSetting"),v.PreLoadPopup("UIThanks"),v.PreLoadPopup("UIToast"),v.PreLoadPopup("UIPopupOpenEgg"),v.PreLoadPopup("UIPopupChangeLog"),v.PreLoadPopup("UIScreenCraft"),v.PreLoadPopup("UIPopupBuyStamina"),v.PreLoadPopup("UIPopupNewSeason"),v.PreLoadPopup("UIScreenAssets"),v.PreLoadPopup("UILEMarket"),v.PreLoadPopup("UIScreenWeather"),v.PreLoadPopup("UIScreenMain"),v.PreLoadPopup("UIScreenSkillBook"),this._LoginManager=this.getComponentInChildren(m),this._LoginManager&&(this._LoginManager.node.active=!0),M.Instance.SetBgMusic(w.BGM_Farm2)},a.OnLoginSuccess=function(){this._LoginManager.node.active=!1,e.Instance.ShowUIScreenMain(1),this.RequestFarmStatus(),v.RequestSkillTree(null,!1)},a.ReturnToLoginScreen=function(){L.SetToken(""),L.SetRefresh_Token(""),this._LoginManager&&(this._LoginManager.node.active=!0,this._LoginManager.showLogin())},a.update=function(o){L.serverTime+=1e3*o},a.RequestFarmStatus=function(){var o=this;I.RequestFarmStatus((function(t){var n=JSON.parse(t),i=n.status;0==i?(L.serverTime=Date.parse(n.data.currentTime),v.CheckUpgradeVersion(n.data.version)&&e.Instance.ShowUINotifyConfirm("UPDATE","Please update new version!",(function(){f.openURL("https://plantvsundead.com/")}),!1,!0,0,!1)):1==i&&o.ReturnToLoginScreen()}),null)},a.Loading=function(o,e){var t=this;void 0===e&&(e=O.normal);if(o){switch(e){case O.normal:this.loadingNodeSprite.color=h(0,0,0,170),this.loadingNodeSprite.node.active=!0;break;case O.noAnim:this.loadingNodeSprite.node.active=!1;break;case O.loadScene:this.loadingNodeSprite.color=h(0,0,0,255),this.loadingNodeSprite.node.active=!0}this.loadingNode.active=!0,this.loadingTimeOut=setTimeout((function(){t.loadingNode.active=!1}),1e4)}else this.loadingNode.active=!1,clearTimeout(this.loadingTimeOut)},a.LoadScene=function(o,e){var t=this;void 0===e&&(e=null),d.stopAll(),this.Loading(!0),l.loadScene(o,(function(){t.Loading(!1),null!=e&&e()}))},a.LoadPopup=function(o,e,t){void 0===t&&(t=!1),this.popUpMap.has(o)?e():S.load("ui_prefab/"+o,g,function(n,i){var a=U(i);a.setParent(t?this.popupParentTop:this.popupParent);var p=a.getComponent(o);this.popUpMap.set(o,p),t||this.popUpArray.push(p),this.SortPopup(),e()}.bind(this))},a.SortPopup=function(){this.popUpArray.sort((function(o,e){return e.order-o.order}));for(var o=0;o<this.popUpArray.length;o++)this.popUpArray[o].node.setSiblingIndex(0)},a.ShowSetting=function(){var o=this;this.LoadPopup("UIPopupSetting",(function(){o.popUpMap.get("UIPopupSetting").Show()}))},a.ShowToast=function(o,e,t,n){var i=this;void 0===n&&(n=!0),this.LoadPopup("UIToast",(function(){i.popUpMap.get("UIToast").Show(o,e,t,n)}),!0)},a.HideToast=function(){this.popUpMap.has("UIToast")&&this.popUpMap.get("UIToast").HideToast()},a.ShowUINotifyConfirm=function(o,e,t,n,i,a,p){var r=this;void 0===i&&(i=!1),void 0===a&&(a=2),void 0===p&&(p=!1),this.LoadPopup("UINotifyConfirm",(function(){r.popUpMap.get("UINotifyConfirm").Show(o,e,t,n,i,a,p)}))},a.ShowUIBugReport=function(){var o=this;this.LoadPopup("UIBugReport",(function(){o.popUpMap.get("UIBugReport").Show()}))},a.ShowUIThanks=function(){var o=this;this.LoadPopup("UIThanks",(function(){o.popUpMap.get("UIThanks").Show()}))},a.UIPopupChangeLog=function(o){var e=this;this.LoadPopup("UIPopupChangeLog",(function(){e.popUpMap.get("UIPopupChangeLog").Show(o)}))},a.ShowUIPopupOpenEgg=function(o,e,t){var n=this;this.LoadPopup("UIPopupOpenEgg",(function(){n.popUpMap.get("UIPopupOpenEgg").Show(o,e,t)}))},a.ShowUIPopupNewSeason=function(){var o=this;this.LoadPopup("UIPopupNewSeason",(function(){o.popUpMap.get("UIPopupNewSeason").Show()}))},a.ShowUIPopupBuyStamina=function(o){var e=this;this.LoadPopup("UIPopupBuyStamina",(function(){e.popUpMap.get("UIPopupBuyStamina").Show(o)}))},a.UIScreenWeather=function(o){var e=this;this.LoadPopup("UIScreenWeather",(function(){var t=e.popUpMap.get("UIScreenWeather");o(t)}))},a.ShowUIScreenCraft=function(o,e){var t=this;this.LoadPopup("UIScreenCraft",(function(){t.popUpMap.get("UIScreenCraft").Show(o,e)}))},a.ShowUIScreenChooseExpedition=function(o,e){var t=this;this.LoadPopup("UIScreenChooseExpedition",(function(){t.popUpMap.get("UIScreenChooseExpedition").Show(o,e)}))},a.ShowUILEMarket=function(o){var e=this;this.LoadPopup("UILEMarket",(function(){e.popUpMap.get("UILEMarket").Show(o)}))},a.ShowUIScreenAssets=function(o){var e=this;this.LoadPopup("UIScreenAssets",(function(){e.popUpMap.get("UIScreenAssets").Show(o)}))},a.ShowUIScreenMain=function(o){var e=this;this.LoadPopup("UIScreenMain",(function(){e.popUpMap.get("UIScreenMain").Show(o)}))},a.ShowUIScreenSkillBook=function(o,e){var t=this;this.LoadPopup("UIScreenSkillBook",(function(){t.popUpMap.get("UIScreenSkillBook").Show(o,e)}))},a.ShowUIScreenAltar=function(o){var e=this;this.LoadPopup("UIScreenAltar",(function(){e.popUpMap.get("UIScreenAltar").Show(o)}))},e}(P)).Instance=void 0,E=e((b=D).prototype,"loadingNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(b.prototype,"loadingNodeSprite",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(b.prototype,"popupParent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(b.prototype,"popupParentTop",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=b))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupMaterialWarning.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts"],(function(t){"use strict";var i,n,o,e,r,a,l,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Label},function(t){p=t.PopUpBase}],execute:function(){var c,s,u,h,f,y,g;r._RF.push({},"44ae0COCZ5F3IOKW1nmDQqS","UIPopupMaterialWarning",void 0);var O=a.ccclass,d=a.property;t("UIPopupMaterialWarning",(c=O("UIPopupMaterialWarning"),s=d(l),u=d(l),c((y=i((f=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,o(i,"txtNotify",y,e(i)),o(i,"txtAmount",g,e(i)),i.onOk=void 0,i}n(i,t);var r=i.prototype;return r.Show=function(i,n,o){t.prototype.OnShow.call(this),this.onOk=o,this.txtNotify.string=n,this.txtAmount.node.active=-1!=i,this.txtAmount.string=i.toString()},r.Show1=function(i){t.prototype.OnShow.call(this),this.onOk=i},r.OnBtnCloseClick=function(){t.prototype.OnHide.call(this)},r.OnBtnOkClick=function(){t.prototype.OnHide.call(this,function(){this.onOk()}.bind(this))},i}(p)).prototype,"txtNotify",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=i(f.prototype,"txtAmount",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=f))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupNewSeason.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserModel.ts","./PopUpBase.ts","./ResourcesManager.ts"],(function(e){"use strict";var t,o,n,r,i,s,a,p,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,a=e.Sprite},function(e){p=e.UserModel},function(e){c=e.PopUpBase},function(e){u=e.ResourcesManager}],execute:function(){var l,f,h,S,y;i._RF.push({},"15828YiopFDmLXhYcCHyIUM","UIPopupNewSeason",void 0);var g=s.ccclass,d=s.property;e("UIPopupNewSeason",(l=g("UIPopupNewSeason"),f=d(a),l((y=t((S=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,n(t,"BgSprite",y,r(t)),t}o(t,e);var i=t.prototype;return i.Show=function(){var t=this;e.prototype.OnShow.call(this);u.Instance.LoadSeason(p.SeasonData.season+"_banner",(function(e){t.BgSprite.spriteFrame=e}))},i.OnBtnCloseClick=function(){e.prototype.OnHide.call(this)},t}(c)).prototype,"BgSprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=S))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupNurtureUndead.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ExpeditionServiceApi.ts","./PopUpBase.ts","./UIPopupManager.ts","./ExpeditionHelper.ts"],(function(e){"use strict";var t,i,n,a,o,r,s,u,c,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Label},function(e){u=e.ExpeditionServiceApi},function(e){c=e.PopUpBase},function(e){l=e.UIPopupManager},function(e){p=e.ExpeditionHelper}],execute:function(){var d,h,g,f,y,v,U;o._RF.push({},"b9bbbwoyMlH3ourdlHsi15R","UIPopupNurtureUndead",void 0);var b=r.ccclass,x=r.property;e("UIPopupNurtureUndead",(d=b("UIPopupNurtureUndead"),h=x(s),g=x(s),d((v=t((y=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).data=void 0,t.cageId=void 0,n(t,"text1",v,a(t)),n(t,"text2",U,a(t)),t.uiManager=void 0,t}i(t,e);var o=t.prototype;return o.onInit=function(e){this.uiManager=e},o.Show=function(t,i){this.data=t,this.cageId=i,e.prototype.OnShow.call(this),u.RequestGetRegenData(t.id,this.OnGetDataComplete.bind(this))},o.OnGetDataComplete=function(t){var i=p.CheckStatus(t);null!=i?(this.text1.string="To restore 25% max Fatigue of this\nUndead, you will need "+i.data.leToUse+" LE",this.text2.string="You have restored Fatigue for this \nUndead "+i.data.noTimesRegenByLE+" times today.\nNext time cost will be "+i.data.leToUseNextTime+" LE."):e.prototype.OnHide.call(this)},o.BtnConfirm=function(){u.RequestRegenFatigue(this.data.id,this.successRengen.bind(this))},o.successRengen=function(e){var t=p.CheckStatus(e);null!=t&&(this.uiManager.uiFarmOverlay.updateLE(t.data.leWallet,!1),l.Instance.ShowToast("Success","Regen Fatigue success",1,!0),this.hide())},o.hide=function(){this.uiManager.refreshCage(this.cageId),this.uiManager.showExpedition(),e.prototype.OnHide.call(this)},t}(c)).prototype,"text1",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(y.prototype,"text2",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=y))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupOpenEgg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts","./ResourcesManager.ts","./ExpeditionItem.ts"],(function(e){"use strict";var t,i,n,a,o,l,r,g,s,c,p,u,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,r=e.Node,g=e.sp,s=e.Sprite,c=e.tween,p=e.Vec3},function(e){u=e.PopUpBase},function(e){d=e.ResourcesManager},function(e){h=e.UndeadAnimName}],execute:function(){var b,f,m,v,y,S,E,U,w,O,B,k,A,N,z,T,_,D,I,P,R;o._RF.push({},"45fafJvNHVJspTNZ9Y2X4bT","UIPopupOpenEgg",void 0);var L=l.ccclass,G=l.property;e("UIPopupOpenEgg",(b=L("UIPopupOpenEgg"),f=G(r),m=G(g.Skeleton),v=G(s),y=G(r),S=G(g.Skeleton),E=G(r),U=G(r),w=G(r),O=G(s),b((A=t((k=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))||this).callback=void 0,n(t,"eggToUndead",A,a(t)),n(t,"eggAnim",N,a(t)),n(t,"sptUndead",z,a(t)),n(t,"btnOk",T,a(t)),n(t,"undeadSpine",_,a(t)),n(t,"eggBagRoot",D,a(t)),n(t,"eggBag",I,a(t)),n(t,"eggNode",P,a(t)),n(t,"sptEgg",R,a(t)),t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.eggAnim.setCompleteListener(this.CompleteListener.bind(this))},o.CompleteListener=function(e){this.undeadSpine.node.active=!0,c(this.undeadSpine.node).to(1,{scale:new p(3,3,3)}).call(function(){this.btnOk.active=!0}.bind(this)).start()},o.Show=function(e,t,i){null==t?this.OpenEggBag(e,i):this.OpenEggToUndead(e,t,i)},o.OpenEggToUndead=function(t,i,n){var a=this;this.callback=n,console.log("OpenEggToUndead",t),e.prototype.OnShow.call(this),this.btnOk.active=!1,this.eggToUndead.active=!0,this.eggBagRoot.active=!1,this.undeadSpine.node.active=!1;var o="egg_"+i.rarity;this.undeadSpine.node.setScale(0,0,0),d.Instance.LoadUndeadSpine(t.data.code,t.data.stage,(function(e,t){e&&console.error(e),null!=t&&(a.undeadSpine.skeletonData=t,a.undeadSpine.setAnimation(0,h.Idle,!0),a.undeadSpine.setBonesToSetupPose())})),this.eggAnim.setSkin(o),this.eggAnim.setAnimation(0,"animation",!1)},o.OpenEggBag=function(t,i){this.callback=i;var n=1;t.data.length>0&&(n=t.data[0].rarity);d.Instance.LoadMaterialSprite({1:"COMMON_UNDEAD_EGG",2:"RARE_UNDEAD_EGG",3:"EPIC_UNDEAD_EGG"}[n.toString()],function(e){this.sptEgg.spriteFrame=e}.bind(this)),this.eggToUndead.active=!1,this.eggBagRoot.active=!0,this.eggNode.active=!1,this.eggBag.active=!0,e.prototype.OnShow.call(this),c(this.eggBag).to(.5,{scale:new p(1.2,1.2,0)}).to(.5,{scale:new p(.9,.9,0)}).to(.3,{scale:new p(1,1,0)}).call(function(){this.eggNode.active=!0,this.eggBag.active=!1}.bind(this)).start()},o.hide=function(){e.prototype.OnHide.call(this),null!=this.callback&&this.callback()},t}(u)).prototype,"eggToUndead",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(k.prototype,"eggAnim",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(k.prototype,"sptUndead",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(k.prototype,"btnOk",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(k.prototype,"undeadSpine",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(k.prototype,"eggBagRoot",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(k.prototype,"eggBag",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(k.prototype,"eggNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(k.prototype,"sptEgg",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=k))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupPullFishing.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserModel.ts"],(function(i){"use strict";var e,t,s,n,o,r,l,h,a,u,c,p,f,d,g,b,F,x,m,P,y;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,s=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){o=i.cclegacy,r=i._decorator,l=i.Node,h=i.UITransform,a=i.Sprite,u=i.SpriteFrame,c=i.CircleCollider2D,p=i.BoxCollider2D,f=i.Size,d=i.Contact2DType,g=i.systemEvent,b=i.SystemEventType,F=i.Vec3,x=i.randomRangeInt,m=i.tween,P=i.Component},function(i){y=i.UserModel}],execute:function(){var w,G,R,S,C,v,T,E,B,z,I,D,_,U,N,H,L,O,M,V,A,X,Y,j,k;o._RF.push({},"80d93QC2bFGOrrdwNOcnNbU","UIPopupPullFishing",void 0);var Q=r.ccclass,q=r.property;i("UIPopupPullFishing",(w=Q("UIPopupPullFishing"),G=q(l),R=q(l),S=q(h),C=q(a),v=q(u),T=q(u),E=q(u),B=q(u),z=q(l),I=q(l),D=q(a),w((N=e((U=function(i){function e(){for(var e,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return e=i.call.apply(i,[this].concat(o))||this,s(e,"nodeEffect",N,n(e)),s(e,"nodeBox",H,n(e)),s(e,"boxBg",L,n(e)),s(e,"boxFollowFish",O,n(e)),s(e,"sfRed",M,n(e)),s(e,"sfGreen",V,n(e)),s(e,"sfYellow",A,n(e)),s(e,"sfPurple",X,n(e)),s(e,"boxFish",Y,n(e)),s(e,"boxRun",j,n(e)),s(e,"boxFillEnergy",k,n(e)),e.isValidate=!1,e.isBeginGame=!1,e.isPulling=!1,e.speedProcessUp=0,e.speedProcessDown=0,e.speedGreen=0,e.ratioProcess=0,e.manager=null,e.boxRunTran=null,e.boxFillTran=null,e.boxFollowFishTran=null,e.fishCollider=void 0,e.runCollider=void 0,e.minXPull=0,e.maxXPull=0,e.boxGreen=0,e.ratioBoxGreen=0,e.ratioSpeedGreen=0,e.ratioSpeedFill=0,e.configRarity=null,e.bufferTimeConfig=0,e.isFinish=!1,e.fishingRarity="",e.numSame=0,e.dirOld=0,e.bufferTime=0,e}t(e,i);var o=e.prototype;return o.show=function(i){var e=this;this.manager=i,this.isFinish=!1,this.boxFillTran=this.boxFillEnergy.node.getComponent(h),this.boxFollowFishTran=this.boxFollowFish.getComponent(h),this.boxRunTran=this.boxRun.getComponent(h),this.fishCollider=this.boxFish.getComponent(c),this.runCollider=this.boxRun.getComponent(p),this.fishCollider.apply();var t=y.userFishing.getMap.rarityFishingUI;this.fishingRarity=y.userFishing.getDrop.rarityFishing,this.ratioBoxGreen=0,this.ratioSpeedFill=0,this.ratioSpeedGreen=0,y.userGatherData.FISHING_level.level>=1&&y.userGatherData.FISHING_level.level<=6?"RARE"!=this.fishingRarity&&"EPIC"!=this.fishingRarity||(this.ratioBoxGreen=t.percentProcessingBar["LEVEL_"+y.userGatherData.FISHING_level.level].processBar):7==y.userGatherData.FISHING_level.level?"RARE"==this.fishingRarity&&(this.ratioBoxGreen=t.percentProcessingBar["LEVEL_"+y.userGatherData.FISHING_level.level].processBar):8==y.userGatherData.FISHING_level.level&&(this.ratioBoxGreen=t.percentProcessingBar["LEVEL_"+y.userGatherData.FISHING_level.level].processBar),y.userGatherData.FISHING_level.level>0&&(this.ratioSpeedFill=t.percentProcessingBar["LEVEL_"+y.userGatherData.FISHING_level.level].speedFill,this.ratioSpeedGreen=t.percentProcessingBar["LEVEL_"+y.userGatherData.FISHING_level.level].speedGreen),this.configRarity=t[this.fishingRarity],this.bufferTimeConfig=this.configRarity.bufferTime,this.boxGreen=this.configRarity.heightGreen*(1+this.ratioBoxGreen/100),this.speedGreen=this.configRarity.speedGreen*(1+this.ratioSpeedGreen/100),this.speedProcessDown=this.configRarity.speedDown/100*this.configRarity.speedFill/956*(1+this.ratioSpeedFill/100),this.speedProcessUp=this.configRarity.speedFill/956*(1+this.ratioSpeedFill/100),this.boxRunTran.contentSize=new f(this.boxGreen,this.boxRunTran.contentSize.height),this.runCollider.size=new f(this.boxGreen-this.fishCollider.radius,this.boxRunTran.contentSize.height),i.scroll.enabled=!1,this.fishCollider.on(d.BEGIN_CONTACT,this.onBeginContact,this),this.fishCollider.on(d.END_CONTACT,this.onEndContact,this),this.minXPull=-this.boxBg.contentSize.width/2+this.boxRunTran.contentSize.width/2,this.maxXPull=this.boxBg.contentSize.width/2-this.boxRunTran.contentSize.width/2,g.on(b.TOUCH_START,(function(i,t){e.BeginPull()}),this),g.on(b.TOUCH_END,(function(i,t){e.EndPull()}),this),g.on(b.TOUCH_CANCEL,(function(i,t){e.EndPull()}),this),this.node.active=!0,this.isBeginGame=!1,this.ratioProcess=.33,this.nodeEffect.setPosition(this.ratioProcess*this.boxFillTran.contentSize.width,this.nodeEffect.position.y,0),this.boxFillEnergy.fillRange=this.ratioProcess,this.runFish(),this.scheduleOnce(function(){this.isBeginGame=!0}.bind(this),1)},o.UpdatePulling=function(i){var e=this.boxRun.position.x;this.isPulling?e+=i*this.speedGreen:e-=i*this.speedGreen,e>=this.maxXPull&&(e=this.maxXPull),e<=this.minXPull&&(e=this.minXPull),this.boxRun.position=new F(e,this.boxRun.position.y,0)},o.onMouseDown=function(i){this.BeginPull()},o.onMouseMove=function(i){this.EndPull()},o.onMouseUp=function(i){},o.BeginPull=function(){0==this.isPulling&&(this.isPulling=!0)},o.EndPull=function(){1==this.isPulling&&(this.isPulling=!1)},o.hide=function(){this.node.active=!1},o.onBeginContact=function(i,e,t){"COMMON"==this.fishingRarity?this.boxFollowFish.spriteFrame=this.sfGreen:"RARE"==this.fishingRarity?this.boxFollowFish.spriteFrame=this.sfYellow:this.boxFollowFish.spriteFrame=this.sfPurple,this.isValidate=!0},o.onEndContact=function(i,e,t){this.boxFollowFish.spriteFrame=this.sfRed,this.isValidate=!1},o.update=function(i){1!=this.isFinish&&(this.UpdatePulling(i),this.UpdateProcess(i),this.UpdateFollowFish(i))},o.UpdateFollowFish=function(i){this.boxFollowFishTran.setContentSize(480+this.boxFish.position.x,this.boxFollowFishTran.contentSize.height)},o.runFish=function(){var i=this,e=x(this.configRarity.distanceFish[0],this.configRarity.distanceFish[1]),t=this.configRarity.timeFish,s=-this.boxBg.contentSize.width/2+this.boxRunTran.contentSize.width/2,n=this.boxBg.contentSize.width/2-this.boxRunTran.contentSize.width/2,o=this.boxFish.position.x,r=0==x(0,2)?-1:1;n-o<e?r=-1:o-s<e&&(r=1),this.dirOld==r&&(this.numSame++,this.numSame>=3&&(r*=-1,this.numSame=0)),this.dirOld=r;var l=o+r*e;l=Math.min(l,n),l=Math.max(l,s),m(this.boxFish).to(t,{position:new F(l,0,0)},{easing:"linear"}).call((function(){i.runFish()})).start()},o.UpdateProcess=function(i){this.isBeginGame&&(this.isValidate?(this.bufferTime=this.bufferTimeConfig,this.ratioProcess+=i*this.speedProcessUp):(this.bufferTime-=i,this.bufferTime<=0&&(this.ratioProcess-=i*this.speedProcessDown)),this.ratioProcess>=1?(this.ratioProcess=1,this.CompleteFishing(!0)):this.ratioProcess<=0&&(this.ratioProcess=0,this.CompleteFishing(!1)),this.nodeEffect.setPosition(this.ratioProcess*this.boxFillTran.contentSize.width,this.nodeEffect.position.y,0),this.boxFillEnergy.fillRange=this.ratioProcess)},o.CompleteFishing=function(i){this.isFinish=!0,this.hide(),this.manager.CompleteFishing(i)},e}(P)).prototype,"nodeEffect",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(U.prototype,"nodeBox",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(U.prototype,"boxBg",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(U.prototype,"boxFollowFish",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(U.prototype,"sfRed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(U.prototype,"sfGreen",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(U.prototype,"sfYellow",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(U.prototype,"sfPurple",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(U.prototype,"boxFish",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(U.prototype,"boxRun",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(U.prototype,"boxFillEnergy",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=U))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupSetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./EventManager.ts","./UserModel.ts","./PopUpBase.ts","./SoundController.ts","./UIPopupManager.ts"],(function(e){"use strict";var t,n,o,i,a,s,l,u,c,r,g,p,h,d,f,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,l=e.Toggle,u=e.Label,c=e.UIOpacity},function(e){r=e.ConfigApi},function(e){g=e.EventManager,p=e.EventID},function(e){h=e.UserModel},function(e){d=e.PopUpBase},function(e){f=e.SoundController},function(e){v=e.UIPopupManager}],execute:function(){var T,S,O,y,I,M,C,L,U;a._RF.push({},"a1f671kvKhOuakHKzrqkkwG","UIPopupSetting",void 0);var b=s.ccclass,k=s.property;e("UIPopupSetting",(T=b("UIPopupSetting"),S=k(l),O=k(l),y=k(u),T((C=t((M=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,o(t,"ToggleMusic",C,i(t)),o(t,"ToggleSound",L,i(t)),o(t,"versionLabel",U,i(t)),t}n(t,e);var a=t.prototype;return a.Show=function(){e.prototype.OnShow.call(this),this.ToggleMusic.isChecked=h.userLocalData.musicOn,this.ToggleSound.isChecked=h.userLocalData.soundOn,this.activeToggle(this.ToggleMusic,h.userLocalData.musicOn),this.activeToggle(this.ToggleSound,h.userLocalData.soundOn),this.versionLabel.string="V"+r.VERSION},a.OnClose=function(){e.prototype.OnHide.call(this)},a.OnToggleMusic=function(){this.activeToggle(this.ToggleMusic,this.ToggleMusic.isChecked)},a.OnToggleSound=function(){this.activeToggle(this.ToggleSound,this.ToggleSound.isChecked)},a.activeToggle=function(e,t){var n=e.getComponentInChildren(c);n&&(n.node.active=!t)},a.OnSave=function(){h.userLocalData.musicOn=this.ToggleMusic.isChecked,h.userLocalData.soundOn=this.ToggleSound.isChecked,h.SaveUserLocalData(),g.dispatchEvent(p.UpdateMusicSound),f.Instance.PlayBgMusic(h.userLocalData.musicOn),e.prototype.OnHide.call(this)},a.OnInfo=function(){e.prototype.OnHide.call(this),v.Instance.UIPopupChangeLog(null)},a.OnBtnBugClick=function(){v.Instance.ShowUIBugReport()},t}(d)).prototype,"ToggleMusic",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(M.prototype,"ToggleSound",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(M.prototype,"versionLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=M))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopupUndeadInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./PopUpBase.ts","./SpriteRatioHelper.ts","./Utility.ts","./ExpeditionHelper.ts","./UndeadAssetItem.ts"],(function(e){"use strict";var i,t,n,r,l,a,o,p,s,u,d,f,c,g,b;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,o=e.Sprite,p=e.sp,s=e.Label},function(e){u=e.ConfigApi},function(e){d=e.PopUpBase},function(e){f=e.SpriteRatioHelper},function(e){c=e.Utility},function(e){g=e.ExpeditionHelper},function(e){b=e.UndeadAssetItem}],execute:function(){var h,v,U,m,L,y,P,w,I,T,x,z,S,A,C,R,M,_,D,E,H,B,N;l._RF.push({},"a3ef2X11IhM0K4KZlNW3e0V","UIPopupUndeadInfo",void 0);var V=a.ccclass,k=a.property;e("UIPopupUndeadInfo",(h=V("UIPopupUndeadInfo"),v=k(f),U=k(o),m=k(p.Skeleton),L=k(s),y=k(o),P=k(s),w=k(o),I=k(s),T=k(o),x=k(b),h((A=i((S=function(e){function i(){for(var i,t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return(i=e.call.apply(e,[this].concat(l))||this).data=void 0,n(i,"undeadView",A,r(i)),n(i,"seasonBg",C,r(i)),n(i,"undeadSpine",R,r(i)),n(i,"lifeTimeCount",M,r(i)),n(i,"lifetimeProgress",_,r(i)),n(i,"expLabel",D,r(i)),n(i,"expProgress",E,r(i)),n(i,"pendingLevelUpLabel",H,r(i)),n(i,"pendingLvUpProgress",B,r(i)),n(i,"undeadAsset",N,r(i)),i.uiManager=void 0,i}t(i,e);var l=i.prototype;return l.onInit=function(e){this.uiManager=e},l.Show=function(i){this.data=i,e.prototype.OnShow.call(this);this.data.status;this.initUndead(this.data);var t=c.GetTimeNow(),n=i.getMaxExp(),r=i.getExp();this.expProgress.fillRange=r/n,this.expLabel.string=r+"/"+n;var l=g.GetTotalLifeTimeLeft(i),a=i.baseLifeCycle*i.lifeCycleRate*24*60*60;if(this.lifeTimeCount.string=c.ConvertSecondsToTime(l,!0)+" left",console.log("totalSecondDead",l,a),this.lifetimeProgress.fillRange=l/a,r>=n&&i.stage<=1){for(var o=i.affectionLevel,p=0;p<i.timeToUpLv.length;p++)if(i.timeToUpLv[p].level===o+1){var s=Date.parse(i.timeToUpLv[p].date),d=Math.floor((s-t)/1e3),f=u.MAX_TIME_PENDING_LV_UP();this.pendingLevelUpLabel.string=c.ConvertSecondsToTime(d)+" left",this.pendingLvUpProgress.fillRange=1-(f-d)/f;break}}else this.pendingLvUpProgress.fillRange=0,this.pendingLevelUpLabel.string="No pending"},l.initUndead=function(e){this.undeadAsset.Init(e)},l.hide=function(){e.prototype.OnHide.call(this)},i}(d)).prototype,"undeadView",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(S.prototype,"seasonBg",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(S.prototype,"undeadSpine",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(S.prototype,"lifeTimeCount",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=i(S.prototype,"lifetimeProgress",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(S.prototype,"expLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(S.prototype,"expProgress",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(S.prototype,"pendingLevelUpLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(S.prototype,"pendingLvUpProgress",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(S.prototype,"undeadAsset",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=S))||z));l._RF.pop()}}}));

System.register("chunks:///_virtual/UIScreenAltar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./ExpeditionServiceApi.ts","./FarmingServicesApi.ts","./GatheringServicesApi.ts","./UserModel.ts","./Utility.ts","./UndeadAssetItem_v2.ts","./FarmPage.ts","./ResourcesManager.ts","./UIPopupManager.ts","./UIItemPlantNew.ts","./StateData.ts","./PopUpBase.ts"],(function(e){"use strict";var t,i,n,a,r,s,o,l,c,u,d,p,h,g,m,b,f,v,U,w,y,I,P,L,S,A,E,C,N,V;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.CCInteger,l=e.Node,c=e.Prefab,u=e.Label,d=e.sp,p=e.Sprite,h=e.SpriteFrame,g=e.instantiate,m=e.Layout,b=e.Layers,f=e.Component},function(e){v=e.ConfigApi},function(e){U=e.ExpeditionServiceApi},function(e){w=e.FarmingServicesApi},function(e){y=e.GatheringServicesApi},function(e){I=e.UserModel},function(e){P=e.Utility},function(e){L=e.UndeadAssetItemV2},function(e){S=e.FarmPage},function(e){A=e.ResourcesManager},function(e){E=e.UIPopupManager},function(e){C=e.UIItemPlantNew},function(e){N=e.GetData},function(e){V=e.PopUpBase}],execute:function(){var k,z,D,R,M,T,x,F,q,G,_,B,O,W,H,J,K,j,Q,X,Y,Z,$,ee,te,ie,ne,ae,re,se,oe,le,ce,ue,de,pe,he,ge,me,be,fe,ve,Ue,we,ye,Ie,Pe,Le,Se,Ae,Ee,Ce,Ne,Ve,ke,ze,De,Re,Me,Te,xe,Fe,qe,Ge,_e,Be,Oe;r._RF.push({},"22be4YDympEzZnBvKMPzPdN","UIScreenAltar",void 0);var We=s.ccclass,He=s.property,Je={0:"Common",1:"Common",2:"Rare",3:"Epic"},Ke={0:"Common",1:"Rare",2:"Epic"};e("UIScreenAltar",(k=We("UIScreenAltar"),z=He(o),D=He(S),R=He(l),M=He(c),T=He(u),x=He(u),F=He(u),q=He(c),G=He(l),_=He(d.Skeleton),B=He(p),O=He(u),W=He(u),H=He(u),J=He(u),K=He(u),j=He(u),Q=He(u),X=He(u),Y=He(u),Z=He(u),$=He(u),ee=He(p),te=He(l),ie=He(p),ne=He(u),ae=He([h]),re=He(l),se=He(l),oe=He(u),le=He(V),ce=He([l]),k((pe=t((de=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"order",pe,a(t)),n(t,"farmPage",he,a(t)),n(t,"View",ge,a(t)),n(t,"UndeadAssetItemPrefab",me,a(t)),t.UndeadAssetItems=[],n(t,"undeadEssence",be,a(t)),n(t,"plantEssence",fe,a(t)),n(t,"uniEssence",ve,a(t)),n(t,"PlantItemPrefab",Ue,a(t)),t.PlantItemArray=[],n(t,"tickNode",we,a(t)),n(t,"animView",ye,a(t)),n(t,"spriteView",Ie,a(t)),n(t,"infoTitleLabel",Pe,a(t)),n(t,"idLabel",Le,a(t)),n(t,"stageLabel",Se,a(t)),n(t,"rarityLabel",Ae,a(t)),n(t,"hpLabel",Ee,a(t)),n(t,"atkLabel",Ce,a(t)),n(t,"defLabel",Ne,a(t)),n(t,"magLabel",Ve,a(t)),n(t,"atkSpeedLabel",ke,a(t)),n(t,"newSkillLabel",ze,a(t)),n(t,"essenceAmount",De,a(t)),n(t,"essenceIcon",Re,a(t)),n(t,"extraItem",Me,a(t)),n(t,"extraEggType",Te,a(t)),n(t,"extraEggAmount",xe,a(t)),n(t,"esscenceSprites",Fe,a(t)),n(t,"canUpgradeNode",qe,a(t)),n(t,"cannotUpgradeNode",Ge,a(t)),n(t,"cannotUpgradeDetail",_e,a(t)),n(t,"confirmPopup",Be,a(t)),n(t,"upgradeFx",Oe,a(t)),t.onBack=void 0,t.typeCurrent=-1,t.condition=null,t.isUndead=void 0,t.curId=void 0,t}i(t,e);var r=t.prototype;return r.Show=function(e){var t=this;this.typeCurrent=-1,this.onBack=e,this.node.active=!0,this.ChangeTap({name:"0"}),this.spriteView.node.active=!1,this.animView.node.active=!1,this.plantEssence.string=P.numberWithCommas(I.PlantEssence),this.undeadEssence.string=P.numberWithCommas(I.UndeadEssence),this.uniEssence.string=P.numberWithCommas(I.UniEssence),null==this.condition&&y.GetUpgradeCondition((function(e){t.condition=JSON.parse(e).data})),this.resetView()},r.resetView=function(){this.setHaveState(!1),this.idLabel.string="---",this.rarityLabel.string="---",this.stageLabel.string="---",this.infoTitleLabel.string="Infomation",this.animView.node.active=!1,this.spriteView.node.active=!1,this.canUpgradeNode.active=!1,this.cannotUpgradeNode.active=!1,this.curId=null,this.tickNode.active=!1},r.upgradeClick=function(){null!=this.curId&&this.confirmPopup.OnShow()},r.confirmUpgradeClick=function(){this.confirmPopup.OnHide(),console.log("upgrade",this.isUndead,this.curId),this.isUndead?y.UpgradeUndead(this.curId,this.upgradeComplete.bind(this),null):y.UpgradePlant(this.curId,this.upgradeComplete.bind(this),null)},r.upgradeComplete=function(e){var t=this;console.log("success",e);var i=JSON.parse(e);if(0!=i.status)return console.log("show error",A.Instance.GetErrorMessage(i.status)),void E.Instance.ShowToast("Error",A.Instance.GetErrorMessage(i.status),0);if(this.isUndead){this.RequestLoadUndead(!1);var n=I.UndeadEssence;I.UndeadEssence=i.data.beastEssence,P.tweenNumber(n,I.UndeadEssence,1,(function(e){t.undeadEssence.string=P.numberWithCommas(e)})),this.scheduleOnce((function(){t.updateUndeadData(i.data.newUndead,!0),t.curId=null}),.3)}else{this.RequestLoadMyPlants(!1);var a=I.PlantEssence;I.PlantEssence=i.data.plantEssence,P.tweenNumber(a,I.PlantEssence,1,(function(e){t.plantEssence.string=P.numberWithCommas(e)})),this.scheduleOnce((function(){t.updatePlantData(i.data.newPlant.plant,!0),t.curId=null}),.3)}var r=I.UniEssence;I.UniEssence=i.data.soulEssence,P.tweenNumber(r,I.UniEssence,1,(function(e){t.uniEssence.string=P.numberWithCommas(e)})),this.upgradeFx.forEach((function(e){P.PlayParticle(e)})),this.tickNode.active=!1,this.canUpgradeNode.active=!1,this.cannotUpgradeNode.active=!1},r.onSelect=function(){},r.OnBtnBackClick=function(){this.node.active=!1,null!=this.onBack&&this.onBack()},r.onSelectUndead=function(e){this.isUndead=!0;var t=e.data;this.curId=e.data.tokenId,this.updateUndeadData(t),this.tickNode.active=!0,this.tickNode.setParent(e.node),this.tickNode.setPosition(0,0,0),this.tickNode.setScale(.8,.8,1)},r.updateUndeadData=function(e,t){var i=this;void 0===t&&(t=!1),console.log(e),this.spriteView.node.active=!1,this.animView.node.active=!1,this.infoTitleLabel.string=t?"New Infomation":"Infomation",A.Instance.LoadUndeadSpine(e.code,e.stage,(function(e,t){e&&console.error(e),null!=t&&(i.animView.node.active=!0,i.animView.skeletonData=t,i.animView.animation="Idle",i.animView.setBonesToSetupPose())})),this.updateView(e.code,e.stage,this.curId,e.rarity,!1),this.updateRequirement(e.name,e.stage,this.curId,e.rarity,e)},r.onSelectPlant=function(e){this.isUndead=!1;var t=e.data.plant;this.curId=e.data.plantId,this.updatePlantData(t),this.spriteView.spriteFrame=e.Plant.spriteFrame,this.spriteView.node.active=!1,this.animView.node.active=!1,this.tickNode.active=!0,this.tickNode.setParent(e.node),this.tickNode.setPosition(0,0,0),this.tickNode.setScale(1,1,1)},r.updatePlantData=function(e,t){var i=this;void 0===t&&(t=!1),console.log(e),this.spriteView.node.active=!1,this.animView.node.active=!1,this.infoTitleLabel.string=t?"New Infomation":"Infomation";P.getStaticSkeletonData("plants_spine/"+e.name,(function(e,t){e||null!=t&&(i.animView.node.active=!0,i.animView.skeletonData=t,i.animView.animation="Idle",i.animView.setBonesToSetupPose())})),this.updateView(e.name,e.stage,this.curId,e.rarity,!0),this.updateRequirement(e.name,e.stage,this.curId,e.rarity)},r.updateView=function(e,t,i,n,a){var r;this.idLabel.string="#"+i,this.stageLabel.string=t.toString();var s=a?Ke:Je;this.rarityLabel.string=null!=(r=s[n.toString()])?r:"";var o=N(e,t),l=null!=o;this.setHaveState(l),l&&(this.hpLabel.string=o.HP,this.atkLabel.string=o.ATK,this.magLabel.string=o.MAG,this.defLabel.string=o.DEF,this.atkSpeedLabel.string=o.AS.toString())},r.setHaveState=function(e){this.hpLabel.node.parent.active=e,this.atkLabel.node.parent.active=e,this.magLabel.node.parent.active=e,this.defLabel.node.parent.active=e,this.atkSpeedLabel.node.parent.active=e,this.newSkillLabel.node.parent.active=!1},r.updateRequirement=function(e,t,i,n,a){var r=this;if(void 0===a&&(a=null),t>=2)this.cannotUpgrade(!0);else if(a&&1==t&&a.affectionLevel<a.maxAffectionLevel)this.cannotUpgradeDes("MAX AFFECTION LEVEL REQUIRE");else{if(null==this.condition)return console.log("condition null"),void this.cannotUpgrade();var s=this.isUndead?this.condition.undeadConditions:this.condition.plantConditions,o=(t+1).toString();if(null==s||null==s[o]||null==s[o][n.toString()])return console.log("condition null 2",this.condition,this.isUndead,n,o),void this.cannotUpgrade();this.canUpgradeNode.active=!0,this.cannotUpgradeNode.active=!1;var l=s[o][n.toString()];this.essenceAmount.string=l.essence.toString(),this.essenceIcon.spriteFrame=this.isUndead?this.esscenceSprites[1]:this.esscenceSprites[2],null==l.extra_item?this.extraItem.active=!1:(this.extraItem.active=!0,this.extraEggAmount.string=l.extra_item[0].quantity,A.Instance.GetNFTEggWithName(l.extra_item[0].item,(function(e){r.extraEggType.spriteFrame=e})))}},r.cannotUpgrade=function(e){void 0===e&&(e=!1),this.canUpgradeNode.active=!1,this.cannotUpgradeNode.active=!0,this.cannotUpgradeDetail.string=e?"Upgrading to Stage 3\nis coming soon":"Cannot upgrade"},r.cannotUpgradeDes=function(e){this.canUpgradeNode.active=!1,this.cannotUpgradeNode.active=!0,this.cannotUpgradeDetail.string=e},r.ChangeTap=function(e){var t=parseInt(e.name);t!=this.typeCurrent&&(this.typeCurrent=t,this.farmPage.currentPage=0,this.RequestLoadApply())},r.RequestLoadApply=function(){this.resetView(),0==this.typeCurrent?this.RequestLoadMyPlants():1==this.typeCurrent&&this.RequestLoadUndead()},r.RequestLoadUndead=function(e){var t=this;void 0===e&&(e=!0);U.RequestLoadUndeadAll_V2("0,1,6",(function(e){var i=JSON.parse(e);0==i.status?t.LoadUndead(i.data):E.Instance.ShowToast("Error",A.Instance.GetErrorMessage(i.status),0)}),7*this.farmPage.currentPage,7,e)},r.LoadUndead=function(e){var t=this,i=e.length;this.farmPage.Init((function(){t.RequestLoadApply()}),i,7),this.DisableAllContent(),this.View.active=!0;for(var n=7*this.farmPage.currentPage,a=n;a<n+7;a++){if(a<i)this.GetUndeadAssetItemV2(a).Init(e[a],this.onSelectUndead.bind(this))}},r.GetUndeadAssetItemV2=function(e){var t;if(e<this.UndeadAssetItems.length)t=this.UndeadAssetItems[e];else{var i=g(this.UndeadAssetItemPrefab);i.setScale(1.3,1.3,1),t=i.getComponent(L),this.UndeadAssetItems.push(t)}return t.node.active=!0,t.node.setParent(this.View),t},r.DisableAllContent=function(){for(var e=0;e<this.UndeadAssetItems.length;e++)this.UndeadAssetItems[e].node.active=!1;for(var t=0;t<this.PlantItemArray.length;t++)this.PlantItemArray[t].node.active=!1;this.View.active=!1,console.log("disable all content")},r.RequestLoadMyPlants=function(e){var t=this;void 0===e&&(e=!0);var i={offset:(7*this.farmPage.currentPage).toString(),limit:7..toString(),type:1,status:"0"};this.farmPage.DisableControll(),w.RequestMyPlants(i,(function(e){var i=JSON.parse(e);t.LoadMyPlants(i)}),null,e)},r.LoadMyPlants=function(e){var t=this;if(this.DisableAllContent(),this.View.active=!0,0==e.status)if(null==e.data)this.farmPage.node.active=!1;else if(3!=this.typeCurrent&&null!=e.total&&e.total>0&&this.farmPage.currentPage>0&&0==e.data.length)this.farmPage.ChangePage(-1),this.RequestLoadMyPlants();else{null!=e.total&&e.total>0?(this.farmPage.node.active=!0,this.farmPage.Init((function(){t.RequestLoadApply()}),e.total,v.LIMIT_PAGE)):this.farmPage.node.active=!1;for(var i=0;i<e.data.length;i++){var n=this.GetIsoAddPlantItemPrefab(i);n.Init(e.data[i],null,i),n.setTouchStartCb(this.onSelectPlant.bind(this))}this.View.getComponent(m).updateLayout(!0)}else E.Instance.ShowToast("Error",A.Instance.GetErrorMessage(e.status),0)},r.GetIsoAddPlantItemPrefab=function(e){var t;if(e<this.PlantItemArray.length)t=this.PlantItemArray[e];else{var i=g(this.PlantItemPrefab);t=i.getComponent(C),this.PlantItemArray.push(t),this._changeLayer(i,b.Enum.UI_2D)}return t.node.active=!0,t.node.setScale(1,1,1),t.node.setParent(this.View),t},r._changeLayer=function(e,t){if(e.layer=t,!(e.children.length<=0))for(var i=0;i<e.children.length;i++)this._changeLayer(e.children[i],t)},t}(f)).prototype,"order",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 105}}),he=t(de.prototype,"farmPage",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=t(de.prototype,"View",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(de.prototype,"UndeadAssetItemPrefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=t(de.prototype,"undeadEssence",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(de.prototype,"plantEssence",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=t(de.prototype,"uniEssence",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=t(de.prototype,"PlantItemPrefab",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=t(de.prototype,"tickNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=t(de.prototype,"animView",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=t(de.prototype,"spriteView",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=t(de.prototype,"infoTitleLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=t(de.prototype,"idLabel",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=t(de.prototype,"stageLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=t(de.prototype,"rarityLabel",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=t(de.prototype,"hpLabel",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=t(de.prototype,"atkLabel",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=t(de.prototype,"defLabel",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ve=t(de.prototype,"magLabel",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=t(de.prototype,"atkSpeedLabel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=t(de.prototype,"newSkillLabel",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=t(de.prototype,"essenceAmount",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=t(de.prototype,"essenceIcon",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=t(de.prototype,"extraItem",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=t(de.prototype,"extraEggType",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe=t(de.prototype,"extraEggAmount",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fe=t(de.prototype,"esscenceSprites",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),qe=t(de.prototype,"canUpgradeNode",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ge=t(de.prototype,"cannotUpgradeNode",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=t(de.prototype,"cannotUpgradeDetail",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=t(de.prototype,"confirmPopup",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oe=t(de.prototype,"upgradeFx",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ue=de))||ue));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIScreenAssets.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ExpeditionServiceApi.ts","./FarmingServicesApi.ts","./EggItem.ts","./TreasureAssetsItem.ts","./TreasureAssetsOpen.ts","./TreasureAssetsOpenFX.ts","./FarmPage.ts","./UIItemMaterial.ts","./ResourcesManager.ts","./UIPopupManager.ts","./UIItemInfo.ts","./UndeadAssetItem_v2.ts"],(function(e){"use strict";var t,i,s,a,r,n,o,u,l,c,h,I,f,d,g,m,p,T,A,E,b,P,M,v,y,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){n=e.cclegacy,o=e._decorator,u=e.CCInteger,l=e.Node,c=e.Toggle,h=e.Label,I=e.Prefab,f=e.instantiate,d=e.Component},function(e){g=e.ExpeditionServiceApi},function(e){m=e.FarmingServicesApi},function(e){p=e.EggItem},function(e){T=e.TreasureAssetsItem},function(e){A=e.TreasureAssetsOpen},function(e){E=e.TreasureAssetsOpenFX},function(e){b=e.FarmPage},function(e){P=e.UIItemMaterial},function(e){M=e.ResourcesManager},function(e){v=e.UIPopupManager},function(e){y=e.UIItemInfo},function(e){S=e.UndeadAssetItemV2}],execute:function(){var w,L,R,U,D,_,C,k,O,G,K,q,V,z,N,F,B,H,W,x,X,J,Y,j,Q,Z,$,ee,te,ie,se;n._RF.push({},"26706ArmW5FLpHpT0waD8wf","UIScreenAssets",void 0);var ae=o.ccclass,re=o.property;e("UIScreenAssets",(w=ae("UIScreenAssets"),L=re(u),R=re(b),U=re(l),D=re(l),_=re(c),C=re(l),k=re(y),O=re(A),G=re(T),K=re(E),q=re(h),V=re(I),z=re(I),N=re(I),w((H=t((B=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,s(t,"order",H,a(t)),s(t,"farmPage",W,a(t)),s(t,"View",x,a(t)),s(t,"ViewTreasure",X,a(t)),s(t,"Toggles",J,a(t)),s(t,"Tick",Y,a(t)),s(t,"uiItemInfo",j,a(t)),s(t,"treasureAssetsOpen",Q,a(t)),s(t,"treasureAssetsItems",Z,a(t)),s(t,"treasureAssetsOpenFX",$,a(t)),s(t,"TreasureKeyLabel",ee,a(t)),t._TreasureKey=0,s(t,"EggItemPrefab",te,a(t)),s(t,"UndeadAssetItemPrefab",ie,a(t)),s(t,"materialPrefab",se,a(t)),t.uiItemMaterial=[],t.eggItems=[],t.UndeadAssetItems=[],t.currentMaterialData=void 0,t.typeCurrent=1,t.LIMIT_PAGE=16,t.currentItemPick=null,t.onBack=void 0,t}i(t,e);var n=t.prototype;return n.Show=function(e){this.onBack=e,this.node.active=!0,this.typeCurrent=0,this.Toggles[0].isChecked=!0,this.DisableItem(),this.ChangeTap(this.Toggles[0])},n.ChangeTap=function(e){var t=parseInt(e.name);t!=this.typeCurrent&&(this.typeCurrent=t,this.DisableItem(),this.RequestLoadApply())},n.DisableItem=function(){this.currentMaterialData=null,this.farmPage.toPage(0)},n.RequestLoadApply=function(){this.DeSelectItem(),5==this.typeCurrent?this.RequestLoadMaterials():6==this.typeCurrent?this.RequestLoadEgg():7==this.typeCurrent?this.RequestLoadUndead():8==this.typeCurrent&&this.RequestLoadTreasure()},n.DeSelectItem=function(){this.uiItemInfo.Hide(),this.Tick.active=!1,this.currentItemPick=null},n.RequestLoadUndead=function(){var e=this;if(null==this.currentMaterialData){g.RequestLoadUndeadAll((function(t){var i=JSON.parse(t);0==i.status?(e.currentMaterialData=i,e.LoadMyUndead(i)):v.Instance.ShowToast("Error",M.Instance.GetErrorMessage(i.status),0)}))}else this.LoadMyUndead(this.currentMaterialData)},n.LoadMyUndead=function(e){var t=this,i=e.data.length;this.farmPage.Init((function(){t.RequestLoadApply()}),i,this.LIMIT_PAGE),this.DisableAllContent(),this.View.active=!0;for(var s=this.farmPage.currentPage*this.LIMIT_PAGE,a=s;a<s+this.LIMIT_PAGE;a++){if(a<i)this.GetUndeadAssetItemV2(a).Init(e.data[a],(function(e){t.currentItemPick!=e&&(t.currentItemPick=e,t.Tick.active=!0,t.Tick.setWorldPosition(e.node.worldPosition),t.uiItemInfo.Show(7,e,t))}))}},n.GetUndeadAssetItemV2=function(e){var t;e<this.UndeadAssetItems.length?t=this.UndeadAssetItems[e]:(t=f(this.UndeadAssetItemPrefab).getComponent(S),this.UndeadAssetItems.push(t));return t.node.active=!0,t.node.setParent(this.View),t},n.RequestLoadTreasure=function(){var e=this,t={offset:this.farmPage.currentPage*this.LIMIT_PAGE,limit:this.LIMIT_PAGE};m.RequestLoadMaterials(t,(function(t){e.LoadMyTreasure(t)}),(function(e){}))},n.LoadMyTreasure=function(e){this.farmPage.node.active=!1;var t=JSON.parse(e);if(0==t.status){if(null!=t.data&&null!=t.data.items){this.DisableAllContent(),this.ViewTreasure.active=!0;for(var i=0,s=0,a=0,r=0,n=t.data.items.length,o=0;o<n;o++){var u=t.data.items[o],l=u.name;"EPIC_CHEST_KEY"==l?i+=u.amount:"BURRIED_TREASURE"==l?s+=u.amount:"HIDDEN_TREASURE"==l?a+=u.amount:"SUNKEN_TREASURE"==l&&(r+=u.amount)}this.TreasureKey=i,this.treasureAssetsItems[0].Init(a,this.ShowTreasureAssetsOpen.bind(this),"HIDDEN_TREASURE",this.TreasureKey,this.onTreasureClick.bind(this)),this.treasureAssetsItems[1].Init(r,this.ShowTreasureAssetsOpen.bind(this),"SUNKEN_TREASURE",this.TreasureKey,this.onTreasureClick.bind(this)),this.treasureAssetsItems[2].Init(s,this.ShowTreasureAssetsOpen.bind(this),"BURRIED_TREASURE",this.TreasureKey,this.onTreasureClick.bind(this))}}else v.Instance.ShowToast("Error",M.Instance.GetErrorMessage(t.status),0)},n.onTreasureClick=function(e){this.currentItemPick!=e&&(this.currentItemPick=e,this.Tick.active=!0,this.Tick.setWorldPosition(e.node.worldPosition),this.uiItemInfo.Show(8,e,this))},n.RequestLoadEgg=function(){var e=this;if(null==this.currentMaterialData){g.RequestLoadExEggAsset((function(t){var i=JSON.parse(t);0==i.status?(e.currentMaterialData=e.sortEggData(i.data),e.LoadMyEggs(e.currentMaterialData)):v.Instance.ShowToast("Error",M.Instance.GetErrorMessage(i.status),0)}))}else this.LoadMyEggs(this.currentMaterialData)},n.sortEggData=function(e){return e.sort((function(e,t){return e.status==t.status?t.rarity-e.rarity:"hatched"==e.status?-1:"hatched"==t.status?1:"hatching"==e.status?-1:"hatching"==t.status?1:0}))},n.GetEggItem=function(e){var t;e<this.eggItems.length?t=this.eggItems[e]:(t=f(this.EggItemPrefab).getComponent(p),this.eggItems.push(t));return t.node.active=!0,t.node.setParent(this.View),t},n.LoadMyEggs=function(e){var t=this;this.DisableAllContent(),this.View.active=!0;var i=e.length,s=this.farmPage.currentPage*this.LIMIT_PAGE;s==i&&(this.farmPage.toPage(0),s=0);this.farmPage.Init((function(){t.RequestLoadApply()}),i,this.LIMIT_PAGE);for(var a=s;a<s+this.LIMIT_PAGE;a++){if(a<i)this.GetEggItem(a).Init(e[a],!0,this.OnEggSelect.bind(this),a)}},n.OnEggSelect=function(e){this.currentItemPick!=e&&(this.currentItemPick=e,this.Tick.active=!0,this.Tick.setWorldPosition(e.node.worldPosition),this.uiItemInfo.Show(6,e,this))},n.OnEggOpen=function(e){this.currentMaterialData.splice(e,1),this.LoadMyEggs(this.currentMaterialData)},n.RequestLoadMaterials=function(){var e=this;if(null==this.currentMaterialData){var t={offset:0,limit:this.LIMIT_PAGE};m.RequestLoadMaterials(t,(function(t){var i=JSON.parse(t);if(0==i.status){for(var s=i.data.items,a=s.length-1;a>=0;a--){var r=s[a].name;(r.includes("Sunflower")||"Scarecrow"==r||"Water"==r||"Small Pot"==r||"BURRIED_TREASURE"==r||"HIDDEN_TREASURE"==r||"SUNKEN_TREASURE"==r||"EPIC_CHEST_KEY"==r)&&s.splice(a,1)}s.sort((function(e,t){return e.name.includes("MYSTERIOUS_POWDER")?-1:t.name.includes("MYSTERIOUS_POWDER")?1:0})),e.currentMaterialData=i,e.LoadMyMaterials(i)}else v.Instance.ShowToast("Error",M.Instance.GetErrorMessage(i.status),0)}),(function(e){}))}else this.LoadMyMaterials(this.currentMaterialData)},n.LoadMyMaterials=function(e){var t=this;if(null!=e.data&&null!=e.data.items){this.DisableAllContent(),this.View.active=!0;var i=0,s=this.farmPage.currentPage*this.LIMIT_PAGE,a=e.data.items.length;this.farmPage.Init((function(){t.RequestLoadApply()}),a,this.LIMIT_PAGE);for(var r=s;r<s+this.LIMIT_PAGE;r++)if(r<a){var n=e.data.items[r];if(null!=n.amount&&n.amount>0){var o=this.GetuiItemMaterial(i);i++,o.Init(n,(function(e){t.currentItemPick!=e&&(t.currentItemPick=e,t.Tick.active=!0,t.Tick.setWorldPosition(e.node.worldPosition),t.uiItemInfo.Show(5,e,t))}))}}}},n.GetuiItemMaterial=function(e){var t;e<this.uiItemMaterial.length?t=this.uiItemMaterial[e]:(t=f(this.materialPrefab).getComponent(P),this.uiItemMaterial.push(t));return t.node.active=!0,t.node.setParent(this.View),t.node.setSiblingIndex(this.View.children.length-1),t},n.DisableAllContent=function(){for(var e=0;e<this.uiItemMaterial.length;e++)this.uiItemMaterial[e].node.active=!1;for(var t=0;t<this.eggItems.length;t++)this.eggItems[t].node.active=!1;for(var i=0;i<this.UndeadAssetItems.length;i++)this.UndeadAssetItems[i].node.active=!1;this.View.active=!1,this.ViewTreasure.active=!1},n.OnBtnBackClick=function(){this.node.active=!1,null!=this.onBack&&this.onBack()},n.OnBtnCraftClick=function(){this.node.active=!1,v.Instance.ShowUIScreenCraft(!0,null)},n.ShowTreasureAssetsOpen=function(e,t,i,s){this.treasureAssetsOpen.Show(e,t,i,function(e,i){this.TreasureKey-=e;for(var a=0;a<this.treasureAssetsItems.length;a++)this.treasureAssetsItems[a].SetCurrentKey(this.TreasureKey);s(e),this.treasureAssetsOpenFX.Show(i,t)}.bind(this))},n.OnExtractPower=function(){this.currentMaterialData=null,this.RequestLoadApply()},r(t,[{key:"TreasureKey",get:function(){return this._TreasureKey},set:function(e){this._TreasureKey=e,this.TreasureKeyLabel.string=this._TreasureKey.toString()}}]),t}(d)).prototype,"order",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=t(B.prototype,"farmPage",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(B.prototype,"View",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(B.prototype,"ViewTreasure",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(B.prototype,"Toggles",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=t(B.prototype,"Tick",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(B.prototype,"uiItemInfo",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(B.prototype,"treasureAssetsOpen",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(B.prototype,"treasureAssetsItems",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=t(B.prototype,"treasureAssetsOpenFX",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(B.prototype,"TreasureKeyLabel",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(B.prototype,"EggItemPrefab",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(B.prototype,"UndeadAssetItemPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(B.prototype,"materialPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=B))||F));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIScreenChooseExpedition.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ExpeditionServiceApi.ts","./UnDeadData.ts","./SimplePool.ts","./ResourcesManager.ts","./UIPopupManager.ts","./EggItem.ts","./UISelectEgg.ts","./UndeadAssetItem.ts"],(function(e){"use strict";var t,n,a,i,o,s,r,d,c,l,g,u,h,b,p,f,v,U,E,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,r=e.CCInteger,d=e.Node,c=e.ToggleContainer,l=e.Label,g=e.Button,u=e.Component},function(e){h=e.ExpeditionServiceApi},function(e){b=e.default},function(e){p=e.SimplePool},function(e){f=e.ResourcesManager},function(e){v=e.UIPopupManager},function(e){U=e.EggItem},function(e){E=e.UISelectEgg},function(e){S=e.UndeadAssetItem}],execute:function(){var m,I,y,C,T,w,k,P,N,A,L,z,B,R,x,M,O,q,D,F,J,_,G,H,j;o._RF.push({},"a7da2Qe+H9FUamwee9qt4gb","UIScreenChooseExpedition",void 0);var Q=s.ccclass,K=s.property,V="ToggleUndead",W="ToggleEgg";e("UIScreenChooseExpedition",(m=Q("UIScreenChooseExpedition"),I=K(r),y=K(d),C=K(E),T=K(U),w=K(S),k=K(d),P=K(c),N=K(d),A=K(l),L=K(g),z=K(g),m((x=t((R=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,a(t,"order",x,i(t)),t.isFirstToggles=!0,t.typeCurrent=1,t.cageId=void 0,t.cacheEggData=void 0,a(t,"tabUndead",M,i(t)),a(t,"tabEgg",O,i(t)),a(t,"eggPrefab",q,i(t)),a(t,"undeadPrefab",D,i(t)),a(t,"contentUndead",F,i(t)),a(t,"togglesCheck",J,i(t)),a(t,"NoAsset",_,i(t)),a(t,"lbNumPage",G,i(t)),a(t,"btnNext",H,i(t)),a(t,"btnPrev",j,i(t)),t.onBack=void 0,t.currentTab="",t.uiManager=void 0,t.dataUndead=[],t.dataEggs=[],t}n(t,e);var o=t.prototype;return o.start=function(){this.NoAsset.active=!0,this.tabEgg.node.active=!1,this.tabUndead.active=!1,this.currentTab=W;for(var e=this.togglesCheck.toggleItems,t=0;t<e.length;t++){var n=e[t];n&&(n.isChecked=n.node.name==this.currentTab,n.node.on("toggle",this.onToggleSelected,this))}},o.onInit=function(e){this.uiManager=e},o.Show=function(e,t){this.node.active=!0,this.onBack=t,this.cageId=e,this.RequestLoadUndead(),this.RequestLoadEgg()},o.onToggleSelected=function(e){if(e.isChecked){var t=e.node.name;t!=this.currentTab&&(this.currentTab=t,this.activeTab(t))}},o.activeTab=function(e){this.dataEggs.length<=0&&this.dataUndead.length<=0||(this.tabEgg.node.active=e==W&&this.dataEggs.length>0,this.tabUndead.active=e==V&&this.dataUndead.length>0,this.NoAsset.active=!this.tabEgg.node.active&&!this.tabUndead.active)},o.ChangeTap=function(e){},o.OnBtnBackClick=function(){this.node.active=!1,null!=this.onBack&&this.onBack()},o.RequestLoadEgg=function(){h.RequestLoadExEgg(this.initListEgg.bind(this))},o.RequestLoadUndead=function(){h.RequestLoadUndead(this.initListUndead.bind(this))},o.initListUndead=function(e){p.releaseAll(this.contentUndead);var t=JSON.parse(e);if(0==t.status&&(this.dataUndead=t.data,this.NoAsset.active=this.dataUndead.length<=0,this.dataUndead.length>0))for(var n=0;n<t.data.length;n++){var a=p.get(S,this.undeadPrefab.node,this.contentUndead);a.node.active=!0,a.InitOnSelect(t.data[n],this.onSelectUndead.bind(this))}},o.initListEgg=function(e){p.releaseAll(this.contentUndead);var t=JSON.parse(e);if(0==t.status){var n=t.data;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(i){var o=new b(i);this.dataEggs.push(o)}}this.NoAsset.active=this.dataEggs.length<=0,this.dataEggs.length>0&&this.tabEgg.initListEgg(this.dataEggs)}this.activeTab(this.currentTab)},o.onCreateUndeadSuccess=function(e){var t=JSON.parse(e);0==t.status?(console.log("todo open undead egg",e),this.uiManager.uiPopupOpenEgg.Show(t,this.cacheEggData,this.OnBtnBackClick.bind(this))):v.Instance.ShowToast("Error",f.Instance.GetErrorMessage(t.status),0)},o.onSelectUndeadSuccess=function(e){var t=JSON.parse(e);0==t.status?this.OnBtnBackClick():v.Instance.ShowToast("Error",f.Instance.GetErrorMessage(t.status),0)},o.onSelectUndead=function(e){console.log("onSelectUndead: "+e),h.RequestAssignUndeadToCage(e,this.cageId,this.onSelectUndeadSuccess.bind(this))},t}(u)).prototype,"order",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=t(R.prototype,"tabUndead",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(R.prototype,"tabEgg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(R.prototype,"eggPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(R.prototype,"undeadPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(R.prototype,"contentUndead",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(R.prototype,"togglesCheck",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(R.prototype,"NoAsset",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(R.prototype,"lbNumPage",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(R.prototype,"btnNext",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(R.prototype,"btnPrev",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=R))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIScreenCraft.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FarmingServicesApi.ts","./GatheringServicesApi.ts","./CraftingData.ts","./UserModel.ts","./Utility.ts","./ResourcesManager.ts","./SoundController.ts","./UIPopupManager.ts","./UIMysticCraft.ts","./UISynthesisCraft.ts","./UITravelBag.ts"],(function(t){"use strict";var e,i,n,a,r,o,s,c,l,u,f,h,g,p,C,d,y,b,v,I,S,m,T,w,B,U,E,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.CCInteger,c=t.ToggleContainer,l=t.Node,u=t.Button,f=t.Label,h=t.UIOpacity,g=t.tween,p=t.Color,C=t.Vec3,d=t.Component},function(t){y=t.FarmingServicesApi},function(t){b=t.GatheringServicesApi},function(t){v=t.CraftingConfig},function(t){I=t.UserModel},function(t){S=t.Utility},function(t){m=t.ResourcesManager},function(t){T=t.SoundController,w=t.EnumSound},function(t){B=t.UIPopupManager},function(t){U=t.UIMysticCraft},function(t){E=t.UISynthesisCraft},function(t){L=t.UITravelBag}],execute:function(){var k,M,z,_,G,P,F,O,D,R,q,A,N,J,j,V,x,H,K,W,X;r._RF.push({},"2f293k8JEZII7RNrXbPfjs7","UIScreenCraft",void 0);var Z=o.ccclass,Q=o.property,Y="ToggleMystic",$="ToggleSynthesis";t("UIScreenCraft",(k=Z("UIScreenCraft"),M=Q(s),z=Q(c),_=Q(l),G=Q(u),P=Q(f),F=Q(L),O=Q(h),D=Q(U),R=Q(E),k((N=e((A=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"order",N,a(e)),n(e,"toggleCraft",J,a(e)),n(e,"grpLE",j,a(e)),n(e,"btnBack",V,a(e)),n(e,"lbLE",x,a(e)),n(e,"uiTravelBag",H,a(e)),n(e,"uiOpacity",K,a(e)),n(e,"uiMysticCraft",W,a(e)),n(e,"uiSynthesisCraft",X,a(e)),e.currentTab="",e.LEValue=0,e.craftingConfig=void 0,e.onBack=void 0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.tweenShow=g(this.uiOpacity).to(.3,{opacity:255})},r.start=function(){this.btnBack.node.on(u.EventType.CLICK,this.onBtnBackClicked,this),this.uiTravelBag.node.on("itemBag:onClicked",this.onSelectedItem,this),this.activeUITop(!0);for(var t=this.toggleCraft.toggleItems,e=0;e<t.length;e++){t[e].node.on("toggle",this.onToggleSelected,this)}},r.Show=function(t,e){this.onBack=e,T.Instance.PlaySound(w.GameUI_openpopup),this.uiOpacity.opacity=1,this.node.active=!0,this.tweenShow&&this.tweenShow.start(),this.requestLoadFarmsStats(),this.requestItemConfig();var i=this.toggleCraft.toggleItems,n=t?Y:$,a=i.find((function(t){return t.node.name==n}));this.currentTab=n,a.isChecked=!0,this.activeTab(n)},r.TweenLE=function(t,e){S.TweenLE(t,e,this.lbLE)},r.requestLoadFarmsStats=function(){var t=this;if(-1==I.LE_num){y.RequestFarmsStats((function(e){var i=JSON.parse(e);if(0==i.status){var n=i.data.leWallet;t.TweenLE(n,!1)}else B.Instance.ShowToast("Error",m.Instance.GetErrorMessage(i.status),0)}),null)}else this.TweenLE(I.LE_num,!1)},r.requestItemConfig=function(){var t=this;b.Crafting_GetConfig(function(e){var i=JSON.parse(e);if(0==i.status){var n=new v(i.data);t.craftingConfig=n,t.uiTravelBag.onInit(),t.uiMysticCraft.onInit(t),t.uiSynthesisCraft.onInit(t)}else B.Instance.ShowToast("Error",m.Instance.GetErrorMessage(i.status),0,!1)}.bind(this),function(t){}.bind(this))},r.onSelectedItem=function(t){this.uiMysticCraft.node.active?this.uiMysticCraft.onSelectedItem(t):this.uiSynthesisCraft.onSelectedItem(t)},r.onToggleSelected=function(t){var e=t.getComponentInChildren(f);if(e&&(e.color=t.isChecked?new p(53,102,111,255):new p(228,251,255,255)),t.isChecked){var i=t.node.name;i!=this.currentTab&&(T.Instance.PlaySound(w.GameUI_button_click),this.currentTab=i,this.activeTab(i))}},r.activeTab=function(t){this.toggleCraft.node.position=new C(t==$?825:772,30),this.uiSynthesisCraft.node.active=t==$,this.uiMysticCraft.node.active=t==Y,this.uiTravelBag.node.active=t==Y,this.uiMysticCraft.resetDataCraft(),this.uiSynthesisCraft.resetDataCraft()},r.activeUITop=function(t){this.btnBack.node.active=t,this.grpLE.active=t,this.lbLE.node.active=t},r.onBtnBackClicked=function(){this.node.active=!1,T.Instance.PlaySound(w.GameUI_closepopup),null!=this.onBack&&this.onBack()},e}(d)).prototype,"order",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=e(A.prototype,"toggleCraft",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(A.prototype,"grpLE",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(A.prototype,"btnBack",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(A.prototype,"lbLE",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(A.prototype,"uiTravelBag",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(A.prototype,"uiOpacity",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(A.prototype,"uiMysticCraft",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(A.prototype,"uiSynthesisCraft",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=A))||q));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIScreenExpedition.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIFarmOverlay.ts","./ExpeditionServiceApi.ts","./SimplePool.ts","./ResourcesManager.ts","./UIPopupManager.ts","./ExpeditionItem.ts","./UIExpeditionFoodItem.ts","./UINotifyExpedition.ts","./UIExpeditionPopup.ts","./UIFinishExpeditionPopup.ts","./UIPopupNurtureUndead.ts","./UIScreenChooseExpedition.ts","./UIPopupUndeadInfo.ts","./UIPopupOpenEgg.ts","./UnDeadData.ts"],(function(e){"use strict";var i,t,o,n,a,r,d,u,l,s,p,c,f,h,m,E,g,I,b,y,x,F,U,S;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,d=e.Node,u=e.log,l=e.Component},function(e){s=e.UIFarmOverlay},function(e){p=e.ExpeditionServiceApi},function(e){c=e.SimplePool},function(e){f=e.ResourcesManager},function(e){h=e.UIPopupManager},function(e){m=e.ExpeditionItem},function(e){E=e.UIExpeditionFoodItem},function(e){g=e.UINotifyExpedition},function(e){I=e.UIExpeditionPopup},function(e){b=e.UIFinishExpeditionPopup},function(e){y=e.UIPopupNurtureUndead},function(e){x=e.UIScreenChooseExpedition},function(e){F=e.UIPopupUndeadInfo},function(e){U=e.UIPopupOpenEgg},function(e){S=e.default}],execute:function(){var v,A,T,N,w,P,C,R,_,O,D,z,H,L,M,Y,Z,G,k,q,J,B,W,j,V,K,Q;a._RF.push({},"6d892FfBYxFGqSE1+2Eu0T8","UIScreenExpedition",void 0);var X=r.ccclass,$=r.property,ee=["Crustacean","Fish","Fauna","Insect","Fruit"];e("UIScreenExpedition",(v=X("UIScreenExpedition"),A=$(d),T=$(d),N=$(d),w=$(d),P=$(I),C=$(b),R=$(y),_=$(x),O=$(F),D=$(g),z=$(U),H=$(s),v((Y=i((M=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(i=e.call.apply(e,[this].concat(a))||this).framSelected=void 0,i.ItemArray=[],o(i,"content",Y,n(i)),o(i,"foodRoot",Z,n(i)),o(i,"contentFood",G,n(i)),o(i,"prefabFood",k,n(i)),o(i,"uiExpeditionPopup",q,n(i)),o(i,"uiFinishExpeditionPopup",J,n(i)),o(i,"uiPopupNurtureUndead",B,n(i)),o(i,"uiScreenChooseExpedition",W,n(i)),o(i,"uiEUndeadInfo",j,n(i)),o(i,"uiNotifyExpedition",V,n(i)),o(i,"uiPopupOpenEgg",K,n(i)),o(i,"uiFarmOverlay",Q,n(i)),i.firstCall=!1,i.fakeData='{"status":0,"data":{"status":1,"lifeCycleRate":1,"affectionLevel":0,"affectionExp":454,"exchangeRate":1,"timeToUpLv":[],"_id":"620e012876164a002dddc42b","ownerId":"0x1d47e6713b797b96c46145237e72d7bea4675940","eggId":"6200dc08c95638f347c1b090","tokenId":216,"rarity":2,"birth":"2022-02-17T08:02:00.000Z","baseLifeCycle":45,"expiryDate":"2022-05-07T06:41:00.000Z","lastTimeLvUp":"2022-02-17T08:02:00.000Z","giveEggRate":20,"currentFatigue":672,"lastTimeRegenFatigue":"2022-03-24T05:25:00.000Z","fatigueCostPerExpeditionHour":83,"currentCage":"61dd5f05daa015597baa3bcc","undeadId":2003,"name":"Torramn","imageUrl":"Torramn image","code":"torramn","maxAffectionLevel":4,"maxFatigue":1000,"fatigueRegenPerHour":12,"maxExpeditionHour":12,"createdAt":"2022-02-17T08:02:48.262Z","updatedAt":"2022-03-24T05:25:24.762Z","__v":0,"lastTimeDecreaseFatigue":"2022-02-18T05:29:00.000Z"}}',i.randomFood=["LEGENDARY_FISH","MYTHIC_FISH","LEGENDARY_CRUSTACEAN","LEGENDARY_FAUNA","MYTHIC_FAUNA","MYTHIC_CRUSTACEAN"],i}t(i,e);var a=i.prototype;return a.start=function(){this.uiFarmOverlay&&this.uiFarmOverlay.onShow(),this.showExpedition(),this.uiFinishExpeditionPopup.onInit(this),this.uiPopupNurtureUndead.onInit(this),this.uiScreenChooseExpedition.onInit(this),this.uiEUndeadInfo.onInit(this),this.uiNotifyExpedition.onInit(this)},a.onEnable=function(){},a.onDisable=function(){this.uiNotifyExpedition.hideAllNotifyWithoutEffect()},a.delayShow=function(e){this.scheduleOnce(this.showExpedition,e)},a.showExpedition=function(){this.firstCall=!0,0==this.ItemArray.length&&(this.ItemArray=this.content.getComponentsInChildren(m)),this.deActiveAllFram(),this.framSelected=null,this.HideTool(!1),p.RequestLoadCage(this.initExpedition.bind(this)),p.RequestLoadUndeadFood(this.initUndeadFood.bind(this))},a.initExpedition=function(e){var i=JSON.parse(e);i.data.sort((function(e,i){return e._id<i._id?-1:e._id>i._id?1:0})),this.uiNotifyExpedition.hideAllNotifyWithoutEffect(),this.uiNotifyExpedition.OnShow();for(var t=0;t<this.ItemArray.length;t++){var o=this.ItemArray[t];if(t>=i.data.length)o.node.active=!1;else{var n=i.data[t];o.node.active=!0;new S(n);console.log("Cage: ",t,null!=n.undead?n.undead.tokenId.toString():"",n._id),console.log(JSON.stringify(n)),o.refreshView(this,n),o.isCompleteExpedition()&&this.uiNotifyExpedition.showNotify(n.undead)}}},a.initUndeadFood=function(e){c.releaseAll(this.contentFood);for(var i=JSON.parse(e),t=[],o=0;o<i.data.items.length;o++){var n=i.data.items[o],a=f.Instance.GetMaterialData(n.name);null!=a?ee.indexOf(a.type)>=0&&(u("DATA FOOD ",n),t.push({config:a,data:n})):console.warn("error when find material: ",n)}t.sort((function(e,i){return e.config.food_sort-i.config.food_sort}));for(var r=0;r<t.length;r++){var d=c.get(E,this.prefabFood,this.contentFood);d.node.active=!0,d.Init(this,t[r].data.amount,t[r].data.name)}},a.SelectExpedition=function(e){this.framSelected==e?(this.deActiveAllFram(),this.HideTool(!0)):(this.deActiveAllFram(),this.framSelected=e,this.HideTool(!0))},a.FeedBtnClickExpedition=function(e){this.deActiveAllFram(),this.framSelected=e,this.ShowTool(),e.SelectThis(!0)},a.deActiveAllFram=function(){this.framSelected=null;for(var e=0;e<this.ItemArray.length;e++)this.ItemArray[e].SelectThis(!1)},a.ShowTool=function(){this.foodRoot.active=!0},a.HideTool=function(e){this.foodRoot.active=!1},a.feedToUndead=function(e,i){if(null==this.framSelected)this.HideTool(!0);else{var t=this.framSelected.data.undead._id;console.log("feedToUndead",e,t),p.RequestFeedUndead(t,e,function(t){this.ApplyToolSuccess(t,e,i)}.bind(this))}},a.ApplyToolSuccess=function(e,i,t){var o=JSON.parse(e);0==o.status?this.framSelected.doAnimFeed(o.data,i,t,function(){p.RequestLoadUndeadFood(this.initUndeadFood.bind(this))}.bind(this)):h.Instance.ShowToast("Error",f.Instance.GetErrorMessage(o.status),0)},i}(l)).prototype,"content",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=i(M.prototype,"foodRoot",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=i(M.prototype,"contentFood",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(M.prototype,"prefabFood",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=i(M.prototype,"uiExpeditionPopup",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=i(M.prototype,"uiFinishExpeditionPopup",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(M.prototype,"uiPopupNurtureUndead",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=i(M.prototype,"uiScreenChooseExpedition",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=i(M.prototype,"uiEUndeadInfo",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=i(M.prototype,"uiNotifyExpedition",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=i(M.prototype,"uiPopupOpenEgg",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=i(M.prototype,"uiFarmOverlay",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=M))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIScreenFram.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./UImanager.ts","./UIPopupManager.ts","./UITutorial.ts"],(function(e){"use strict";var t,n,a,r,i,o,l,c,u,s,f,m,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Label,c=e.Node,u=e.Component},function(e){s=e.Utility},function(e){f=e.UImanager},function(e){m=e.UIPopupManager},function(e){p=e.UITutorial}],execute:function(){var b,h,I,d,y,g,S,v,w,L,U,N,B,F,k,z,O,T,_;i._RF.push({},"851125nQ09Nw4u9vTL1IaEc","UIScreenFram",void 0);var E=o.ccclass,C=o.property;e("UIScreenFram",(b=E("UIScreenFram"),h=C(l),I=C(c),d=C(c),y=C(c),g=C(c),S=C(c),v=C(c),w=C(p),b((N=t((U=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,a(t,"LE_Label",N,r(t)),a(t,"LeImg",B,r(t)),a(t,"farmNode",F,r(t)),a(t,"farmBgNode",k,r(t)),a(t,"farmUINode",z,r(t)),a(t,"farmOverlayNode",O,r(t)),a(t,"farmOverlayNode1",T,r(t)),a(t,"UITutorialFarm",_,r(t)),t}n(t,e);var i=t.prototype;return i.Show=function(e){e?(this.node.active=!0,s.RequestLoadFarmsStats(this.LE_Label),this.ShowFarm(!0)):(this.node.active=!1,this.ShowFarm(!1))},i.TweenLE=function(e,t){s.TweenLE(e,t,this.LE_Label)},i.OnBtnSettingClick=function(){m.Instance.ShowSetting()},i.OnBtnSeasonClick=function(){f.Instance.ShowWeather()},i.OnBtnAssetClick=function(){f.Instance.ShowUIScreenAssets()},i.ShowFarm=function(e){this.farmNode.active=e,this.farmBgNode.active=e,this.farmUINode.active=e,this.farmOverlayNode.active=e,this.farmOverlayNode1.active=e},i.onBtnTutorialBarn=function(){this.UITutorialFarm.Show(0)},i.onBtnBack=function(){f.Instance.OnBackClick()},i.onBtnSkillBook=function(){var e=this;m.Instance.ShowUIScreenSkillBook((function(){s.RequestLoadFarmsStats(e.LE_Label)}),2)},t}(u)).prototype,"LE_Label",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(U.prototype,"LeImg",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(U.prototype,"farmNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(U.prototype,"farmBgNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(U.prototype,"farmUINode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(U.prototype,"farmOverlayNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(U.prototype,"farmOverlayNode1",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(U.prototype,"UITutorialFarm",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=U))||L));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIScreenMain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./GatheringServicesApi.ts","./UserModel.ts","./Utility.ts","./UIPopupMaterialWarning.ts","./ResourcesManager.ts","./UIPopupManager.ts"],(function(t){"use strict";var e,n,a,i,r,o,s,u,l,c,h,m,S,p,b,f,g,I,d,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.CCInteger,u=t.Label,l=t.Node,c=t.Sprite,h=t.SpriteFrame,m=t.Component},function(t){S=t.ConfigApi},function(t){p=t.GatheringServicesApi},function(t){b=t.UserModel,f=t.UserGatherData},function(t){g=t.Utility},function(t){I=t.UIPopupMaterialWarning},function(t){d=t.ResourcesManager},function(t){v=t.UIPopupManager}],execute:function(){var w,G,M,y,k,L,E,N,P,B,R,_,O,K,T,U,z,C,F,A,D,q,H,W,J,V,x,Y,j,X,Q,Z,$,tt,et,nt,at;r._RF.push({},"6f0b9kKXYlHJa/BlVwzv+q9","UIScreenMain",void 0);var it=o.ccclass,rt=o.property;t("UIScreenMain",(w=it("UIScreenMain"),G=rt(s),M=rt(u),y=rt(u),k=rt(u),L=rt(l),E=rt(l),N=rt(l),P=rt(l),B=rt(c),R=rt(c),_=rt(h),O=rt(h),K=rt(I),T=rt(l),U=rt(l),z=rt(l),C=rt(l),w((D=e((A=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"order",D,i(e)),a(e,"LE_Label",q,i(e)),a(e,"staminaLabel",H,i(e)),a(e,"kingKeyLabel",W,i(e)),e.kingKey=0,a(e,"btnBack",J,i(e)),a(e,"StaminaNode",V,i(e)),a(e,"kingKeyNode",x,i(e)),a(e,"btnBottomRight",Y,i(e)),a(e,"btnGatherNormal",j,i(e)),a(e,"btnGatherPre",X,i(e)),a(e,"sfGatherNor",Q,i(e)),a(e,"sfGatherPre",Z,i(e)),a(e,"uiPopupMaterialWarning",$,i(e)),a(e,"menu1",tt,i(e)),a(e,"menu2",et,i(e)),a(e,"menu3",nt,i(e)),a(e,"menu4",at,i(e)),e._onBack=null,e.MenuID=0,e.gatherStatus=null,e}n(e,t);var r=e.prototype;return r.Show=function(t){this.node.active=!0,g.RequestLoadFarmsStats(this.LE_Label),1==t?this.ShowMenu1():2==t?this.ShowMenu2():3==t?this.ShowMenu3():4==t&&this.ShowMenu4(),b.userLocalData.change_log_version!=S.VERSION&&(b.userLocalData.change_log_version=S.VERSION,b.SaveUserLocalData(),v.Instance.UIPopupChangeLog(null))},r.Hide=function(){this.node.active=!1},r.ShowMenu1=function(){this.MenuID=1,this.menu1.active=!0,this.menu2.active=!1,this.menu3.active=!1,this.menu4.active=!1,this.btnBottomRight.active=!1,this.btnBack.active=!1,this.StaminaNode.active=!1,this.kingKeyNode.active=!1,this._onBack=null},r.OnFarm0Click=function(){this.ShowMenu2()},r.OnPvEClick=function(){var t=this;v.Instance.LoadScene("PVE_Lobby",(function(){t.Hide()}))},r.ShowMenu2=function(){this.MenuID=2,this.menu1.active=!1,this.menu2.active=!0,this.menu3.active=!1,this.menu4.active=!1,this.btnBottomRight.active=!0,this.btnBack.active=!0,this.StaminaNode.active=!1,this.kingKeyNode.active=!1,this._onBack=this.ShowMenu1},r.OnFarmClick=function(){v.Instance.LoadScene("0.Farm",this.Hide.bind(this))},r.OnBarnClick=function(){v.Instance.LoadScene("0.Barn",this.Hide.bind(this))},r.OnGatherClick=function(){this.ShowMenu3()},r.OnShopClick=function(){var t=this;v.Instance.ShowUILEMarket((function(){g.RequestLoadFarmsStats(t.LE_Label)}))},r.ShowMenu3=function(){this.MenuID=3,this.RequestStaminaPrice(!1),this.RequestGatherMapType(),this.RequestKingKey(),this.menu1.active=!1,this.menu2.active=!1,this.menu3.active=!0,this.menu4.active=!1,this.btnBottomRight.active=!0,this.btnBack.active=!0,this.StaminaNode.active=!0,this.kingKeyNode.active=!0,this._onBack=this.ShowMenu2},r.RequestKingKey=function(){var t=this;this.gatherStatus=null,this.kingKey=0;p.GetSKILLBOOK_KINGKEY_INFO(function(e){var n=JSON.parse(e);if(0==n.status){for(var a=n.data.kingKeys,i=0,r=0;r<a.length;r++)"new"==a[r].status&&(i+=a[r].amount);t.kingKey=i,t.kingKeyLabel.string=i.toString()}else v.Instance.ShowToast("Error",d.Instance.GetErrorMessage(n.status),0)}.bind(this),null)},r.RequestGatherMapType=function(){var t=this;this.gatherStatus=null;p.GetMapType(function(e){var n=JSON.parse(e);if(0==n.status){t.gatherStatus=n;var a=t.gatherStatus.data.mapType;null==a?(t.btnGatherNormal.spriteFrame=t.sfGatherNor[0],t.btnGatherPre.spriteFrame=t.sfGatherPre[0]):"normal"==a?(t.btnGatherNormal.spriteFrame=t.sfGatherNor[0],t.btnGatherPre.spriteFrame=t.sfGatherPre[1]):"premium"==a&&(t.btnGatherNormal.spriteFrame=t.sfGatherNor[1],t.btnGatherPre.spriteFrame=t.sfGatherPre[0])}else v.Instance.ShowToast("Error",d.Instance.GetErrorMessage(n.status),0)}.bind(this),null)},r.RequestStaminaPrice=function(t){var e=this;if(t||null==b.userStanimaInfo){p.STAMINA_PRICE(function(t){var n=JSON.parse(t);0==n.status?(b.userStanimaInfo=n.data,e.staminaLabel.string=Math.floor(n.data.currentStamina)+"/"+n.data.maxStaminaUser):v.Instance.ShowToast("Error",d.Instance.GetErrorMessage(n.status),0)}.bind(this),null)}else this.staminaLabel.string=Math.floor(b.userStanimaInfo.currentStamina)+"/"+b.userStanimaInfo.maxStaminaUser},r.onBtnAddStamina=function(){null!=b.userStanimaInfo?v.Instance.ShowUIPopupBuyStamina(function(t,e){b.userStanimaInfo.currentStamina=t,this.staminaLabel.string=t+"/"+b.userStanimaInfo.maxStamina,this.TweenLE(e,!1)}.bind(this)):v.Instance.ShowToast("Error","Can't get Stamina Info.",0)},r.OnNormalGather=function(){if(null!=this.gatherStatus){var t=this.gatherStatus.data.mapType;null==t||"normal"==t?this.enterGather(!1):"premium"==t&&v.Instance.ShowToast("Error",d.Instance.GetErrorMessage(1110),0)}else v.Instance.ShowToast("Error","Can't get Gathering info!",0)},r.OnPremiumGather=function(){var t=this;if(null!=this.gatherStatus){var e=this.gatherStatus.data.mapType;0!=this.kingKey||"premium"==e?null==e?this.uiPopupMaterialWarning.Show1((function(){t.enterGather(!0)})):"normal"==e?v.Instance.ShowToast("Error",d.Instance.GetErrorMessage(1110),0):"premium"==e&&this.enterGather(!0):v.Instance.ShowToast("Error",d.Instance.GetErrorMessage(1109),0)}else v.Instance.ShowToast("Error","Can't get Gathering info!",0)},r.enterGather=function(t){var e=this,n=!1,a=!1,i=function(i){var r=JSON.parse(i);0==r.status?(n=!0,b.curWorldMapData=r.data,a&&(b.IsGatherPremium=t,t?v.Instance.LoadScene("1.Gathering-Premium",e.Hide.bind(e)):v.Instance.LoadScene("1.Gathering",e.Hide.bind(e)))):v.Instance.ShowToast("Error",d.Instance.GetErrorMessage(r.status),0)};t?p.GetWorldMapPre(i,null):p.GetWorldMap(i,null),p.ENTER_GATHER((function(i){var r=JSON.parse(i);0==r.status?(a=!0,b.userGatherData=new f(r.data),n&&(b.IsGatherPremium=t,t?v.Instance.LoadScene("1.Gathering-Premium",e.Hide.bind(e)):v.Instance.LoadScene("1.Gathering",e.Hide.bind(e)))):v.Instance.ShowToast("Error",d.Instance.GetErrorMessage(r.status),0)}),null)},r.ShowMenu4=function(){this.MenuID=4,this.menu1.active=!1,this.menu2.active=!1,this.menu3.active=!1,this.menu4.active=!0,this.btnBottomRight.active=!0,this.btnBack.active=!0,this.StaminaNode.active=!1,this.kingKeyNode.active=!1,this._onBack=this.ShowMenu1},r.OnPvEEnterClick=function(){v.Instance.ShowToast("Info","PVE gamemode is coming soon!",2)},r.OnAltarClick=function(){console.log("OnAltarClick"),v.Instance.ShowUIScreenAltar(this.ShowMenu4.bind(this))},r.OnSetting=function(){v.Instance.ShowSetting()},r.OnAsset=function(){var t=this;v.Instance.ShowUIScreenAssets((function(){g.RequestLoadFarmsStats(t.LE_Label)}))},r.OnSkillBook=function(){var t=this,e=0;this.menu3.active&&(e=1),v.Instance.ShowUIScreenSkillBook((function(){g.RequestLoadFarmsStats(t.LE_Label),t.RequestStaminaPrice(!0)}),e)},r.OnBack=function(){null!=this._onBack&&this._onBack()},e}(m)).prototype,"order",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=e(A.prototype,"LE_Label",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(A.prototype,"staminaLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(A.prototype,"kingKeyLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(A.prototype,"btnBack",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(A.prototype,"StaminaNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(A.prototype,"kingKeyNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(A.prototype,"btnBottomRight",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(A.prototype,"btnGatherNormal",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(A.prototype,"btnGatherPre",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=e(A.prototype,"sfGatherNor",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=e(A.prototype,"sfGatherPre",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=e(A.prototype,"uiPopupMaterialWarning",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=e(A.prototype,"menu1",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=e(A.prototype,"menu2",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=e(A.prototype,"menu3",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=e(A.prototype,"menu4",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=A))||F));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIScreenSkillBook.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./Utility.ts","./SkillItem.ts","./ResourcesManager.ts","./SkillBookInfo.ts","./UIPopupManager.ts"],(function(e){"use strict";var t,i,n,l,r,o,a,s,c,u,p,S,h,f,I,g,k,b,v,B,m,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,a=e._decorator,s=e.CCInteger,c=e.JsonAsset,u=e.Label,p=e.Node,S=e.SpriteFrame,h=e.ScrollView,f=e.TextAsset,I=e.v2,g=e.Component},function(e){k=e.GatheringServicesApi},function(e){b=e.Utility},function(e){v=e.SkillItem},function(e){B=e.ResourcesManager},function(e){m=e.SkillBookInfo},function(e){L=e.UIPopupManager}],execute:function(){var O,_,d,w,y,E,D,T,M,C,K,N,A,R,U,z,J,P,V,G,F,q,j,H,x,X,Y,W,Z,Q,$;o._RF.push({},"c71f2Zn/SxM8rTjGYcUVbwH","UIScreenSkillBook",void 0);var ee=a.ccclass,te=a.property;e("UIScreenSkillBook",(O=ee("UIScreenSkillBook"),_=te(s),d=te(c),w=te(u),y=te(u),E=te(u),D=te(u),T=te(p),M=te(p),C=te(p),K=te(p),N=te(S),A=te(m),R=te(h),U=te(f),O((P=t((J=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"order",P,l(t)),n(t,"config_json",V,l(t)),n(t,"LE_Label",G,l(t)),n(t,"SB0",F,l(t)),n(t,"SB1",q,l(t)),n(t,"SB2",j,l(t)),n(t,"Select",H,l(t)),n(t,"GATHERING",x,l(t)),n(t,"FARM",X,l(t)),n(t,"UNDEAD",Y,l(t)),n(t,"ItemBase",W,l(t)),n(t,"skillBookInfo",Z,l(t)),n(t,"TreeScrollView",Q,l(t)),t.MaterialData=null,t.config=null,t.SkillItemMap=new Map,t.SelectedItem=null,t.onBack=void 0,n(t,"skilltree_tsv",$,l(t)),t}i(t,e);var o=t.prototype;return o.Init=function(){if(null==this.config){this.config=this.config_json.json;for(var e=Object.keys(this.config),t=0,i=this.GATHERING.getComponentsInChildren(v),n=0;n<i.length;n++){var l=e[t];i[n].Init(this,this.config[l],l),this.SkillItemMap.set(l,i[n]),t++}i=this.FARM.getComponentsInChildren(v);for(var r=0;r<i.length;r++){var o=e[t];i[r].Init(this,this.config[o],o),this.SkillItemMap.set(o,i[r]),t++}i=this.UNDEAD.getComponentsInChildren(v);for(var a=0;a<i.length;a++){var s=e[t];i[a].Init(this,this.config[s],s),this.SkillItemMap.set(s,i[a]),t++}}},o.Show=function(e,t){switch(this.Init(),this.onBack=e,this.node.active=!0,this.SelectedItem=null,this.Select.active=!1,this.skillBookInfo.node.active=!1,b.RequestLoadFarmsStats(this.LE_Label),this.RequestSkillBook(),t){case 1:this.TreeScrollView.scrollToTop();break;case 2:this.TreeScrollView.scrollTo(I(0,.422));break;case 3:this.TreeScrollView.scrollToBottom()}this.requestSkillTree()},o.requestSkillTree=function(){var e=this;b.RequestSkillTree((function(t){for(var i,n=r(e.SkillItemMap);!(i=n()).done;){var l=i.value;l[0];l[1].lv=0}for(var o=0;o<t.length;o++)e.SkillItemMap.get(t[o].type).lv=t[o].currentLevel;e.OnRefreshSkillData()}),!0)},o.OnRefreshSkillData=function(){for(var e,t=r(this.SkillItemMap);!(e=t()).done;){var i=e.value;i[0];i[1].UpdateState()}},o.OnSkillItemClick=function(e){this.SelectedItem!=e&&(this.SelectedItem=e,this.Select.active=!0,this.Select.setWorldPosition(e.node.worldPosition),this.skillBookInfo.Show(e,this.MaterialData,this))},o.TweenLE=function(e,t){b.TweenLE(e,t,this.LE_Label)},o.RequestSkillBook=function(){var e=this;k.GetSKILLBOOK_KINGKEY_INFO(function(t){var i=JSON.parse(t);if(0==i.status){for(var n=0,l=0,r=0,o=i.data.skillBooks,a=0;a<o.length;a++)if("used"!=o[a].status){var s=o[a].name;"NOVICE_SKILL_BOOK"==s?n+=o[a].amount:"ADVANCED_SKILL_BOOK"==s?l+=o[a].amount:"EXPERT_SKILL_BOOK"==s&&(r+=o[a].amount)}e.MaterialData={EXPERT_SKILL_BOOK:r,NOVICE_SKILL_BOOK:n,ADVANCED_SKILL_BOOK:l},e.UpdateSkillBookLB()}else L.Instance.ShowToast("Error",B.Instance.GetErrorMessage(i.status),0)}.bind(this),null)},o.UpdateSkillBookLB=function(){this.SB0.string=this.MaterialData.NOVICE_SKILL_BOOK.toString(),this.SB1.string=this.MaterialData.ADVANCED_SKILL_BOOK.toString(),this.SB2.string=this.MaterialData.EXPERT_SKILL_BOOK.toString()},o.OnBtnBackClick=function(){this.node.active=!1,null!=this.onBack&&this.onBack()},o.OnBtnInventoryClick=function(){var e=this;L.Instance.ShowUIScreenAssets((function(){b.RequestLoadFarmsStats(e.LE_Label)}))},o.CsvToJson=function(){for(var e=this.skilltree_tsv.text.split("\n"),t={},i={},n=null,l=1;l<e.length;l++){var r=e[l].split("\t"),o=r[0],a=r[1],s=r[2],c=r[3],u=r[4],p=r[5];a.length>0&&(null!=n&&(t[n]=JSON.parse(JSON.stringify(i))),n=o.replace(/ /g,"_").toUpperCase(),(i={}).name=o,i.tier=a,i.type=s,p.length>1?i.require=JSON.parse(p.replace(/ /g,"_").toUpperCase()):i.require=[],i.cost=[],i.description=[]),i.cost.push(this.JsonParseCost(u)),i.description.push(this.JsonParseDescription(c))}t[n]=JSON.parse(JSON.stringify(i));var S=JSON.stringify(t);console.log(S)},o.JsonParseCost=function(e){for(var t={},i=e.split("*"),n=0;n<i.length;n++){var l=i[n].split(":");t[l[0]]=parseInt(l[1])}return t},o.JsonParseDescription=function(e){for(var t=[],i=e.split("*"),n=0;n<i.length;n++)t.push(i[n]);return t},t}(g)).prototype,"order",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=t(J.prototype,"config_json",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(J.prototype,"LE_Label",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(J.prototype,"SB0",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(J.prototype,"SB1",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(J.prototype,"SB2",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(J.prototype,"Select",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(J.prototype,"GATHERING",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(J.prototype,"FARM",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(J.prototype,"UNDEAD",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(J.prototype,"ItemBase",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=t(J.prototype,"skillBookInfo",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(J.prototype,"TreeScrollView",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(J.prototype,"skilltree_tsv",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=J))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIScreenUndead.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIUndeadItem.ts","./UIUndeadView.ts","./UIFarmOverlay.ts","./UIAddUndead.ts","./UnDeadData.ts","./UIPopupManager.ts","./UIFinishExpeditionPopup.ts","./UIPopupNurtureUndead.ts","./UIPopupUndeadInfo.ts","./UIPopupOpenEgg.ts","./UIExpeditionPopup.ts","./ExpeditionServiceApi.ts","./UIUpgradeBarn.ts"],(function(i){"use strict";var e,n,a,t,r,u,o,d,l,s,p,h,c,U,f,I,g,v,B,y;return{setters:[function(i){e=i.applyDecoratedDescriptor,n=i.inheritsLoose,a=i.initializerDefineProperty,t=i.assertThisInitialized},function(i){r=i.cclegacy,u=i._decorator,o=i.Component},function(i){d=i.UIUndeadItem},function(i){l=i.UIUndeadView},function(i){s=i.UIFarmOverlay},function(i){p=i.UIAddUndead},function(i){h=i.BarnData},function(i){c=i.UIPopupManager},function(i){U=i.UIFinishExpeditionPopup},function(i){f=i.UIPopupNurtureUndead},function(i){I=i.UIPopupUndeadInfo},function(i){g=i.UIPopupOpenEgg},function(i){v=i.UIExpeditionPopup},function(i){B=i.ExpeditionServiceApi},function(i){y=i.UIUpgradeBarn}],execute:function(){var w,b,P,m,O,F,E,S,C,x,V,z,A,k,N,D,T,L,M,R,_,W,j;r._RF.push({},"527a8wjEzBHz49bNa1TWW7T","UIScreenUndead",void 0);var H=u.ccclass,q=u.property;i("UIScreenUndead",(w=H("UIScreenUndead"),b=q(s),P=q(l),m=q(p),O=q(d),F=q(U),E=q(v),S=q(f),C=q(I),x=q(g),V=q(y),w((k=e((A=function(i){function e(){for(var e,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return e=i.call.apply(i,[this].concat(r))||this,a(e,"uiFarmOverlay",k,t(e)),a(e,"uiUndeadView",N,t(e)),a(e,"uiAddUndead",D,t(e)),a(e,"uIBarn",T,t(e)),a(e,"uiFinishExpeditionPopup",L,t(e)),a(e,"uiExpeditionPopup",M,t(e)),a(e,"uiPopupNurtureUndead",R,t(e)),a(e,"uiEUndeadInfo",_,t(e)),a(e,"uiPopupOpenEgg",W,t(e)),a(e,"uiUpgradeBarn",j,t(e)),e.firstCall=!1,e.dataBarnSelect=null,e}n(e,i);var r=e.prototype;return r.onLoad=function(){this.uiUndeadView.node.active=!0,this.uiUndeadView.onInit(this),this.uIBarn.onInit(this),this.uiAddUndead.onInit(this),this.uiEUndeadInfo.onInit(this),this.uiPopupNurtureUndead.onInit(this),this.uiFinishExpeditionPopup.onInit(this),this.uiExpeditionPopup.onInit(this),this.uiUpgradeBarn.onInit(this),this.uiFarmOverlay&&(this.uiFarmOverlay.onInit(this),this.uiFarmOverlay.node.on("onBack:uiFarmOverlay",this.onBackClicked,this),this.uiFarmOverlay.node.on("onUpgradeBarn:uiFarmOverlay",this.onUpgradeBarnClicked,this),this.uiFarmOverlay.node.on("changePage:uiFarmOverlay",this.onChangePageClicked,this))},r.start=function(){},r.showUIAddUndead=function(){this.uIBarn.node.active=!1,this.uiAddUndead.OnShow()},r.showBarnView=function(i){this.uiFarmOverlay.showUpgradeBarn(),this.uiUndeadView.node.active=!1,this.uIBarn.node.active=!0,this.dataBarnSelect=i,this.uIBarn.loadBarnData(i)},r.delayShow=function(i){this.scheduleOnce(this.showExpedition,i)},r.showExpedition=function(){this.firstCall=!0},r.delayRefresh=function(i,e){var n=this;void 0===e&&(e=null),null==e&&(e=this.uIBarn.data.id),this.scheduleOnce((function(){n.refreshCage(e)}),i)},r.refreshCage=function(i){void 0===i&&(i=null),null==i&&(i=this.uIBarn.data.id),B.RequestLoadCage(function(e){for(var n=JSON.parse(e).data,a=0;a<n.length;a++){var t=n[a],r=new h(t);r.id==i&&(this.uiUndeadView.node.active=!1,this.uIBarn.node.active=!0,this.uIBarn.loadBarnData(r))}}.bind(this))},r.setTotalPage=function(i){this.uiFarmOverlay.uiPageNumber.setTotalPage(i)},r.getCurrentPage=function(i){this.uiFarmOverlay.uiPageNumber.setTotalPage(i)},r.onUpgradeBarnClicked=function(){this.uiUpgradeBarn.Show(this.dataBarnSelect)},r.onChangePageClicked=function(i){this.uiUndeadView.loadBarnWithPage(i)},r.onBackClicked=function(){if(null!=this.uiUndeadView&&null!=this.uiAddUndead&&null!=this.uiFarmOverlay){if(this.uiUndeadView.node.active&&c.Instance.ShowUIScreenMain(2),this.uIBarn.node.active&&(this.uIBarn.node.active=!1,this.uiUndeadView.node.active=!0,this.uiUndeadView.refreshView(),this.dataBarnSelect=null),this.uiAddUndead.node.active&&this.uiUpgradeBarn.node.active){var i=this.dataBarnSelect?this.dataBarnSelect.id:"";this.refreshCage(i)}this.uiFarmOverlay&&this.uiFarmOverlay.hideUpgradeBarn()}},e}(o)).prototype,"uiFarmOverlay",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(A.prototype,"uiUndeadView",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(A.prototype,"uiAddUndead",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(A.prototype,"uIBarn",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(A.prototype,"uiFinishExpeditionPopup",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(A.prototype,"uiExpeditionPopup",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(A.prototype,"uiPopupNurtureUndead",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(A.prototype,"uiEUndeadInfo",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(A.prototype,"uiPopupOpenEgg",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(A.prototype,"uiUpgradeBarn",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=A))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIScreenWeather.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FarmingServicesApi.ts","./UserModel.ts","./PopUpBase.ts","./Utility.ts","./ResourcesManager.ts","./UImanager.ts","./UIPopupManager.ts"],(function(e){"use strict";var t,i,a,r,n,o,s,l,u,p,m,c,T,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,s=e.Label,l=e.Sprite},function(e){u=e.FarmingServicesApi},function(e){p=e.UserModel},function(e){m=e.PopUpBase},function(e){c=e.Utility},function(e){T=e.ResourcesManager},function(e){h=e.UImanager},function(e){g=e.UIPopupManager}],execute:function(){var d,b,y,f,U,w,S,D,L,C,A,v,N,x,I,R,z,M,F,W,O,G,P,Z,E,Y,H;n._RF.push({},"cf9f9oqHgxJvoSzOqO4zYVu","UIScreenWeather",void 0);var q=o.ccclass,_=o.property;e("UIScreenWeather",(d=q("UIScreenWeather"),b=_(s),y=_(s),f=_(l),U=_(l),w=_(l),S=_(s),D=_(s),L=_(s),C=_(s),A=_(l),v=_(s),N=_(s),d((R=t((I=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"TitleLable",R,r(t)),a(t,"DesLable",z,r(t)),a(t,"spriteAllowArray",M,r(t)),a(t,"ssColor",F,r(t)),a(t,"ssGrey",W,r(t)),a(t,"TimeRemain",O,r(t)),a(t,"ssLabel",G,r(t)),a(t,"dayLabel",P,r(t)),a(t,"timeLabel",Z,r(t)),a(t,"weather",E,r(t)),a(t,"NextDayLabel",Y,r(t)),a(t,"NextDayLabel1",H,r(t)),t.isShowNextDay=!1,t.updateTimelAtTimmer=void 0,t.isUpdateTimelAt=void 0,t}i(t,e);var n=t.prototype;return n.Show=function(){e.prototype.OnShow.call(this),this.StopUpdateTime(),this.isShowNextDay=!0,this.OnNextDayClick()},n.Init=function(e){var t=this;this.TitleLable.string=e.name.toUpperCase(),this.DesLable.string=e.eventFunction.toUpperCase(),this.ssLabel.string=e.season.toUpperCase();T.Instance.LoadSeason(e.season,(function(e){t.ssColor.spriteFrame=e}));T.Instance.LoadSeason(e.season+"_gray",(function(e){t.ssGrey.spriteFrame=e}));T.Instance.LoadWeather(e.name.toLowerCase(),(function(e){t.weather.spriteFrame=e}));for(var i=function(){if(a<e.allowedPlants.length){t.spriteAllowArray[a].node.active=!0;var i=a;T.Instance.Loadtype(e.allowedPlants[a],(function(e){t.spriteAllowArray[i].spriteFrame=e}))}else t.spriteAllowArray[a].node.active=!1},a=0;a<this.spriteAllowArray.length;a++)i()},n.StopUpdateTime=function(){clearTimeout(this.updateTimelAtTimmer),this.isUpdateTimelAt=!1},n.CorouUpdateTime=function(){var e=this;this.UpdateTimeCurrent(),this.UpdateTimeRemain();this.isUpdateTimelAt=!0,this.updateTimelAtTimmer=setTimeout((function t(){e.UpdateTimeCurrent(),e.UpdateTimeRemain(),e.isUpdateTimelAt&&(e.updateTimelAtTimmer=setTimeout(t,5e3))}),5e3)},n.UpdateTimeCurrent=function(){var e=new Date(c.GetTimeNow()),t=e.getUTCMonth()+1,i=e.getUTCDate();this.dayLabel.string=this.addZeroToTime(i.toString())+"/"+this.addZeroToTime(t.toString())+"/"+e.getUTCFullYear().toString(),this.timeLabel.string=this.addZeroToTime(e.getUTCHours().toString())+" : "+this.addZeroToTime(e.getUTCMinutes().toString())+" (UTC)"},n.addZeroToTime=function(e){return 1==e.length&&(e="0"+e),e},n.UpdateTimeRemain=function(){var e=p.seasonEndTimeNum,t=e-p.seasonStartTimeNum,i=e-c.GetTimeNow();i<=0?(i=0,this.ssGrey.fillRange=1,this.TimeRemain.string="Preparing to start a new season"):(this.ssGrey.fillRange=1-i/t,this.TimeRemain.string=c.ConvertSecondsToTimeSecondSeason(Math.floor(i/1e3)))},n.OnBtnCloseClick=function(){h.Instance.ShowWeather()},n.Hide=function(){this.StopUpdateTime(),e.prototype.OnHide.call(this)},n.OnNextDayClick=function(){if(this.isShowNextDay){this.isShowNextDay=!1,this.NextDayLabel.string="VIEW NEXT DAY",this.NextDayLabel1.string="TODAY";var e=p.SeasonData;this.Init(e),this.CorouUpdateTime()}else this.RequestWeatherNextDay()},n.RequestWeatherNextDay=function(){var e=this;u.RequestWeatherNextDay((function(t){var i=JSON.parse(t);if(0==i.status){e.StopUpdateTime(),e.Init(i.data.tomorrow),e.isShowNextDay=!0,e.NextDayLabel.string="VIEW TODAY",e.NextDayLabel1.string="NEXT DAY",e.ssGrey.fillRange=0,e.TimeRemain.string="--- Next day ---";var a=new Date(i.data.tomorrow.startTime),r=a.getUTCMonth()+1,n=a.getUTCDate(),o="Start at: "+e.addZeroToTime(n.toString())+"/"+e.addZeroToTime(r.toString())+"/"+a.getUTCFullYear().toString();o+=" - "+e.addZeroToTime(a.getUTCHours().toString())+" : "+e.addZeroToTime(a.getUTCMinutes().toString())+" (UTC)",e.dayLabel.string=o,e.timeLabel.string=""}else g.Instance.ShowToast("Error",T.Instance.GetErrorMessage(i.status),0)}),null)},t}(m)).prototype,"TitleLable",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(I.prototype,"DesLable",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(I.prototype,"spriteAllowArray",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=t(I.prototype,"ssColor",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(I.prototype,"ssGrey",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(I.prototype,"TimeRemain",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(I.prototype,"ssLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(I.prototype,"dayLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(I.prototype,"timeLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(I.prototype,"weather",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(I.prototype,"NextDayLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(I.prototype,"NextDayLabel1",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=I))||x));n._RF.pop()}}}));

System.register("chunks:///_virtual/UISelectEgg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ExpeditionServiceApi.ts","./PageNumber.ts","./ResourcesManager.ts","./UIPopupManager.ts","./EggItem.ts"],(function(e){"use strict";var t,i,n,r,g,a,o,s,l,c,u,p,h,b,d,f,m,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){g=e.cclegacy,a=e._decorator,o=e.Node,s=e.Sprite,l=e.Label,c=e.Button,u=e.instantiate,p=e.log,h=e.Component},function(e){b=e.ExpeditionServiceApi},function(e){d=e.PageNumber},function(e){f=e.ResourcesManager},function(e){m=e.UIPopupManager},function(e){E=e.EggItem}],execute:function(){var v,I,S,P,y,N,D,z,U,w,C,M,R,A,L,O,_;g._RF.push({},"d4f4333U31DPYsZLHEudPaE","UISelectEgg",void 0);var F=a.ccclass,x=a.property;e("UISelectEgg",(v=F("UISelectEgg"),I=x(o),S=x(o),P=x(s),y=x(l),N=x(l),D=x(c),z=x(d),v((C=t((w=function(e){function t(){for(var t,i=arguments.length,g=new Array(i),a=0;a<i;a++)g[a]=arguments[a];return t=e.call.apply(e,[this].concat(g))||this,n(t,"contentEgg",C,r(t)),n(t,"prefabEgg",M,r(t)),n(t,"sprEgg",R,r(t)),n(t,"lbItemName",A,r(t)),n(t,"lbDescription",L,r(t)),n(t,"btnOpen",O,r(t)),n(t,"uiPageNumber",_,r(t)),t.eggsData=[],t.eggsItem=[],t.eggSelected=void 0,t}i(t,e);var g=t.prototype;return g.start=function(){this.btnOpen.node.on(c.EventType.CLICK,this.onOpenEgg,this),this.uiPageNumber.node.on("pageNumber:clicked",this.updatePage,this)},g.initListEgg=function(e){if(null!=e){this.eggsData=e;var t=e.length;this.onReset();for(var i=0;i<t;i++){var n=e[i],r=u(this.prefabEgg);r.active=i<16,r.parent=this.contentEgg,r.on("eggItem:select",this.onSelectEgg,this);var g=r.getComponent(E);g&&(g.Init(n),this.eggsItem.push(g))}var a=this.eggsData[0];a&&this.onSelectEgg(a),this.updatePage(0)}},g.onReset=function(){this.lbItemName.string="",this.lbDescription.string="",this.contentEgg.removeAllChildren(),this.sprEgg.spriteFrame=null,this.eggSelected=null,this.btnOpen.node.active=!1},g.onSelectEgg=function(e){e.id;this.updateInfoEgg(e)},g.onOpenEgg=function(){if(null!=this.eggSelected){var e=this.eggSelected.id;m.Instance.ShowUINotifyConfirm("Select Egg","Do you want to place this\nUndead Egg into the Barn?",function(){console.log("select egg: "+e,this.cageId),b.RequestCreateUndeadWithEgg(e,this.cageId,this.onCreateUndeadSuccess.bind(this))}.bind(this),!0,!1,2,!0)}},g.updateInfoEgg=function(e){var t=this;this.eggSelected=e,p("EGG DATA ",e);this.lbItemName.string="".replace(/_/g," "),this.btnOpen.node.active=!0;f.Instance.LoadMaterialSprite("",(function(e){t.sprEgg.node.active=!0,t.sprEgg.sizeMode=s.SizeMode.RAW,t.sprEgg.spriteFrame=e}))},g.updatePage=function(e){this.uiPageNumber.toPage(e);for(var t=this.eggsItem,i=0;i<t.length;i++){var n=t[i];n&&(n.node.active=16*this.uiPageNumber.currentPage<=i&&i<16*(this.uiPageNumber.currentPage+1))}},t}(h)).prototype,"contentEgg",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(w.prototype,"prefabEgg",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(w.prototype,"sprEgg",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(w.prototype,"lbItemName",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(w.prototype,"lbDescription",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(w.prototype,"btnOpen",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(w.prototype,"uiPageNumber",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=w))||U));g._RF.pop()}}}));

System.register("chunks:///_virtual/UISetting.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,o,a,l,c,r,u,s,p,g,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,c=e.Toggle,r=e.Label,u=e.Node,s=e.UIOpacity,p=e.tween,g=e.v3,f=e.Component}],execute:function(){var d,h,b,y,O,S,v,I,w,U,m,z,N,L,H;a._RF.push({},"ed8e9b+Iv9LSp/h2Io1RXv7","UISetting",void 0);var M=l.ccclass,T=l.property;e("UISetting",(d=M("UISetting"),h=T(c),b=T(c),y=T(r),O=T(u),S=T(u),v=T(s),d((U=t((w=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,n(t,"toggleMusic",U,o(t)),n(t,"toggleSound",m,o(t)),n(t,"labelVersion",z,o(t)),n(t,"changeLogIcon",N,o(t)),n(t,"ScaleNode",L,o(t)),n(t,"fadeUIOpacity",H,o(t)),t}i(t,e);var a=t.prototype;return a.start=function(){},a.Show=function(e){this.OnShow(),this.labelVersion.string="V4.0",this.changeLogIcon.active=e},a.OnShow=function(e){void 0===e&&(e=function(){}),this.node.active=!0,null!=this.ScaleNode&&null!=this.fadeUIOpacity&&(this.ScaleNode.setScale(.5,.5,.5),this.fadeUIOpacity.opacity=0,p(this.fadeUIOpacity).to(.2,{opacity:255}).start(),p(this.ScaleNode).to(.3,{scale:g(1,1,1)},{easing:"circOut"}).call((function(){e()})).start())},a.OnHide=function(e,t){var i=this;void 0===e&&(e=function(){}),null!=this.ScaleNode?(p(this.fadeUIOpacity).to(.2,{opacity:0}).start(),p(this.ScaleNode).to(.3,{scale:g(.5,.5,.5)},{easing:"circOut"}).call((function(){i.node.active=!1,e()})).start()):(this.node.active=!1,e())},a.OnClose=function(){this.OnHide()},a.OnToggleMusic=function(){},a.OnToggleSound=function(){},a.OnSave=function(){this.OnHide()},a.OnInfo=function(){this.OnHide()},a.OnBtnBugClick=function(){},t}(f)).prototype,"toggleMusic",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(w.prototype,"toggleSound",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(w.prototype,"labelVersion",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(w.prototype,"changeLogIcon",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(w.prototype,"ScaleNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(w.prototype,"fadeUIOpacity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=w))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/UISetupLandItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./Utility.ts"],(function(e){"use strict";var i,t,r,n,a,l,o,s,u,p,c,d;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Label,s=e.Sprite,u=e.Color,p=e.Component},function(e){c=e.ConfigApi},function(e){d=e.Utility}],execute:function(){var b,g,h,y,f,w,S,m,C,L,z,I,v,V,A,D,R,T,F;a._RF.push({},"e16d38xC0dCEqCa2cZib+Vt","UISetupLandItem",void 0);var U=l.ccclass,P=l.property;e("UISetupLandItem",(b=U("UISetupLandItem"),g=P(o),h=P(o),y=P(o),f=P(o),w=P(o),S=P(s),m=P(s),C=P(s),b((I=i((z=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return i=e.call.apply(e,[this].concat(a))||this,r(i,"rarityLabel",I,n(i)),r(i,"landId",v,n(i)),r(i,"plantCount",V,n(i)),r(i,"motherTreeCount",A,n(i)),r(i,"sizeLabel",D,n(i)),r(i,"landView",R,n(i)),r(i,"SignView",T,n(i)),r(i,"borderSprite",F,n(i)),i.uiPopupChooseLand=void 0,i.data=void 0,i.rarityColors=[new u("#3AA175"),new u("#5580D4"),new u("#BA5959"),new u("#8A38BC"),new u("#EDAF4B")],i}t(i,e);var a=i.prototype;return a.Init=function(e,i){var t=this;this.uiPopupChooseLand=i,this.data=e;var r=e.landRef,n=d.GetLandSize(r.size);this.landId.string="#"+e.landId,this.plantCount.string="0/"+r.capacity.plant,this.motherTreeCount.string="0/"+r.capacity.motherTree,this.rarityLabel.string=this.getRarityString(n,e),this.sizeLabel.string=this.getSizeString(n),this.setRarityColor(n),d.getStaticSpriteFrame("landicon/"+e.seasonType+r.size+"/spriteFrame",(function(e,i){null!=i&&null!=t.landView&&(t.landView.spriteFrame=i)})),e.hp<=0?(this.SignView.grayscale=!0,this.landView.grayscale=!0):(this.SignView.grayscale=!1,this.landView.grayscale=!1)},a.setRarityColor=function(e){var i=this.rarityColors[e];this.rarityLabel.color=i,this.landId.color=i,this.borderSprite.color=i},a.getRarityString=function(e,i){return i.isDefaultLand?"Default":d.RarityToText(e)},a.getSizeString=function(e){return c.LANDSIZE[e]},a.OnClick=function(){this.uiPopupChooseLand.isoFarmManager.AddLand(this.data)},i}(p)).prototype,"rarityLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=i(z.prototype,"landId",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=i(z.prototype,"plantCount",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=i(z.prototype,"motherTreeCount",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(z.prototype,"sizeLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(z.prototype,"landView",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(z.prototype,"SignView",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(z.prototype,"borderSprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=z))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/UISynthesisCraft.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GatheringServicesApi.ts","./Utility.ts","./ResourcesManager.ts","./SoundController.ts","./UIPopupManager.ts","./SlotCraftItem.ts","./SynthesisCraftItem.ts"],(function(t){"use strict";var e,i,a,r,n,s,l,o,u,h,c,f,p,m,d,g,b,C,v,y,I,V,w,S,A,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,l=t.Node,o=t.Button,u=t.ToggleContainer,h=t.Label,c=t.Sprite,f=t.SpriteFrame,p=t.UIOpacity,m=t.Vec3,d=t.tween,g=t.instantiate,b=t.Component,C=t.log},function(t){v=t.GatheringServicesApi},function(t){y=t.Utility},function(t){I=t.ResourcesManager},function(t){V=t.SoundController,w=t.EnumSound},function(t){S=t.UIPopupManager},function(t){A=t.SlotCraftItem},function(t){T=t.SynthesisCraftItem}],execute:function(){var U,R,E,P,z,F,x,M,B,N,L,D,O,k,K,_,q,G,X,Y,H,Q,Z,j,J,W,$,tt,et,it,at,rt,nt,st,lt,ot,ut,ht,ct,ft,pt,mt,dt,gt,bt,Ct,vt,yt,It;n._RF.push({},"083fbcNh6tGI5uItV0kAUwc","UISynthesisCraft",void 0);var Vt=s.ccclass,wt=s.property;t("UISynthesisCraft",(U=Vt("UISynthesisCraft"),R=wt(l),E=wt(l),P=wt(l),z=wt(l),F=wt(l),x=wt(l),M=wt(o),B=wt(o),N=wt(o),L=wt(u),D=wt(l),O=wt(h),k=wt(h),K=wt(h),_=wt(h),q=wt(h),G=wt(c),X=wt(c),Y=wt(l),H=wt(l),Q=wt(f),Z=wt(f),j=wt(A),U(($=e((W=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,a(e,"synthesisView",$,r(e)),a(e,"contentFertilizer",tt,r(e)),a(e,"contentPowder",et,r(e)),a(e,"contentKey",it,r(e)),a(e,"defaultItem",at,r(e)),a(e,"craftView",rt,r(e)),a(e,"btnChangeItem",nt,r(e)),a(e,"btnCraft",st,r(e)),a(e,"btnUndo",lt,r(e)),a(e,"toggleValueSyn",ot,r(e)),a(e,"togAutoSyn",ut,r(e)),a(e,"lbSynthesisName",ht,r(e)),a(e,"lbCurrentValue",ct,r(e)),a(e,"lbMaxValue",ft,r(e)),a(e,"lbRequireValue",pt,r(e)),a(e,"lbValueAdd",mt,r(e)),a(e,"sprProgress",dt,r(e)),a(e,"sprResultCraft",gt,r(e)),a(e,"fxLvUpCraft",bt,r(e)),a(e,"fxCraftItem",Ct,r(e)),a(e,"sprFrameProgressFull",vt,r(e)),a(e,"sprFrameProgress",yt,r(e)),a(e,"slotItemCraft",It,r(e)),e.dataSynthesis=[],e.dataMaterialsValue=[],e.synthesisItem=void 0,e.uiTravelBag=void 0,e.serverName="",e.listItemsCraft=[],e.currentValue=0,e.maxValue=0,e.isCanClick=!1,e.multipleValue=0,e.opacityValueAdd=void 0,e.tweenOpacityValueAdd=void 0,e.tweenMoveValueAdd=void 0,e.tweenShowSynthesisItem=void 0,e.uiScreenCraft=void 0,e}i(e,t);var n=e.prototype;return n.start=function(){var t=this;this.btnChangeItem.node.on(o.EventType.CLICK,this.onChangeItemClicked,this),this.btnCraft.node.on(o.EventType.CLICK,this.onCraftClicked,this),this.btnUndo.node.on(o.EventType.CLICK,this.onUndoItem,this);var e=this.lbValueAdd.getComponent(p);null==e&&(this.lbValueAdd.addComponent(p),e=this.lbValueAdd.getComponent(p)),this.multipleValue=1,this.currentValue=0,this.isCanClick=!0,this.opacityValueAdd=e,this.opacityValueAdd.opacity=0,this.lbValueAdd.node.position=new m(-26,-340,0),this.lbValueAdd.string="";for(var i=this.toggleValueSyn.toggleItems,a=0;a<i.length;a++){var r=i[a];"Toggle1X"==r.node.name&&(r.isChecked=!0),r.node.on("toggle",this.onChangeValueCraft,this)}this.tweenOpacityValueAdd=d(this.opacityValueAdd).to(.3,{opacity:255}).delay(.8).to(.2,{opacity:0}),this.tweenMoveValueAdd=d(this.lbValueAdd.node).to(.5,{position:new m(-26,-325,0)}),this.tweenShowSynthesisItem=d(this.sprResultCraft.node).call((function(){t.sprResultCraft.node.scale=m.ZERO})).delay(.1).to(.2,{scale:new m(1.1,1.1,1.1)}).to(.2,{scale:m.ONE})},n.onInit=function(t){t&&(this.dataSynthesis=t.craftingConfig.synthesisItems,this.dataMaterialsValue=t.craftingConfig.materialsValue,this.uiScreenCraft=t,this.uiTravelBag=t.uiTravelBag,this.synthesisView.active=!0,this.craftView.active=!1,this.fxCraftItem.active=!1,this.fxLvUpCraft.active=!1,this.loadSynthesisItem(),this.resetDataCraft(),y.activeButton(this.btnUndo,this.listItemsCraft.length>0))},n.loadSynthesisItem=function(){var t=this.dataSynthesis;this.contentFertilizer.removeAllChildren(),this.contentKey.removeAllChildren(),this.contentPowder.removeAllChildren();var e=t.filter((function(t){return"fertilizer"==t.type}));this.loadItem(e,this.contentFertilizer);var i=t.filter((function(t){return"powder"==t.type}));this.loadItem(i,this.contentPowder);var a=t.filter((function(t){return"key"==t.type||"chest"==t.type}));this.loadItem(a,this.contentKey)},n.loadItem=function(t,e){var i=t;if(null!=i)for(var a=0;a<i.length;a++){var r=i[a],n=g(this.defaultItem);n.active=!0,n.setParent(e),n.position=new m(n.position.x,0),n.on("synthesisItem:onClicked",this.onSelectSynthesisItem,this);var s=n.getComponent(T);s&&s.onInit(r)}},n.getSynthesisValue=function(t,e){var i="SKILL_BOOK"!=t&&"UNDEAD_EGG"!=t?"MATERIAL":t,a=this.dataMaterialsValue.find((function(t){return t.type==i&&t.rarity.toLocaleUpperCase()==e}));return a?a.value:0},n.updateSynValue=function(t){var e=this;if(!(t<5&&t>=0)){var i=this.currentValue+t,a=this.maxValue*this.multipleValue;y.tweenNumber(this.currentValue,i,.5,(function(t){e.sprProgress.fillRange=t/a,e.lbCurrentValue.string=""+Math.round(t),t>=a&&(V.Instance.PlaySound(w.UI_SFX_Crafting_Lvl_Up),e.sprProgress.spriteFrame=e.sprFrameProgressFull)})),this.currentValue=i,this.lbValueAdd.string=t>=5?"Value + "+t:"Value "+t,this.lbCurrentValue.string=""+this.currentValue,y.activeButton(this.btnCraft,this.currentValue>=a),this.opacityValueAdd.opacity=0,this.lbValueAdd.node.position=new m(-26,-340,0),this.tweenOpacityValueAdd&&this.tweenOpacityValueAdd.stop(),this.tweenMoveValueAdd&&this.tweenMoveValueAdd.stop(),this.tweenMoveValueAdd.start(),this.tweenOpacityValueAdd.start()}},n.resetDataCraft=function(){this.currentValue=0,this.maxValue=0,this.sprProgress.fillRange=0,this.sprProgress.spriteFrame=this.sprFrameProgress,this.lbSynthesisName.string="",this.lbRequireValue.string="REQUIRED VALUE :",this.lbMaxValue.string="0",this.lbCurrentValue.string="0";for(var t=this.listItemsCraft.length,e=0;e<t;e++){var i=this.listItemsCraft[e];if(!i)return;var a=i.id;if(""==a)return;var r=this.uiTravelBag.getItemBag(a);r&&r.TotalItem++}this.listItemsCraft.length=0,this.slotItemCraft.resetSlot(),this.fxCraftItem.active=!1,this.fxLvUpCraft.active=!1,y.activeButton(this.btnUndo,!1),y.activeButton(this.btnCraft,!1),this.craftView.active=!1,this.synthesisView.active=!0},n.onChangeValueCraft=function(t){if(t.isChecked){this.multipleValue="Toggle1X"==t.node.name?1:10;var e=this.maxValue*this.multipleValue;this.lbMaxValue.string="/"+e,this.sprProgress.fillRange=this.currentValue/e,this.sprProgress.spriteFrame=this.currentValue>=e?this.sprFrameProgressFull:this.sprFrameProgress,y.activeButton(this.btnCraft,this.currentValue>=e)}},n.onSelectedItem=function(t){var e=this,i=t.itemID,a=t.itemData,r=a.getItemType(),n=a.getItemRarity();if("FRAGMENT"!=r&&"TOKEN"!=r&&"TREASURE"!=r&&"CHEST_KEY"!=r&&"KEY"!=r&&"FERTILIZER"!=n&&"MYSTERIOUS"!=n){var s=this.getSynthesisValue(r,n);if(this.currentValue>=this.maxValue*this.multipleValue)S.Instance.ShowToast("Notification","Value Is Full",0,!0);else{this.updateSynValue(s);var l=this.uiTravelBag.getItemBag(i);if(l&&!(l.TotalItem<=0)){l.TotalItem=l.TotalItem-1;var o=this.slotItemCraft;o&&(this.fxCraftItem.active=!1,o.loadData(a),o.itemCrafting(),this.scheduleOnce((function(){e.fxCraftItem.active=!0}),.6),this.listItemsCraft.push(a),y.activeButton(this.btnUndo,this.listItemsCraft.length>0))}}}else S.Instance.ShowToast("Notification","Can't craft this item",0,!0)},n.onUndoItem=function(){var t=this;if(this.isCanClick){var e=this.listItemsCraft.pop();if(null==e||this.listItemsCraft.length<0)console.warn("CAN'T FIND ITEM");else{var i=this.uiTravelBag.getItemBag(e.id);if(i){this.isCanClick=!1;var a=i.itemData;this.slotItemCraft.loadData(a),this.slotItemCraft.itemCrafting(),this.scheduleOnce((function(){var i=e.getItemType(),a=e.getItemRarity(),r=-t.getSynthesisValue(i,a);t.updateSynValue(r);var n=t.uiTravelBag.getItemBag(e.id);n&&(n.TotalItem++,t.isCanClick=!0,y.activeButton(t.btnUndo,t.listItemsCraft.length>0))}),1.1)}}}},n.onSelectSynthesisItem=function(t){var e=this,i=t.synthesisData,a=i.value,r=i.name,n=i.spriteName;this.synthesisItem=i;I.Instance.LoadMaterialSynthesisSprite(n,(function(t){null!=t&&null!=e.sprResultCraft&&(e.sprResultCraft.spriteFrame=t)})),this.serverName=i.serverName,this.tweenShowSynthesisItem.start(),this.maxValue=a,this.lbSynthesisName.string=r,this.lbRequireValue.string="REQUIRED VALUE : "+this.maxValue,this.lbMaxValue.string="/"+a*this.multipleValue,this.lbCurrentValue.string="0",this.sprProgress.fillRange=0,this.synthesisView.active=!1,this.craftView.active=!0,this.uiTravelBag.node.active=!0,y.activeButton(this.btnUndo,this.listItemsCraft.length>0)},n.onChangeItemClicked=function(t){this.synthesisView.active=!0,this.craftView.active=!1,this.uiTravelBag.node.active=!1,this.resetDataCraft(),this.synthesisItem=null},n.onCraftClicked=function(){this.requestCraft()},n.requestCraft=function(){for(var t=this,e=[],i=this.listItemsCraft.length,a=function(){var i=t.listItemsCraft[r];if(""==i.id)return"continue";var a=i.name,n=e.findIndex((function(t){return t.name==a}));if(n<0){var s={name:a,amount:1};e.push(s)}else{var l=e[n];l.amount=l.amount+1}},r=0;r<i;r++)a();var n={items:e,target:this.serverName,optionRate:this.multipleValue};v.Crafting_Synthesis(n,function(e){var i=JSON.parse(e);0==i.status?(C("DATA RESPONSE : ",i.data),t.listItemsCraft=[],t.fxLvUpCraft.active=!0,t.scheduleOnce((function(){y.tweenNumber(t.currentValue,0,.5,(function(e){t.sprProgress.fillRange=e/t.maxValue,t.lbCurrentValue.string=""+Math.round(e),e<=0&&(t.sprProgress.spriteFrame=t.sprFrameProgress,t.currentValue=0)})),t.slotItemCraft.resetSlot(),t.fxLvUpCraft.active=!1,t.uiTravelBag.requestLoadMaterials(),y.activeButton(t.btnCraft,!1)}),.6),S.Instance.ShowToast("Notification","Craft Success",1,!0)):S.Instance.ShowToast("Error",I.Instance.GetErrorMessage(i.status),0,!1)}.bind(this),function(t){console.warn("Error",t)}.bind(this),!0)},e}(b)).prototype,"synthesisView",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=e(W.prototype,"contentFertilizer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=e(W.prototype,"contentPowder",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=e(W.prototype,"contentKey",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=e(W.prototype,"defaultItem",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=e(W.prototype,"craftView",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=e(W.prototype,"btnChangeItem",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=e(W.prototype,"btnCraft",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=e(W.prototype,"btnUndo",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=e(W.prototype,"toggleValueSyn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ut=e(W.prototype,"togAutoSyn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=e(W.prototype,"lbSynthesisName",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=e(W.prototype,"lbCurrentValue",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft=e(W.prototype,"lbMaxValue",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=e(W.prototype,"lbRequireValue",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=e(W.prototype,"lbValueAdd",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dt=e(W.prototype,"sprProgress",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=e(W.prototype,"sprResultCraft",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt=e(W.prototype,"fxLvUpCraft",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct=e(W.prototype,"fxCraftItem",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=e(W.prototype,"sprFrameProgressFull",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=e(W.prototype,"sprFrameProgress",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),It=e(W.prototype,"slotItemCraft",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=W))||J));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIThanks.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts"],(function(t){"use strict";var n,o,e,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator},function(t){r=t.PopUpBase}],execute:function(){var s;o._RF.push({},"498f7YMr3ZJjqDYXtDt7tX0","UIThanks",void 0);var c=e.ccclass;e.property,t("UIThanks",c("UIThanks")(s=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.Show=function(){t.prototype.OnShow.call(this)},e.Hide=function(){t.prototype.OnHide.call(this)},o}(r))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIToast.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,o,n,r,s,l,u,a,c,p,h,v,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,l=e.CCInteger,u=e.Label,a=e.Sprite,c=e.SpriteFrame,p=e.Node,h=e.Vec3,v=e.tween,w=e.Component}],execute:function(){var b,f,I,m,d,M,g,T,y,O,x,C,z,B,N,S,D,P,F;r._RF.push({},"50b62ihIp9P+rV9JIo/K0Kp","UIToast",void 0);var U=s.ccclass,_=s.property;e("UIToast",(b=U("UIToast"),f=_(l),I=_(u),m=_(u),d=_(a),M=_(c),g=_(c),T=_(c),y=_(p),b((C=t((x=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,o(t,"order",C,n(t)),o(t,"txtTitle",z,n(t)),o(t,"txtDes",B,n(t)),o(t,"imgIcon",N,n(t)),o(t,"spriteError",S,n(t)),o(t,"spriteInfo",D,n(t)),o(t,"spriteSuccess",P,n(t)),o(t,"BoxNode",F,n(t)),t.autoCloseTimeOut=void 0,t.tweenMoveIn=void 0,t.tweenMoveOut=void 0,t}i(t,e);var r=t.prototype;return r.Show=function(e,t,i,o){var n=this;this.node.active=!0,this.txtDes.string=t,this.txtTitle.string=e,o?this.MoveIn():this.BoxNode.setPosition(new h(0,-46,0)),this.imgIcon.spriteFrame=0==i?this.spriteError:1==i?this.spriteSuccess:this.spriteInfo,clearTimeout(this.autoCloseTimeOut);this.autoCloseTimeOut=setTimeout((function(){n.Close()}),5e3)},r.MoveIn=function(){null!=this.tweenMoveIn&&this.tweenMoveIn.stop(),null!=this.tweenMoveOut&&this.tweenMoveOut.stop(),this.BoxNode.setPosition(new h(1e3,-46,0)),this.tweenMoveIn=v(this.BoxNode).to(.2,{position:new h(0,-46,0)}),this.tweenMoveIn.start()},r.OnBtnCloseClick=function(){clearTimeout(this.autoCloseTimeOut),this.Close()},r.Close=function(){var e=this;null!=this.tweenMoveIn&&this.tweenMoveIn.stop(),null!=this.tweenMoveOut&&this.tweenMoveOut.stop(),this.tweenMoveOut=v(this.BoxNode).to(.2,{position:new h(1e3,-46,0)}).call((function(){e.node.active=!1})),this.tweenMoveOut.start()},r.HideToast=function(){clearTimeout(this.autoCloseTimeOut),null!=this.tweenMoveIn&&this.tweenMoveIn.stop(),null!=this.tweenMoveOut&&this.tweenMoveOut.stop(),this.node.active=!1},t}(w)).prototype,"order",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=t(x.prototype,"txtTitle",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(x.prototype,"txtDes",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(x.prototype,"imgIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(x.prototype,"spriteError",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(x.prototype,"spriteInfo",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(x.prototype,"spriteSuccess",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(x.prototype,"BoxNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=x))||O));r._RF.pop()}}}));

System.register("chunks:///_virtual/UITravelBag.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility.ts","./ConfigApi.ts","./FarmingServicesApi.ts","./InventoryData.ts","./ResourcesManager.ts","./UIPopupManager.ts","./TravelBagItem.ts"],(function(t){"use strict";var e,i,n,r,a,o,s,l,c,u,g,h,m,f,p,d,v,I,b,P,y,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.ToggleContainer,l=t.Node,c=t.Label,u=t.Button,g=t.Toggle,h=t.Color,m=t.Vec3,f=t.instantiate,p=t.Component},function(t){d=t.Utility},function(t){v=t.ConfigApi},function(t){I=t.FarmingServicesApi},function(t){b=t.default},function(t){P=t.ResourcesManager},function(t){y=t.UIPopupManager},function(t){T=t.TravelBagItem}],execute:function(){var w,C,B,S,k,N,M,x,A,L,V,z,D,U,E,F,R;a._RF.push({},"9d4aczc+DFL4r9mxQZPqm6d","UITravelBag",void 0);var q=o.ccclass,G=o.property,_="ToggleAll",Z="ToggleMaterial";t("UITravelBag",(w=q("UITravelBag"),C=G(s),B=G(l),S=G(l),k=G(l),N=G(c),M=G(u),x=G(u),w((V=e((L=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"toggleItems",V,r(e)),n(e,"bagView",z,r(e)),n(e,"contentView",D,r(e)),n(e,"itemBagPrefab",U,r(e)),n(e,"lbNumPage",E,r(e)),n(e,"btnBack",F,r(e)),n(e,"btnNext",R,r(e)),e.currentPage=0,e.totalPage=1,e.bagItems=[],e.materialItems=[],e.miscItems=[],e.currentSortType=Z,e}i(e,t);var a=e.prototype;return a.onInit=function(){this.btnBack.node.on(u.EventType.CLICK,this.onBackClicked,this),this.btnNext.node.on(u.EventType.CLICK,this.onNextClicked,this),this.currentPage=0;for(var t=this.toggleItems.toggleItems,e=0;e<t.length;e++){var i=t[e];i.node.on(g.EventType.TOGGLE,this.onToggleSelected,this),i.node.name==_&&(i.isChecked=!0);var n=i.getComponentInChildren(c);n&&(n.color=i.isChecked?new h(170,110,50,255):new h(170,110,50,150))}this.requestLoadMaterials()},a.getItemBag=function(t){return this.bagItems.find((function(e){return e.ItemID==t}))},a.convertPositionItemToNode=function(t){var e=t.x+this.contentView.position.x+this.bagView.position.x,i=t.y+this.contentView.position.y-50+this.bagView.position.y;return new m(e,i)},a.loadInventory=function(t){if(!(null==t||t.length<=0)){for(var e=t.length,i=0;i<=e;i++){var n=t[i];if(null!=n){var r=P.Instance.GetMaterialData(n.name);if(null!=r){n.materialData=r;var a=f(this.itemBagPrefab);a.setParent(this.contentView),a.active=!0,a.on("bagItem:onClicked",this.onSelectedItem,this);var o=a.getComponent(T);o&&(o.initMaterial(n),this.bagItems.push(o),"1"==n.materialData.isMaterial?this.materialItems.push(o):this.miscItems.push(o))}}}this.sortInventory(this.currentSortType)}},a.RequestLoadApply=function(){},a.sortInventory=function(t){var e=t==Z;this.materialItems.map((function(t){return t.node.active=!1})),this.miscItems.map((function(t){return t.node.active=!1}));var i=this.materialItems.length;if(e)for(var n=0;n<this.materialItems.length;n++){var r=this.materialItems[n];r&&(r.node.active=n<16)}else{i=this.miscItems.length;for(var a=0;a<this.miscItems.length;a++){var o=this.miscItems[a];o&&(o.node.active=a<16)}}this.currentPage=0,this.totalPage=Math.floor(i/16)+1,this.toPage(0)},a.resetBag=function(){this.bagItems.length=0,this.materialItems.length=0,this.miscItems.length=0,this.contentView.removeAllChildren()},a.formatNumber=function(t,e){return void 0===e&&(e=0),t=Number(Math.round(parseFloat(t+"e"+e))+"e-"+e),e>0?t.toFixed(e).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},a.toPage=function(t){this.currentPage=t,this.lbNumPage.string=this.AddZeroToNumber(this.currentPage+1)+" / "+this.AddZeroToNumber(this.totalPage),d.activeButton(this.btnBack,this.currentPage>0),d.activeButton(this.btnNext,this.currentPage+1<this.totalPage);for(var e=this.currentSortType==Z?this.materialItems:this.miscItems,i=0;i<e.length;i++){var n=e[i];n&&(n.node.active=16*this.currentPage<=i&&i<16*(this.currentPage+1))}},a.onToggleSelected=function(t){if(this.currentSortType!=t.node.name){var e=t.getComponentInChildren(c);e&&(e.color=t.isChecked?new h(170,110,50,255):new h(170,110,50,150)),t.isChecked&&(this.currentSortType=t.node.name,this.sortInventory(this.currentSortType))}},a.onSelectedItem=function(t){this.node.emit("itemBag:onClicked",t)},a.onNextClicked=function(){this.currentPage>=this.totalPage&&(this.currentPage=this.totalPage),this.toPage(this.currentPage+1)},a.onBackClicked=function(){this.currentPage<0&&(this.currentPage=0),this.toPage(this.currentPage-1)},a.requestLoadMaterials=function(){var t=this,e={offset:0,limit:v.LIMIT_PAGE};I.RequestLoadMaterials(e,(function(e){var i=JSON.parse(e);if(0==i.status){if(null!=i.data&&null!=i.data.items){var n=new b(i.data);t.resetBag();var r=n.itemData;r=r.filter((function(t){return"Sapling"!=t.getItemType()})),t.loadInventory(r)}}else y.Instance.ShowToast("Error",P.Instance.GetErrorMessage(i.status),0)}),(function(t){}))},a.AddZeroToNumber=function(t){return t<10?"0"+t.toString():t.toString()},e}(p)).prototype,"toggleItems",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(L.prototype,"bagView",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(L.prototype,"contentView",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(L.prototype,"itemBagPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(L.prototype,"lbNumPage",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(L.prototype,"btnBack",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(L.prototype,"btnNext",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=L))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/UITutorial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserModel.ts","./TutorialSkillLevel.ts","./PopUpBase.ts","./ResourcesManager.ts"],(function(e){"use strict";var t,l,i,n,r,a,o,s,u,g,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,o=e.Node,s=e.TextAsset},function(e){u=e.UserModel},function(e){g=e.TutorialSkillLevel},function(e){c=e.PopUpBase},function(e){h=e.ResourcesManager}],execute:function(){var p,v,f,I,G,d,y,S,C;r._RF.push({},"8bd8e+s+q9ITqYnIzk7YQRI","UITutorial",void 0);var k=a.ccclass,L=a.property;e("UITutorial",(p=k("UITutorial"),v=L(o),f=L(s),I=L(o),p((y=t((d=function(e){function t(){for(var t,l=arguments.length,r=new Array(l),a=0;a<l;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"toggle",y,n(t)),i(t,"config",S,n(t)),i(t,"tutorialSkillLevelParent",C,n(t)),t.tutorialSkilllevel=[],t.typeCurrent=0,t}l(t,e);var r=t.prototype;return r.Show=function(t){if(e.prototype.OnShow.call(this),1==t||2==t||3==t){if(0==this.tutorialSkilllevel.length)for(var l=this.tutorialSkillLevelParent.getComponentsInChildren(g),i=0;i<l.length;i++)this.tutorialSkilllevel.push(l[i]);var n,r=0,a=0,o="",s=0;1==t?(r=u.userGatherData.CHOPPING_level.level,a=u.userGatherData.CHOPPING_level.exp,o="Foraging",n=h.Instance.GatheringLevelConfig.json.data.chopping,s=h.Instance.GatheringLevelConfig.json.data.chopping.length):2==t?(r=u.userGatherData.FISHING_level.level,a=u.userGatherData.FISHING_level.exp,o="Fishing",n=h.Instance.GatheringLevelConfig.json.data.fishing,s=h.Instance.GatheringLevelConfig.json.data.fishing.length):3==t&&(r=u.userGatherData.MINING_level.level,a=u.userGatherData.MINING_level.exp,o="Mining",n=h.Instance.GatheringLevelConfig.json.data.mining,s=h.Instance.GatheringLevelConfig.json.data.mining.length);for(var c=this.config.text.split("\n"),p=0;p<this.tutorialSkilllevel.length;p++)p+2<s?this.tutorialSkilllevel[p].Init(p+1,r,a,o,c[p],n[p+2].exp,c[p+8]):this.tutorialSkilllevel[p].Init(p+1,r,a,o,c[p],"MAX",c[p+8])}},r.OnToggle=function(e){var t=parseInt(e.name);if(t!=this.typeCurrent){this.typeCurrent=t;for(var l=0;l<this.toggle.length;l++)this.toggle[l].active=t==l}},r.OnBtnCloseClick=function(){e.prototype.OnHide.call(this)},t}(c)).prototype,"toggle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=t(d.prototype,"config",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(d.prototype,"tutorialSkillLevelParent",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=d))||G));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIUndeadAnim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConvertJsonObject2.ts","./ResourcesManager.ts"],(function(e){"use strict";var n,t,i,a,s,o,d,l,r,p,c,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,d=e.Button,l=e.sp,r=e.randomRangeInt,p=e.Component},function(e){c=e.convertToString},function(e){u=e.ResourcesManager}],execute:function(){var m,h,U,f,A,y,v;e("UndeadAnimName",void 0),s._RF.push({},"b0cfevLRYpO7r0AHFzzPA2/","UIUndeadAnim",void 0);var I,b=o.ccclass,D=o.property;!function(e){e.Idle="Idle",e.Sleep="Sleep",e.Fall_Asleep="Fall_Asleep",e.Tired="Tired",e.Move="Move",e.Wake_Up="Wake_Up",e.Happy="Happy"}(I||(I=e("UndeadAnimName",{})));e("UIUndeadAnim",(m=b("UIUndeadAnim"),h=D(d),U=D(l.Skeleton),m((y=n((A=function(e){function n(){for(var n,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return n=e.call.apply(e,[this].concat(s))||this,i(n,"btnSelect",y,a(n)),i(n,"spineUndead",v,a(n)),n.readyTimeOut=void 0,n.undeadData=void 0,n.undeadID="",n.barnID="",n}t(n,e);var s=n.prototype;return s.onInit=function(e,n){this.barnID=c(e),this.loadData(n)},s.loadData=function(e){var n=this;if(null!=e){this.undeadData=e,this.undeadID=c(e.id);e.code;this.btnSelect.node.on(d.EventType.CLICK,this.onSelectUndead,this),this.spineUndead.node.active=!1,u.Instance.LoadUndeadSpine(e.code,e.stage,(function(e,t){e&&console.error(e),null!=t&&(n.spineUndead.node.active=!0,n.spineUndead.skeletonData=t,n.spineUndead.setAnimation(0,I.Idle,!0),n.spineUndead.setBonesToSetupPose(),n.spineUndead.setCompleteListener(n.animCompleted.bind(n)))}))}else console.warn("undead data null")},s.resetData=function(){this.undeadID="",this.undeadData=null},s.onDestroy=function(){null!=this.readyTimeOut&&clearTimeout(this.readyTimeOut)},s.setAnim=function(e,n){this.spineUndead.setAnimation(0,e,n)},s.animCompleted=function(e){switch(e.animation.name){case I.Fall_Asleep:this.setAnim(I.Sleep,!0);break;case I.Happy:case I.Wake_Up:this.setAnim(I.Idle,!0),this.refreshAnim()}},s.refreshAnim=function(){null!=this.readyTimeOut&&clearTimeout(this.readyTimeOut),this.readyTimeOut=setTimeout(this.gotoSleep.bind(this),r(25e3,35e3))},s.gotoSleep=function(){this.spineUndead.setAnimation(0,I.Fall_Asleep,!1)},s.onSelectUndead=function(){if(1==this.spineUndead.node.active){var e=this.spineUndead.animation;e==I.Idle?this.setAnim(I.Happy,!1):e!=I.Sleep&&e!=I.Fall_Asleep||this.setAnim(I.Wake_Up,!1)}},n}(p)).prototype,"btnSelect",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=n(A.prototype,"spineUndead",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=A))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIUndeadItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesManager.ts","./Utility.ts","./ExpeditionHelper.ts","./UserModel.ts","./ExpeditionServiceApi.ts","./UIPopupManager.ts","./UIExpeditionFood.ts","./ConvertJsonObject2.ts"],(function(e){"use strict";var t,i,n,a,o,r,s,l,d,u,h,c,p,g,f,b,v,m,S,w,E,y,C,U,I,B,T,F,L,A,O,N,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.SpriteFrame,l=e.Sprite,d=e.Node,u=e.sp,h=e.Label,c=e.UITransform,p=e.Widget,g=e.Button,f=e.UIOpacity,b=e.Material,v=e.tween,m=e.Vec3,S=e.Tween,w=e.math,E=e.Color,y=e.randomRangeInt,C=e.instantiate,U=e.ParticleSystem,I=e.Component},function(e){B=e.ResourcesManager},function(e){T=e.Utility},function(e){F=e.ExpeditionHelper},function(e){L=e.UserModel},function(e){A=e.ExpeditionServiceApi},function(e){O=e.UIPopupManager},function(e){N=e.UIExpeditionFood},function(e){k=e.convertToUnstableNumber}],execute:function(){var P,x,D,z,R,M,H,G,_,W,K,V,q,Y,X,j,J,Z,Q,$,ee,te,ie,ne,ae,oe,re,se,le,de,ue,he,ce,pe,ge,fe,be,ve,me,Se,we,Ee,ye,Ce,Ue,Ie,Be,Te,Fe,Le,Ae,Oe,Ne,ke,Pe,xe,De,ze,Re,Me,He,Ge,_e,We,Ke,Ve,qe,Ye,Xe,je,Je,Ze,Qe,$e,et,tt,it,nt,at,ot,rt,st,lt,dt,ut,ht,ct,pt,gt,ft,bt,vt,mt,St,wt,Et,yt,Ct,Ut,It,Bt;e({ExpeditionBG:void 0,ExpeditionCageState:void 0,UndeadAnimName:void 0,UndeadStatus:void 0}),o._RF.push({},"2c4d8cRPl5I3qYTDcFOSi4U","UIUndeadItem",void 0);var Tt,Ft,Lt,At,Ot=r.ccclass,Nt=r.property;!function(e){e[e.EXPIRED=-1]="EXPIRED",e[e.TIRED=0]="TIRED",e[e.READY=1]="READY",e[e.IN_EXPEDITION=2]="IN_EXPEDITION",e[e.DELETED=3]="DELETED",e[e.ON_SALE=4]="ON_SALE",e[e.BURN=5]="BURN",e[e.UNASSIGNED=6]="UNASSIGNED"}(Tt||(Tt=e("UndeadStatus",{}))),function(e){e[e.Empty=0]="Empty",e[e.Ready=1]="Ready",e[e.OnExpedition=2]="OnExpedition",e[e.OnCompleteExpedition=3]="OnCompleteExpedition",e[e.OnTired=4]="OnTired",e[e.OnDead=5]="OnDead",e[e.HasEgg=6]="HasEgg",e[e.OnSale=10]="OnSale"}(Ft||(Ft=e("ExpeditionCageState",{}))),function(e){e[e.Empty=0]="Empty",e[e.Normal=1]="Normal",e[e.Feeding=2]="Feeding"}(Lt||(Lt=e("ExpeditionBG",{}))),function(e){e.Idle="Idle",e.Sleep="Sleep",e.Fall_Asleep="Fall_Asleep",e.Tired="Tired",e.Move="Move",e.Wake_Up="Wake_Up",e.Happy="Happy"}(At||(At=e("UndeadAnimName",{})));var kt=["Crustacean","Fish","Fauna","Insect","Fruit"];e("UIUndeadItem",(P=Ot("UIUndeadItem"),x=Nt(N),D=Nt([s]),z=Nt([s]),R=Nt(l),M=Nt(l),H=Nt(l),G=Nt(d),_=Nt(l),W=Nt(d),K=Nt(u.Skeleton),V=Nt(d),q=Nt(l),Y=Nt(l),X=Nt(h),j=Nt(h),J=Nt(d),Z=Nt(l),Q=Nt(s),$=Nt(s),ee=Nt(h),te=Nt(c),ie=Nt(c),ne=Nt(p),ae=Nt(d),oe=Nt(h),re=Nt(h),se=Nt(h),le=Nt(h),de=Nt(g),ue=Nt(g),he=Nt(g),ce=Nt(g),pe=Nt(g),ge=Nt(g),fe=Nt(g),be=Nt(g),ve=Nt(g),me=Nt(g),Se=Nt(g),we=Nt(g),Ee=Nt(d),ye=Nt(u.Skeleton),Ce=Nt(f),Ue=Nt(h),Ie=Nt(f),Be=Nt(f),Te=Nt([d]),Fe=Nt(d),Le=Nt(b),P((Ne=t((Oe=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).undeadPosY={oxxfome:0,nasherr:-50,slugma:0,valefang:0,slithum:0,tbluyr:-30,torramn:0,tyrannux:-10,emprezza:-10},n(t,"uiFood",Ne,a(t)),n(t,"spriteSeasonBgs",ke,a(t)),n(t,"spriteStatusBgs",Pe,a(t)),n(t,"spriteBgSeason",xe,a(t)),n(t,"spriteStatus",De,a(t)),n(t,"spriteBgNotify",ze,a(t)),n(t,"spriteBgShadow",Re,a(t)),n(t,"spriteUndead",Me,a(t)),n(t,"spriteUndeadShadow",He,a(t)),n(t,"undeadSpine",Ge,a(t)),n(t,"affectionLevel",_e,a(t)),n(t,"spriteLvMax",We,a(t)),n(t,"spriteLvProgress",Ke,a(t)),n(t,"lbLvUndead",Ve,a(t)),n(t,"lbExpUndead",qe,a(t)),n(t,"fatigueGroup",Ye,a(t)),n(t,"fatigueProgress",Xe,a(t)),n(t,"fatigueProgressReady",je,a(t)),n(t,"fatigueProgresstired",Je,a(t)),n(t,"lbFatiguePercent",Ze,a(t)),n(t,"fatigueTiredMask",Qe,a(t)),n(t,"fatigueParentMask",$e,a(t)),n(t,"fatigueMaskWidget",et,a(t)),n(t,"grpTimer",tt,a(t)),n(t,"lbTimer",it,a(t)),n(t,"lbTimeLeftLvUp",nt,a(t)),n(t,"lbLvBarn",at,a(t)),n(t,"lbStatus",ot,a(t)),n(t,"btnFeed",rt,a(t)),n(t,"btnNurture",st,a(t)),n(t,"btnDepart",lt,a(t)),n(t,"btnView",dt,a(t)),n(t,"btnRecall",ut,a(t)),n(t,"btnInfo",ht,a(t)),n(t,"btnOpenEgg",ct,a(t)),n(t,"btnBackToInventory",pt,a(t)),n(t,"btnAddUndead",gt,a(t)),n(t,"btnSelectUndead",ft,a(t)),n(t,"btnClaim",bt,a(t)),n(t,"btnCleanBarn",vt,a(t)),n(t,"effectCleanBarn",mt,a(t)),n(t,"spineBroomClean",St,a(t)),n(t,"spriteCleanBarn",wt,a(t)),n(t,"lbNotify",Et,a(t)),n(t,"spriteEggBag",yt,a(t)),n(t,"spriteEggNotify",Ct,a(t)),t.data=void 0,t.id=void 0,t.haveAnim=!1,t.cacheAnimObjectActive=void 0,t.readyTimeOut=void 0,t.currentState=Ft.Empty,t.manager=void 0,t.tweenCleanBarn=void 0,t.tweenHideBGCleanBarn=void 0,t.tweenShowEggTitle=void 0,t.tweenShowScaleEggTitle=void 0,t.tweenShowEggBag=void 0,t.tweenShowScaleEggBag=void 0,t.tweenShowFoodUI=void 0,t.tweenHideFoodUI=void 0,n(t,"feedEff",Ut,a(t)),n(t,"feedEffCom",It,a(t)),n(t,"feedComMaterial",Bt,a(t)),t}i(t,e);var o=t.prototype;return o.onInit=function(e){var t=this;this.resetView(),this.manager=e,this.uiFood.onInit(),this.btnSelectUndead.node.on(g.EventType.CLICK,this.onSelectUndead,this),this.btnFeed.node.on(g.EventType.CLICK,this.onFeedClicked,this),this.btnNurture.node.on(g.EventType.CLICK,this.onNurtureClicked,this),this.btnDepart.node.on(g.EventType.CLICK,this.onDepartClicked,this),this.btnView.node.on(g.EventType.CLICK,this.onViewClicked,this),this.btnRecall.node.on(g.EventType.CLICK,this.onRecallClicked,this),this.btnInfo.node.on(g.EventType.CLICK,this.onInfoClicked,this),this.btnOpenEgg.node.on(g.EventType.CLICK,this.onOpenEggClicked,this),this.btnAddUndead.node.on(g.EventType.CLICK,this.onAddUndeadClicked,this),this.btnCleanBarn.node.on(g.EventType.CLICK,this.onCleanBarn,this),this.btnBackToInventory.node.on(g.EventType.CLICK,this.onBackToInventoryClicked,this),this.btnClaim.node.on(g.EventType.CLICK,this.onClaimClicked,this),this.uiFood.node.on("uiFood:onClose",this.onHideUIFoodClicked,this),this.schedule(this.updateSec,15),this.undeadSpine.setCompleteListener(this.animCompleted.bind(this)),this.tweenHideBGCleanBarn=v(this.spriteCleanBarn).delay(.5).to(.5,{opacity:0}),this.tweenCleanBarn=v(this.spineBroomClean.node).delay(.5).call((function(){t.effectCleanBarn.active=!0})).delay(.5).call((function(){t.spineBroomClean.node.active=!1,t.spineBroomClean.animation=""})).delay(.5).call((function(){t.spriteCleanBarn.node.active=!1,t.spriteCleanBarn.opacity=255,t.effectCleanBarn.active=!1,t.btnCleanBarn.node.active=!1,t.lbNotify.node.active=!1})),this.tweenShowEggTitle=v(this.spriteEggNotify).delay(.2).to(.3,{opacity:255}),this.tweenShowScaleEggTitle=v(this.spriteEggNotify.node).delay(.2).to(.5,{scale:new m(1,1,1)}).to(.2,{angle:10}).to(.2,{angle:-5}).to(.1,{angle:0}),this.tweenShowEggBag=v(this.spriteEggBag).to(.3,{opacity:255}),this.tweenShowScaleEggBag=v(this.spriteEggBag.node).to(.5,{scale:new m(1.1,1.1,1)}).to(.5,{scale:m.ONE}),this.tweenShowFoodUI=v(this.node).to(.25,{position:new m(330,0)}).delay(.05).call((function(){t.uiFood.OnShow((function(){t.requestLoadUndeadFood()}))})),this.tweenHideFoodUI=v(this.node).to(.2,{position:m.ZERO})},o.loadBarnData=function(e){var t=this;if(this.data=e,e){var i=e.undead;if(!i)return this.currentState=Ft.Empty,this.activeWithState(),void this.disableUndeadView();var n=i.status,a=F.GetTotalLifeTimeLeft(i)<=0;if(n==Tt.UNASSIGNED)this.currentState=Ft.Empty;else if(n==Tt.ON_SALE)this.currentState=Ft.OnSale;else if(a)this.currentState=Ft.OnDead;else switch(n){case Tt.TIRED:this.currentState=Ft.OnTired;break;case Tt.READY:this.currentState=Ft.Ready;break;case Tt.IN_EXPEDITION:this.currentState=Ft.OnExpedition;break;case Tt.EXPIRED:case Tt.DELETED:case Tt.BURN:case Tt.UNASSIGNED:this.currentState=Ft.OnDead;break;case Tt.ON_SALE:this.currentState=Ft.OnSale}if(this.updateFatigue(i),this.updateAffectionLv(i),!a&&i.status>=0&&this.currentState!=Ft.Empty){var o=i.code.toLowerCase();this.haveAnim=!0,this.undeadSpine.node.active=!0,this.spriteUndeadShadow.active=!0;var r=0;null==this.undeadPosY[o]?console.error("undead",o,"not config y position"):r=this.undeadPosY[o],this.undeadSpine.node.setPosition(0,r,0),this.spriteUndeadShadow.setPosition(0,r-10,0),S.stopAllByTarget(this.spriteUndeadShadow);var s=new m(.95,.95,1),l=new m(1,1,1);v(this.spriteUndeadShadow).to(.5,{scale:s}).delay(.05).to(.5,{scale:l}).union().repeatForever().start(),B.Instance.LoadUndeadSpine(o,i.stage,(function(e,i){e&&console.error(e),null!=i&&(t.undeadSpine.skeletonData=i,t.undeadSpine.animation="Idle",t.undeadSpine.setBonesToSetupPose(),t.undeadAnimWithStatus())}));var d=i.getMaxExp();this.spriteBgSeason.fillRange=i.getExp()/d,this.lbLvUndead.string=i.getLevel();var u=!(i.stage<=1)||i.affectionLevel>=i.maxAffectionLevel;this.spriteLvMax.node.active=u,this.lbExpUndead.string=i.getExp()+"/"+d,1==i.stage&&i.affectionExp>=d?this.countdownLevelUp(e):this.lbTimeLeftLvUp.node.active=!1}else this.disableUndeadView();this.activeWithState(),this.updateSec()}},o.undeadAnimWithStatus=function(){switch(this.currentState){case Ft.Ready:this.setAnim(At.Idle,!0);break;case Ft.OnTired:this.setAnim(At.Tired,!0);break;case Ft.OnExpedition:case Ft.OnCompleteExpedition:this.setAnim(At.Move,!0)}},o.disableUndeadView=function(){this.haveAnim=!1,this.spriteUndeadShadow.active=!1,this.undeadSpine.node.active=!1,this.fatigueGroup.active=!1,this.affectionLevel.active=!1,this.lbLvUndead.string="",this.lbExpUndead.string=""},o.activeWithState=function(){switch(this.resetView(),this.getBackgroundSeason(),this.getBarnLevel(),console.log("activeWithState",this.currentState),this.spriteStatus.node.active=!0,this.currentState){case Ft.Empty:this.lbStatus.string="EMPTY",this.spriteStatus.spriteFrame=this.spriteStatusBgs[0],this.btnAddUndead.node.active=!0,this.updateFatigue(null),this.updateAffectionLv(null);break;case Ft.OnSale:this.lbStatus.string="ON SALE",this.spriteStatus.spriteFrame=this.spriteStatusBgs[0],this.btnInfo.node.active=!0;break;case Ft.Ready:this.lbStatus.string="READY",this.fatigueGroup.active=!0,this.spriteStatus.spriteFrame=this.spriteStatusBgs[1],this.btnInfo.node.active=!0,this.btnFeed.node.active=!0,this.btnNurture.node.active=!0,this.btnDepart.node.active=!0,this.btnBackToInventory.node.active=!0,this.scheduleOnce(function(){this.setAnim(At.Idle,!0),this.undeadSpine.node.updateWorldTransform()}.bind(this),1);break;case Ft.OnTired:this.lbStatus.string="TIRED",this.fatigueGroup.active=!0,this.spriteStatus.spriteFrame=this.spriteStatusBgs[2],this.btnFeed.node.active=!0,this.btnNurture.node.active=!0,this.grpTimer.active=!1,this.setAnim(At.Idle,!0);break;case Ft.OnExpedition:this.lbStatus.string="ON EXPEDITION",this.fatigueGroup.active=!0,this.spriteStatus.spriteFrame=this.spriteStatusBgs[3],this.btnInfo.node.active=!0,this.btnView.node.active=!0,this.btnRecall.node.active=!0,this.btnNurture.node.active=!1,this.grpTimer.active=!0;break;case Ft.OnDead:this.spriteStatus.node.active=!1,this.btnCleanBarn.node.active=!0,this.spriteCleanBarn.node.active=!0,this.spriteBgNotify.node.active=!0,this.lbNotify.node.active=!0,this.lbNotify.string="YOUR UNDEAD HAS ENDED ITS LIFE CIRCLE";break;case Ft.OnCompleteExpedition:this.lbStatus.string="FINISH!",this.fatigueGroup.active=!0,this.spriteStatus.spriteFrame=this.spriteStatusBgs[3],this.spriteBgNotify.node.active=!0,this.spriteBgShadow.active=!0,this.lbNotify.node.active=!0,this.lbNotify.string="EXPEDITION TRIP COMPLETE",this.btnClaim.node.active=!0;break;case Ft.HasEgg:this.fatigueGroup.active=!1,this.lbFatiguePercent.string="",this.spriteStatus.spriteFrame=null,this.btnOpenEgg.node.active=!0}},o.initCache=function(){null==this.cacheAnimObjectActive&&(this.cacheAnimObjectActive=[])},o.resetView=function(){this.btnDepart.node.active=!1,this.btnFeed.node.active=!1,this.btnNurture.node.active=!1,this.btnView.node.active=!1,this.btnRecall.node.active=!1,this.btnInfo.node.active=!1,this.btnOpenEgg.node.active=!1,this.btnBackToInventory.node.active=!1,this.btnAddUndead.node.active=!1,this.spriteBgShadow.active=!1,this.spriteStatus.spriteFrame=null,this.lbStatus.string="",this.spriteBgNotify.node.active=!1,this.lbNotify.string="",this.spineBroomClean.node.active=!1,this.effectCleanBarn.active=!1,this.spriteEggBag.node.active=!0,this.spriteEggNotify.node.active=!0,this.grpTimer.active=!1,this.lbTimer.string="",this.btnCleanBarn.node.active=!1,this.effectCleanBarn.active=!1,this.spriteCleanBarn.node.active=!1,this.btnClaim.node.active=!1,this.lbFatiguePercent.string="",this.fatigueParentMask.node.active=!1,this.uiFood.node.active=!1},o.getBackgroundSeason=function(){var e=0;if(this.data){var t=this.data.undead;if(!t)return;for(var i=L.getUndeadSeasonBg(t.tokenId),n=0;n<this.spriteSeasonBgs.length;n++)if(i==this.spriteSeasonBgs[n].name){e=n;break}}this.spriteBgSeason.spriteFrame=this.spriteSeasonBgs[e]},o.getBarnLevel=function(){if(this.data){var e=k(this.data.tier);this.lbLvBarn.string="Lv."+e}},o.countdownLevelUp=function(e){if(e.affectionExp>=1e3)for(var t=e.affectionLevel,i=0;i<e.timeToUpLv.length;i++)if(e.timeToUpLv[i].level===t+1){var n=Date.parse(e.timeToUpLv[i].date),a=T.GetTimeNow(),o=Math.floor((n-a)/1e3);return this.lbTimeLeftLvUp.string=T.ConvertSecondsToTime(o)+" left",o}return 999},o.updateSec=function(){if(this.currentState!=Ft.OnDead&&this.currentState!=Ft.Empty&&null!=this.data&&null!=this.data.undead){var e=this.data.undead;if(this.updateFatigue(e),e.status==Ft.OnExpedition){var t=e.current_expedition,i=F.GetTotalSecTimeLeft(t);i+=60,this.lbTimer.string=T.ConvertSecondsToTime(i),i<=0&&(this.currentState=Ft.OnCompleteExpedition,this.activeWithState())}}},o.updateFatigue=function(e){if(null==e||e.status<0||this.currentState==Ft.OnDead)return this.fatigueGroup.active=!1,this.fatigueProgress.fillRange=0,this.lbFatiguePercent.string="",void(this.fatigueProgress.spriteFrame=this.fatigueProgresstired);this.fatigueGroup.active=!0;var t=F.GetCurUndeadFatigue(e),i=e.maxFatigue&&e.maxFatigue>0?t/e.maxFatigue:0;if(this.fatigueProgress.spriteFrame=i>=.5?this.fatigueProgressReady:this.fatigueProgresstired,this.fatigueProgress.fillRange=i,this.lbFatiguePercent.string=parseInt((100*i).toString())+"%",e.status!=Ft.OnExpedition&&(this.btnNurture.node.active=t<e.maxFatigue,i<.5)){this.fatigueParentMask.node.active=!0;var n=this.fatigueTiredMask.contentSize.clone();n.height=w.absMax(this.fatigueParentMask.height*i,20),this.fatigueTiredMask.setContentSize(n),this.fatigueMaskWidget.updateAlignment()}},o.updateAffectionLv=function(e){if(null==e||e.status<0||this.currentState==Ft.OnDead)return this.affectionLevel.active=!1,this.spriteLvMax.node.active=!1,this.spriteLvProgress.fillRange=0,this.lbLvUndead.string="",void(this.lbExpUndead.string="");var t=e.getMaxExp(),i=e.getExp();this.affectionLevel.active=!0;var n=e.affectionLevel>=e.maxAffectionLevel;this.spriteLvProgress.fillRange=i/t,this.spriteLvMax.node.active=n,this.lbLvUndead.string=e.getLevel(),this.lbLvUndead.color=n?new E("#FFFF7A"):E.WHITE,this.lbExpUndead.string=e.getExp()+"/"+t},o.updateCageAfterClean=function(e){var t=this;this.spineBroomClean.node.active=!0,this.spineBroomClean.animation="animation2",this.scheduleOnce((function(){t.currentState=Ft.Empty,t.activeWithState()}),1.5),this.tweenHideBGCleanBarn&&this.tweenHideBGCleanBarn.stop(),this.tweenHideBGCleanBarn.start(),this.tweenCleanBarn&&this.tweenCleanBarn.stop(),this.tweenCleanBarn.start()},o.showHasEgg=function(){var e=this;this.spriteEggBag.node.active=!0,this.spriteEggBag.opacity=0,this.spriteEggBag.node.scale=new m(.7,.7,1),this.spriteEggNotify.node.active=!0,this.spriteEggNotify.opacity=0,this.spriteEggNotify.node.scale=new m(.5,.5,1),this.tweenShowEggTitle&&this.tweenShowEggTitle.stop(),this.tweenShowScaleEggTitle&&this.tweenShowScaleEggTitle.stop(),this.tweenShowEggBag&&this.tweenShowEggBag.stop(),this.tweenShowScaleEggBag&&this.tweenShowScaleEggBag.stop(),this.tweenShowEggTitle.start(),this.tweenShowScaleEggTitle.start(),this.tweenShowEggBag.start(),this.tweenShowScaleEggBag.start(),this.scheduleOnce((function(){e.currentState=Ft.HasEgg,e.activeWithState(),e.btnOpenEgg.node.active=!0}),1.25)},o.onDestroy=function(){null!=this.readyTimeOut&&clearTimeout(this.readyTimeOut)},o.requestLoadUndeadFood=function(){A.RequestLoadUndeadFood(this.initUndeadFood.bind(this))},o.requestDeleteUndead=function(){A.RequestUnAssignUndead(this.data.id,function(e){var t=F.CheckStatus(e);null!=t&&this.updateCageAfterClean(t)}.bind(this))},o.onClaimClicked=function(){this.manager.uiFinishExpeditionPopup.Show(this.data.undead)},o.onHideUIFoodClicked=function(){var e=this;this.uiFood.OnHide((function(){e.tweenShowFoodUI&&e.tweenShowFoodUI.stop(),e.tweenHideFoodUI&&e.tweenHideFoodUI.stop(),e.tweenHideFoodUI.start()}))},o.onFeedClicked=function(){this.tweenShowFoodUI&&this.tweenShowFoodUI.stop(),this.tweenHideFoodUI&&this.tweenHideFoodUI.stop(),this.tweenShowFoodUI.start()},o.onNurtureClicked=function(){this.manager.uiPopupNurtureUndead.Show(this.data.undead,this.data.id)},o.onDepartClicked=function(){this.manager.uiExpeditionPopup.Show(this.data)},o.onViewClicked=function(){this.manager.uiExpeditionPopup.Show(this.data)},o.onRecallClicked=function(){this.manager.uiExpeditionPopup.Show(this.data)},o.onInfoClicked=function(){this.manager.uiEUndeadInfo.Show(this.data.undead)},o.onOpenEggClicked=function(){var e=this.data.undead.eggId;A.RequestOpenEgg(e,function(e){var t=JSON.parse(e);0==t.status||O.Instance.ShowToast("Error",B.Instance.GetErrorMessage(t.status),0)}.bind(this))},o.onCleanBarn=function(){this.requestDeleteUndead()},o.onAddUndeadClicked=function(){this.manager.showUIAddUndead()},o.onSelectUndead=function(){if(1==this.undeadSpine.node.active){var e=this.undeadSpine.animation;e==At.Idle?this.setAnim(At.Happy,!1):e!=At.Sleep&&e!=At.Fall_Asleep||this.setAnim(At.Wake_Up,!1)}},o.onBackToInventoryClicked=function(){O.Instance.ShowUINotifyConfirm("Remove Undead","By acknowledging this action, you're fully\nawared that this Undead will be deleted\n forever. This action can't be undone\n\n",this.requestDeleteUndead.bind(this),!0,!1,0,!0)},o.setAnim=function(e,t){this.undeadSpine.setAnimation(0,e,t)},o.animCompleted=function(e){switch(e.animation.name){case At.Fall_Asleep:this.setAnim(At.Sleep,!0);break;case At.Happy:case At.Wake_Up:this.setAnim(At.Idle,!0),this.refreshAnim()}},o.refreshAnim=function(){this.currentState!=Ft.Ready&&(null!=this.readyTimeOut&&clearTimeout(this.readyTimeOut),this.readyTimeOut=setTimeout(this.gotoSleep.bind(this),y(25e3,35e3)))},o.gotoSleep=function(){this.undeadSpine.setAnimation(0,At.Fall_Asleep,!1)},o.initUndeadFood=function(e){for(var t=this.uiFood.uiItemMaterial,i=0;i<t.length;i++)t[i].node.active=!1;for(var n=JSON.parse(e),a=[],o=0,r=0;r<n.data.items.length;r++){var s=n.data.items[r],l=B.Instance.GetMaterialData(s.name);null!=l?kt.indexOf(l.type)>=0&&a.push({config:l,data:s}):console.warn("error when find material: ",s)}a.sort((function(e,t){return e.config.food_sort-t.config.food_sort}));for(var d=0;d<a.length;d++){var u=this.uiFood.GetUIItemMaterial(o);o++,u.Init(a[d].data,this.feedToUndead.bind(this))}},o.feedToUndead=function(e){var t=this.data.undead.id;console.log("feedToUndead",e.itemKey,t,this.data),A.RequestFeedUndead(t,e.itemKey,function(t){this.ApplyToolSuccess(t,e.itemKey,e.node)}.bind(this))},o.ApplyToolSuccess=function(e,t,i){var n=JSON.parse(e);0==n.status?this.doAnimFeed(n.data,t,i,function(){A.RequestLoadUndeadFood(this.initUndeadFood.bind(this))}.bind(this)):O.Instance.ShowToast("Error",B.Instance.GetErrorMessage(n.status),0)},o.loadUndeadData=function(e){this.data.undead.UpdateData(e.undead),this.updateAffectionLv(this.data.undead)},o.doAnimFeed=function(e,t,i,n){for(var a=null,o=0;o<this.feedEff.length;o++)if(this.feedEff[o].name===t){a=this.feedEff[o];break}if(null==a)return console.log(this.feedComMaterial),void B.Instance.LoadMaterialTexture(t,function(t){this.feedComMaterial.passes[0].properties.mainTexture=t;var a=C(this.feedEffCom);console.log("tex",t,a.getComponent(U)),a.getComponent(U)._materials[0].setProperty("mainTexture",t),this.internalAnim(a,i,e,n)}.bind(this));if(null==a)return console.log("prefab null",t),void this.loadUndeadData(e);var r=C(a);this.internalAnim(r,i,e,n)},o.internalAnim=function(e,t,i,n){e.setParent(this.node),e.setWorldPosition(t.worldPosition),T.PlayParticle(e);var a=t.worldPosition,o=this.undeadSpine.node.worldPosition,r=a.clone();v({a:0}).to(.4,{a:100},{progress:function(t,i,n,s){return r=m.lerp(r,a,o,s),e.setWorldPosition(r),t+(i-t)*s},easing:"linear"}).call(function(){this.loadUndeadData(i),n&&n()}.bind(this)).start(),setTimeout((function(){e&&e.destroy()}),3e3)},t}(I)).prototype,"uiFood",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=t(Oe.prototype,"spriteSeasonBgs",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pe=t(Oe.prototype,"spriteStatusBgs",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xe=t(Oe.prototype,"spriteBgSeason",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=t(Oe.prototype,"spriteStatus",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=t(Oe.prototype,"spriteBgNotify",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=t(Oe.prototype,"spriteBgShadow",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=t(Oe.prototype,"spriteUndead",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),He=t(Oe.prototype,"spriteUndeadShadow",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ge=t(Oe.prototype,"undeadSpine",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=t(Oe.prototype,"affectionLevel",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We=t(Oe.prototype,"spriteLvMax",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ke=t(Oe.prototype,"spriteLvProgress",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ve=t(Oe.prototype,"lbLvUndead",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qe=t(Oe.prototype,"lbExpUndead",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ye=t(Oe.prototype,"fatigueGroup",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe=t(Oe.prototype,"fatigueProgress",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je=t(Oe.prototype,"fatigueProgressReady",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=t(Oe.prototype,"fatigueProgresstired",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ze=t(Oe.prototype,"lbFatiguePercent",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qe=t(Oe.prototype,"fatigueTiredMask",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e=t(Oe.prototype,"fatigueParentMask",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=t(Oe.prototype,"fatigueMaskWidget",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=t(Oe.prototype,"grpTimer",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=t(Oe.prototype,"lbTimer",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=t(Oe.prototype,"lbTimeLeftLvUp",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=t(Oe.prototype,"lbLvBarn",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=t(Oe.prototype,"lbStatus",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=t(Oe.prototype,"btnFeed",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=t(Oe.prototype,"btnNurture",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=t(Oe.prototype,"btnDepart",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dt=t(Oe.prototype,"btnView",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ut=t(Oe.prototype,"btnRecall",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=t(Oe.prototype,"btnInfo",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=t(Oe.prototype,"btnOpenEgg",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=t(Oe.prototype,"btnBackToInventory",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=t(Oe.prototype,"btnAddUndead",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft=t(Oe.prototype,"btnSelectUndead",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt=t(Oe.prototype,"btnClaim",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=t(Oe.prototype,"btnCleanBarn",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=t(Oe.prototype,"effectCleanBarn",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=t(Oe.prototype,"spineBroomClean",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=t(Oe.prototype,"spriteCleanBarn",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et=t(Oe.prototype,"lbNotify",[Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=t(Oe.prototype,"spriteEggBag",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct=t(Oe.prototype,"spriteEggNotify",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ut=t(Oe.prototype,"feedEff",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),It=t(Oe.prototype,"feedEffCom",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bt=t(Oe.prototype,"feedComMaterial",[Le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=Oe))||Ae));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIUndeadView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ExpeditionServiceApi.ts","./UIBarn.ts","./IsoViewController.ts","./UnDeadData.ts","./ExpeditionHelper.ts","./UIUndeadAnim.ts","./ConvertJsonObject2.ts","./UIUndeadItem.ts"],(function(n){"use strict";var t,e,i,a,r,o,s,d,l,c,u,f,h,v,p;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,a=n.assertThisInitialized},function(n){r=n.cclegacy,o=n._decorator,s=n.Component},function(n){d=n.ExpeditionServiceApi},function(n){l=n.UIBarn},function(n){c=n.IsoViewController},function(n){u=n.BarnData},function(n){f=n.ExpeditionHelper},function(n){h=n.UIUndeadAnim},function(n){v=n.convertToString},function(n){p=n.UndeadStatus}],execute:function(){var U,g,m,b,w,I,B,D,V;r._RF.push({},"4ca75a5loZFzpZ35mOs6wk/","UIUndeadView",void 0);var y=o.ccclass,C=o.property;n("UIUndeadView",(U=y("UIUndeadView"),g=C([l]),m=C([h]),b=C(c),U((B=t((I=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=n.call.apply(n,[this].concat(r))||this,i(t,"listBarn",B,a(t)),i(t,"animUndeads",D,a(t)),i(t,"isoViewController",V,a(t)),t.barnsData=[],t.manager=void 0,t}e(t,n);var r=t.prototype;return r.onInit=function(n){this.manager=n,this.isoViewController.Init(500,-500,500,-500),this.refreshView()},r.loadUndeadView=function(n){var t=v(n.id);this.listBarn.find((function(n){return n.barnID==t})).barnData=n;var e=n.undead,i=this.animUndeads.find((function(n){return n.barnID==t}));if(null==e)return i.node.active=!1,void i.resetData();var a=f.GetTotalLifeTimeLeft(i)<=0;i.node.active=!a,i.loadData(i)},r.refreshView=function(){d.RequestLoadCage(this.initExpedition.bind(this))},r.getListBarn=function(){return this.barnsData},r.initExpedition=function(n){var t=JSON.parse(n).data;t.sort((function(n,t){return n._id<t._id?-1:n._id>t._id?1:0}));var e=this.listBarn.length,i=t.length%e==0?Math.floor(t.length/e):Math.floor(t.length/e)+1;this.manager.setTotalPage(i);for(var a=0;a<t.length;a++){var r=t[a],o=new u(r);if(this.barnsData.push(o),!(a>=e)){var s=this.listBarn[a];if(s){s.loadBarn(o),s.node.on("uiBarn:select",this.onBarnClicked,this);var d=o.undead,l=this.animUndeads[a];if(d&&d.status!=p.UNASSIGNED){var c=f.GetTotalLifeTimeLeft(d)<=0;l.node.active=!c,c||l.onInit(o.id,d)}else l.node.active=!1}}}},r.loadBarnWithPage=function(n){for(var t=this.barnsData.length,e=this.listBarn.length,i=0;i<e;i++){var a=this.listBarn[i],r=this.animUndeads[i];if(a){var o=i+n*e;if(a.node.active=o<t,r.node.active=o>=t,!(o>=t)){var s=this.barnsData[o];a.loadBarn(s);var d=s.undead;if(d){var l=f.GetTotalLifeTimeLeft(d)<=0;r.node.active=!l,l||r.onInit(s.id,d)}else r.node.active=!1}}}},r.onBarnClicked=function(n){this.manager.showBarnView(n)},t}(s)).prototype,"listBarn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(I.prototype,"animUndeads",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=t(I.prototype,"isoViewController",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=I))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIUpgradeBarn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopUpBase.ts","./Utility.ts","./UnDeadData.ts","./ResourcesManager.ts","./ExpeditionServiceApi.ts","./ExpeditionHelper.ts","./ConvertJsonObject2.ts","./UIPopupManager.ts","./FarmingServicesApi.ts","./ConfigApi.ts","./InventoryData.ts"],(function(e){"use strict";var t,n,i,r,a,o,s,l,u,c,p,g,h,f,b,d,v,m,I,C,B,T,L,S,U,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Node,l=e.Button,u=e.Sprite,c=e.Label,p=e.Color,g=e.UIOpacity,h=e.Toggle},function(e){f=e.PopUpBase},function(e){b=e.Utility},function(e){d=e.BarnData,v=e.BarnConfigData},function(e){m=e.ResourcesManager},function(e){I=e.ExpeditionServiceApi},function(e){C=e.ExpeditionHelper},function(e){B=e.convertToString,T=e.convertToUnstableNumber},function(e){L=e.UIPopupManager},function(e){S=e.FarmingServicesApi},function(e){U=e.ConfigApi},function(e){y=e.default}],execute:function(){var w,E,D,z,R,M,x,N,q,F,P,k,A,G,H,O,_,V,J,K,j,W,Q,X,Y,Z,$,ee,te,ne,ie,re,ae,oe,se,le,ue,ce,pe,ge,he;a._RF.push({},"d4aa0UTLARG2rBamQR4V1sW","UIUpgradeBarn",void 0);var fe=o.ccclass,be=o.property;e("UIUpgradeBarn",(w=fe("UIUpgradeBarn"),E=be(s),D=be(s),z=be(s),R=be(s),M=be([s]),x=be(l),N=be(l),q=be(l),F=be(s),P=be(u),k=be(c),A=be(c),G=be(c),H=be(c),O=be(c),_=be(c),V=be(s),J=be(s),K=be([s]),w((Q=t((W=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"prefabTier",Q,r(t)),i(t,"tabTier",X,r(t)),i(t,"tabInfo",Y,r(t)),i(t,"contentTier",Z,r(t)),i(t,"tierItems",$,r(t)),i(t,"btnBgClose",ee,r(t)),i(t,"btnClose",te,r(t)),i(t,"btnUpgrade",ne,r(t)),i(t,"sprBgBottom",ie,r(t)),i(t,"sprIconBarn",re,r(t)),i(t,"lbTitleButton",ae,r(t)),i(t,"lbLevelBarn",oe,r(t)),i(t,"lbCurrentLv",se,r(t)),i(t,"lbNextLv",le,r(t)),i(t,"lbDescCurrentLv",ue,r(t)),i(t,"lbDescCurrentNexLv",ce,r(t)),i(t,"upgradedView",pe,r(t)),i(t,"prefabLE",ge,r(t)),i(t,"ingredientsItem",he,r(t)),t.configBarn=[],t.itemsBag=[],t.barnInfo=void 0,t.manager=void 0,t.currentTierSelect=1,t}n(t,e);var a=t.prototype;return a.onInit=function(e){this.btnBgClose.node.on(l.EventType.CLICK,this.Hide,this),this.btnClose.node.on(l.EventType.CLICK,this.Hide,this),this.btnUpgrade.node.on(l.EventType.CLICK,this.onUpgradeClicked,this),this.manager=e,this.currentTierSelect=1,this.tabInfo.active=!0,this.upgradedView.active=!1,this.requestLoadMaterials()},a.Show=function(t){e.prototype.OnShow.call(this),this.resetData(),t&&(this.barnInfo=t,this.requestLoadConfigCage())},a.Hide=function(){this.OnHide(),this.manager.onBackClicked()},a.loadIngredientMaterial=function(e,t){var n=e.getComponentInChildren(u),i=e.getComponentInChildren(c),r=B(t.name),a=T(t.value),o=null;if(null!=this.itemsBag&&this.itemsBag.length>0&&(o=this.itemsBag.find((function(e){return e.name==r}))),n){n.spriteFrame=null;m.Instance.LoadMaterialSprite(r.toLocaleUpperCase(),(function(t){n.spriteFrame=t,e.active=!0}))}i&&(i.string=o?o.amount+"/"+a:"0/"+a,i.color=null==o||o.amount<a?p.RED:p.WHITE)},a.activeTierUpgraded=function(e){this.sprBgBottom.active=e,this.ingredientsItem.map((function(t){return t.active=e})),this.btnUpgrade.node.active=e,this.prefabLE.active=e,this.lbTitleButton.node.active=e},a.resetData=function(){this.configBarn.length=0,this.lbDescCurrentLv.string="",this.lbDescCurrentNexLv.string="",this.lbLevelBarn.string="",this.lbCurrentLv.string="",this.lbNextLv.string="",this.lbTitleButton.string="",this.prefabLE.active=!1,this.ingredientsItem.map((function(e){return e.active=!1})),b.activeButton(this.btnUpgrade,!1),this.sprIconBarn.spriteFrame=null},a.loadTier=function(e,t){var n=e.getComponentInChildren(g).getComponent(u),i=e.getComponentInChildren(c);if(n){m.Instance.LoadBarnSprite(t,(function(e){n.spriteFrame=e}))}i&&(i.string="Tier "+t.toString())},a.loadInfoMyTier=function(){var e=this.barnInfo?this.barnInfo.tier:0;b.activeButton(this.btnUpgrade,this.currentTierSelect-e==1),this.btnUpgrade.node.active=this.currentTierSelect>e,this.lbCurrentLv.string="Level "+e.toString(),this.lbTitleButton.string="Upgrade to LV."+this.currentTierSelect.toString();var t=this.configBarn.find((function(t){return t.tier==e}));this.loadDescription(this.lbDescCurrentLv,t)},a.loadInfoTier=function(e){var t=this,n=this.configBarn.find((function(t){return t.tier==e}));this.prefabLE.active=!0;var i=this.barnInfo?this.barnInfo.tier:0;if(n){if(this.activeTierUpgraded(e>i),this.ingredientsItem.map((function(e){return e.active=!1})),e>i){var r=this.prefabLE.getComponentInChildren(c);this.prefabLE.active=!0,r&&(r.string=n.cost.toString());for(var a=n.ingredients,o=0;o<a.length;o++){var s=a[o];if(null!=s){var l=this.ingredientsItem[o];null!=l&&this.loadIngredientMaterial(l,s)}}}m.Instance.LoadBarnSprite(e,(function(e){t.sprIconBarn.spriteFrame=e})),this.lbNextLv.string="Level "+e.toString(),this.lbLevelBarn.string="Level "+e.toString(),this.loadDescription(this.lbDescCurrentNexLv,n)}},a.loadDescription=function(e,t){if(null!=t){var n="";t.expRate>0&&(n+="+"+t.getPercent(t.expRate)+"% EXP from food\n"),t.regenFatigueRate>0&&(n+="+"+t.getPercent(t.regenFatigueRate)+"% Fatigue Regeneration\n"),t.createUniqueMaterialRate>0&&(n+="Every 24 hours there will be "+t.createUniqueMaterialRate+"% Undead chance to produce 1 unique material\n"),t.createBeastEssence>0&&(n+="Every 24 hours Undead will produce "+t.createBeastEssence+" Beast Essence (resource to evolve)\n"),t.bonusGiveEggRate>0&&(n+="+"+t.bonusGiveEggRate+"% Chance to leave eggs after death\n"),e.string=n}else e.string=""},a.onUpgradeBarnResponse=function(e){var t=this,n=JSON.parse(e);if(1105!=n.status)if(0==n.status){this.barnInfo=new d(n.data);for(var i=this.barnInfo?this.barnInfo.id:"",r=this.tierItems.length,a=this.barnInfo.tier,o=0;o<r;o++){var s=this.tierItems[o];if(s){var l=s.getComponentInChildren(h),u=l.node.name,c=parseInt(u.split("_")[1]);l.isChecked=a<=0?0==c:a+1==c}}this.currentTierSelect=a+1,this.requestLoadMaterials(),this.scheduleOnce((function(){t.loadInfoMyTier(),t.loadInfoTier(t.currentTierSelect)})),""!=i&&this.manager.refreshCage(i),L.Instance.ShowToast("Notification","Upgrade Success",1,!0)}else L.Instance.ShowToast("Error",m.Instance.GetErrorMessage(n.status),0);else L.Instance.ShowToast("Error","Not enough material",0)},a.requestUpgradeBarn=function(){var e=this.barnInfo?this.barnInfo.id:"";I.RequestUpgradeBarn(e,this.onUpgradeBarnResponse.bind(this))},a.requestLoadConfigCage=function(){this.configBarn.length>0||I.RequestLoadConfigCage(function(e){var t=C.CheckStatus(e);if(null!=t){for(var n=t.data,i=this.barnInfo.tier,r=0;r<n.length;r++){var a=new v(n[r]);if(null!=a&&(this.configBarn.push(a),!(r>=this.tierItems.length))){var o=this.tierItems[r];if(o){var s=o.getComponentInChildren(h);s.isChecked=i<=0?1==a.tier:i+1==a.tier,s.node.on(h.EventType.TOGGLE,this.onSelectTier,this),this.loadTier(o,a.tier)}}}this.currentTierSelect=i<1?1:i+1,this.loadInfoMyTier(),this.loadInfoTier(this.currentTierSelect)}}.bind(this))},a.requestLoadMaterials=function(){var e=this,t={offset:0,limit:U.LIMIT_PAGE};S.RequestLoadMaterials(t,(function(t){var n=JSON.parse(t);if(0==n.status){if(null!=n.data&&null!=n.data.items){var i=new y(n.data).itemData;i=i.filter((function(e){return"Sapling"!=e.getItemType()})),e.itemsBag=i}}else L.Instance.ShowToast("Error",m.Instance.GetErrorMessage(n.status),0)}),(function(e){}))},a.onSelectTier=function(e){var t=e.node.name,n=parseInt(t.split("_")[1]);if(this.currentTierSelect!=n){for(var i=this.tierItems.length,r=0;r<i;r++){var a=this.tierItems[r];if(a){var o=a.getComponentInChildren(h);0!=o.interactable&&(o.isChecked=o.node.name==t)}}var s=this.barnInfo?this.barnInfo.tier:0;this.currentTierSelect=n,b.activeButton(this.btnUpgrade,n-s==1),this.lbLevelBarn.string="Level "+s.toString(),this.lbTitleButton.string=this.currentTierSelect>s?"Upgrade to LV."+this.currentTierSelect.toString():"Upgraded",this.loadInfoTier(n)}},a.onUpgradeClicked=function(){this.requestUpgradeBarn()},t}(f)).prototype,"prefabTier",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(W.prototype,"tabTier",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(W.prototype,"tabInfo",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(W.prototype,"contentTier",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(W.prototype,"tierItems",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ee=t(W.prototype,"btnBgClose",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(W.prototype,"btnClose",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(W.prototype,"btnUpgrade",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(W.prototype,"sprBgBottom",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(W.prototype,"sprIconBarn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(W.prototype,"lbTitleButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(W.prototype,"lbLevelBarn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(W.prototype,"lbCurrentLv",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(W.prototype,"lbNextLv",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(W.prototype,"lbDescCurrentLv",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(W.prototype,"lbDescCurrentNexLv",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(W.prototype,"upgradedView",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=t(W.prototype,"prefabLE",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(W.prototype,"ingredientsItem",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=W))||j));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIWaveTitle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,o,a,s,l,r,h,c,p,v,u,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,l=e.Node,r=e.UIOpacity,h=e.Label,c=e.UITransform,p=e.view,v=e.tween,u=e.Vec3,g=e.Component}],execute:function(){var y,b,f,w,W,d,m,L,B,I,O;a._RF.push({},"edb9cDYeZ5AJa+854tQ5mhW","UIWaveTitle",void 0);var z=s.ccclass,x=s.property;e("UIWaveTitle",(y=z("UIWaveTitle"),b=x(l),f=x(r),w=x(h),W=x(l),y((L=t((m=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n(t,"nodeBgWave",L,o(t)),n(t,"opacityBgWave",B,o(t)),n(t,"lbWave",I,o(t)),n(t,"fxNotice",O,o(t)),t.transformLabelWave=null,t.tweenMove=null,t.tweenOpacityBg=null,t.tweenHeightLabel=null,t}i(t,e);var a=t.prototype;return a.onLoad=function(){var e=this,t=this.lbWave.getComponent(c);null==t&&(this.lbWave.addComponent(c),t=this.lbWave.getComponent(c)),this.transformLabelWave=t;var i=p.getFrameSize();this.tweenMove=v(this.node).to(.1,{position:new u(-i.height/4,this.node.position.y)},{easing:"sineOutIn"}).to(.15,{position:new u(0,this.node.position.y)},{easing:"sineOutIn"}).to(1.05,{position:new u(30,this.node.position.y)}).to(.25,{position:new u(i.height/2,this.node.position.y)},{easing:"sineOut"}),this.tweenOpacityBg=v(this.opacityBgWave).delay(.05).to(.05,{opacity:80}).to(.15,{opacity:255}).call((function(){e.fxNotice.active=!0})).delay(1.2).to(.1,{opacity:0}).call((function(){e.fxNotice.active=!1})),this.tweenHeightLabel=v(this.transformLabelWave).delay(.05).to(.05,{height:100}).delay(1.2).to(.15,{height:0})},a.show=function(e){this.node.active=!0;var t=p.getFrameSize();this.opacityBgWave.opacity=0,null==this.transformLabelWave&&(this.transformLabelWave=this.lbWave.getComponent(c)),this.transformLabelWave.height=0,this.lbWave.string="WAVE "+e,this.node.position=new u(-t.height/2,this.node.position.y),this.fxNotice.active=!1,this.tweenOpacityBg&&this.tweenOpacityBg.stop(),this.tweenHeightLabel&&this.tweenHeightLabel.stop(),this.tweenMove&&this.tweenMove.stop(),this.tweenMove.start(),this.tweenHeightLabel.start(),this.tweenOpacityBg.start()},t}(g)).prototype,"nodeBgWave",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(m.prototype,"opacityBgWave",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(m.prototype,"lbWave",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(m.prototype,"fxNotice",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=m))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/UndeadAssetItem_v2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./SpriteRatioHelper.ts","./ResourcesManager.ts"],(function(e){"use strict";var t,i,r,a,n,l,s,o,c,u,p,f,b,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,s=e.Node,o=e.Sprite,c=e.SpriteFrame,u=e.Label,p=e.Component},function(e){f=e.ConfigApi},function(e){b=e.SpriteRatioHelper},function(e){v=e.ResourcesManager}],execute:function(){var m,d,h,g,L,y,B,F,S,z,I,w,A,_,C,R,D;n._RF.push({},"a9ea6mlkYVKDLCdLzpDDaR7","UndeadAssetItem_v2",void 0);var U=l.ccclass,k=l.property;e("UndeadAssetItemV2",(m=U("UndeadAssetItemV2"),d=k(s),h=k(b),g=k(o),L=k(c),y=k(u),B=k(o),F=k(c),m((I=t((z=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,r(t,"status_inBarn",I,a(t)),r(t,"Icon",w,a(t)),r(t,"Base",A,a(t)),r(t,"baseSpriteFrame",_,a(t)),r(t,"level",C,a(t)),r(t,"BaseLevel",R,a(t)),r(t,"LevelBaseSpriteFrame",D,a(t)),t.data=void 0,t.cb=void 0,t}i(t,e);var n=t.prototype;return n.Init=function(e,t){this.data=e,this.cb=t,this.node.active=!0;var i=e.rarity;e.affectionLevel==e.maxAffectionLevel?this.BaseLevel.spriteFrame=this.LevelBaseSpriteFrame[1]:this.BaseLevel.spriteFrame=this.LevelBaseSpriteFrame[0],e.stage<=1?this.level.string=f.UndeadAffectionLevel[e.affectionLevel]:this.level.string=e.combatLevel,this.Base.spriteFrame=this.baseSpriteFrame[i-1],v.Instance.GetUndead(e.code.toLowerCase(),e.stage,function(e){this.Icon.spriteFrame=e}.bind(this)),this.status_inBarn.active=null!=e.currentCage},n.OnClick=function(){null!=this.cb&&this.cb(this)},t}(p)).prototype,"status_inBarn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(z.prototype,"Icon",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(z.prototype,"Base",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(z.prototype,"baseSpriteFrame",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(z.prototype,"level",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(z.prototype,"BaseLevel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(z.prototype,"LevelBaseSpriteFrame",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=z))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/UndeadAssetItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteRatioHelper.ts","./Utility.ts","./ResourcesManager.ts","./ExpeditionHelper.ts"],(function(e){"use strict";var t,i,a,r,n,l,o,s,u,c,p,b,f,d,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,o=e.Label,s=e.Sprite,u=e.SpriteFrame,c=e.color,p=e.Component},function(e){b=e.SpriteRatioHelper},function(e){f=e.Utility},function(e){d=e.ResourcesManager},function(e){v=e.ExpeditionHelper}],execute:function(){var m,h,L,g,y,F,B,S,I,_,w,z,x,A,C,H,U,k,R,T,D,E,M;n._RF.push({},"c08dafaH91Hrb9ZZfQeAQeX","UndeadAssetItem",void 0);var G=l.ccclass,P=l.property;e("UndeadAssetItem",(m=G("UndeadAssetItem"),h=P(o),L=P(o),g=P(o),y=P(o),F=P(b),B=P(s),S=P(u),I=P(o),_=P(s),w=P(u),m((A=t((x=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,a(t,"duration",A,r(t)),a(t,"status_inBarn",C,r(t)),a(t,"status_maxLevel",H,r(t)),a(t,"idLabel",U,r(t)),a(t,"Icon",k,r(t)),a(t,"Base",R,r(t)),a(t,"baseSpriteFrame",T,r(t)),a(t,"level",D,r(t)),a(t,"BaseLevel",E,r(t)),a(t,"LevelBaseSpriteFrame",M,r(t)),t.LevelColor=[c("#53FF83"),c("#53CBFF"),c("#E659FF")],t.callback=void 0,t.data=void 0,t}i(t,e);var n=t.prototype;return n.Init=function(e){this.node.active=!0;var t=e.rarity;this.BaseLevel.spriteFrame=this.LevelBaseSpriteFrame[t-1],this.level.string=e.affectionLevel.toString(),this.level.color=this.LevelColor[t-1],this.Base.spriteFrame=this.baseSpriteFrame[t-1],this.idLabel.string="#"+e.tokenId,d.Instance.GetUndead(e.code.toLowerCase(),e.stage,function(e){this.Icon.spriteFrame=e}.bind(this)),null!=this.status_inBarn&&(this.status_inBarn.node.active=null!=e.currentCage),null!=this.status_maxLevel&&(this.status_maxLevel.node.active=e.maxAffectionLevel<=e.affectionLevel);var i=v.GetTotalLifeTimeLeft(e);this.duration.string="Life - "+f.ConvertSecondsToTimeShort(i)},n.InitOnSelect=function(e,t){this.data=e,this.callback=t,this.Init(e)},n.select=function(){this.callback&&this.callback(this.data._id)},t}(p)).prototype,"duration",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(x.prototype,"status_inBarn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(x.prototype,"status_maxLevel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(x.prototype,"idLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(x.prototype,"Icon",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(x.prototype,"Base",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(x.prototype,"baseSpriteFrame",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(x.prototype,"level",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(x.prototype,"BaseLevel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(x.prototype,"LevelBaseSpriteFrame",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=x))||z));n._RF.pop()}}}));

System.register("chunks:///_virtual/UndeadBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameplayObject.ts","./Enums.ts","./InGameEvent.ts"],(function(t){"use strict";var e,n,a,s,i,o,c;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){a=t.cclegacy,s=t._decorator},function(t){i=t.GameplayObject},function(t){o=t.DamageType},function(t){c=t.InGameEventID}],execute:function(){var u;a._RF.push({},"648cbiiSk9AZKjtXIuewtpL","UndeadBase",void 0);var r=s.ccclass;s.property,t("UndeadBase",r("UndeadBase")(u=function(t){function a(){return t.apply(this,arguments)||this}e(a,t);var s=a.prototype;return s.DoPath=function(t){this.movingComponent.DoPath(this,t)},s.PickupDone=function(){t.prototype.PickupDone.call(this),this.data.statsData.HP/=2,this.event.dispatchEvent(c.HpChanged,o.Chaos,this.data.statsData.HP,this.data.statsData)},s.detailInit=function(){},n(a,[{key:"isUndead",get:function(){return!0}}]),a}(i))||u);a._RF.pop()}}}));

System.register("chunks:///_virtual/UndeadCardData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConvertJsonObject.ts","./PVE_Helper.ts"],(function(e){"use strict";var t,i,a,s,n,r,o,h;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,a=e._decorator},function(e){s=e.convertToUnstableNumber,n=e.convertToArray,r=e.convertToString,o=e.convertToPlainObject},function(e){h=e.PVEHelper}],execute:function(){var c;i._RF.push({},"fe71dc6w29Ez4WGZyk6ZnLQ","UndeadCardData",void 0);var d=a.ccclass;e("default",d("UnDeadCardData")(c=function(){function e(e){this.status=0,this.lifeCycleRate=0,this.affectionLevel=0,this.affectionExp=0,this.exchangeRate=0,this.timeToUpLv=[],this.id="",this.ownerId="",this.eggId="",this.tokenId=0,this.rarity=0,this.birth="",this.baseLifeCycle=0,this.expiryDate="",this.lastTimeLvUp="",this.giveEggRate=0,this.currentFatigue=0,this.lastTimeRegenFatigue="",this.fatigueCostPerExpeditionHour=0,this.currentCage="",this.undeadId=0,this.name="",this.imageUrl="",this.code="",this.stage=1,this.maxAffectionLevel=0,this.maxFatigue=0,this.fatigueRegenPerHour=0,this.maxExpeditionHour=0,this.createdAt="",this.updatedAt="",this.lastTimeDecreaseFatigue="",this.currentExpedition="",this.current_expedition=null,this.pveExp=0,this.combatLevel=0,this.configUndead=null,this.element="",this.manaCost=0,this.leCost=0,this.combatPower=0,this.UpdateData(e)}return e.prototype.UpdateData=function(e){var t;this.status=s(e.status),this.lifeCycleRate=s(e.lifeCycleRate),this.affectionLevel=s(e.affectionLevel),this.affectionExp=s(e.affectionExp),this.exchangeRate=s(e.exchangeRate),this.timeToUpLv=n(e.timeToUpLv),this.id=r(e._id),this.ownerId=r(e.ownerId),this.eggId=r(e.eggId),this.tokenId=s(e.tokenId),this.rarity=s(e.rarity),this.birth=r(e.birth),this.baseLifeCycle=s(e.baseLifeCycle),this.expiryDate=r(e.expiryDate),this.lastTimeLvUp=r(e.lastTimeLvUp),this.giveEggRate=s(e.giveEggRate),this.currentFatigue=s(e.currentFatigue),this.lastTimeRegenFatigue=r(e.lastTimeRegenFatigue),this.fatigueCostPerExpeditionHour=s(e.fatigueCostPerExpeditionHour),this.currentCage=r(e.currentCage),this.undeadId=s(e.undeadId),this.name=r(e.name),this.imageUrl=r(e.imageUrl),this.code=r(e.code),this.stage=null!=(t=e.stage)?t:1,this.maxAffectionLevel=s(e.maxAffectionLevel),this.maxFatigue=s(e.maxFatigue),this.fatigueRegenPerHour=s(e.fatigueRegenPerHour),this.maxExpeditionHour=s(e.maxExpeditionHour),this.createdAt=r(e.createdAt),this.updatedAt=r(e.updatedAt),this.lastTimeDecreaseFatigue=r(e.lastTimeDecreaseFatigue),this.currentExpedition=r(e.current_expedition),this.current_expedition=e.current_expedition,this.configUndead=o(e.config),this.configUndead&&(this.leCost=s(this.configUndead.leCost),this.manaCost=s(this.configUndead.manaCost),this.combatPower=s(this.configUndead.combatPower),this.element=r(this.configUndead.element)),e.pveMeta&&(this.pveExp=s(e.pveMeta.exp))},t(e,[{key:"getLevel",get:function(){return this.combatLevel}},{key:"getCode",get:function(){return h.ParseGameplayObjectCode(this.configUndead?this.configUndead.name:this.code)}},{key:"fatiguePercent",get:function(){return Math.floor(this.currentFatigue/this.maxFatigue*100)}}]),e}())||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/UnDeadData.ts",["cc","./ConvertJsonObject2.ts","./ConfigApi.ts","./StateData.ts"],(function(t){"use strict";var e,i,a,s,n,r,h,o,u,g;return{setters:[function(t){e=t.cclegacy,i=t._decorator},function(t){a=t.convertToString,s=t.convertToUnstableNumber,n=t.convertToArray,r=t.convertToBoolean,h=t.convertToPlainObject},function(t){o=t.ConfigApi},function(t){u=t.GetData,g=t.GetExpConfig}],execute:function(){var c,d,p,f;e._RF.push({},"c6ae2fD4oxPkrNbEiECI9Lm","UnDeadData",void 0);var l=i.ccclass,v=(i.property,t("UnDeadEggData",l("UnDeadEggData")(c=function(){function t(t){this.id="",this.ownerId="",this.tokenId=0,this.rarity=0,this.type=0,this.status="",this.createdAt="",this.updatedAt="",this.hatchingTime=0,this.v=0,this.RarityNameString=["COMMON","RARE","EPIC","LEGENDARY","MYTHIC"],this.EggNameString=["COMMON_UNDEAD_EGG","RARE_UNDEAD_EGG","EPIC_UNDEAD_EGG"],this.UpdateData(t)}var e=t.prototype;return e.UpdateData=function(t){this.id=a(t._id),this.ownerId=a(t.ownerId),this.tokenId=s(t.ownerId),this.rarity=s(t.ownerId),this.type=s(t.ownerId),this.status=a(t.status),this.hatchingTime=s(t.hatchingTime),this.createdAt=a(t.createdAt),this.updatedAt=a(t.updatedAt),this.v=s(t.__v)},e.getRarityName=function(){return this.rarity<0?this.RarityNameString[0]:this.RarityNameString[this.rarity]},e.getEggName=function(){return this.rarity<0?this.EggNameString[0]:this.EggNameString[this.rarity]},t}())||c),t("default",l("UnDeadData")(f=function(){function t(t){this.status=0,this.lifeCycleRate=0,this.affectionLevel=0,this.affectionExp=0,this.exchangeRate=0,this.timeToUpLv=[],this.id="",this.ownerId="",this.eggId="",this.tokenId=0,this.rarity=0,this.birth="",this.baseLifeCycle=0,this.expiryDate="",this.lastTimeLvUp="",this.giveEggRate=0,this.currentFatigue=0,this.lastTimeRegenFatigue="",this.fatigueCostPerExpeditionHour=0,this.currentCage="",this.undeadId=0,this.name="",this.imageUrl="",this.code="",this.stage=1,this.maxAffectionLevel=0,this.maxFatigue=0,this.fatigueRegenPerHour=0,this.maxExpeditionHour=0,this.createdAt="",this.updatedAt="",this.lastTimeDecreaseFatigue="",this.currentExpedition="",this.current_expedition=null,this.pveExp=0,this.combatLevel=0,this.skillTreeBuff=null,this.UpdateData(t)}var e=t.prototype;return e.UpdateData=function(t){var e;this.status=s(t.status),this.lifeCycleRate=s(t.lifeCycleRate),this.affectionLevel=s(t.affectionLevel),this.affectionExp=s(t.affectionExp),this.exchangeRate=s(t.exchangeRate),this.timeToUpLv=n(t.timeToUpLv),this.id=a(t._id),this.ownerId=a(t.ownerId),this.eggId=a(t.eggId),this.tokenId=s(t.tokenId),this.rarity=s(t.rarity),this.birth=a(t.birth),this.baseLifeCycle=s(t.baseLifeCycle),this.expiryDate=a(t.expiryDate),this.lastTimeLvUp=a(t.lastTimeLvUp),this.giveEggRate=s(t.giveEggRate),this.currentFatigue=s(t.currentFatigue),this.lastTimeRegenFatigue=a(t.lastTimeRegenFatigue),this.fatigueCostPerExpeditionHour=s(t.fatigueCostPerExpeditionHour),this.currentCage=a(t.currentCage),this.undeadId=s(t.undeadId),this.name=a(t.name),this.imageUrl=a(t.imageUrl),this.code=a(t.code),this.stage=null!=(e=t.stage)?e:1,this.maxAffectionLevel=s(t.maxAffectionLevel),this.maxFatigue=s(t.maxFatigue),this.fatigueRegenPerHour=s(t.fatigueRegenPerHour),this.maxExpeditionHour=s(t.maxExpeditionHour),this.createdAt=a(t.createdAt),this.updatedAt=a(t.updatedAt),this.lastTimeDecreaseFatigue=a(t.lastTimeDecreaseFatigue),this.currentExpedition=a(t.current_expedition),this.current_expedition=t.current_expedition,this.combatLevel=s(t.combatLevel),t.pveMeta&&(this.pveExp=s(t.pveMeta.exp)),this.skillTreeBuff=t.skillTreeBuff},e.getLevel=function(){return this.stage>1?"LV."+this.combatLevel:o.UndeadAffectionLevel[this.affectionLevel]},e.getExp=function(){if(this.stage>1){var t=this.getExpConfig();return Math.round(this.pveExp-t.levelExp)}return Math.round(this.affectionExp)},e.getMaxExp=function(){if(this.stage>1){var t=this.getExpConfig();return t.nextLevelExp-t.levelExp}return 1e3},e.getExpConfig=function(){if(this.stage>1){var t=u(this.code,this.stage);return null==t?{levelExp:0,nextLevelExp:9999999}:g(t.expPool,this.combatLevel)}return{levelExp:0,nextLevelExp:1e3}},t}())||f));t("BarnData",l("BarnData")(d=function(){function t(t){this.id="",this.hasEgg=!1,this.expRate=0,this.tier=0,this.regenFatigueRate=0,this.bonusGiveEggRate=0,this.ownerId="",this.createdAt="",this.updatedAt="",this.v=0,this.undead=null,this.UpdateData(t)}return t.prototype.UpdateData=function(t){this.id=a(t._id),this.hasEgg=r(t.hasEgg),this.ownerId=a(t.ownerId),this.tier=s(t.tier),this.expRate=s(t.expRate),this.regenFatigueRate=s(t.regenFatigueRate),this.bonusGiveEggRate=s(t.bonusGiveEggRate),this.ownerId=a(t.ownerId),this.createdAt=a(t.createdAt),this.updatedAt=a(t.updatedAt),this.v=s(t.__v),t.undead&&(this.undead=new v(t.undead))},t}())||d),t("BarnConfigData",l("BarnConfigData")(p=function(){function t(t){this.tier=0,this.cost=0,this.expRate=0,this.regenFatigueRate=0,this.bonusGiveEggRate=0,this.createUniqueMaterialRate=0,this.createBeastEssence=0,this.ingredients=[],this.UpdateData(t)}var e=t.prototype;return e.getPercent=function(t){var e=100*t-100;return Math.floor(e)},e.UpdateData=function(t){var e=this;this.tier=s(t.tier),this.cost=s(t.cost),this.expRate=s(t.expRate),this.regenFatigueRate=s(t.regenFatigueRate),this.bonusGiveEggRate=s(t.bonusGiveEggRate),this.createUniqueMaterialRate=s(t.createUniqueMaterialRate),this.createBeastEssence=s(t.createUniqueMaterialRate);var i=h(t.ingredients);Object.keys(i).forEach((function(t){if("le"!=t){var a=i[t];if(a){var s={name:t,value:a};e.ingredients.push(s)}}}))},t}())||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/UserCardData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConvertJsonObject.ts","./PVE_Enum.ts","./PVE_Helper.ts"],(function(t){"use strict";var e,i,a,s,r,n,o,h,d;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,a=t._decorator},function(t){s=t.convertToString,r=t.convertToUnstableNumber,n=t.convertToPlainObject,o=t.convertToArray},function(t){h=t.PVE_Enum},function(t){d=t.PVEHelper}],execute:function(){var l,c,u;t("TypeCard",void 0),i._RF.push({},"9e897AeWOdLF6UwzAPH+mnW","UserCardData",void 0);var p,m=a.ccclass;a.property;!function(t){t.UNDEAD="undead",t.PLANT="plant",t.SPELL="spell"}(p||(p=t("TypeCard",{})));t("SpellData",m("SpellData")(l=function(){function t(t){this.id="",this.config=null,this.coolDown=0,this.level=0,this.manaCost=0,this.name="",this.origin=0,this.ownerId="",this.rarity="",this.targetType="",this.tokenId=0,this.type=0,this.updatedAt="",this.combatPower=0,this.configId="",this.configType=0,this.configOrigin=0,this.UpdateData(t)}return t.prototype.UpdateData=function(t){var e;if(null!=t){this.id=s(t._id),this.level=r(t.level),this.coolDown=r(t.coolDown),this.manaCost=r(t.manaCost),this.name=s(t.name),this.origin=r(t.origin),this.ownerId=s(t.ownerId),this.rarity=s(t.rarity),this.targetType=s(t.targetType),this.tokenId=r(t.tokenId),this.type=r(t.type),this.updatedAt=s(t.updatedAt),this.combatPower=r(null!=(e=t.combatPower)?e:45);var i=n(t.config);null!=i&&(this.configId=s(i._id),this.configType=r(i.type),this.configOrigin=r(i.origin))}},e(t,[{key:"getLevel",get:function(){return this.level}},{key:"getCode",get:function(){for(var t="",e=this.name.split(" "),i=0;i<e.length;i++){var a=e[i];a=(a=a.toLocaleLowerCase()).charAt(0).toUpperCase()+a.slice(1),t+=0==i?a:"_"+a}return d.ParseGameplayObjectCode(t)}}]),t}())||l);var g=t("CardDetailData",m("CardDetailData")(c=function(){function t(t){this.level=0,this.name="",this.code="",this.type="",this.id="",this.parrentId="",this.skill=[],this.spawnCode="",this.stage=0,this.faction="",this.element="",this.hp=null,this.atk=null,this.def=null,this.mag=null,this.as=void 0,this.time=0,this.range=0,this.attackDamage=null,this.expPool="",this.dropPool="",this.killingExp=null,this.manaCost=0,this.leCost=0,this.expGrant=0,this.expGained=0,this.combatPower=0,this.createdAt="",this.updatedAt="",this.rarity=-1,this.coolDown=0,this.maxUse=-1,this.raritySpell="",this.isSystemCard=!1,this.currentFatigue=void 0,this.maxFatigue=void 0,this.UpdateData(t)}return t.prototype.UpdateData=function(t){var e,i;if(null!=t){this.level=r(null!=(e=t.level)?e:t.combatLevel),this.id=s(t._id);var a=n(t.config);null!=a&&(this.parrentId=null!=(i=t._id)?i:this.id,this.name=s(a.name),this.code=s(a.name),this.rarity=r(a.rarity),this.skill=o(a.skill),this.spawnCode=s(a.spawnCode),this.stage=r(a.stage),this.faction=s(a.faction),this.element=s(a.element),this.hp=n(a.hp),this.atk=n(a.atk),this.def=n(a.def),this.mag=n(a.mag),this.as=r(a.as),this.time=r(a.time),this.range=r(a.range),this.attackDamage=n(a.attackDamage),this.expPool=s(a.expPool),this.dropPool=s(a.dropPool),this.killingExp=n(a.killingExp),this.manaCost=r(a.manaCost),this.leCost=r(a.leCost),this.expGrant=n(a.expGrant),this.expGained=r(a.expGained),this.combatPower=r(a.combatPower),this.createdAt=s(a.createdAt),this.updatedAt=s(a.updatedAt),this.coolDown=r(a.coolDown),this.maxUse=r(a.maxUse),this.raritySpell=s(a.rarity),this.currentFatigue=r(t.currentFatigue),this.maxFatigue=r(t.maxFatigue),0==this.maxFatigue&&(this.maxFatigue=1e3,this.currentFatigue=1e3))}},e(t,[{key:"getLevel",get:function(){return this.level}},{key:"getCode",get:function(){if(this.eCardType==h.ECardType.Spell){for(var t="",e=this.name.split(" "),i=0;i<e.length;i++){var a=e[i];a=(a=a.toLocaleLowerCase()).charAt(0).toUpperCase()+a.slice(1),t+=0==i?a:"_"+a}return d.ParseGameplayObjectCode(t)}return d.ParseGameplayObjectCode(this.code)}},{key:"fatiguePercent",get:function(){return Math.floor(this.currentFatigue/this.maxFatigue*100)}},{key:"eCardType",get:function(){return"plant"==this.type?h.ECardType.Plant:"undead"==this.type?h.ECardType.Undead:h.ECardType.Spell}}]),t}())||c);t("SystemCardData",m("SystemCardData")(u=function(){function t(t){this.address="",this.id="",this.pickedCardIds=[],this.randomCardIds=[],this.redraw=null,this.handInGame=0,this.system=0,this.cards=[],this.cardsSystem=[],this.cardsDeck=[],this.UpdateData(t)}return t.prototype.UpdateData=function(t){var e=this;this.id=s(t._id),this.address=s(t.address),this.pickedCardIds=o(t.pickedCardIds),this.randomCardIds=o(t.randomCardIds),this.redraw=n(t.redraw),this.redraw&&(this.handInGame=r(this.redraw.handInGame),this.system=r(this.redraw.system));var i=o(t.cards);if(i&&i.length>0){for(var a=function(){var t=i[h];if(null==t)return"continue";var a=new g(t),s=e.randomCardIds.find((function(t){return t.cardId==a.id}));if(a.type=t.type,null==a)return"continue";null!=s?(e.cardsSystem.push(a),a.isSystemCard=!0):a.isSystemCard=!1,e.cards.push(a)},h=0;h<i.length;h++)a();for(var d=function(){var t=e.pickedCardIds[l];if(null==t||""==t)return"continue";var i=e.cards.find((function(e){return e.id==t}));null!=i&&(i.isSystemCard=!1,e.cardsDeck.push(i))},l=0;l<this.pickedCardIds.length;l++)d()}},t}())||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/UserGatherLevelData.ts",["cc","./ConvertJsonObject2.ts"],(function(t){"use strict";var e,r,a,s;return{setters:[function(t){e=t.cclegacy,r=t._decorator},function(t){a=t.convertToUnstableNumber,s=t.convertToString}],execute:function(){var n;e._RF.push({},"360220Tdw5C57t6FCaLEMhf","UserGatherLevelData",void 0);var c=r.ccclass;r.property,t("default",c("UserGatherLevelsData")(n=function(){function t(t){this.exp=0,this.level=0,this.type="",this.UpdateData(t)}return t.prototype.UpdateData=function(t){this.exp=a(t.exp),this.level=a(t.level),this.type=s(t.type)},t}())||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/UserModel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,o,n;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,o=e.randomRangeInt,n=e.sys}],execute:function(){i._RF.push({},"e48c9TptIdAr6xS8ya3acrW","UserModel",void 0);e("UserSeason",(function(){this.allowedPlants=void 0,this.season=void 0,this.name=void 0,this.description=void 0,this.startTime=void 0,this.endTime=void 0,this.seasonStartTime=void 0,this.seasonEndTime=void 0,this.eventFunction=void 0,this.timezone=void 0}));var p=e("UserGatherLevel",(function(e,t){this.exp=void 0,this.level=void 0,this.exp=e,this.level=t})),s=(e("UserGatherData",function(){function e(e){this.maxStamina=void 0,this._currentStamina=0,this.CHOPPING_level=void 0,this.FISHING_level=void 0,this.MINING_level=void 0,this.maxStamina=e.maxStamina,this.currentStamina=e.currentStamina;for(var t=0;t<e.levels.length;t++)"CHOPPING"==e.levels[t].type?this.CHOPPING_level=new p(e.levels[t].exp,e.levels[t].level):"FISHING"==e.levels[t].type?this.FISHING_level=new p(e.levels[t].exp,e.levels[t].level):"MINING"==e.levels[t].type&&(this.MINING_level=new p(e.levels[t].exp,e.levels[t].level))}return t(e,[{key:"currentStamina",get:function(){return this._currentStamina},set:function(e){this._currentStamina=e,null!=s.userStanimaInfo&&(s.userStanimaInfo.currentStamina=e)}}]),e}()),e("UserFishing",(function(){this.getMap=void 0,this.getDrop=void 0,this.getBeginPull=void 0})),e("UserModel",function(){function e(){}return e.getUndeadSeasonBg=function(e){var t=this.userLocalData[e.toString()],i=new Date,n=!1;if((null==t||i.getTime()>Date.parse(t.time_renew_bg))&&(n=!0),n){var p=["spring","autumn","summer","winter"];(t={}).time_renew_bg=new Date(i.getTime()+12e4),t.season_bg=p[o(0,p.length)],this.userLocalData[e.toString()]=t,this.SaveUserLocalData()}return t.season_bg},e.LoadUserLocalData=function(){var e=n.localStorage.getItem("userLocalData");"undefined"!==e&&""!=e&&null!=e&&(this.userLocalData=JSON.parse(e))},e.SaveUserLocalData=function(){n.localStorage.setItem("userLocalData",JSON.stringify(this.userLocalData))},e.GetRefresh_Token=function(){var e;return"undefined"!==(e=n.localStorage.getItem("Refresh_Token"))&&""!=e&&null!=e?e:null},e.SetRefresh_Token=function(e){n.localStorage.setItem("Refresh_Token",e)},e.GetToken=function(){var e;return"undefined"!==(e=n.localStorage.getItem("token"))&&""!=e&&null!=e?(this.Token=e,e):null},e.SetToken=function(e){this.Token=e,n.localStorage.setItem("token",e)},e.getCurrentMiniGameId=function(){return e.curWorldMapData.playingMiniGameId},e.getCurrentMapSize=function(){var t=e.curWorldMapData,i=t.config[t.playingRouteIndex].miniGames[t.playingMiniGameIndex];return i.mapSize?i.mapSize:0},t(e,null,[{key:"IsGatherPremium",get:function(){return e._IsGatherPremium},set:function(t){e._IsGatherPremium=t,t?(e._GatherVersion="-v3",e._MiningVersionV3="-v3"):(e._GatherVersion="",e._MiningVersionV3="-v2")}}]),e}()));s.AddressWallet="",s.Token="",s.TypePlantFilter="",s.RarityPlantFilter="",s.IdPlantFilter="",s.NeedWaterFilter=!1,s.NeedPotFilter=!1,s.HasCrowFilter=!1,s.SeasonPlantFilter_Inventory="",s.IdPlantFilter_Inventory="",s.TypePlantFilter_Inventory="",s.RarityPlantFilter_Inventory="",s.corXFilter_ChoseLand="",s.corYFilter_ChoseLand="",s.isLandHasPotFilter_ChoseLand=!1,s.SeasonData=null,s.seasonStartTimeNum=void 0,s.seasonEndTimeNum=void 0,s.serverTime=void 0,s.isShowPopupSeasonFirstTime=!1,s.userGatherData=null,s.userLocalData={musicOn:!0,soundOn:!0,change_log_version:"",undeadCacheData:{}},s.curWorldMapData=void 0,s.userFishing=void 0,s.FishingDropID=void 0,s.fakeChoppingdata=['{"status":0,"data":{"ownerId":"0xc6686f77b1886cb736ba6f9f533398b1ee99788f","hasKey":false,"size":0,"objects":[{"type":"LARGE_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false}],"miniGameId":"54d4b258-9c2e-4bb7-8350-ad68e4e7d28b","freeActions":0,"expData":{"type":"CHOPPING","exp":3,"level":0,"nextLevelExp":200}}}','{"status":0,"data":{"ownerId":"0xc6686f77b1886cb736ba6f9f533398b1ee99788f","hasKey":false,"size":1,"objects":[{"type":"LARGE_TREE","choppingCount":0,"isExploited":false},{"type":"LARGE_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false}],"miniGameId":"bac7f5bd-8878-4858-b147-c430f758b741","freeActions":0,"expData":{"type":"CHOPPING","exp":265,"level":0,"nextLevelExp":200}}}','{"status":0,"data":{"ownerId":"0xc6686f77b1886cb736ba6f9f533398b1ee99788f","hasKey":false,"size":5,"objects":[{"type":"LARGE_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"LARGE_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"LARGE_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false},{"type":"SMALL_TREE","choppingCount":0,"isExploited":false}],"miniGameId":"ad82c87d-83bb-43c4-960b-3fd0a1071e9e","freeActions":0,"expData":{"type":"CHOPPING","exp":265,"level":0,"nextLevelExp":200}}}'],s.fakeChoppingMapIndex=2,s.userStanimaInfo=null,s.LE_num=-1,s.PlantEssence=0,s.UndeadEssence=0,s.UniEssence=0,s._IsGatherPremium=!1,s._GatherVersion="",s._MiningVersionV3="",s.UserSkillTreeData=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/Utility.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigApi.ts","./FarmingServicesApi.ts","./GatheringServicesApi.ts","./ResourcesManager.ts","./UIPopupManager.ts","./UserModel.ts"],(function(e){"use strict";var t,n,r,a,o,i,s,u,c,l,f,E,R,p,M,h,S,v,C,I,d,T;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){a=e.cclegacy,o=e.sys,i=e.game,s=e.view,u=e.resources,c=e.Prefab,l=e.Sprite,f=e.TiledMapAsset,E=e.SpriteFrame,R=e.sp,p=e.tween,M=e.ParticleSystem,h=e.Animation},function(e){S=e.ConfigApi},function(e){v=e.FarmingServicesApi},function(e){C=e.GatheringServicesApi},function(e){I=e.ResourcesManager},function(e){d=e.UIPopupManager},function(e){T=e.UserModel}],execute:function(){var m,A,g,y,N;e({MAP_SIZE:void 0,MaterialRarity:void 0,MaterialType:void 0,SkillBookRarity:void 0,SynthesisItem:void 0}),a._RF.push({},"e73f879pn1EOpwpVVSeMUdM","Utility",void 0),function(e){e[e.SMALL=0]="SMALL",e[e.MEDIUM=1]="MEDIUM",e[e.LARGE=2]="LARGE",e[e.MEDIUM_BUFF=4]="MEDIUM_BUFF",e[e.LARGE_BUFF=5]="LARGE_BUFF"}(m||(m=e("MAP_SIZE",{}))),function(e){e[e.NONE=0]="NONE",e[e.FERTILIZER_S=1]="FERTILIZER_S",e[e.FERTILIZER_M=2]="FERTILIZER_M",e[e.FERTILIZER_L=3]="FERTILIZER_L",e[e.FERTILIZER_XL=4]="FERTILIZER_XL",e[e.POWDER_S=5]="POWDER_S",e[e.POWDER_M=6]="POWDER_M",e[e.POWDER_L=7]="POWDER_L",e[e.CHEST_KEY=8]="CHEST_KEY",e[e.KING_KEY=9]="KING_KEY"}(A||(A=e("SynthesisItem",{}))),function(e){e[e.NONE=-1]="NONE",e[e.COMMON=0]="COMMON",e[e.RARE=1]="RARE",e[e.EPIC=2]="EPIC",e[e.LEGEND=3]="LEGEND",e[e.MYTHIC=4]="MYTHIC"}(g||(g=e("MaterialRarity",{}))),function(e){e[e.NONE=-1]="NONE",e[e.NOVICE=0]="NOVICE",e[e.ADVANCED=1]="ADVANCED",e[e.EXPERT=2]="EXPERT"}(y||(y=e("SkillBookRarity",{}))),function(e){e[e.NONE=-1]="NONE",e[e.LOG=0]="LOG",e[e.BARK=1]="BARK",e[e.CARP=2]="CARP",e[e.GEM=3]="GEM",e[e.MINERAL=4]="MINERAL",e[e.ROCK=5]="ROCK",e[e.ROOT=6]="ROOT",e[e.SEAWEED=7]="SEAWEED",e[e.SHRIMP=8]="SHRIMP",e[e.SKILL_BOOK=9]="SKILL_BOOK",e[e.UNDEAD_EGG=10]="UNDEAD_EGG"}(N||(N=e("MaterialType",{})));e("URL_MATERIALS","materials/"),e("URL_THEME","crafting/"),e("URL_SYNTHESIS","crafting/synthesis_materials/");var O=e("Utility",function(){function e(){}return e.keepUpdateWhenChangeTab=function(){o.isBrowser&&(i.frameRate=59,i.pause=function(){},i.resume=function(){})},e.TweenLE=function(t,n,r){var a=T.LE_num;n&&(t+=a),T.LE_num=t,e.tweenNumber(a,t,1,(function(t){r.string=e.numberWithCommas(t)})).start()},e.RequestLoadFarmsStats=function(t){var n=this;if(-1==T.LE_num){v.RequestFarmsStats((function(r){var a=JSON.parse(r);if(0==a.status){var o=a.data.leWallet;e.TweenLE(o,!1,t),n.updateEssence(a.data.userEssences)}else d.Instance.ShowToast("Error",I.Instance.GetErrorMessage(a.status),0)}),null)}else e.TweenLE(T.LE_num,!1,t)},e.RequestSkillTree=function(e,t){if(T.UserSkillTreeData)e&&e(T.UserSkillTreeData);else{C.SkillTree_GetUserData((function(t){var n=JSON.parse(t);0==n.status?(T.UserSkillTreeData=n.data,e&&e(T.UserSkillTreeData)):d.Instance.ShowToast("Error",I.Instance.GetErrorMessage(n.status),0)}),null,t)}},e.updateEssence=function(e){console.log("updateEssence",e),null!=e&&e.forEach((function(e){1==e.type?T.UndeadEssence=e.amount:2==e.type?T.PlantEssence=e.amount:3==e.type&&(T.UniEssence=e.amount)}))},e.addResizeCallBack=function(t,n){e.isSetCallBack||s.setResizeCallback((function(){null!=e.ResizeCallback&&clearTimeout(e.ResizeCallback),e.ResizeCallback=setTimeout((function(){e.ResizeCbMap.forEach((function(e,t){e()}),e)}),200)})),e.ResizeCbMap.set(t,n)},e.removeResizeCallBack=function(t){e.ResizeCbMap.has(t)&&e.ResizeCbMap.delete(t)},e.PreLoadPopup=function(e){u.preload("ui_prefab/"+e,c)},e.GetLandSize=function(e){return"S"==e?0:"M"==e?1:"L"==e?2:"XL"==e?3:4},e.activeButton=function(e,t){var n=e.getComponent(l);n&&(n.grayscale=!t),e.interactable=t},e.RarityToText=function(t){return t<e.rarityText.length?e.rarityText[t]:"Unknown"},e.SunflowerSvNameToResourceName=function(e){var t=e.toLocaleLowerCase().split("_");return"autum"==t[0]&&(t[0]="autumn"),t[1]+"_"+t[0]},e.getStaticTileMap=function(e,t){u.load(e,f,(function(e,n){if(e)return console.warn(e),void(t&&"function"==typeof t&&t(e));t&&"function"==typeof t&&t(null,n)}))},e.getStaticSpriteFrame=function(e,t){u.load(e,E,(function(e,n){if(e)return console.warn(e),void(t&&"function"==typeof t&&t(e));t&&"function"==typeof t&&t(null,n)}))},e.getStaticSkeletonData=function(e,t){u.load(e,R.SkeletonData,(function(e,n){if(e)return console.warn(e),void(t&&"function"==typeof t&&t(e));t&&"function"==typeof t&&t(null,n)}))},e.shuffle=function(e){if(!Array.isArray(e))return[];for(var t=e.length,n=-1,r=-1;0!==t;)r=Math.floor(Math.random()*t),n=e[t-=1],e[t]=e[r],e[r]=n;return e},e.tweenNumber=function(e,t,n,r,a){void 0===a&&(a=0);var o=new L(e),i=p(o).delay(a).to(n,{n:t},{progress:function(e,t,n,a){var o=Math.floor(e+(t-e)*a);return r(o),o}}).call((function(){r(t)}));return i.start(),i},e.tweenSpriteColor=function(e,t,n){var r={r:e.r,g:e.g,b:e.b,a:e.a};return p(t).to(n,{color:r})},e.UpperCaseFirstCharOfWord=function(e){return e.toLowerCase().replace(/(^\w{1})|(\s{1}\w{1})/g,(function(e){return e.toUpperCase()}))},e.PlayParticle=function(e){var t=this;e.active=!0;var n=e.getComponent(M);null!=n&&(n.isPlaying&&n.stop(),n.play()),e.children.length>0&&e.children.forEach((function(e){return t.PlayParticle(e)}))},e.StopParticle=function(e){var t=e.getComponent(M);null!=t&&t.isPlaying&&t.stop();for(var n=e.getComponentsInChildren(M),r=0;r<n.length;r++)n[r].isPlaying&&n[r].stop();e.active=!1},e.PlayAnimation=function(e){e.active=!0,e.getComponent(h).play()},e.AsyncDelay=function(){var e=n(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.numberWithCommas=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.ConvertSecondsToTime=function(e,t){if(void 0===t&&(t=!1),e<=0)return"00:00";var n="",r=Math.floor(e/3600);e-=3600*r;var a=Math.floor(e/60);return e-=60*a,t&&r>24&&(n=Math.floor(r/24)+"D ",r%=24),n+=r>=10?r+":":"0"+r+":",n+=a>=10?a:"0"+(a>1?a:e>0?1:0)},e.ConvertSecondsToTime_v1=function(e){if(e<=0)return"00H : 00M";var t="",n=Math.floor(e/3600);e-=3600*n;var r=Math.floor(e/60);return e-=60*r,t+=n+"H : ",t+=(r>1?r:e>0?1:0)+"M"},e.ConvertSecondsToTimeSecond=function(e){var t="",n=Math.floor(e/2592e3);e-=2592e3*n;var r=Math.floor(e/86400);e-=86400*r;var a=Math.floor(e/3600);e-=3600*a;var o=Math.floor(e/60);return n>0&&(t+=1==n?"a month,":n+" months,"),n<=0&&r>0&&(t+=1==r?"a day,":r+" days,"),a>=10?t+=a+":":a>0&&(t+="0"+a+":"),t+=o>=10?o+":":"0"+o+":",t+=(e-=60*o)>=10?e:"0"+e},e.SecondsToTime_ver1=function(e){var t="",n=Math.floor(e/86400);e-=86400*n;var r=Math.floor(e/3600);e-=3600*r;var a=Math.floor(e/60);return e-=60*a,n>0&&(t+=n+"d:"),t+=r>=10?r+"h:":"0"+r+"h:",t+=a>=10?a+"m":"0"+a+"m"},e.ConvertSecondsToTimeShort=function(e){var t="",n=Math.floor(e/86400);e-=86400*n;var r=Math.floor(e/3600);e-=3600*r;var a=Math.floor(e/60);return e-=60*a,n>0&&(t+=n+"d:"),r>=10?t+=r+"h:":r>0&&(t+="0"+r+"h:"),t+=a>=10?a+"m":"0"+a+"m"},e.GetTimeNow=function(){return T.serverTime},e.GetSeasonByTypePlant=function(e){return"electro"==e||"water"==e||"ice"==e?0:"fire"==e||"light"==e||"parasite"==e?1:"dark"==e||"metal"==e||"wind"==e?2:0},e.ConvertSecondsToTimeSecondSeason=function(e){var t="",n=Math.floor(e/86400);e-=86400*n;var r=Math.floor(e/3600);e-=3600*r;var a=Math.floor(e/60);return e-=60*a,n>=0&&(t+=n+"D : "),r>=0&&(t+=r+"H : "),a>=0&&(t+=a+"M"),t},e.CheckUpgradeVersion=function(e){var t=e.split("."),n=S.VERSION.split(".");return!(parseInt(n[0])>parseInt(t[0]))&&(parseInt(n[0])<parseInt(t[0])||!(parseInt(n[1])>parseInt(t[1]))&&(parseInt(n[1])<parseInt(t[1])||!(parseInt(n[2])>parseInt(t[2]))&&parseInt(n[2])<parseInt(t[2])))},e.setIntervalImmediately=function(e,t){e&&e();for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return setInterval(e,t,r)},e.getRarityWithName=function(e){var t=g.NONE;switch(e){case"COMMON":t=g.COMMON;break;case"RARE":t=g.RARE;break;case"EPIC":t=g.EPIC;break;case"LEGENDARY":t=g.LEGEND;break;case"MYTHIC":t=g.MYTHIC}return t},e.getTypeWithName=function(e){var t=N.NONE;switch(e){case"BARK":t=N.BARK;break;case"CARP":t=N.CARP;break;case"GEM":t=N.GEM;break;case"LOG":t=N.LOG;break;case"MINERAL":t=N.MINERAL;break;case"ROCK":t=N.ROCK;break;case"ROOT":t=N.ROOT;break;case"SEAWEED":t=N.SEAWEED;break;case"SHRIMP":t=N.SHRIMP;break;case"UNDEAD_EGG":t=N.UNDEAD_EGG}return t},e.getNameRarity=function(e){switch(e){case g.RARE:return"RARE";case g.EPIC:return"EPIC";case g.LEGEND:return"LEGENDARY";case g.MYTHIC:return"RARE"}return"COMMON"},e.getNameType=function(e){switch(e){case N.BARK:return"BARK";case N.CARP:return"CARP";case N.GEM:return"GEM";case N.LOG:return"LOG";case N.MINERAL:return"MINERAL";case N.ROCK:return"ROCK";case N.ROOT:return"ROOT";case N.SEAWEED:return"SEAWEED";case N.SHRIMP:return"SHRIMP";case N.UNDEAD_EGG:return"UNDEAD_EGG"}return"NONE"},e.getNameWithType=function(e,t){if("LEGENDARY"==t||"MYTHIC"==t)return e;switch(e){case"WOOD":return"LOG";case"FRUIT":return"ROOT";case"INSECT":return"BARK";case"GEM":return"ROCK";case"FISH":return"CARP";case"CRUSTACEAN":return"SHRIMP";case"FAUNA":return"SEAWEED"}return e},e}());O.ResizeCallback=0,O.ResizeCbMap=new Map,O.isSetCallBack=!1,O.rarityText=["Common","Rare","Epic","Legendary","Mythic"];var L=e("NumberToTween",(function(e){this.n=void 0,this.n=e})),D=(e("ProtectedInt",function(){function e(e){this.str=void 0,this.value=e}return t(e,[{key:"value",get:function(){return parseInt(P.decrypt(this.str))},set:function(e){this.str=D.encrypt(e.toString())}}]),e}()),e("ProtectedFloat",function(){function e(e){this.str=void 0,this.value=e}return t(e,[{key:"value",get:function(){return parseFloat(P.decrypt(this.str))},set:function(e){this.str=D.encrypt(e.toString())}}]),e}()),e("ProtectedString",function(){function e(e){this.str=void 0,this.value=e}return t(e,[{key:"value",get:function(){return P.decrypt(this.str)},set:function(e){this.str=D.encrypt(e)}}]),e}()),e("GuidEncrypt",function(){function e(){}return e.encrypt=function(t){for(var n=[],r=t.split("-"),a=r.length,o=0;o<a;o++)n.push(e.handleString(r[o]));return n.join("-")},e.handleString=function(e){for(var t=e.length,n="",r=0;r<e.length;r++){var a=e.charCodeAt(r),o=a+t;a>57?(o=a+t%26)>122&&(o-=26):(o=a+t%10)>57&&(o-=10),n+=String.fromCharCode(o)}return n},e}())),P=e("GuidDecrypt",function(){function e(){}return e.decrypt=function(t){for(var n=[],r=t.split("-"),a=r.length,o=0;o<a;o++)n.push(e.handleString(r[o]));return n.join("-")},e.handleString=function(e){for(var t=e.length,n="",r=0;r<e.length;r++){var a=e.charCodeAt(r),o=0;a>57?(o=a-t%26)<97&&(o+=26):(o=a-t%10)<48&&(o+=10),n+=String.fromCharCode(o)}return n},e}());a._RF.pop()}}}));

System.register("chunks:///_virtual/VacuumBlast.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./PVE_Helper.ts","./Enums.ts","./AttackPassiveWithCountdown.ts"],(function(t){"use strict";var a,e,s,i,n,o,c;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator},function(t){i=t.PVEGameplayControl},function(t){n=t.PVEHelper},function(t){o=t.AttackType},function(t){c=t.AttackPassiveWithCountdown}],execute:function(){var l;e._RF.push({},"6a01atJ/y5BZ4TH4Ad1sTtw","VacuumBlast",void 0);var u=s.ccclass;s.property,t("VacuumBlast",u("VacuumBlast")(l=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.addAttackData=function(t,a){t==o.NormalAttack&&(i.Instance.CurrentTime<this.NextTimeRandom||0!=n.RandomActive(this.skillData.PercentActive)&&(this.NextTimeRandom=i.Instance.CurrentTime+this.skillData.Cooldown,this.skillData.EffectData[0].attackPos=this.root.getAttackPos().getWorldPosition().clone(),this.skillData.EffectData[0].time=.4,a.AddEffects(this.skillData.EffectData),a.AddDamages(this.skillData.damageData),this.activeMuzzle()))},e}(c))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/WaterTranquility.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PVE_GameplayControl.ts","./InGameEvent.ts","./SkillBase.ts"],(function(t){"use strict";var e,a,o,i,n,r,s,l,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,s=t.Node},function(t){l=t.PVEGameplayControl},function(t){c=t.InGameEventID},function(t){u=t.SkillBase}],execute:function(){var h,p,y,f,z,m,d;n._RF.push({},"ee42ed6OY5HuK8eIh5EVbgE","WaterTranquility",void 0);var k=r.ccclass,g=r.property;t("WaterTranquility",(h=k("WaterTranquility"),p=g(s),y=g(s),h((m=e((z=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).delayTimeAttack=0,o(e,"muzzletFront",m,i(e)),o(e,"muzzletBack",d,i(e)),e}a(e,t);var n=e.prototype;return n.Init=function(e,a){t.prototype.Init.call(this,e,a),this.root.root.event.on(c.OnDestroy,this.onPlantDestroy,this),this.muzzletBack.parent=l.Instance.getEffParentBack(),this.muzzletBack.setWorldPosition(this.root.getAttackPos().worldPosition),this.muzzletBack.active=!0,this.muzzletFront.parent=l.Instance.getEffParentFront(),this.muzzletFront.setWorldPosition(this.root.getAttackPos().worldPosition),this.muzzletFront.active=!0},n.update=function(t){this.delayTimeAttack>0?this.delayTimeAttack-=t:this.root.targets.length<=0||(this.delayTimeAttack=this.skillData.Cooldown,this.heal())},n.heal=function(){for(var t=this.root.targets,e=0;e<t.length;e++){var a=t[e].root,o=this.skillData.BaseHpHeal;o+=(a.data.statsData.getMaxHp()-a.data.statsData.HP)*this.skillData.PercentHpLossHeal/100,a.applyRegenHp(o),a.targetComponent.HealEffects(this.skillData.EffectRemove)}},n.onPlantDestroy=function(){this.root.root.event.off(c.OnDestroy,this.onPlantDestroy,this),this.muzzletBack.destroy(),this.muzzletFront.destroy()},e}(u)).prototype,"muzzletFront",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=e(z.prototype,"muzzletBack",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=z))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/WaveControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WaveData.ts","./PVE_Constant.ts","./PVE_GameplayControl.ts","./PVE_Helper.ts","./PVE_Map_Controller.ts","./PVE_ResourceManager.ts","./GameplayConfig.ts","./Enums.ts","./UndeadBase.ts"],(function(e){"use strict";var n,t,a,r,o,i,c,s,u,l,p,f,d,v,h,m,g,w,b,C,y;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,u=e.Label,l=e.instantiate,p=e.randomRangeInt,f=e.Component},function(e){d=e.WaveData},function(e){v=e.PVE_Constant},function(e){h=e.PVEGameplayControl},function(e){m=e.PVEHelper},function(e){g=e.PVEMapController},function(e){w=e.PVEResourceManager},function(e){b=e.GameplayConfig},function(e){C=e.GameplayTeam},function(e){y=e.UndeadBase}],execute:function(){var E,W,D,P,x,S,G;c._RF.push({},"f475cVLQnNPqKe5Fxbp02LS","WaveControl",void 0);var L=s.ccclass,k=s.property;e("WaveControl",(E=L("WaveControl"),W=k(g),D=k(u),E((S=n((x=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return n=e.call.apply(e,[this].concat(o))||this,a(n,"mapController",S,r(n)),a(n,"waveLabel",G,r(n)),n}t(n,e);var c=n.prototype;return c.checkWave=function(e){return e<d.length},c.StartWave=function(){var e=o(i().mark((function e(n){var t,a,r,o=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.IS_CHEAT){e.next=3;break}return this.StartWaveV2(d[n%d.length],n),e.abrupt("return");case 3:t=b.waveData,a=i().mark((function e(){var n,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.waves[r],e.next=3,m.WaitForSec(n.startDelay);case 3:a=i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.enemies[c],w.Instance.GetUndeadPrefab(a.id,(function(e){o.StartWaveCb(e,a,t,n)}));case 2:case"end":return e.stop()}}),e)})),c=0;case 5:if(!(c<n.enemies.length)){e.next=10;break}return e.delegateYield(a(),"t0",7);case 7:c++,e.next=5;break;case 10:case"end":return e.stop()}}),e)})),r=0;case 6:if(!(r<t.waves.length)){e.next=11;break}return e.delegateYield(a(),"t0",8);case 8:r++,e.next=6;break;case 11:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),c.StartWaveWithWaveData=function(){var e=o(i().mark((function e(n){var t,a,r,o,c=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.wavePool.enemy,a=n.availableEnemy,r=t.upperLane,o=t.lowerLane,r.forEach((function(e){var n=a.indexOf(e.code);n>=0&&(a.splice(n,1),c.createEnemy(e.code,e.position,1))})),o.forEach((function(e){var n=a.indexOf(e.code);n>=0&&(a.splice(n,1),c.createEnemy(e.code,e.position,0))}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),c.isNum=function(e){},c.createEnemy=function(e,n,t){var a=this,r=e,o="+"==e[1]?e.substring(0,2):e.substring(0,1),i="+"==e[1]?parseInt(e.substring(2)):parseInt(e.substring(1));console.log("code",e,o,i),w.Instance.GetUndeadPrefabWithSpawnCode(o,(function(e){null==e&&console.error("Error spawm code",o),b.DebugWarning&&console.warn("TODO: init pool");var c=l(e);c.parent=a.node,c.active=!0;var s=c.getComponent(y),u=b.GetUndeadDataWithSpawnCode(o);u.upgradeLevel(i+b.GameLevel),s.initConfig(C.EnemyTeam,u),s.DisableAttack(),s.DisableTarget(),s.SpawnCode=r;var p=a.mapController.GetRoadPosition(t);p[0].x+=200*(n+1),s.DoPath(p),h.Instance.dirtyObject=!0}))},c.StartWaveCb=function(){var e=o(i().mark((function e(n,t,a,r){var o,c,s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=l(n)).parent=this.node,o.active=!0,c=o.getComponent(y),s=b.GetUndeadData(t.id),v.IS_CHEAT&&s.cheatHp(),u=this.mapController.GetRoadPosition(t.path),s.upgradeLevel(20),c.initConfig(C.EnemyTeam,s),c.DoPath(u),e.next=12,m.WaitForSec(r.spawnDelay);case 12:case"end":return e.stop()}}),e,this)})));return function(n,t,a,r){return e.apply(this,arguments)}}(),c.StartWaveV2=function(e,n){var t=this;this.waveLabel.string="WAVE "+(n+1);var a=e.pool;a[p(0,a.length)].lands.forEach((function(e){e.enemies.forEach((function(n,a,r){if(""!=n.code){var o=a;w.Instance.GetUndeadPrefabWithSpawnCode(n.code,(function(a){null==a&&console.error("Error spawm code",n.code),b.DebugWarning&&console.warn("TODO: init pool");var r=l(a);r.parent=t.node,r.active=!0;var i=r.getComponent(y),c=b.GetUndeadDataWithSpawnCode(n.code);c.upgradeLevel(parseInt(n.waveAddLevel)+b.GameLevel),i.initConfig(C.EnemyTeam,c),i.DisableAttack(),i.DisableTarget(),i.SpawnCode=n.code+""+n.waveAddLevel;var s=t.mapController.GetRoadPosition(e.landIndex);s[0].x+=200*(o+1),i.DoPath(s),h.Instance.dirtyObject=!0}))}}))}))},c.spawnEnemies=function(){var e=o(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),n}(f)).prototype,"mapController",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(x.prototype,"waveLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=x))||P));c._RF.pop()}}}));

System.register("chunks:///_virtual/WaveData.ts",["cc"],(function(e){"use strict";var d;return{setters:[function(e){d=e.cclegacy}],execute:function(){d._RF.push({},"14530OoUZxMq7/qDHP4w87m","WaveData",void 0);e("WaveData",[{wave:1,pool:[{poolName:"A",lands:[{landIndex:1,enemies:[{code:"B",waveAddLevel:"0"},{code:"B",waveAddLevel:"0"},{code:""},{code:""},{code:""},{code:""},{code:"B",waveAddLevel:"1"},{code:"C",waveAddLevel:"0"},{code:""},{code:""},{code:""},{code:"A",waveAddLevel:"1"},{code:""},{code:""},{code:""},{code:""},{code:""}]},{landIndex:0,enemies:[{code:""},{code:"B",waveAddLevel:"0"},{code:"B",waveAddLevel:"0"},{code:""},{code:""},{code:""},{code:"B",waveAddLevel:"1"},{code:"C",waveAddLevel:"0"},{code:""},{code:""},{code:""},{code:"A",waveAddLevel:"1"},{code:""},{code:""},{code:""},{code:""},{code:""}]}]},{poolName:"B",lands:[{landIndex:1,enemies:[{code:"B",waveAddLevel:"0"},{code:""},{code:"B",waveAddLevel:"1"},{code:""},{code:""},{code:"C",waveAddLevel:"1"},{code:""},{code:"C",waveAddLevel:"1"},{code:""},{code:""},{code:""},{code:""},{code:"A",waveAddLevel:"2"},{code:""},{code:""},{code:""},{code:""}]},{landIndex:0,enemies:[{code:"B",waveAddLevel:"0"},{code:""},{code:"B",waveAddLevel:"1"},{code:""},{code:""},{code:"C",waveAddLevel:"1"},{code:""},{code:"C",waveAddLevel:"1"},{code:""},{code:""},{code:""},{code:""},{code:"A",waveAddLevel:"2"},{code:""},{code:""},{code:""},{code:""}]}]},{poolName:"C",lands:[{landIndex:1,enemies:[{code:""},{code:"B",waveAddLevel:"0"},{code:""},{code:"B",waveAddLevel:"1"},{code:""},{code:""},{code:"C",waveAddLevel:"1"},{code:"B",waveAddLevel:"0"},{code:""},{code:""},{code:"C",waveAddLevel:"0"},{code:"B",waveAddLevel:"1"},{code:""},{code:""},{code:""},{code:""},{code:""}]},{landIndex:0,enemies:[{code:"B",waveAddLevel:"0"},{code:""},{code:"B",waveAddLevel:"1"},{code:""},{code:""},{code:""},{code:"C",waveAddLevel:"1"},{code:"B",waveAddLevel:"0"},{code:""},{code:""},{code:"C",waveAddLevel:"1"},{code:"B",waveAddLevel:"1"},{code:""},{code:""},{code:""},{code:""},{code:""}]}]}]},{wave:2,pool:[{poolName:"A",lands:[{landIndex:1,enemies:[{code:""},{code:"B",waveAddLevel:"2"},{code:"B",waveAddLevel:"2"},{code:"A",waveAddLevel:"1"},{code:""},{code:""},{code:"B",waveAddLevel:"2"},{code:"B",waveAddLevel:"3"},{code:""},{code:""},{code:"A",waveAddLevel:"3"},{code:""},{code:""},{code:"B",waveAddLevel:"2"},{code:""},{code:""},{code:""}]},{landIndex:0,enemies:[{code:"B",waveAddLevel:"1"},{code:"B",waveAddLevel:"1"},{code:"A",waveAddLevel:"2"},{code:""},{code:""},{code:""},{code:""},{code:"B",waveAddLevel:"3"},{code:"B",waveAddLevel:"2"},{code:""},{code:""},{code:"A",waveAddLevel:"2"},{code:""},{code:"B",waveAddLevel:"1"},{code:""},{code:""},{code:""}]}]}]},{wave:3,pool:[{poolName:"A",lands:[{landIndex:1,enemies:[{code:"B",waveAddLevel:"2"},{code:"B",waveAddLevel:"3"},{code:"B",waveAddLevel:"4"},{code:""},{code:""},{code:"E",waveAddLevel:"1"},{code:"E",waveAddLevel:"3"},{code:"E",waveAddLevel:"3"},{code:""},{code:""},{code:"B",waveAddLevel:"3"},{code:"E",waveAddLevel:"1"},{code:""},{code:""},{code:""},{code:""},{code:"E",waveAddLevel:"3"}]},{landIndex:0,enemies:[{code:"E",waveAddLevel:"2"},{code:"E",waveAddLevel:"2"},{code:"E",waveAddLevel:"3"},{code:""},{code:""},{code:""},{code:"B",waveAddLevel:"2"},{code:"B",waveAddLevel:"2"},{code:"B",waveAddLevel:"2"},{code:""},{code:"B",waveAddLevel:"3"},{code:"B",waveAddLevel:"3"},{code:""},{code:""},{code:""},{code:""},{code:"E",waveAddLevel:"5"}]}]}]},{wave:4,pool:[{poolName:"A",lands:[{landIndex:1,enemies:[{code:"C",waveAddLevel:"2"},{code:"C",waveAddLevel:"3"},{code:"E",waveAddLevel:"3"},{code:"E",waveAddLevel:"4"},{code:""},{code:""},{code:""},{code:"E",waveAddLevel:"3"},{code:"E",waveAddLevel:"4"},{code:"C",waveAddLevel:"2"},{code:""},{code:""},{code:""},{code:""},{code:"E",waveAddLevel:"4"},{code:"C",waveAddLevel:"3"},{code:""}]},{landIndex:0,enemies:[{code:""},{code:"C",waveAddLevel:"4"},{code:"C",waveAddLevel:"2"},{code:"E",waveAddLevel:"2"},{code:"E",waveAddLevel:"4"},{code:""},{code:""},{code:""},{code:"C",waveAddLevel:"4"},{code:"C",waveAddLevel:"2"},{code:"C",waveAddLevel:"4"},{code:""},{code:""},{code:"E",waveAddLevel:"5"},{code:""},{code:"C",waveAddLevel:"2"},{code:""}]}]}]},{wave:5,pool:[{poolName:"A",lands:[{landIndex:1,enemies:[{code:"A",waveAddLevel:"7"},{code:"F",waveAddLevel:"4"},{code:""},{code:"F",waveAddLevel:"6"},{code:""},{code:""},{code:"E",waveAddLevel:"5"},{code:"E",waveAddLevel:"6"},{code:"E",waveAddLevel:"6"},{code:"C",waveAddLevel:"5"},{code:""},{code:""},{code:"F",waveAddLevel:"6"},{code:""},{code:"E",waveAddLevel:"7"},{code:"E",waveAddLevel:"5"},{code:""}]},{landIndex:0,enemies:[{code:"F",waveAddLevel:"6"},{code:"A",waveAddLevel:"5"},{code:"F",waveAddLevel:"4"},{code:""},{code:""},{code:""},{code:"E",waveAddLevel:"5"},{code:"C",waveAddLevel:"4"},{code:"C",waveAddLevel:"6"},{code:"E",waveAddLevel:"7"},{code:""},{code:""},{code:"F",waveAddLevel:"8"},{code:""},{code:"E",waveAddLevel:"7"},{code:"E",waveAddLevel:"6"},{code:""}]}]}]},{wave:6,pool:[{poolName:"A",lands:[{landIndex:1,enemies:[{code:"C",waveAddLevel:"6"},{code:"B",waveAddLevel:"6"},{code:"C",waveAddLevel:"8"},{code:""},{code:""},{code:""},{code:"A+",waveAddLevel:"7"},{code:""},{code:""},{code:"C",waveAddLevel:"5"},{code:"C",waveAddLevel:"8"},{code:"B",waveAddLevel:"7"},{code:""},{code:"C",waveAddLevel:"6"},{code:"B",waveAddLevel:"8"},{code:"C",waveAddLevel:"8"},{code:""}]},{landIndex:0,enemies:[{code:"B",waveAddLevel:"7"},{code:"B",waveAddLevel:"8"},{code:"B",waveAddLevel:"5"},{code:""},{code:""},{code:""},{code:"A+",waveAddLevel:"8"},{code:""},{code:""},{code:"B",waveAddLevel:"7"},{code:"C",waveAddLevel:"8"},{code:"B",waveAddLevel:"7"},{code:""},{code:""},{code:"B",waveAddLevel:"5"},{code:"C",waveAddLevel:"5"},{code:"B",waveAddLevel:"9"}]}]}]},{wave:7,pool:[{poolName:"A",lands:[{landIndex:1,enemies:[{code:""},{code:"A+",waveAddLevel:"8"},{code:""},{code:""},{code:""},{code:"E",waveAddLevel:"5"},{code:"E",waveAddLevel:"8"},{code:"E",waveAddLevel:"9"},{code:"G",waveAddLevel:"6"},{code:"G",waveAddLevel:"7"},{code:"G",waveAddLevel:"9"},{code:""},{code:""},{code:"A+",waveAddLevel:"8"},{code:""},{code:""},{code:""}]},{landIndex:0,enemies:[{code:""},{code:"A+",waveAddLevel:"8"},{code:""},{code:""},{code:""},{code:"G",waveAddLevel:"5"},{code:"G",waveAddLevel:"8"},{code:"G",waveAddLevel:"6"},{code:"E",waveAddLevel:"7"},{code:"E",waveAddLevel:"8"},{code:"E",waveAddLevel:"5"},{code:""},{code:""},{code:"A+",waveAddLevel:"8"},{code:""},{code:""},{code:""}]}]}]},{wave:8,pool:[{poolName:"A",lands:[{landIndex:1,enemies:[{code:"D",waveAddLevel:"9"},{code:"D",waveAddLevel:"7"},{code:"D",waveAddLevel:"8"},{code:""},{code:"C",waveAddLevel:"7"},{code:"C",waveAddLevel:"9"},{code:"C",waveAddLevel:"8"},{code:""},{code:""},{code:"D",waveAddLevel:"6"},{code:"D",waveAddLevel:"7"},{code:"D",waveAddLevel:"9"},{code:""},{code:"D+",waveAddLevel:"8"},{code:""},{code:"D+",waveAddLevel:"7"},{code:""}]},{landIndex:0,enemies:[{code:"D",waveAddLevel:"7"},{code:"D",waveAddLevel:"8"},{code:"D",waveAddLevel:"9"},{code:""},{code:"C",waveAddLevel:"6"},{code:"C",waveAddLevel:"9"},{code:"C",waveAddLevel:"7"},{code:""},{code:"D",waveAddLevel:"8"},{code:"D",waveAddLevel:"6"},{code:"D",waveAddLevel:"9"},{code:""},{code:""},{code:"D+",waveAddLevel:"8"},{code:""},{code:""},{code:"D+",waveAddLevel:"8"}]}]}]},{wave:9,pool:[{poolName:"A",lands:[{landIndex:1,enemies:[{code:"C",waveAddLevel:"10"},{code:"C",waveAddLevel:"10"},{code:"C",waveAddLevel:"10"},{code:"C",waveAddLevel:"10"},{code:""},{code:"E",waveAddLevel:"9"},{code:"E",waveAddLevel:"9"},{code:"E",waveAddLevel:"9"},{code:"G",waveAddLevel:"10"},{code:"G",waveAddLevel:"8"},{code:"G",waveAddLevel:"9"},{code:""},{code:""},{code:"A+",waveAddLevel:"8"},{code:""},{code:"E",waveAddLevel:"8"},{code:"E",waveAddLevel:"8"}]},{landIndex:0,enemies:[{code:"B",waveAddLevel:"9"},{code:"B",waveAddLevel:"9"},{code:"B",waveAddLevel:"9"},{code:"B",waveAddLevel:"9"},{code:""},{code:"A",waveAddLevel:"9"},{code:"A",waveAddLevel:"9"},{code:"A",waveAddLevel:"9"},{code:"F",waveAddLevel:"8"},{code:"F",waveAddLevel:"8"},{code:"F",waveAddLevel:"8"},{code:""},{code:""},{code:"A+",waveAddLevel:"5"},{code:""},{code:"G",waveAddLevel:"8"},{code:"G",waveAddLevel:"8"}]}]}]},{wave:10,pool:[{poolName:"A",lands:[{landIndex:1,enemies:[{code:"A+",waveAddLevel:"10"},{code:"A+",waveAddLevel:"10"},{code:"D",waveAddLevel:"8"},{code:"D",waveAddLevel:"9"},{code:"D",waveAddLevel:"6"},{code:""},{code:"D+",waveAddLevel:"8"},{code:"D+",waveAddLevel:"8"},{code:"G",waveAddLevel:"10"},{code:"G",waveAddLevel:"8"},{code:"G",waveAddLevel:"9"},{code:"E",waveAddLevel:"8"},{code:"E",waveAddLevel:"9"},{code:""},{code:""},{code:"A+",waveAddLevel:"10"},{code:"D+",waveAddLevel:"10"}]},{landIndex:0,enemies:[{code:"A+",waveAddLevel:"10"},{code:"A+",waveAddLevel:"10"},{code:"D",waveAddLevel:"9"},{code:"D",waveAddLevel:"7"},{code:"D",waveAddLevel:"8"},{code:""},{code:"D+",waveAddLevel:"9"},{code:"D+",waveAddLevel:"9"},{code:"E",waveAddLevel:"8"},{code:"E",waveAddLevel:"9"},{code:"E",waveAddLevel:"10"},{code:"G",waveAddLevel:"7"},{code:"G",waveAddLevel:"10"},{code:""},{code:""},{code:"A+",waveAddLevel:"10"},{code:"D+",waveAddLevel:"10"}]}]}]}]);d._RF.pop()}}}));

System.register("chunks:///_virtual/WaveParser.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,r,o,t,a,i,s,l;return{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,s=e.TextAsset,l=e.Component}],execute:function(){var c,u,p,v,f;a._RF.push({},"8daf9pPv4RJHqv2VyRzcYwp","WaveParser",void 0);var d=i.ccclass,h=i.property;e("WaveParser",(c=d("WaveParser"),u=h(s),c((f=n((v=function(e){function n(){for(var n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,o(n,"waveSheetConfig",f,t(n)),n}return r(n,e),n.prototype.start=function(){var e=this.waveSheetConfig.text,n=JSON.parse(e),r=[],o=-1,t={};n.forEach((function(e){if(""!=e.Wave){for(var n=e.Wave,a=e.Land,i=e.Pool,s=[],l=0;l<1e3&&null!=e["enemy_"+l];l++){var c=e["enemy_"+l];if(""==c)s.push({code:""});else{var u=c.substring(0,c.includes("+")?2:1);c=c.replace(u,"");for(var p="",v=0;v<c.length&&"("!==c[v];v++)p+=c[v];s.push({code:u,waveAddLevel:p})}}o!=n&&((t={}).wave=n,t.pool=[],o=n,r.push(t)),s.findIndex((function(e){return e.poolName==i}));var f=t.pool.find((function(e){return e.poolName==i}));null==f?(f={poolName:i,lands:[{landIndex:a,enemies:s}]},t.pool.push(f)):f.lands.push({landIndex:a,enemies:s})}})),console.log(JSON.stringify(r))},n}(l)).prototype,"waveSheetConfig",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=v))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/ZigganAttackComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AttackComponent.ts","./DamageData.ts"],(function(t){"use strict";var n,a,o,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){a=t.cclegacy,o=t._decorator},function(t){e=t.AttackComponent},function(t){i=t.DamageData}],execute:function(){var c;a._RF.push({},"d89657utQlBTIUd0V4Jj3gk","ZigganAttackComponent",void 0);var r=o.ccclass;o.property,t("ZigganAttackComponent",r("ZigganAttackComponent")(c=function(t){function a(){return t.apply(this,arguments)||this}n(a,t);var o=a.prototype;return o.Attack=function(t,n,a){void 0===a&&(a=0);var o=new i;return o.attacker=this.root,this.skills[a].addAttackData(t,o),o},o.beginNormalAttack=function(){this.root.animationComponent.setSkillAttackAnim(this.root.data.statsData.DefaultAttackAnimName)},a}(e))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/ZoomInOut.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var s,e,i,n,o,a,c,h,l,u;return{setters:[function(t){s=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,n=t.systemEvent,o=t.SystemEvent,a=t.Vec2,c=t.Vec3,h=t.Tween,l=t.tween,u=t.Component}],execute:function(){var r;e._RF.push({},"752a8omiypNUpRLLWmxe463","ZoomInOut",void 0);var p=i.ccclass;i.property,t("ZoomInOut",p("ZoomInOut")(r=function(t){function e(){for(var s,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(s=t.call.apply(t,[this].concat(i))||this).scaleMap=void 0,s.isScaling=void 0,s.distanceOrigin=void 0,s.distanceCur=void 0,s.pos1=void 0,s.pos2=void 0,s}s(e,t);var i=e.prototype;return i.start=function(){this.isScaling=!1,this.scaleMap=this.node.scale.x,n.on(o.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},i.onDestroy=function(){n.off(o.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},i.getDistance=function(t,s){var e=new a(t.x-s.x,t.y-s.y);return Math.sqrt(e.x*e.x+e.y*e.y)},i.onTouchStart=function(t){t.getTouches().length>=2&&(this.isScaling=!0,this.pos1=t.getTouches()[0].getLocation(),this.pos2=t.getTouches()[1].getLocation(),this.distanceOrigin=this.getDistance(this.pos1,this.pos2))},i.onTouchMove=function(t){2==t.getTouches().length&&this.isScaling&&(this.pos1=t.getTouches()[0].getLocation(),this.pos2=t.getTouches()[1].getLocation(),this.distanceCur=this.getDistance(this.pos1,this.pos2),this.addScale((this.distanceCur-this.distanceOrigin)/2e5),this.node.scale=new c(this.scaleMap,this.scaleMap,this.scaleMap))},i.onTouchEnd=function(t){2==t.getTouches().length&&(this.isScaling=!1)},i.onTouchCancel=function(t){2==t.getTouches().length&&(this.isScaling=!1)},i.addScale=function(t){this.scaleMap+=t,this.scaleMap>1.4&&(this.scaleMap=1.4)},i.subScale=function(t){this.scaleMap-=t,this.scaleMap<.5&&(this.scaleMap=.5)},i.onMouseWheel=function(t){t._scrollY>0?(this.addScale(.1),h.stopAllByTarget(this.node),l(this.node).to(.2,{scale:new c(this.scaleMap,this.scaleMap,this.scaleMap)},{easing:"linear"}).start()):t._scrollY<0&&(this.subScale(.1),h.stopAllByTarget(this.node),l(this.node).to(.2,{scale:new c(this.scaleMap,this.scaleMap,this.scaleMap)},{easing:"linear"}).start())},e}(u))||r);e._RF.pop()}}}));
